"use strict";(self.webpackChunktryon=self.webpackChunktryon||[]).push([[179],{975:()=>{function Yt(n){return"function"==typeof n}function ym(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Pv=ym(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ih(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class ar{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Yt(i))try{i()}catch(s){e=s instanceof Pv?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{LB(s)}catch(o){e=e??[],o instanceof Pv?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Pv(e)}}add(e){var t;if(e&&e!==this)if(this.closed)LB(e);else{if(e instanceof ar){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ih(t,e)}remove(e){const{_finalizers:t}=this;t&&ih(t,e),e instanceof ar&&e._removeParent(this)}}ar.EMPTY=(()=>{const n=new ar;return n.closed=!0,n})();const NB=ar.EMPTY;function kB(n){return n instanceof ar||n&&"closed"in n&&Yt(n.remove)&&Yt(n.add)&&Yt(n.unsubscribe)}function LB(n){Yt(n)?n():n.unsubscribe()}const cu={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ov={setTimeout(n,e,...t){const{delegate:i}=Ov;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Ov;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function FB(n){Ov.setTimeout(()=>{const{onUnhandledError:e}=cu;if(!e)throw n;e(n)})}function Lx(){}const pne=Fx("C",void 0,void 0);function Fx(n,e,t){return{kind:n,value:e,error:t}}let lu=null;function Nv(n){if(cu.useDeprecatedSynchronousErrorHandling){const e=!lu;if(e&&(lu={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=lu;if(lu=null,t)throw i}}else n()}class Ux extends ar{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,kB(e)&&e.add(this)):this.destination=wne}static create(e,t,i){return new vm(e,t,i)}next(e){this.isStopped?Vx(function gne(n){return Fx("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Vx(function mne(n){return Fx("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Vx(pne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yne=Function.prototype.bind;function Bx(n,e){return yne.call(n,e)}class vne{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){kv(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){kv(i)}else kv(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){kv(t)}}}class vm extends Ux{constructor(e,t,i){let r;if(super(),Yt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&cu.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Bx(e.next,s),error:e.error&&Bx(e.error,s),complete:e.complete&&Bx(e.complete,s)}):r=e}this.destination=new vne(r)}}function kv(n){cu.useDeprecatedSynchronousErrorHandling?function _ne(n){cu.useDeprecatedSynchronousErrorHandling&&lu&&(lu.errorThrown=!0,lu.error=n)}(n):FB(n)}function Vx(n,e){const{onStoppedNotification:t}=cu;t&&Ov.setTimeout(()=>t(n,e))}const wne={closed:!0,next:Lx,error:function bne(n){throw n},complete:Lx},zx="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ua(n){return n}function UB(n){return 0===n.length?Ua:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let yn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function Cne(n){return n&&n instanceof Ux||function Sne(n){return n&&Yt(n.next)&&Yt(n.error)&&Yt(n.complete)}(n)&&kB(n)}(t)?t:new vm(t,i,r);return Nv(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=BB(i))((r,s)=>{const o=new vm({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[zx](){return this}pipe(...t){return UB(t)(this)}toPromise(t){return new(t=BB(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function BB(n){var e;return null!==(e=n??cu.Promise)&&void 0!==e?e:Promise}const xne=ym(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Gt=(()=>{class n extends yn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new VB(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new xne}next(t){Nv(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Nv(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Nv(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?NB:(this.currentObservers=null,s.push(t),new ar(()=>{this.currentObservers=null,ih(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new yn;return t.source=this,t}}return n.create=(e,t)=>new VB(e,t),n})();class VB extends Gt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:NB}}function zB(n){return Yt(n?.lift)}function Hn(n){return e=>{if(zB(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Mn(n,e,t,i,r){return new HB(n,e,t,i,r)}class HB extends Ux{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function zt(n,e){return Hn((t,i)=>{let r=0;t.subscribe(Mn(i,s=>{i.next(n.call(e,s,r++))}))})}function jx(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t}function $x(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}function qc(n){return this instanceof qc?(this.v=n,this):new qc(n)}function $B(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function qx(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Kx=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function WB(n){return Yt(n?.then)}function qB(n){return Yt(n[zx])}function KB(n){return Symbol.asyncIterator&&Yt(n?.[Symbol.asyncIterator])}function XB(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const YB=function Wne(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ZB(n){return Yt(n?.[YB])}function QB(n){return function jB(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function c(h){h.value instanceof qc?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}(i[h](f))}catch(p){d(s[0][3],p)}}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield qc(t.read());if(r)return yield qc(void 0);yield yield qc(i)}}finally{t.releaseLock()}})}function JB(n){return Yt(n?.getReader)}function cr(n){if(n instanceof yn)return n;if(null!=n){if(qB(n))return function qne(n){return new yn(e=>{const t=n[zx]();if(Yt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Kx(n))return function Kne(n){return new yn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(WB(n))return function Xne(n){return new yn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,FB)})}(n);if(KB(n))return e3(n);if(ZB(n))return function Yne(n){return new yn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(JB(n))return function Zne(n){return e3(QB(n))}(n)}throw XB(n)}function e3(n){return new yn(e=>{(function Qne(n,e){var t,i,r,s;return $x(this,void 0,void 0,function*(){try{for(t=$B(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Ba(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Li(n,e,t=1/0){return Yt(e)?Li((i,r)=>zt((s,o)=>e(i,s,r,o))(cr(n(i,r))),t):("number"==typeof e&&(t=e),Hn((i,r)=>function Jne(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<i?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let m=!1;cr(t(g,u++)).subscribe(Mn(e,_=>{r?.(_),s?f(_):e.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<i;){const _=c.shift();o?Ba(e,o,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return n.subscribe(Mn(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function rh(n=1/0){return Li(Ua,n)}const Zo=new yn(n=>n.complete());function t3(n){return n&&Yt(n.schedule)}function Xx(n){return n[n.length-1]}function n3(n){return Yt(Xx(n))?n.pop():void 0}function bm(n){return t3(Xx(n))?n.pop():void 0}function Lv(n,e=0){return Hn((t,i)=>{t.subscribe(Mn(i,r=>Ba(i,n,()=>i.next(r),e),()=>Ba(i,n,()=>i.complete(),e),r=>Ba(i,n,()=>i.error(r),e)))})}function Fv(n,e=0){return Hn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function i3(n,e){if(!n)throw new Error("Iterable cannot be null");return new yn(t=>{Ba(t,e,()=>{const i=n[Symbol.asyncIterator]();Ba(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Ci(n,e){return e?function aie(n,e){if(null!=n){if(qB(n))return function nie(n,e){return cr(n).pipe(Fv(e),Lv(e))}(n,e);if(Kx(n))return function rie(n,e){return new yn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(WB(n))return function iie(n,e){return cr(n).pipe(Fv(e),Lv(e))}(n,e);if(KB(n))return i3(n,e);if(ZB(n))return function sie(n,e){return new yn(t=>{let i;return Ba(t,e,()=>{i=n[YB](),Ba(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Yt(i?.return)&&i.return()})}(n,e);if(JB(n))return function oie(n,e){return i3(QB(n),e)}(n,e)}throw XB(n)}(n,e):cr(n)}function r3(...n){const e=bm(n),t=function tie(n,e){return"number"==typeof Xx(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?cr(i[0]):rh(t)(Ci(i,e)):Zo}class us extends Gt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Ye(...n){return Ci(n,bm(n))}function Yx(n={}){const{connector:e=(()=>new Gt),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return Hn((g,m)=>{l++,!d&&!u&&h();const _=c=c??e();m.add(()=>{l--,0===l&&!d&&!u&&(a=Zx(p,r))}),_.subscribe(m),!o&&l>0&&(o=new vm({next:y=>_.next(y),error:y=>{d=!0,h(),a=Zx(f,t,y),_.error(y)},complete:()=>{u=!0,h(),a=Zx(f,i),_.complete()}}),cr(g).subscribe(o))})(s)}}function Zx(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new vm({next:()=>{i.unsubscribe(),n()}});return cr(e(...t)).subscribe(i)}function ds(n,e){return Hn((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(Mn(i,c=>{r?.unsubscribe();let l=0;const u=s++;cr(n(c,u)).subscribe(r=Mn(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function s3(n,e=Ua){return n=n??cie,Hn((t,i)=>{let r,s=!0;t.subscribe(Mn(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function cie(n,e){return n===e}function vn(n){for(let e in n)if(n[e]===vn)return e;throw Error("Could not find renamed property on target object.")}function Uv(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Fi(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Fi).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Qx(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const lie=vn({__forward_ref__:vn});function bn(n){return n.__forward_ref__=bn,n.toString=function(){return Fi(this())},n}function vt(n){return Jx(n)?n():n}function Jx(n){return"function"==typeof n&&n.hasOwnProperty(lie)&&n.__forward_ref__===bn}function eT(n){return n&&!!n.\u0275providers}const o3="https://g.co/ng/security#xss";class se extends Error{constructor(e,t){super(function Bv(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function xt(n){return"string"==typeof n?n:null==n?"":String(n)}function tT(n,e){throw new se(-201,!1)}function eo(n,e){null==n&&function _t(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function me(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Vv(n){return a3(n,Hv)||a3(n,c3)}function a3(n,e){return n.hasOwnProperty(e)?n[e]:null}function zv(n){return n&&(n.hasOwnProperty(nT)||n.hasOwnProperty(_ie))?n[nT]:null}const Hv=vn({\u0275prov:vn}),nT=vn({\u0275inj:vn}),c3=vn({ngInjectableDef:vn}),_ie=vn({ngInjectorDef:vn});var jt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(jt||{});let iT;function hs(n){const e=iT;return iT=n,e}function u3(n,e,t){const i=Vv(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&jt.Optional?null:void 0!==e?e:void tT(Fi(n))}const Dn=globalThis,wm={},cT="__NG_DI_FLAG__",Gv="ngTempTokenPath",bie=/\n/gm,h3="__source";let sh;function Kc(n){const e=sh;return sh=n,e}function Sie(n,e=jt.Default){if(void 0===sh)throw new se(-203,!1);return null===sh?u3(n,void 0,e):sh.get(n,e&jt.Optional?null:void 0,e)}function z(n,e=jt.Default){return(function l3(){return iT}()||Sie)(vt(n),e)}function Ie(n,e=jt.Default){return z(n,jv(e))}function jv(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function lT(n){const e=[];for(let t=0;t<n.length;t++){const i=vt(n[t]);if(Array.isArray(i)){if(0===i.length)throw new se(900,!1);let r,s=jt.Default;for(let o=0;o<i.length;o++){const a=i[o],c=Cie(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(z(r,s))}else e.push(z(i))}return e}function Em(n,e){return n[cT]=e,n.prototype[cT]=e,n}function Cie(n){return n[cT]}function Va(n){return{toString:n}.toString()}var $v=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}($v||{}),to=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(to||{});const Qo={},on=[],Wv=vn({\u0275cmp:vn}),uT=vn({\u0275dir:vn}),dT=vn({\u0275pipe:vn}),p3=vn({\u0275mod:vn}),za=vn({\u0275fac:vn}),Sm=vn({__NG_ELEMENT_ID__:vn}),m3=vn({__NG_ENV_ID__:vn});function g3(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function hT(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];y3(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function _3(n){return 3===n||4===n||6===n}function y3(n){return 64===n.charCodeAt(0)}function Cm(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||v3(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function v3(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const b3="ng-template";function Mie(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==g3(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function w3(n){return 4===n.type&&n.value!==b3}function Aie(n,e,t){return e===(4!==n.type||t?n.value:b3)}function Iie(n,e,t){let i=4;const r=n.attrs||[],s=function Pie(n){for(let e=0;e<n.length;e++)if(_3(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!Aie(n,c,t)||""===c&&1===e.length){if(xo(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!Mie(n.attrs,l,t)){if(xo(i))return!1;o=!0}continue}const d=Die(8&i?"class":c,r,w3(n),t);if(-1===d){if(xo(i))return!1;o=!0;continue}if(""!==l){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==g3(f,l,0)||2&i&&l!==h){if(xo(i))return!1;o=!0}}}}else{if(!o&&!xo(i)&&!xo(c))return!1;if(o&&xo(c))continue;o=!1,i=c|1&i}}return xo(i)||o}function xo(n){return 0==(1&n)}function Die(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Oie(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function E3(n,e,t=!1){for(let i=0;i<e.length;i++)if(Iie(n,e[i],t))return!0;return!1}function Nie(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function S3(n,e){return n?":not("+e.trim()+")":e}function kie(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!xo(o)&&(e+=S3(s,r),r=""),i=o,s=s||!xo(i);t++}return""!==r&&(e+=S3(s,r)),e}function cn(n){return Va(()=>{const e=x3(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===$v.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||to.Emulated,styles:n.styles||on,_:null,schemas:n.schemas||null,tView:null,id:""};T3(t);const i=n.dependencies;return t.directiveDefs=qv(i,!1),t.pipeDefs=qv(i,!0),t.id=function Gie(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Bie(n){return Qt(n)||lr(n)}function Vie(n){return null!==n}function Rt(n){return Va(()=>({type:n.type,bootstrap:n.bootstrap||on,declarations:n.declarations||on,imports:n.imports||on,exports:n.exports||on,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function C3(n,e){if(null==n)return Qo;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function dt(n){return Va(()=>{const e=x3(n);return T3(e),e})}function Wr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Qt(n){return n[Wv]||null}function lr(n){return n[uT]||null}function qr(n){return n[dT]||null}function Ds(n,e){const t=n[p3]||null;if(!t&&!0===e)throw new Error(`Type ${Fi(n)} does not have '\u0275mod' property.`);return t}function x3(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Qo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||on,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:C3(n.inputs,e),outputs:C3(n.outputs)}}function T3(n){n.features?.forEach(e=>e(n))}function qv(n,e){if(!n)return null;const t=e?qr:Bie;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(Vie)}const ei=0,ze=1,Ot=2,Gn=3,To=4,xm=5,Ar=6,ah=7,ui=8,Xc=9,ch=10,Mt=11,Tm=12,M3=13,lh=14,di=15,Mm=16,uh=17,Jo=18,Am=19,A3=20,Yc=21,Ha=22,Im=23,Dm=24,$t=25,fT=1,I3=2,ea=7,dh=9,ur=11;function fs(n){return Array.isArray(n)&&"object"==typeof n[fT]}function Kr(n){return Array.isArray(n)&&!0===n[fT]}function pT(n){return 0!=(4&n.flags)}function du(n){return n.componentOffset>-1}function Xv(n){return 1==(1&n.flags)}function Mo(n){return!!n.template}function mT(n){return 0!=(512&n[Ot])}function hu(n,e){return n.hasOwnProperty(za)?n[za]:null}const Zc=Symbol("SIGNAL");function Kie(n,e){return(null===n||"object"!=typeof n)&&Object.is(n,e)}let dr=null,Yv=!1;function no(n){const e=dr;return dr=n,e}const gT={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function P3(n){if(Yv)throw new Error("");if(null===dr)return;const e=dr.nextProducerIndex++;hh(dr),e<dr.producerNode.length&&dr.producerNode[e]!==n&&Pm(dr)&&Zv(dr.producerNode[e],dr.producerIndexOfThis[e]),dr.producerNode[e]!==n&&(dr.producerNode[e]=n,dr.producerIndexOfThis[e]=Pm(dr)?U3(n,dr,e):0),dr.producerLastReadVersion[e]=n.version}function O3(n){if(!Pm(n)||n.dirty){if(!n.producerMustRecompute(n)&&!L3(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function N3(n){if(void 0===n.liveConsumerNode)return;const e=Yv;Yv=!0;try{for(const t of n.liveConsumerNode)t.dirty||k3(t)}finally{Yv=e}}function _T(){return!1!==dr?.consumerAllowSignalWrites}function k3(n){n.dirty=!0,N3(n),n.consumerMarkedDirty?.(n)}function yT(n){return n&&(n.nextProducerIndex=0),no(n)}function vT(n,e){if(no(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Pm(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Zv(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function L3(n){hh(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(O3(t),i!==t.version))return!0}return!1}function F3(n){if(hh(n),Pm(n))for(let e=0;e<n.producerNode.length;e++)Zv(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function U3(n,e,t){if(B3(n),hh(n),0===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=U3(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Zv(n,e){if(B3(n),hh(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Zv(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];hh(r),r.producerIndexOfThis[i]=e}}function Pm(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function hh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function B3(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}let V3=function Zie(){throw new Error};function bT(){V3()}let wT=null;function Qv(n,e){const t=Object.create(Jie);function i(){return P3(t),t.value}return t.value=n,e?.equal&&(t.equal=e.equal),i.set=H3,i.update=ere,i.mutate=tre,i.asReadonly=nre,i[Zc]=t,i}const Jie=(()=>({...gT,equal:Kie,readonlyFn:void 0}))();function z3(n){n.version++,N3(n),wT?.()}function H3(n){const e=this[Zc];_T()||bT(),e.equal(e.value,n)||(e.value=n,z3(e))}function ere(n){_T()||bT(),H3.call(this,n(this[Zc].value))}function tre(n){const e=this[Zc];_T()||bT(),n(e.value),z3(e)}function nre(){const n=this[Zc];if(void 0===n.readonlyFn){const e=()=>this();e[Zc]=n,n.readonlyFn=e}return n.readonlyFn}function G3(n){const e=no(null);try{return n()}finally{no(e)}}const j3=()=>{},rre=(()=>({...gT,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:j3}))();class sre{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function ps(){return $3}function $3(n){return n.type.prototype.ngOnChanges&&(n.setInput=are),ore}function ore(){const n=q3(this),e=n?.current;if(e){const t=n.previous;if(t===Qo)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function are(n,e,t,i){const r=this.declaredInputs[t],s=q3(n)||function cre(n,e){return n[W3]=e}(n,{previous:Qo,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[r];o[r]=new sre(c&&c.currentValue,e,a===Qo),n[i]=e}ps.ngInherit=!0;const W3="__ngSimpleChanges__";function q3(n){return n[W3]||null}const ta=function(n,e,t){};function Rn(n){for(;Array.isArray(n);)n=n[ei];return n}function Jv(n,e){return Rn(e[n])}function ms(n,e){return Rn(e[n.index])}function Y3(n,e){return n.data[e]}function fh(n,e){return n[e]}function Rs(n,e){const t=e[n];return fs(t)?t:t[ei]}function Qc(n,e){return null==e?null:n[e]}function Z3(n){n[uh]=0}function pre(n){1024&n[Ot]||(n[Ot]|=1024,J3(n,1))}function Q3(n){1024&n[Ot]&&(n[Ot]&=-1025,J3(n,-1))}function J3(n,e){let t=n[Gn];if(null===t)return;t[xm]+=e;let i=t;for(t=t[Gn];null!==t&&(1===e&&1===i[xm]||-1===e&&0===i[xm]);)t[xm]+=e,i=t,t=t[Gn]}const yt={lFrame:uV(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function nV(){return yt.bindingsEnabled}function ph(){return null!==yt.skipHydrationRootTNode}function he(){return yt.lFrame.lView}function Jt(){return yt.lFrame.tView}function ln(n){return yt.lFrame.contextLView=n,n[ui]}function un(n){return yt.lFrame.contextLView=null,n}function hr(){let n=iV();for(;null!==n&&64===n.type;)n=n.parent;return n}function iV(){return yt.lFrame.currentTNode}function na(n,e){const t=yt.lFrame;t.currentTNode=n,t.isParent=e}function CT(){return yt.lFrame.isParent}function xT(){yt.lFrame.isParent=!1}function Xr(){const n=yt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function mh(){return yt.lFrame.bindingIndex++}function ja(n){const e=yt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Tre(n,e){const t=yt.lFrame;t.bindingIndex=t.bindingRootIndex=n,TT(e)}function TT(n){yt.lFrame.currentDirectiveIndex=n}function MT(n){const e=yt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function aV(){return yt.lFrame.currentQueryIndex}function AT(n){yt.lFrame.currentQueryIndex=n}function Are(n){const e=n[ze];return 2===e.type?e.declTNode:1===e.type?n[Ar]:null}function cV(n,e,t){if(t&jt.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&jt.Host||(r=Are(s),null===r||(s=s[lh],10&r.type))););if(null===r)return!1;e=r,n=s}const i=yt.lFrame=lV();return i.currentTNode=e,i.lView=n,!0}function IT(n){const e=lV(),t=n[ze];yt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function lV(){const n=yt.lFrame,e=null===n?null:n.child;return null===e?uV(n):e}function uV(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function dV(){const n=yt.lFrame;return yt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const hV=dV;function DT(){const n=dV();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Yr(){return yt.lFrame.selectedIndex}function fu(n){yt.lFrame.selectedIndex=n}function Kn(){const n=yt.lFrame;return Y3(n.tView,n.selectedIndex)}let pV=!0;function eb(){return pV}function Jc(n){pV=n}function tb(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function nb(n,e,t){mV(n,e,3,t)}function ib(n,e,t,i){(3&n[Ot])===t&&mV(n,e,t,i)}function RT(n,e){let t=n[Ot];(3&t)===e&&(t&=8191,t+=1,n[Ot]=t)}function mV(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[uh]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[uh]+=65536),(a<s||-1==s)&&(Lre(n,t,e,c),n[uh]=(4294901760&n[uh])+c+2),c++}function gV(n,e){ta(4,n,e);const t=no(null);try{e.call(n)}finally{no(t),ta(5,n,e)}}function Lre(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[Ot]>>13<n[uh]>>16&&(3&n[Ot])===e&&(n[Ot]+=8192,gV(a,s)):gV(a,s)}const gh=-1;class Nm{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function OT(n){return n!==gh}function km(n){return 32767&n}function Lm(n,e){let t=function Vre(n){return n>>16}(n),i=e;for(;t>0;)i=i[lh],t--;return i}let NT=!0;function rb(n){const e=NT;return NT=n,e}const _V=255,yV=5;let zre=0;const ia={};function sb(n,e){const t=vV(n,e);if(-1!==t)return t;const i=e[ze];i.firstCreatePass&&(n.injectorIndex=e.length,kT(i.data,n),kT(e,null),kT(i.blueprint,null));const r=ob(n,e),s=n.injectorIndex;if(OT(r)){const o=km(r),a=Lm(r,e),c=a[ze].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function kT(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vV(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function ob(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=TV(r),null===i)return gh;if(t++,r=r[lh],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return gh}function LT(n,e,t){!function Hre(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Sm)&&(i=t[Sm]),null==i&&(i=t[Sm]=zre++);const r=i&_V;e.data[n+(r>>yV)]|=1<<r}(n,e,t)}function bV(n,e,t){if(t&jt.Optional||void 0!==n)return n;tT()}function wV(n,e,t,i){if(t&jt.Optional&&void 0===i&&(i=null),!(t&(jt.Self|jt.Host))){const r=n[Xc],s=hs(void 0);try{return r?r.get(e,i,t&jt.Optional):u3(e,i,t&jt.Optional)}finally{hs(s)}}return bV(i,0,t)}function EV(n,e,t,i=jt.Default,r){if(null!==n){if(2048&e[Ot]&&!(i&jt.Self)){const o=function Kre(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Ot]&&!(512&o[Ot]);){const a=SV(s,o,t,i|jt.Self,ia);if(a!==ia)return a;let c=s.parent;if(!c){const l=o[A3];if(l){const u=l.get(t,ia,i);if(u!==ia)return u}c=TV(o),o=o[lh]}s=c}return r}(n,e,t,i,ia);if(o!==ia)return o}const s=SV(n,e,t,i,ia);if(s!==ia)return s}return wV(e,t,i,r)}function SV(n,e,t,i,r){const s=function $re(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Sm)?n[Sm]:void 0;return"number"==typeof e?e>=0?e&_V:qre:e}(t);if("function"==typeof s){if(!cV(e,n,i))return i&jt.Host?bV(r,0,i):wV(e,t,i,r);try{let o;if(o=s(i),null!=o||i&jt.Optional)return o;tT()}finally{hV()}}else if("number"==typeof s){let o=null,a=vV(n,e),c=gh,l=i&jt.Host?e[di][Ar]:null;for((-1===a||i&jt.SkipSelf)&&(c=-1===a?ob(n,e):e[a+8],c!==gh&&xV(i,!1)?(o=e[ze],a=km(c),e=Lm(c,e)):a=-1);-1!==a;){const u=e[ze];if(CV(s,a,u.data)){const d=jre(a,e,t,o,i,l);if(d!==ia)return d}c=e[a+8],c!==gh&&xV(i,e[ze].data[a+8]===l)&&CV(s,a,e)?(o=u,a=km(c),e=Lm(c,e)):a=-1}}return r}function jre(n,e,t,i,r,s){const o=e[ze],a=o.data[n+8],u=ab(a,o,t,null==i?du(a)&&NT:i!=o&&0!=(3&a.type),r&jt.Host&&s===a);return null!==u?pu(e,o,u,a):ia}function ab(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(r){const f=o[c];if(f&&Mo(f)&&f.type===t)return c}return null}function pu(n,e,t,i){let r=n[t];const s=e.data;if(function Fre(n){return n instanceof Nm}(r)){const o=r;o.resolving&&function uie(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new se(-200,`Circular dependency in DI detected for ${n}${t}`)}(function pn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():xt(n)}(s[t]));const a=rb(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?hs(o.injectImpl):null;cV(n,i,jt.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function kre(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=$3(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&hs(l),rb(a),o.resolving=!1,hV()}}return r}function CV(n,e,t){return!!(t[e+(n>>yV)]&1<<n)}function xV(n,e){return!(n&jt.Self||n&jt.Host&&e)}class Zr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return EV(this._tNode,this._lView,e,jv(i),t)}}function qre(){return new Zr(hr(),he())}function fr(n){return Va(()=>{const e=n.prototype.constructor,t=e[za]||FT(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[za]||FT(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function FT(n){return Jx(n)?()=>{const e=FT(vt(n));return e&&e()}:hu(n)}function TV(n){const e=n[ze],t=e.type;return 2===t?e.declTNode:1===t?n[Ar]:null}const yh="__parameters__";function bh(n,e,t){return Va(()=>{const i=function UT(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const d=c.hasOwnProperty(yh)?c[yh]:Object.defineProperty(c,yh,{value:[]})[yh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function Eh(n,e){n.forEach(t=>Array.isArray(t)?Eh(t,e):e(t))}function AV(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function lb(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Bm(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Ps(n,e,t){let i=Sh(n,e);return i>=0?n[1|i]=t:(i=~i,function tse(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function BT(n,e){const t=Sh(n,e);if(t>=0)return n[1|t]}function Sh(n,e){return function IV(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const hi=Em(bh("Optional"),8),db=Em(bh("SkipSelf"),4);function gb(n){return 128==(128&n.flags)}var el=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(el||{});const Ese=/^>|^->|<!--|-->|--!>|<!-$/g,Sse=/(<|>)/g,Cse="\u200b$1\u200b";const jT=new Map;let xse=0;const WT="__ngContext__";function Ir(n,e){fs(e)?(n[WT]=e[Am],function Mse(n){jT.set(n[Am],n)}(e)):n[WT]=e}let qT;function KT(n,e){return qT(n,e)}function Hm(n){const e=n[Gn];return Kr(e)?e[Gn]:e}function XV(n){return ZV(n[Tm])}function YV(n){return ZV(n[To])}function ZV(n){for(;null!==n&&!Kr(n);)n=n[To];return n}function Th(n,e,t,i,r){if(null!=i){let s,o=!1;Kr(i)?s=i:fs(i)&&(o=!0,i=i[ei]);const a=Rn(i);0===n&&null!==t?null==r?tz(e,t,a):mu(e,t,a,r||null,!0):1===n&&null!==t?mu(e,t,a,r||null,!0):2===n?function Sb(n,e,t){const i=wb(n,e);i&&function Wse(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Xse(n,e,t,i,r){const s=t[ea];s!==Rn(t)&&Th(e,n,i,s,r);for(let a=ur;a<t.length;a++){const c=t[a];jm(c[ze],c,n,e,i,s)}}(e,n,s,t,r)}}function XT(n,e){return n.createComment(function zV(n){return n.replace(Ese,e=>e.replace(Sse,Cse))}(e))}function vb(n,e,t){return n.createElement(e,t)}function JV(n,e){const t=n[dh],i=t.indexOf(e);Q3(e),t.splice(i,1)}function bb(n,e){if(n.length<=ur)return;const t=ur+e,i=n[t];if(i){const r=i[Mm];null!==r&&r!==n&&JV(r,i),e>0&&(n[t-1][To]=i[To]);const s=lb(n,ur+e);!function Use(n,e){jm(n,e,e[Mt],2,null,null),e[ei]=null,e[Ar]=null}(i[ze],i);const o=s[Jo];null!==o&&o.detachView(s[ze]),i[Gn]=null,i[To]=null,i[Ot]&=-129}return i}function YT(n,e){if(!(256&e[Ot])){const t=e[Mt];e[Im]&&F3(e[Im]),e[Dm]&&F3(e[Dm]),t.destroyNode&&jm(n,e,t,3,null,null),function zse(n){let e=n[Tm];if(!e)return ZT(n[ze],n);for(;e;){let t=null;if(fs(e))t=e[Tm];else{const i=e[ur];i&&(t=i)}if(!t){for(;e&&!e[To]&&e!==n;)fs(e)&&ZT(e[ze],e),e=e[Gn];null===e&&(e=n),fs(e)&&ZT(e[ze],e),t=e&&e[To]}e=t}}(e)}}function ZT(n,e){if(!(256&e[Ot])){e[Ot]&=-129,e[Ot]|=256,function $se(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Nm)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];ta(4,a,c);try{c.call(a)}finally{ta(5,a,c)}}else{ta(4,r,s);try{s.call(r)}finally{ta(5,r,s)}}}}}(n,e),function jse(n,e){const t=n.cleanup,i=e[ah];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[ah]=null);const r=e[Yc];if(null!==r){e[Yc]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[ze].type&&e[Mt].destroy();const t=e[Mm];if(null!==t&&Kr(e[Gn])){t!==e[Gn]&&JV(t,e);const i=e[Jo];null!==i&&i.detachView(n)}!function Ase(n){jT.delete(n[Am])}(e)}}function QT(n,e,t){return function ez(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[ei];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===to.None||s===to.Emulated)return null}return ms(i,t)}}(n,e.parent,t)}function mu(n,e,t,i,r){n.insertBefore(e,t,i,r)}function tz(n,e,t){n.appendChild(e,t)}function nz(n,e,t,i,r){null!==i?mu(n,e,t,i,r):tz(n,e,t)}function wb(n,e){return n.parentNode(e)}function iz(n,e,t){return sz(n,e,t)}let JT,Cb,iM,xb,sz=function rz(n,e,t){return 40&n.type?ms(n,t):null};function Eb(n,e,t,i){const r=QT(n,i,e),s=e[Mt],a=iz(i.parent||e[Ar],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)nz(s,r,t[c],a,!1);else nz(s,r,t,a,!1);void 0!==JT&&JT(s,i,e,t,r)}function Gm(n,e){if(null!==e){const t=e.type;if(3&t)return ms(e,n);if(4&t)return eM(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Gm(n,i);{const r=n[e.index];return Kr(r)?eM(-1,r):Rn(r)}}if(32&t)return KT(e,n)()||Rn(n[e.index]);{const i=az(n,e);return null!==i?Array.isArray(i)?i[0]:Gm(Hm(n[di]),i):Gm(n,e.next)}}return null}function az(n,e){return null!==e?n[di][Ar].projection[e.projection]:null}function eM(n,e){const t=ur+n+1;if(t<e.length){const i=e[t],r=i[ze].firstChild;if(null!==r)return Gm(i,r)}return e[ea]}function tM(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&Ir(Rn(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)tM(n,e,t.child,i,r,s,!1),Th(e,n,r,a,s);else if(32&c){const l=KT(t,i);let u;for(;u=l();)Th(e,n,r,u,s);Th(e,n,r,a,s)}else 16&c?lz(n,e,i,t,r,s):Th(e,n,r,a,s);t=o?t.projectionNext:t.next}}function jm(n,e,t,i,r,s){tM(t,i,n.firstChild,e,r,s,!1)}function lz(n,e,t,i,r,s){const o=t[di],c=o[Ar].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Th(e,n,r,c[l],s);else{let l=c;const u=o[Gn];gb(i)&&(l.flags|=128),tM(n,e,l,u,r,s,!0)}}function uz(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function dz(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&hT(n,e,i),null!==r&&uz(n,e,r),null!==s&&function Zse(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Mh(n){return function nM(){if(void 0===Cb&&(Cb=null,Dn.trustedTypes))try{Cb=Dn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Cb}()?.createHTML(n)||n}function Ah(){if(void 0!==iM)return iM;if(typeof document<"u")return document;throw new se(210,!1)}function rM(){if(void 0===xb&&(xb=null,Dn.trustedTypes))try{xb=Dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return xb}function hz(n){return rM()?.createHTML(n)||n}function pz(n){return rM()?.createScriptURL(n)||n}class gu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${o3})`}}class noe extends gu{getTypeName(){return"HTML"}}class ioe extends gu{getTypeName(){return"Style"}}class roe extends gu{getTypeName(){return"Script"}}class soe extends gu{getTypeName(){return"URL"}}class ooe extends gu{getTypeName(){return"ResourceURL"}}function Os(n){return n instanceof gu?n.changingThisBreaksApplicationSecurity:n}function ra(n,e){const t=function aoe(n){return n instanceof gu&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${o3})`)}return t===e}class foe{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Mh(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class poe{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Mh(e),t}}const goe=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Tb(n){return(n=String(n)).match(goe)?n:"unsafe:"+n}function $a(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function $m(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const gz=$a("area,br,col,hr,img,wbr"),_z=$a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),yz=$a("rp,rt"),sM=$m(gz,$m(_z,$a("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$m(yz,$a("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$m(yz,_z)),oM=$a("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),vz=$m(oM,$a("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$a("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_oe=$a("script,style,template");class yoe{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!sM.hasOwnProperty(t))return this.sanitizedSomething=!0,!_oe.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!vz.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;oM[a]&&(c=Tb(c)),this.buf.push(" ",o,'="',bz(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();sM.hasOwnProperty(t)&&!gz.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(bz(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const voe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,boe=/([^\#-~ |!])/g;function bz(n){return n.replace(/&/g,"&amp;").replace(voe,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(boe,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Mb;function wz(n,e){let t=null;try{Mb=Mb||function mz(n){const e=new poe(n);return function moe(){try{return!!(new window.DOMParser).parseFromString(Mh(""),"text/html")}catch{return!1}}()?new foe(e):e}(n);let i=e?String(e):"";t=Mb.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=Mb.getInertBodyElement(i)}while(i!==s);return Mh((new yoe).sanitizeChildren(aM(t)||t))}finally{if(t){const i=aM(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function aM(n){return"content"in n&&function woe(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Qr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Qr||{});function Wm(n){const e=qm();return e?hz(e.sanitize(Qr.HTML,n)||""):ra(n,"HTML")?hz(Os(n)):wz(Ah(),xt(n))}function Wa(n){const e=qm();return e?e.sanitize(Qr.URL,n)||"":ra(n,"URL")?Os(n):Tb(xt(n))}function Ez(n){const e=qm();if(e)return pz(e.sanitize(Qr.RESOURCE_URL,n)||"");if(ra(n,"ResourceURL"))return pz(Os(n));throw new se(904,!1)}function qm(){const n=he();return n&&n[ch].sanitizer}class Se{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=me({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Km=new Se("ENVIRONMENT_INITIALIZER"),Cz=new Se("INJECTOR",-1),xz=new Se("INJECTOR_DEF_TYPES");class cM{get(e,t=wm){if(t===wm){const i=new Error(`NullInjectorError: No provider for ${Fi(e)}!`);throw i.name="NullInjectorError",i}return t}}function Ab(n){return{\u0275providers:n}}function Moe(...n){return{\u0275providers:Tz(0,n),\u0275fromNgModule:!0}}function Tz(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return Eh(e,o=>{const a=o;Ib(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Mz(r,s),t}function Mz(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];lM(r,s=>{e(s,i)})}}function Ib(n,e,t,i){if(!(n=vt(n)))return!1;let r=null,s=zv(n);const o=!s&&Qt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=zv(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)Ib(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{Eh(s.imports,u=>{Ib(u,e,t,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&Mz(l,e)}if(!a){const l=hu(r)||(()=>new r);e({provide:r,useFactory:l,deps:on},r),e({provide:xz,useValue:r,multi:!0},r),e({provide:Km,useValue:()=>z(r),multi:!0},r)}const c=s.providers;if(null!=c&&!a){const l=n;lM(c,u=>{e(u,l)})}}}return r!==n&&void 0!==n.providers}function lM(n,e){for(let t of n)eT(t)&&(t=t.\u0275providers),Array.isArray(t)?lM(t,e):e(t)}const Aoe=vn({provide:String,useValue:vn});function uM(n){return null!==n&&"object"==typeof n&&Aoe in n}function _u(n){return"function"==typeof n}const dM=new Se("Set Injector scope."),Db={},Doe={};let hM;function Rb(){return void 0===hM&&(hM=new cM),hM}class Ns{}class Pb extends Ns{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,pM(e,o=>this.processProvider(o)),this.records.set(Cz,Ih(void 0,this)),r.has("environment")&&this.records.set(Ns,Ih(void 0,this));const s=this.records.get(dM);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(xz.multi,on,jt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Kc(this),i=hs(void 0);try{return e()}finally{Kc(t),hs(i)}}get(e,t=wm,i=jt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(m3))return e[m3](this);i=jv(i);const s=Kc(this),o=hs(void 0);try{if(!(i&jt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function koe(n){return"function"==typeof n||"object"==typeof n&&n instanceof Se}(e)&&Vv(e);c=l&&this.injectableDefInScope(l)?Ih(fM(e),Db):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&jt.Self?Rb():this.parent).get(e,t=i&jt.Optional&&t===wm?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Gv]=a[Gv]||[]).unshift(Fi(e)),s)throw a;return function xie(n,e,t,i){const r=n[Gv];throw e[h3]&&r.unshift(e[h3]),n.message=function Tie(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Fi(e);if(Array.isArray(e))r=e.map(Fi).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Fi(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(bie,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Gv]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{hs(o),Kc(s)}}resolveInjectorInitializers(){const e=Kc(this),t=hs(void 0);try{const r=this.get(Km.multi,on,jt.Self);for(const s of r)s()}finally{Kc(e),hs(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Fi(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(e){let t=_u(e=vt(e))?e:vt(e&&e.provide);const i=function Poe(n){return uM(n)?Ih(void 0,n.useValue):Ih(Dz(n),Db)}(e);if(_u(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Ih(void 0,Db,!0),r.factory=()=>lT(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===Db&&(t.value=Doe,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Noe(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=vt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function fM(n){const e=Vv(n),t=null!==e?e.factory:hu(n);if(null!==t)return t;if(n instanceof Se)throw new se(204,!1);if(n instanceof Function)return function Roe(n){const e=n.length;if(e>0)throw Bm(e,"?"),new se(204,!1);const t=function gie(n){return n&&(n[Hv]||n[c3])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new se(204,!1)}function Dz(n,e,t){let i;if(_u(n)){const r=vt(n);return hu(r)||fM(r)}if(uM(n))i=()=>vt(n.useValue);else if(function Iz(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...lT(n.deps||[]));else if(function Az(n){return!(!n||!n.useExisting)}(n))i=()=>z(vt(n.useExisting));else{const r=vt(n&&(n.useClass||n.provide));if(!function Ooe(n){return!!n.deps}(n))return hu(r)||fM(r);i=()=>new r(...lT(n.deps))}return i}function Ih(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function pM(n,e){for(const t of n)Array.isArray(t)?pM(t,e):t&&eT(t)?pM(t.\u0275providers,e):e(t)}const Ob=new Se("AppId",{providedIn:"root",factory:()=>Loe}),Loe="ng",Rz=new Se("Platform Initializer"),ks=new Se("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),mM=new Se("AnimationModuleType"),gM=new Se("CSP nonce",{providedIn:"root",factory:()=>Ah().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Pz=(n,e,t)=>null;function CM(n,e,t=!1){return Pz(n,e,t)}class Woe{}class kz{}class Koe{resolveComponentFactory(e){throw function qoe(n){const e=Error(`No component factory found for ${Fi(n)}.`);return e.ngComponent=n,e}(e)}}let qa=(()=>{class n{static#e=this.NULL=new Koe}return n})();function Xoe(){return Ph(hr(),he())}function Ph(n,e){return new fi(ms(n,e))}let fi=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=Xoe}return n})();function Yoe(n){return n instanceof fi?n.nativeElement:n}class Zm{}let Ao=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Zoe(){const n=he(),t=Rs(hr().index,n);return(fs(t)?t:n)[Mt]}()}return n})(),Qoe=(()=>{class n{static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:()=>null})}return n})();class Oh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Fz=new Oh("16.2.7"),MM={};function zz(n,e=null,t=null,i){const r=Hz(n,e,t,i);return r.resolveInjectorInitializers(),r}function Hz(n,e=null,t=null,i,r=new Set){const s=[t||on,Moe(n)];return i=i||("object"==typeof n?void 0:Fi(n)),new Pb(s,e||Rb(),i||null,r)}let Tn=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=wm;static#t=this.NULL=new cM;static create(t,i){if(Array.isArray(t))return zz({name:""},i,t,"");{const r=t.name??"";return zz({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=me({token:n,providedIn:"any",factory:()=>z(Cz)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function IM(n){return n.ngOriginalError}class Ka{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&IM(e);for(;t&&IM(t);)t=IM(t);return t||null}}function RM(n){return e=>{setTimeout(n,void 0,e)}}const qt=class sae extends Gt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=RM(s),r&&(r=RM(r)),o&&(o=RM(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof ar&&e.add(a),a}};function jz(...n){}class pt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qt(!1),this.onMicrotaskEmpty=new qt(!1),this.onStable=new qt(!1),this.onError=new qt(!1),typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function oae(){const n="function"==typeof Dn.requestAnimationFrame;let e=Dn[n?"requestAnimationFrame":"setTimeout"],t=Dn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function lae(n){const e=()=>{!function cae(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Dn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,OM(n),n.isCheckStableRunning=!0,PM(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),OM(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(function dae(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,s,o,a);try{return $z(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Wz(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return $z(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),Wz(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,OM(n),PM(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pt.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(pt.isInAngularZone())throw new se(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,aae,jz,jz);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const aae={};function PM(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function OM(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function $z(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Wz(n){n._nesting--,PM(n)}class uae{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qt,this.onMicrotaskEmpty=new qt,this.onStable=new qt,this.onError=new qt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const qz=new Se("",{providedIn:"root",factory:Kz});function Kz(){const n=Ie(pt);let e=!0;return r3(new yn(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new yn(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{pt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const o=n.onUnstable.subscribe(()=>{pt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Yx()))}function NM(n){return n.ownerDocument.defaultView}function Xa(n){return n instanceof Function?n():n}let kM=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:()=>new n})}return n})();function Qm(n){for(;n;){n[Ot]|=64;const e=Hm(n);if(mT(n)&&!e)return n;n=e}return null}const Jz=new Se("",{providedIn:"root",factory:()=>!1});let Vb=null;function iH(n,e){return n[e]??oH()}function rH(n,e){const t=oH();t.producerNode?.length&&(n[e]=Vb,t.lView=n,Vb=sH())}const bae={...gT,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Qm(n.lView)},lView:null};function sH(){return Object.create(bae)}function oH(){return Vb??=sH(),Vb}const Pt={};function le(n){aH(Jt(),he(),Yr()+n,!1)}function aH(n,e,t,i){if(!i)if(3==(3&e[Ot])){const s=n.preOrderCheckHooks;null!==s&&nb(e,s,t)}else{const s=n.preOrderHooks;null!==s&&ib(e,s,0,t)}fu(t)}function j(n,e=jt.Default){const t=he();return null===t?z(n,e):EV(hr(),t,vt(n),e)}function zb(n,e,t,i,r,s,o,a,c,l,u){const d=e.blueprint.slice();return d[ei]=r,d[Ot]=140|i,(null!==l||n&&2048&n[Ot])&&(d[Ot]|=2048),Z3(d),d[Gn]=d[lh]=n,d[ui]=t,d[ch]=o||n&&n[ch],d[Mt]=a||n&&n[Mt],d[Xc]=c||n&&n[Xc]||null,d[Ar]=s,d[Am]=function Tse(){return xse++}(),d[Ha]=u,d[A3]=l,d[di]=2==e.type?n[di]:d,d}function Lh(n,e,t,i,r){let s=n.data[e];if(null===s)s=function LM(n,e,t,i,r){const s=iV(),o=CT(),c=n.data[e]=function Aae(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return ph()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,i,r),function xre(){return yt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Om(){const n=yt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return na(s,!0),s}function Jm(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function lH(n,e,t,i,r){const s=iH(e,Im),o=Yr(),a=2&i;try{fu(-1),a&&e.length>$t&&aH(n,e,$t,!1),ta(a?2:0,r);const l=a?s:null,u=yT(l);try{null!==l&&(l.dirty=!1),t(i,r)}finally{vT(l,u)}}finally{a&&null===e[Im]&&rH(e,Im),fu(o),ta(a?3:1,r)}}function FM(n,e,t){if(pT(e)){const i=no(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{no(i)}}}function UM(n,e,t){nV()&&(function kae(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;du(t)&&function Hae(n,e,t){const i=ms(e,n),r=uH(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Hb(n,zb(n,r,null,o,i,e,null,n[ch].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||sb(t,e),Ir(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=pu(e,n,a,t);Ir(l,e),null!==o&&Gae(0,a-r,l,c,0,o),Mo(c)&&(Rs(t.index,e)[ui]=pu(e,n,a,t))}}(n,e,t,ms(t,e)),64==(64&t.flags)&&mH(n,e,t))}function BM(n,e,t=ms){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function uH(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=VM(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function VM(n,e,t,i,r,s,o,a,c,l,u){const d=$t+i,h=d+r,f=function Eae(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Pt);return t}(d,h),p="function"==typeof l?l():l;return f[ze]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let dH=n=>null;function hH(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?fH(t,e,r,s):i.hasOwnProperty(r)&&fH(t,e,i[r],s)}return t}function fH(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Ls(n,e,t,i,r,s,o,a){const c=ms(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?($M(n,t,u,i,r),du(e)&&function Rae(n,e){const t=Rs(e,n);16&t[Ot]||(t[Ot]|=64)}(t,e.index)):3&e.type&&(i=function Dae(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function zM(n,e,t,i){if(nV()){const r=null===i?null:{"":-1},s=function Fae(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(E3(e,o.selectors,!1))if(i||(i=[]),Mo(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),HM(n,e,a.length)}else i.unshift(o),HM(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&pH(n,e,t,o,r,a),r&&function Uae(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new se(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=Cm(t.mergedAttrs,t.attrs)}function pH(n,e,t,i,r,s){for(let l=0;l<i.length;l++)LT(sb(t,e),n,i[l].type);!function Vae(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Jm(n,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];t.mergedAttrs=Cm(t.mergedAttrs,u.hostAttrs),zae(n,t,e,c,u),Bae(c,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function Iae(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const d=s[u],h=t?t.get(d):null,p=h?h.outputs:null;c=hH(d.inputs,u,c,h?h.inputs:null),l=hH(d.outputs,u,l,p);const g=null===c||null===o||w3(e)?null:jae(c,u,o);a.push(g)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function mH(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function Mre(){return yt.lFrame.currentDirectiveIndex}();try{fu(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];TT(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Lae(c,l)}}finally{fu(-1),TT(o)}}function Lae(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function HM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Bae(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Mo(e)&&(t[""]=n)}}function zae(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=hu(r.type)),o=new Nm(s,Mo(r),j);n.blueprint[i]=o,t[i]=o,function Oae(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Nae(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Jm(n,t,r.hostVars,Pt),r)}function sa(n,e,t,i,r,s){const o=ms(n,e);!function GM(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?xt(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[Mt],o,s,n.value,t,i,r)}function Gae(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)gH(i,t,o[a++],o[a++],o[a++])}function gH(n,e,t,i,r){const s=no(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{no(s)}}function jae(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function _H(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function yH(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=n.data[s];AT(t[i]),o.contentQueries(2,e[s],s)}}}function Hb(n,e){return n[Tm]?n[M3][To]=e:n[Tm]=e,n[M3]=e,e}function jM(n,e,t){AT(0);const i=no(null);try{e(n,t)}finally{no(i)}}function vH(n){return n[ah]||(n[ah]=[])}function bH(n){return n.cleanup||(n.cleanup=[])}function wH(n,e,t){return(null===n||Mo(n))&&(t=function ST(n){for(;Array.isArray(n);){if("object"==typeof n[fT])return n;n=n[ei]}return null}(t[e.index])),t[Mt]}function EH(n,e){const t=n[Xc],i=t?t.get(Ka,null):null;i&&i.handleError(e)}function $M(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];gH(n.data[o],e[o],i,a,r)}}function Ya(n,e,t){const i=Jv(e,n);!function QV(n,e,t){n.setValue(e,t)}(n[Mt],i,t)}function $ae(n,e){const t=Rs(e,n),i=t[ze];!function Wae(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[ei];null!==r&&null===t[Ha]&&(t[Ha]=CM(r,t[Xc])),WM(i,t,t[ui])}function WM(n,e,t){IT(e);try{const i=n.viewQuery;null!==i&&jM(1,i,t);const r=n.template;null!==r&&lH(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&yH(n,e),n.staticViewQueries&&jM(2,n.viewQuery,t);const s=n.components;null!==s&&function qae(n,e){for(let t=0;t<e.length;t++)$ae(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Ot]&=-5,DT()}}let SH=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const s=typeof Zone>"u"?null:Zone.current,o=function ire(n,e,t){const i=Object.create(rre);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=o=>{i.cleanupFn=o};return i.ref={notify:()=>k3(i),run:()=>{if(i.dirty=!1,i.hasRun&&!L3(i))return;i.hasRun=!0;const o=yT(i);try{i.cleanupFn(),i.cleanupFn=j3,i.fn(r)}finally{vT(i,o)}},cleanup:()=>i.cleanupFn()},i.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,s)},r);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=i?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:()=>new n})}return n})();function Gb(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Qx(r,a):2==s&&(i=Qx(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function eg(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];null!==s&&i.push(Rn(s)),Kr(s)&&CH(s,i);const o=t.type;if(8&o)eg(n,e,t.child,i);else if(32&o){const a=KT(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=az(e,t);if(Array.isArray(a))i.push(...a);else{const c=Hm(e[di]);eg(c[ze],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function CH(n,e){for(let t=ur;t<n.length;t++){const i=n[t],r=i[ze].firstChild;null!==r&&eg(i[ze],i,r,e)}n[ea]!==n[ei]&&e.push(n[ea])}function jb(n,e,t,i=!0){const r=e[ch],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{xH(n,e,n.template,t)}catch(c){throw i&&EH(e,c),c}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function xH(n,e,t,i){const r=e[Ot];if(256!=(256&r)){e[ch].effectManager?.flush(),IT(e);try{Z3(e),function sV(n){return yt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&lH(n,e,t,2,i);const o=3==(3&r);if(o){const l=n.preOrderCheckHooks;null!==l&&nb(e,l,null)}else{const l=n.preOrderHooks;null!==l&&ib(e,l,0,null),RT(e,0)}if(function Yae(n){for(let e=XV(n);null!==e;e=YV(e)){if(!e[I3])continue;const t=e[dh];for(let i=0;i<t.length;i++){pre(t[i])}}}(e),TH(e,2),null!==n.contentQueries&&yH(n,e),o){const l=n.contentCheckHooks;null!==l&&nb(e,l)}else{const l=n.contentHooks;null!==l&&ib(e,l,1),RT(e,1)}!function wae(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=iH(e,Dm);try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)fu(~s);else{const o=s,a=t[++r],c=t[++r];Tre(a,o),i.dirty=!1;const l=yT(i);try{c(2,e[o])}finally{vT(i,l)}}}}finally{null===e[Dm]&&rH(e,Dm),fu(-1)}}(n,e);const a=n.components;null!==a&&AH(e,a,0);const c=n.viewQuery;if(null!==c&&jM(2,c,i),o){const l=n.viewCheckHooks;null!==l&&nb(e,l)}else{const l=n.viewHooks;null!==l&&ib(e,l,2),RT(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Ot]&=-73,Q3(e)}finally{DT()}}}function TH(n,e){for(let t=XV(n);null!==t;t=YV(t))for(let i=ur;i<t.length;i++)MH(t[i],e)}function Zae(n,e,t){MH(Rs(e,n),t)}function MH(n,e){if(!function hre(n){return 128==(128&n[Ot])}(n))return;const t=n[ze],i=n[Ot];if(80&i&&0===e||1024&i||2===e)xH(t,n,t.template,n[ui]);else if(n[xm]>0){TH(n,1);const r=t.components;null!==r&&AH(n,r,1)}}function AH(n,e,t){for(let i=0;i<e.length;i++)Zae(n,e[i],t)}class tg{get rootNodes(){const e=this._lView,t=e[ze];return eg(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ui]}set context(e){this._lView[ui]=e}get destroyed(){return 256==(256&this._lView[Ot])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Gn];if(Kr(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(bb(e,i),lb(t,i))}this._attachedToViewContainer=!1}YT(this._lView[ze],this._lView)}onDestroy(e){!function eV(n,e){if(256==(256&n[Ot]))throw new se(911,!1);null===n[Yc]&&(n[Yc]=[]),n[Yc].push(e)}(this._lView,e)}markForCheck(){Qm(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ot]&=-129}reattach(){this._lView[Ot]|=128}detectChanges(){jb(this._lView[ze],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vse(n,e){jm(n,e,e[Mt],2,null,null)}(this._lView[ze],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e}}class Qae extends tg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;jb(e[ze],e,e[ui],!1)}checkNoChanges(){}get context(){return null}}class IH extends qa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Qt(e);return new ng(t,this.ngModule)}}function DH(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class ece{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=jv(i);const r=this.injector.get(e,MM,i);return r!==MM||t===MM?r:this.parentInjector.get(e,t,i)}}class ng extends kz{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=DH(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return DH(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Lie(n){return n.map(kie).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof Ns?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new ece(e,s):e,a=o.get(Zm,null);if(null===a)throw new se(407,!1);const d={rendererFactory:a,sanitizer:o.get(Qoe,null),effectManager:o.get(SH,null),afterRenderEventManager:o.get(kM,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=i?function Sae(n,e,t,i){const s=i.get(Jz,!1)||t===to.ShadowDom,o=n.selectRootElement(e,s);return function Cae(n){dH(n)}(o),o}(h,i,this.componentDef.encapsulation,o):vb(h,f,function Jae(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),_=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let y=null;null!==p&&(y=CM(p,o,!0));const v=VM(0,null,null,1,0,null,null,null,null,null,null),b=zb(null,v,null,_,null,null,d,h,o,null,y);let M,S;IT(b);try{const x=this.componentDef;let O,C=null;x.findHostDirectiveDefs?(O=[],C=new Map,x.findHostDirectiveDefs(x,O,C),O.push(x)):O=[x];const w=function nce(n,e){const t=n[ze],i=$t;return n[i]=e,Lh(t,i,2,"#host",null)}(b,p),U=function ice(n,e,t,i,r,s,o){const a=r[ze];!function rce(n,e,t,i){for(const r of n)e.mergedAttrs=Cm(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Gb(e,e.mergedAttrs,!0),null!==t&&dz(i,t,e))}(i,n,e,o);let c=null;null!==e&&(c=CM(e,r[Xc]));const l=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=zb(r,uH(t),null,u,r[n.index],n,s,l,null,null,c);return a.firstCreatePass&&HM(a,n,i.length-1),Hb(r,d),r[n.index]=d}(w,p,x,O,b,d,h);S=Y3(v,$t),p&&function oce(n,e,t,i){if(i)hT(n,t,["ng-version",Fz.full]);else{const{attrs:r,classes:s}=function Fie(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!xo(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&hT(n,t,r),s&&s.length>0&&uz(n,t,s.join(" "))}}(h,x,p,i),void 0!==t&&function ace(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(S,this.ngContentSelectors,t),M=function sce(n,e,t,i,r,s){const o=hr(),a=r[ze],c=ms(o,r);pH(a,r,o,t,null,i);for(let u=0;u<t.length;u++)Ir(pu(r,a,o.directiveStart+u,o),r);mH(a,r,o),c&&Ir(c,r);const l=pu(r,a,o.directiveStart+o.componentOffset,o);if(n[ui]=r[ui]=l,null!==s)for(const u of s)u(l,e);return FM(a,o,n),l}(U,x,O,C,b,[cce]),WM(v,b,null)}finally{DT()}return new tce(this.componentType,M,Ph(S,b),b,S)}}class tce extends Woe{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Qae(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;$M(s[ze],s,r,e,t),this.previousInputValues.set(e,t),Qm(Rs(this._tNode.index,s))}}get injector(){return new Zr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function cce(){const n=hr();tb(he()[ze],n)}function mn(n){let e=function RH(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Mo(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=$b(n.inputs),o.inputTransforms=$b(n.inputTransforms),o.declaredInputs=$b(n.declaredInputs),o.outputs=$b(n.outputs);const a=r.hostBindings;a&&hce(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&uce(n,c),l&&dce(n,l),Uv(n.inputs,r.inputs),Uv(n.declaredInputs,r.declaredInputs),Uv(n.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Uv(o.inputTransforms,r.inputTransforms)),Mo(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===mn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function lce(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Cm(r.hostAttrs,t=Cm(t,r.hostAttrs))}}(i)}function $b(n){return n===Qo?{}:n===on?[]:n}function uce(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function dce(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function hce(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function kH(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function Wb(n){return!!qM(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function qM(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function oa(n,e,t){return n[e]=t}function Dr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function yu(n,e,t,i){const r=Dr(n,e,t);return Dr(n,e+1,i)||r}function Jr(n,e,t,i){const r=he();return Dr(r,mh(),e)&&(Jt(),sa(Kn(),r,n,e,t,i)),Jr}function Uh(n,e,t,i){return Dr(n,mh(),t)?e+xt(t)+i:Pt}function Bh(n,e,t,i,r,s){const a=yu(n,function Ga(){return yt.lFrame.bindingIndex}(),t,r);return ja(2),a?e+xt(t)+i+xt(r)+s:Pt}function kt(n,e,t,i,r,s,o,a){const c=he(),l=Jt(),u=n+$t,d=l.firstCreatePass?function Fce(n,e,t,i,r,s,o,a,c){const l=e.consts,u=Lh(e,n,4,o||null,Qc(l,a));zM(e,t,u,Qc(l,c)),tb(e,u);const d=u.tView=VM(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,r,s,o):l.data[u];na(d,!1);const h=KH(l,c,d,n);eb()&&Eb(l,c,h,d),Ir(h,c),Hb(c,c[u]=_H(h,c,h,d)),Xv(d)&&UM(l,c,d),null!=o&&BM(c,d,a)}let KH=function XH(n,e,t,i){return Jc(!0),e[Mt].createComment("")};function so(n){return fh(function Cre(){return yt.lFrame.contextLView}(),$t+n)}function Pe(n,e,t){const i=he();return Dr(i,mh(),e)&&Ls(Jt(),Kn(),i,n,e,i[Mt],t,!1),Pe}function JM(n,e,t,i,r){const o=r?"class":"style";$M(n,t,e.inputs[o],o,i)}function I(n,e,t,i){const r=he(),s=Jt(),o=$t+n,a=r[Mt],c=s.firstCreatePass?function zce(n,e,t,i,r,s){const o=e.consts,c=Lh(e,n,2,i,Qc(o,r));return zM(e,t,c,Qc(o,s)),null!==c.attrs&&Gb(c,c.attrs,!1),null!==c.mergedAttrs&&Gb(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,e,t,i):s.data[o],l=YH(s,r,c,a,e,n);r[o]=l;const u=Xv(c);return na(c,!0),dz(a,l,c),32!=(32&c.flags)&&eb()&&Eb(s,r,l,c),0===function gre(){return yt.lFrame.elementDepthCount}()&&Ir(l,r),function _re(){yt.lFrame.elementDepthCount++}(),u&&(UM(s,r,c),FM(s,c,r)),null!==i&&BM(r,c),I}function D(){let n=hr();CT()?xT():(n=n.parent,na(n,!1));const e=n;(function vre(n){return yt.skipHydrationRootTNode===n})(e)&&function Sre(){yt.skipHydrationRootTNode=null}(),function yre(){yt.lFrame.elementDepthCount--}();const t=Jt();return t.firstCreatePass&&(tb(t,n),pT(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Ure(n){return 0!=(8&n.flags)}(e)&&JM(t,e,he(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Bre(n){return 0!=(16&n.flags)}(e)&&JM(t,e,he(),e.stylesWithoutHost,!1),D}function $(n,e,t,i){return I(n,e,t,i),D(),$}let YH=(n,e,t,i,r,s)=>(Jc(!0),vb(i,r,function fV(){return yt.lFrame.currentNamespace}()));function ag(n,e,t){const i=he(),r=Jt(),s=n+$t,o=r.firstCreatePass?function jce(n,e,t,i,r){const s=e.consts,o=Qc(s,i),a=Lh(e,n,8,"ng-container",o);return null!==o&&Gb(a,o,!0),zM(e,t,a,Qc(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];na(o,!0);const a=QH(r,i,o,n);return i[s]=a,eb()&&Eb(r,i,a,o),Ir(a,i),Xv(o)&&(UM(r,i,o),FM(r,o,i)),null!=t&&BM(i,o),ag}function cg(){let n=hr();const e=Jt();return CT()?xT():(n=n.parent,na(n,!1)),e.firstCreatePass&&(tb(e,n),pT(n)&&e.queries.elementEnd(n)),cg}let QH=(n,e,t,i)=>(Jc(!0),XT(e[Mt],""));function jn(){return he()}function lg(n){return!!n&&"function"==typeof n.then}function JH(n){return!!n&&"function"==typeof n.subscribe}function it(n,e,t,i){const r=he(),s=Jt(),o=hr();return function t4(n,e,t,i,r,s,o){const a=Xv(i),l=n.firstCreatePass&&bH(n),u=e[ui],d=vH(e);let h=!0;if(3&i.type||o){const g=ms(i,e),m=o?o(g):g,_=d.length,y=o?b=>o(Rn(b[i.index])):i.index;let v=null;if(!o&&a&&(v=function qce(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[ah],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,h=!1;else{s=i4(i,e,u,s,!1);const b=t.listen(m,r,s);d.push(s,b),l&&l.push(r,y,_,_+1)}}else s=i4(i,e,u,s,!1);const f=i.outputs;let p;if(h&&null!==f&&(p=f[r])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const M=e[p[m]][p[m+1]].subscribe(s),S=d.length;d.push(s,M),l&&l.push(r,i.index,S,-(S+1))}}}(s,r,r[Mt],o,n,e,i),it}function n4(n,e,t,i){try{return ta(6,e,t),!1!==t(i)}catch(r){return EH(n,r),!1}finally{ta(7,e,t)}}function i4(n,e,t,i,r){return function s(o){if(o===Function)return i;Qm(n.componentOffset>-1?Rs(n.index,e):e);let c=n4(e,t,i,o),l=s.__ngNextListenerFn__;for(;l;)c=n4(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&o.preventDefault(),c}}function ot(n=1){return function Ire(n){return(yt.lFrame.contextLView=function Dre(n,e){for(;n>0;)e=e[lh],n--;return e}(n,yt.lFrame.contextLView))[ui]}(n)}function Kce(n,e){let t=null;const i=function Rie(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?E3(n,s,!0):Nie(i,s))return r}else t=r}return t}function Zb(n){const e=he()[di][Ar];if(!e.projection){const i=e.projection=Bm(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?Kce(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Qb(n,e=0,t){const i=he(),r=Jt(),s=Lh(r,$t+n,16,null,t||null);null===s.projection&&(s.projection=e),xT(),(!i[Ha]||ph())&&32!=(32&s.flags)&&function Kse(n,e,t){lz(e[Mt],0,e,t,QT(n,t,e),iz(t.parent||e[Ar],t,e))}(r,i,s)}function _s(n,e,t){return Xn(n,"",e,"",t),_s}function Xn(n,e,t,i,r){const s=he(),o=Uh(s,e,t,i);return o!==Pt&&Ls(Jt(),Kn(),s,n,o,s[Mt],r,!1),Xn}function Jb(n,e){return n<<17|e<<2}function tl(n){return n>>17&32767}function eA(n){return 2|n}function vu(n){return(131068&n)>>2}function tA(n,e){return-131069&n|e<<2}function nA(n){return 1|n}function h4(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?tl(s):vu(s),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];ele(n[a],e)&&(c=!0,n[a+1]=i?nA(u):eA(u)),a=i?tl(u):vu(u)}c&&(n[t+1]=i?eA(s):nA(s))}function ele(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Sh(n,e)>=0}const Bi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function f4(n){return n.substring(Bi.key,Bi.keyEnd)}function p4(n,e){const t=Bi.textEnd;return t===e?-1:(e=Bi.keyEnd=function rle(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Bi.key=e,t),Wh(n,e,t))}function Wh(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Za(n,e,t){return Do(n,e,t,!1),Za}function bu(n,e){return Do(n,e,null,!0),bu}function Io(n){Ro(fle,ca,n,!0)}function ca(n,e){for(let t=function nle(n){return function g4(n){Bi.key=0,Bi.keyEnd=0,Bi.value=0,Bi.valueEnd=0,Bi.textEnd=n.length}(n),p4(n,Wh(n,0,Bi.textEnd))}(e);t>=0;t=p4(e,t))Ps(n,f4(e),!0)}function Do(n,e,t,i){const r=he(),s=Jt(),o=ja(2);s.firstUpdatePass&&b4(s,n,o,i),e!==Pt&&Dr(r,o,e)&&E4(s,s.data[Yr()],r,r[Mt],n,r[o+1]=function mle(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Fi(Os(n)))),n}(e,t),i,o)}function Ro(n,e,t,i){const r=Jt(),s=ja(2);r.firstUpdatePass&&b4(r,null,s,i);const o=he();if(t!==Pt&&Dr(o,s,t)){const a=r.data[Yr()];if(C4(a,i)&&!v4(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=Qx(c,t||"")),JM(r,a,o,t,i)}else!function ple(n,e,t,i,r,s,o,a){r===Pt&&(r=on);let c=0,l=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=c<r.length?r[c+1]:void 0,f=l<s.length?s[l+1]:void 0;let g,p=null;u===d?(c+=2,l+=2,h!==f&&(p=d,g=f)):null===d||null!==u&&u<d?(c+=2,p=u):(l+=2,p=d,g=f),null!==p&&E4(n,e,t,i,p,g,o,a),u=c<r.length?r[c]:null,d=l<s.length?s[l]:null}}(r,a,o,o[Mt],o[s+1],o[s+1]=function hle(n,e,t){if(null==t||""===t)return on;const i=[],r=Os(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function v4(n,e){return e>=n.expandoStartIndex}function b4(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Yr()],o=v4(n,t);C4(s,i)&&null===e&&!o&&(e=!1),e=function cle(n,e,t,i){const r=MT(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=ug(t=iA(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=iA(r,n,e,t,i),null===s){let c=function lle(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==vu(i))return n[tl(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=iA(null,n,e,c[1],i),c=ug(c,e.attrs,i),function ule(n,e,t,i){n[tl(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function dle(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=ug(i,n[s].hostAttrs,t);return ug(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function Qce(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=tl(o),c=vu(o);n[i]=t;let u,l=!1;if(Array.isArray(t)?(u=t[1],(null===u||Sh(t,u)>0)&&(l=!0)):u=t,r)if(0!==c){const h=tl(n[a+1]);n[i+1]=Jb(h,a),0!==h&&(n[h+1]=tA(n[h+1],i)),n[a+1]=function Yce(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Jb(a,0),0!==a&&(n[a+1]=tA(n[a+1],i)),a=i;else n[i+1]=Jb(c,0),0===a?a=i:n[c+1]=tA(n[c+1],i),c=i;l&&(n[i+1]=eA(n[i+1])),h4(n,u,i,!0),h4(n,u,i,!1),function Jce(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Sh(s,e)>=0&&(t[i+1]=nA(t[i+1]))}(e,u,n,i,s),o=Jb(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function iA(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=ug(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function ug(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ps(n,o,!!t||e[++s]))}return void 0===n?null:n}function fle(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Ps(n,i,t)}function E4(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],u=function Zce(n){return 1==(1&n)}(l)?S4(c,e,t,r,vu(l),o):void 0;e0(u)||(e0(s)||function Xce(n){return 2==(2&n)}(l)&&(s=S4(c,null,t,r,a,o)),function Yse(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:el.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=el.Important),n.setStyle(t,i,r,s))}}(i,o,Jv(Yr(),t),r,s))}function S4(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let h=t[r+1];h===Pt&&(h=d?on:void 0);let f=d?BT(h,i):u===i?h:void 0;if(l&&!e0(f)&&(f=BT(c,i)),e0(f)&&(a=f,o))return a;const p=n[r+1];r=o?tl(p):vu(p)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=BT(c,i))}return a}function e0(n){return void 0!==n}function C4(n,e){return 0!=(n.flags&(e?8:16))}function P(n,e=""){const t=he(),i=Jt(),r=n+$t,s=i.firstCreatePass?Lh(i,r,1,e,null):i.data[r],o=x4(i,t,s,e,n);t[r]=o,eb()&&Eb(i,t,o,s),na(s,!1)}let x4=(n,e,t,i,r)=>(Jc(!0),function yb(n,e){return n.createText(e)}(e[Mt],i));function ys(n){return pi("",n,""),ys}function pi(n,e,t){const i=he(),r=Uh(i,n,e,t);return r!==Pt&&Ya(i,Yr(),r),pi}function rA(n,e,t,i,r){const s=he(),o=Bh(s,n,e,t,i,r);return o!==Pt&&Ya(s,Yr(),o),rA}function sA(n,e,t){Ro(Ps,ca,Uh(he(),n,e,t),!0)}function t0(n,e,t){const i=he();return Dr(i,mh(),e)&&Ls(Jt(),Kn(),i,n,e,i[Mt],t,!0),t0}function oA(n,e,t){const i=he();if(Dr(i,mh(),e)){const s=Jt(),o=Kn();Ls(s,o,i,n,e,wH(MT(s.data),o,i),t,!0)}return oA}const wu=void 0;var Lle=["en",[["a","p"],["AM","PM"],wu],[["AM","PM"],wu,wu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wu,"{1} 'at' {0}",wu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function kle(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let qh={};function es(n){const e=function Fle(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=G4(e);if(t)return t;const i=e.split("-")[0];if(t=G4(i),t)return t;if("en"===i)return Lle;throw new se(701,!1)}function G4(n){return n in qh||(qh[n]=Dn.ng&&Dn.ng.common&&Dn.ng.common.locales&&Dn.ng.common.locales[n]),qh[n]}var Pn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Pn||{});const Kh="en-US";let j4=Kh;function lA(n,e,t,i,r){if(n=vt(n),Array.isArray(n))for(let s=0;s<n.length;s++)lA(n[s],e,t,i,r);else{const s=Jt(),o=he(),a=hr();let c=_u(n)?n:vt(n.provide);const l=Dz(n),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(_u(n)||!n.multi){const f=new Nm(l,r,j),p=dA(c,e,r?u:u+h,d);-1===p?(LT(sb(a,o),s,c),uA(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=dA(c,e,u+h,d),p=dA(c,e,u,u+h),m=p>=0&&t[p];if(r&&!m||!r&&!(f>=0&&t[f])){LT(sb(a,o),s,c);const _=function kue(n,e,t,i,r){const s=new Nm(n,t,j);return s.multi=[],s.index=e,s.componentProviders=0,mG(s,r,i&&!t),s}(r?Nue:Oue,t.length,r,i,l);!r&&m&&(t[p].providerFactory=_),uA(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(_),o.push(_)}else uA(s,n,f>-1?f:p,mG(t[r?p:f],l,!r&&i));!r&&i&&m&&t[p].componentProviders++}}}function uA(n,e,t,i){const r=_u(e),s=function Ioe(n){return!!n.useClass}(e);if(r||s){const c=(s?vt(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function mG(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function dA(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Oue(n,e,t,i){return hA(this.multi,[])}function Nue(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=pu(t,t[ze],this.providerFactory.index,i);s=a.slice(0,o),hA(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],hA(r,s);return s}function hA(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function An(n,e=[]){return t=>{t.providersResolver=(i,r)=>function Pue(n,e,t){const i=Jt();if(i.firstCreatePass){const r=Mo(n);lA(t,i.data,i.blueprint,r,!0),lA(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Eu{}class gG{}class fA extends Eu{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new IH(this);const r=Ds(e);this._bootstrapComponents=Xa(r.bootstrap),this._r3Injector=Hz(e,t,[{provide:Eu,useValue:this},{provide:qa,useValue:this.componentFactoryResolver},...i],Fi(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class pA extends gG{constructor(e){super(),this.moduleType=e}create(e){return new fA(this.moduleType,e,[])}}class _G extends Eu{constructor(e){super(),this.componentFactoryResolver=new IH(this),this.instance=null;const t=new Pb([...e.providers,{provide:Eu,useValue:this},{provide:qa,useValue:this.componentFactoryResolver}],e.parent||Rb(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function mA(n,e,t=null){return new _G({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let Uue=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=Tz(0,t.type),r=i.length>0?mA([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=me({token:n,providedIn:"environment",factory:()=>new n(z(Ns))})}return n})();function gg(n){n.getStandaloneInjector=e=>e.get(Uue).getOrCreateStandaloneInjector(n)}function _A(n,e,t){const i=Xr()+n,r=he();return r[i]===Pt?oa(r,i,t?e.call(t):e()):function ig(n,e){return n[e]}(r,i)}function a0(n,e,t,i){return xG(he(),Xr(),n,e,t,i)}function CG(n,e,t,i,r){return function TG(n,e,t,i,r,s,o){const a=e+t;return yu(n,a,r,s)?oa(n,a+2,o?i.call(o,r,s):i(r,s)):_g(n,a+2)}(he(),Xr(),n,e,t,i,r)}function _g(n,e){const t=n[e];return t===Pt?void 0:t}function xG(n,e,t,i,r,s){const o=e+t;return Dr(n,o,r)?oa(n,o+1,s?i.call(s,r):i(r)):_g(n,o+1)}function MG(n,e,t,i,r,s,o,a){const c=e+t;return function qb(n,e,t,i,r){const s=yu(n,e,t,i);return Dr(n,e+2,r)||s}(n,c,r,s,o)?oa(n,c+3,a?i.call(a,r,s,o):i(r,s,o)):_g(n,c+3)}function nl(n,e){const t=Jt();let i;const r=n+$t;t.firstCreatePass?(i=function ede(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=hu(i.type)),a=hs(j);try{const c=rb(!1),l=s();return rb(c),function Vce(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,he(),r,l),l}finally{hs(a)}}function yg(n,e,t){const i=n+$t,r=he(),s=fh(r,i);return vg(r,i)?xG(r,Xr(),e,s.transform,t,s):s.transform(t)}function c0(n,e,t,i,r){const s=n+$t,o=he(),a=fh(o,s);return vg(o,s)?MG(o,Xr(),e,a.transform,t,i,r,a):a.transform(t,i,r)}function vg(n,e){return n[ze].data[e].pure}function rde(){return this._results[Symbol.iterator]()}class yA{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new qt)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=yA.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=rde)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function io(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Jre(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function ode(n,e,t,i=!0){const r=e[ze];if(function Hse(n,e,t,i){const r=ur+i,s=t.length;i>0&&(t[r-1][To]=e),i<s-ur?(e[To]=t[r],AV(t,ur+i,e)):(t.push(e),e[To]=null),e[Gn]=t;const o=e[Mm];null!==o&&t!==o&&function Gse(n,e){const t=n[dh];e[di]!==e[Gn][Gn][di]&&(n[I3]=!0),null===t?n[dh]=[e]:t.push(e)}(o,e);const a=e[Jo];null!==a&&a.insertView(n),e[Ot]|=128}(r,e,n,t),i){const s=eM(t,n),o=e[Mt],a=wb(o,n[ea]);null!==a&&function Bse(n,e,t,i,r,s){i[ei]=r,i[Ar]=e,jm(n,i,t,1,r,s)}(r,n[Ar],o,e,a,s)}}let la=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=lde}return n})();const ade=la,cde=class extends ade{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function sde(n,e,t,i){const r=e.tView,a=zb(n,r,t,4096&n[Ot]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Mm]=n[e.index];const l=n[Jo];return null!==l&&(a[Jo]=l.createEmbeddedView(r)),WM(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new tg(r)}};function lde(){return l0(hr(),he())}function l0(n,e){return 4&n.type?new cde(e,n,Ph(n,e)):null}let oo=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=mde}return n})();function mde(){return LG(hr(),he())}const gde=oo,NG=class extends gde{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Ph(this._hostTNode,this._hostLView)}get injector(){return new Zr(this._hostTNode,this._hostLView)}get parentInjector(){const e=ob(this._hostTNode,this._hostLView);if(OT(e)){const t=Lm(e,this._hostLView),i=km(e);return new Zr(t[ze].data[i+8],t)}return new Zr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=kG(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ur}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,s){const o=e&&!function Um(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const g=t||{};a=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const c=o?e:new ng(Qt(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const m=(o?l:this.parentInjector).get(Ns,null);m&&(s=m)}Qt(c.componentType??{});const f=c.create(l,r,null,s);return this.insertImpl(f.hostView,a,false),f}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function fre(n){return Kr(n[Gn])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=r[Gn],u=new NG(l,l[Ar],l[Gn]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return ode(a,r,o,!i),e.attachToViewContainerRef(),AV(vA(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=kG(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=bb(this._lContainer,t);i&&(lb(vA(this._lContainer),t),YT(i[ze],i))}detach(e){const t=this._adjustIndex(e,-1),i=bb(this._lContainer,t);return i&&null!=lb(vA(this._lContainer),t)?new tg(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function kG(n){return n[8]}function vA(n){return n[8]||(n[8]=[])}function LG(n,e){let t;const i=e[n.index];return Kr(i)?t=i:(t=_H(i,e,null,n),e[n.index]=t,Hb(e,t)),FG(t,e,n,i),new NG(t,n,e)}let FG=function UG(n,e,t,i){if(n[ea])return;let r;r=8&t.type?Rn(i):function _de(n,e){const t=n[Mt],i=t.createComment(""),r=ms(e,n);return mu(t,wb(t,r),i,function qse(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[ea]=r};class bA{constructor(e){this.queryList=e,this.matches=null}clone(){return new bA(this.queryList)}setDirty(){this.queryList.setDirty()}}class wA{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new wA(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==GG(e,t).matches&&this.queries[t].setDirty()}}class BG{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class EA{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new EA(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class SA{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new SA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,bde(t,s)),this.matchTNodeWithReadOption(e,t,ab(t,e,s,!1,!1))}else i===la?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ab(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===fi||r===oo||r===la&&4&t.type)this.addMatch(t.index,-2);else{const s=ab(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function bde(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function Ede(n,e,t,i){return-1===t?function wde(n,e){return 11&n.type?Ph(n,e):4&n.type?l0(n,e):null}(e,n):-2===t?function Sde(n,e,t){return t===fi?Ph(e,n):t===la?l0(e,n):t===oo?LG(e,n):void 0}(n,e,i):pu(n,n[ze],t,e)}function VG(n,e,t,i){const r=e[Jo].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:Ede(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function CA(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=VG(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let d=ur;d<u.length;d++){const h=u[d];h[Mm]===h[Gn]&&CA(h[ze],h,l,i)}if(null!==u[dh]){const d=u[dh];for(let h=0;h<d.length;h++){const f=d[h];CA(f[ze],f,l,i)}}}}}return i}function ao(n){const e=he(),t=Jt(),i=aV();AT(i+1);const r=GG(t,i);if(n.dirty&&function dre(n){return 4==(4&n[Ot])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?CA(t,e,i,[]):VG(t,e,r,i);n.reset(s,Yoe),n.notifyOnChanges()}return!0}return!1}function ua(n,e,t){const i=Jt();i.firstCreatePass&&(HG(i,new BG(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),zG(i,he(),e)}function xA(n,e,t,i){const r=Jt();if(r.firstCreatePass){const s=hr();HG(r,new BG(e,t,i),s.index),function xde(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}zG(r,he(),t)}function co(){return function Cde(n,e){return n[Jo].queries[e].queryList}(he(),aV())}function zG(n,e,t){const i=new yA(4==(4&t));(function Mae(n,e,t,i){const r=vH(e);r.push(t),n.firstCreatePass&&bH(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Jo]&&(e[Jo]=new wA),e[Jo].queries.push(new bA(i))}function HG(n,e,t){null===n.queries&&(n.queries=new EA),n.queries.track(new SA(e,t))}function GG(n,e){return n.queries.getByIndex(e)}const wg=new Se("Application Initializer");let RA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Ie(wg,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(lg(s))t.push(s);else if(JH(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),a5=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Qa=new Se("LocaleId",{providedIn:"root",factory:()=>Ie(Qa,jt.Optional|jt.SkipSelf)||function qde(){return typeof $localize<"u"&&$localize.locale||Kh}()}),Kde=new Se("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let h0=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new us(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Yde{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let c5=(()=>{class n{compileModuleSync(t){return new pA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Xa(Ds(t).declarations).reduce((o,a)=>{const c=Qt(a);return c&&o.push(new ng(c)),o},[]);return new Yde(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const h5=new Se(""),p0=new Se("");let LA,NA=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,LA||(function ghe(n){LA=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(z(pt),z(kA),z(p0))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})(),kA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return LA?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),il=null;const f5=new Se("AllowMultipleToken"),FA=new Se("PlatformDestroyListeners"),UA=new Se("appBootstrapListener");class m5{constructor(e,t){this.name=e,this.token=t}}function _5(n,e,t=[]){const i=`Platform: ${e}`,r=new Se(i);return(s=[])=>{let o=BA();if(!o||o.injector.get(f5,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function vhe(n){if(il&&!il.get(f5,!1))throw new se(400,!1);(function p5(){!function Qie(n){V3=n}(()=>{throw new se(600,!1)})})(),il=n;const e=n.get(v5);(function g5(n){n.get(Rz,null)?.forEach(t=>t())})(n)}(function y5(n=[],e){return Tn.create({name:e,providers:[{provide:dM,useValue:"platform"},{provide:FA,useValue:new Set([()=>il=null])},...n]})}(a,i))}return function whe(n){const e=BA();if(!e)throw new se(401,!1);return e}()}}function BA(){return il?.get(v5)??null}let v5=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function Ehe(n="zone.js",e){return"noop"===n?new uae:"zone.js"===n?new pt(e):n}(i?.ngZone,function b5(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function Fue(n,e,t){return new fA(n,e,t)}(t.moduleType,this.injector,function x5(n){return[{provide:pt,useFactory:n},{provide:Km,multi:!0,useFactory:()=>{const e=Ie(Che,{optional:!0});return()=>e.initialize()}},{provide:C5,useFactory:She},{provide:qz,useFactory:Kz}]}(()=>r)),o=s.injector.get(Ka,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{m0(this._modules,s),a.unsubscribe()})}),function w5(n,e,t){try{const i=t();return lg(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(RA);return a.runInitializers(),a.donePromise.then(()=>(function $4(n){eo(n,"Expected localeId to be defined"),"string"==typeof n&&(j4=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Qa,Kh)||Kh),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=E5({},i);return function _he(n,e,t){const i=new pA(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(da);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new se(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(FA,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(z(Tn))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function E5(n,e){return Array.isArray(e)?e.reduce(E5,n):{...n,...e}}let da=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ie(C5),this.zoneIsStable=Ie(qz),this.componentTypes=[],this.components=[],this.isStable=Ie(h0).hasPendingTasks.pipe(ds(t=>t?Ye(!1):this.zoneIsStable),s3(),Yx()),this._injector=Ie(Ns)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof kz;if(!this._injector.get(RA).done)throw!r&&function oh(n){const e=Qt(n)||lr(n)||qr(n);return null!==e&&e.standalone}(t),new se(405,!1);let o;o=r?t:this._injector.get(qa).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function yhe(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Eu),l=o.create(Tn.NULL,[],i||o.selector,a),u=l.location.nativeElement,d=l.injector.get(h5,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),m0(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new se(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;m0(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(UA,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>m0(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function m0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const C5=new Se("",{providedIn:"root",factory:()=>Ie(Ka).handleError.bind(void 0)});function She(){const n=Ie(pt),e=Ie(Ka);return t=>n.runOutsideAngular(()=>e.handleError(t))}let Che=(()=>{class n{constructor(){this.zone=Ie(pt),this.applicationRef=Ie(da)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Su=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=The}return n})();function The(n){return function Mhe(n,e,t){if(du(n)&&!t){const i=Rs(n.index,e);return new tg(i,i)}return 47&n.type?new tg(e[di],e):null}(hr(),he(),16==(16&n))}class I5{constructor(){}supports(e){return Wb(e)}create(e){return new Ohe(e)}}const Phe=(n,e)=>e;class Ohe{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Phe}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<R5(i,r,s)?t:i,a=R5(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<l&&(s[h]=f+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Wb(e))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function vce(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Nhe(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new D5),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new D5),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Nhe{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class khe{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class D5{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new khe,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function R5(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class P5{constructor(){}supports(e){return e instanceof Map||qM(e)}create(){return new Lhe}}class Lhe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||qM(e)))throw new se(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new Fhe(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class Fhe{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function O5(){return new y0([new I5])}let y0=(()=>{class n{static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:O5});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||O5()),deps:[[n,new db,new hi]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new se(901,!1)}}return n})();function N5(){return new Sg([new P5])}let Sg=(()=>{class n{static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:N5});constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||N5()),deps:[[n,new db,new hi]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new se(901,!1)}}return n})();const Vhe=_5(null,"core",[]);let zhe=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(z(da))};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({})}return n})();function Zh(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let $A=null;function rl(){return $A}class tfe{}const rn=new Se("DocumentToken");let WA=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return Ie(ife)},providedIn:"platform"})}return n})();const nfe=new Se("Location Initialized");let ife=(()=>{class n extends WA{constructor(){super(),this._doc=Ie(rn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return rl().getBaseHref(this._doc)}onPopState(t){const i=rl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=rl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function qA(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G5(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ja(n){return n&&"?"!==n[0]?"?"+n:n}let xu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return Ie($5)},providedIn:"root"})}return n})();const j5=new Se("appBaseHref");let $5=(()=>{class n extends xu{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ie(rn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return qA(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ja(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Ja(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Ja(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(z(WA),z(j5,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rfe=(()=>{class n extends xu{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=qA(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Ja(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Ja(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(z(WA),z(j5,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})(),b0=(()=>{class n{constructor(t){this._subject=new qt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function afe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G5(W5(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ja(i))}normalize(t){return n.stripTrailingSlash(function ofe(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,W5(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ja(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ja(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=Ja;static#t=this.joinWithSlash=qA;static#n=this.stripTrailingSlash=G5;static#i=this.\u0275fac=function(i){return new(i||n)(z(xu))};static#r=this.\u0275prov=me({token:n,factory:function(){return function sfe(){return new b0(z(xu))}()},providedIn:"root"})}return n})();function W5(n){return n.replace(/\/index.html$/,"")}const q5={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var w0=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(w0||{}),ns=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ns||{}),In=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(In||{}),Fs=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Fs||{}),mi=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(mi||{});function E0(n,e){return uo(es(n)[Pn.DateFormat],e)}function S0(n,e){return uo(es(n)[Pn.TimeFormat],e)}function C0(n,e){return uo(es(n)[Pn.DateTimeFormat],e)}function lo(n,e){const t=es(n),i=t[Pn.NumberSymbols][e];if(typeof i>"u"){if(e===mi.CurrencyDecimal)return t[Pn.NumberSymbols][mi.Decimal];if(e===mi.CurrencyGroup)return t[Pn.NumberSymbols][mi.Group]}return i}function K5(n){if(!n[Pn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Pn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function uo(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function XA(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const wfe=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Cg={},Efe=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ec=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(ec||{}),dn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(dn||{}),hn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(hn||{});function Sfe(n,e,t,i){let r=function Pfe(n){if(Z5(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return x0(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(wfe))return function Ofe(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,c,l),e}(i)}const e=new Date(n);if(!Z5(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=tc(t,e)||e;let a,o=[];for(;e;){if(a=Efe.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let c=r.getTimezoneOffset();i&&(c=Y5(i,c),r=function Rfe(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function Dfe(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(Y5(e,r)-r))}(r,i,!0));let l="";return o.forEach(u=>{const d=function Ife(n){if(ZA[n])return ZA[n];let e;switch(n){case"G":case"GG":case"GGG":e=On(hn.Eras,In.Abbreviated);break;case"GGGG":e=On(hn.Eras,In.Wide);break;case"GGGGG":e=On(hn.Eras,In.Narrow);break;case"y":e=xi(dn.FullYear,1,0,!1,!0);break;case"yy":e=xi(dn.FullYear,2,0,!0,!0);break;case"yyy":e=xi(dn.FullYear,3,0,!1,!0);break;case"yyyy":e=xi(dn.FullYear,4,0,!1,!0);break;case"Y":e=I0(1);break;case"YY":e=I0(2,!0);break;case"YYY":e=I0(3);break;case"YYYY":e=I0(4);break;case"M":case"L":e=xi(dn.Month,1,1);break;case"MM":case"LL":e=xi(dn.Month,2,1);break;case"MMM":e=On(hn.Months,In.Abbreviated);break;case"MMMM":e=On(hn.Months,In.Wide);break;case"MMMMM":e=On(hn.Months,In.Narrow);break;case"LLL":e=On(hn.Months,In.Abbreviated,ns.Standalone);break;case"LLLL":e=On(hn.Months,In.Wide,ns.Standalone);break;case"LLLLL":e=On(hn.Months,In.Narrow,ns.Standalone);break;case"w":e=YA(1);break;case"ww":e=YA(2);break;case"W":e=YA(1,!0);break;case"d":e=xi(dn.Date,1);break;case"dd":e=xi(dn.Date,2);break;case"c":case"cc":e=xi(dn.Day,1);break;case"ccc":e=On(hn.Days,In.Abbreviated,ns.Standalone);break;case"cccc":e=On(hn.Days,In.Wide,ns.Standalone);break;case"ccccc":e=On(hn.Days,In.Narrow,ns.Standalone);break;case"cccccc":e=On(hn.Days,In.Short,ns.Standalone);break;case"E":case"EE":case"EEE":e=On(hn.Days,In.Abbreviated);break;case"EEEE":e=On(hn.Days,In.Wide);break;case"EEEEE":e=On(hn.Days,In.Narrow);break;case"EEEEEE":e=On(hn.Days,In.Short);break;case"a":case"aa":case"aaa":e=On(hn.DayPeriods,In.Abbreviated);break;case"aaaa":e=On(hn.DayPeriods,In.Wide);break;case"aaaaa":e=On(hn.DayPeriods,In.Narrow);break;case"b":case"bb":case"bbb":e=On(hn.DayPeriods,In.Abbreviated,ns.Standalone,!0);break;case"bbbb":e=On(hn.DayPeriods,In.Wide,ns.Standalone,!0);break;case"bbbbb":e=On(hn.DayPeriods,In.Narrow,ns.Standalone,!0);break;case"B":case"BB":case"BBB":e=On(hn.DayPeriods,In.Abbreviated,ns.Format,!0);break;case"BBBB":e=On(hn.DayPeriods,In.Wide,ns.Format,!0);break;case"BBBBB":e=On(hn.DayPeriods,In.Narrow,ns.Format,!0);break;case"h":e=xi(dn.Hours,1,-12);break;case"hh":e=xi(dn.Hours,2,-12);break;case"H":e=xi(dn.Hours,1);break;case"HH":e=xi(dn.Hours,2);break;case"m":e=xi(dn.Minutes,1);break;case"mm":e=xi(dn.Minutes,2);break;case"s":e=xi(dn.Seconds,1);break;case"ss":e=xi(dn.Seconds,2);break;case"S":e=xi(dn.FractionalSeconds,1);break;case"SS":e=xi(dn.FractionalSeconds,2);break;case"SSS":e=xi(dn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=M0(ec.Short);break;case"ZZZZZ":e=M0(ec.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=M0(ec.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=M0(ec.Long);break;default:return null}return ZA[n]=e,e}(u);l+=d?d(r,t,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function x0(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function tc(n,e){const t=function lfe(n){return es(n)[Pn.LocaleId]}(n);if(Cg[t]=Cg[t]||{},Cg[t][e])return Cg[t][e];let i="";switch(e){case"shortDate":i=E0(n,Fs.Short);break;case"mediumDate":i=E0(n,Fs.Medium);break;case"longDate":i=E0(n,Fs.Long);break;case"fullDate":i=E0(n,Fs.Full);break;case"shortTime":i=S0(n,Fs.Short);break;case"mediumTime":i=S0(n,Fs.Medium);break;case"longTime":i=S0(n,Fs.Long);break;case"fullTime":i=S0(n,Fs.Full);break;case"short":const r=tc(n,"shortTime"),s=tc(n,"shortDate");i=T0(C0(n,Fs.Short),[r,s]);break;case"medium":const o=tc(n,"mediumTime"),a=tc(n,"mediumDate");i=T0(C0(n,Fs.Medium),[o,a]);break;case"long":const c=tc(n,"longTime"),l=tc(n,"longDate");i=T0(C0(n,Fs.Long),[c,l]);break;case"full":const u=tc(n,"fullTime"),d=tc(n,"fullDate");i=T0(C0(n,Fs.Full),[u,d])}return i&&(Cg[t][e]=i),i}function T0(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function Po(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function xi(n,e,t=0,i=!1,r=!1){return function(s,o){let a=function xfe(n,e){switch(n){case dn.FullYear:return e.getFullYear();case dn.Month:return e.getMonth();case dn.Date:return e.getDate();case dn.Hours:return e.getHours();case dn.Minutes:return e.getMinutes();case dn.Seconds:return e.getSeconds();case dn.FractionalSeconds:return e.getMilliseconds();case dn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===dn.Hours)0===a&&-12===t&&(a=12);else if(n===dn.FractionalSeconds)return function Cfe(n,e){return Po(n,3).substring(0,e)}(a,e);const c=lo(o,mi.MinusSign);return Po(a,e,c,i,r)}}function On(n,e,t=ns.Format,i=!1){return function(r,s){return function Tfe(n,e,t,i,r,s){switch(t){case hn.Months:return function hfe(n,e,t){const i=es(n),s=uo([i[Pn.MonthsFormat],i[Pn.MonthsStandalone]],e);return uo(s,t)}(e,r,i)[n.getMonth()];case hn.Days:return function dfe(n,e,t){const i=es(n),s=uo([i[Pn.DaysFormat],i[Pn.DaysStandalone]],e);return uo(s,t)}(e,r,i)[n.getDay()];case hn.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const l=function gfe(n){const e=es(n);return K5(e),(e[Pn.ExtraData][2]||[]).map(i=>"string"==typeof i?XA(i):[XA(i[0]),XA(i[1])])}(e),u=function _fe(n,e,t){const i=es(n);K5(i);const s=uo([i[Pn.ExtraData][0],i[Pn.ExtraData][1]],e)||[];return uo(s,t)||[]}(e,r,i),d=l.findIndex(h=>{if(Array.isArray(h)){const[f,p]=h,g=o>=f.hours&&a>=f.minutes,m=o<p.hours||o===p.hours&&a<p.minutes;if(f.hours<p.hours){if(g&&m)return!0}else if(g||m)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function ufe(n,e,t){const i=es(n),s=uo([i[Pn.DayPeriodsFormat],i[Pn.DayPeriodsStandalone]],e);return uo(s,t)}(e,r,i)[o<12?0:1];case hn.Eras:return function ffe(n,e){return uo(es(n)[Pn.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function M0(n){return function(e,t,i){const r=-1*i,s=lo(t,mi.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case ec.Short:return(r>=0?"+":"")+Po(o,2,s)+Po(Math.abs(r%60),2,s);case ec.ShortGMT:return"GMT"+(r>=0?"+":"")+Po(o,1,s);case ec.Long:return"GMT"+(r>=0?"+":"")+Po(o,2,s)+":"+Po(Math.abs(r%60),2,s);case ec.Extended:return 0===i?"Z":(r>=0?"+":"")+Po(o,2,s)+":"+Po(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const Mfe=0,A0=4;function X5(n){return x0(n.getFullYear(),n.getMonth(),n.getDate()+(A0-n.getDay()))}function YA(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=X5(t),o=function Afe(n){const e=x0(n,Mfe,1).getDay();return x0(n,0,1+(e<=A0?A0:A0+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return Po(r,n,lo(i,mi.MinusSign))}}function I0(n,e=!1){return function(t,i){return Po(X5(t).getFullYear(),n,lo(i,mi.MinusSign),e)}}const ZA={};function Y5(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Z5(n){return n instanceof Date&&!isNaN(n.valueOf())}const Nfe=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Q5=22,D0=".",xg="0",kfe=";",Lfe=",",QA="#";function Ufe(n,e,t,i,r){const o=function eI(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(kfe),r=i[0],s=i[1],o=-1!==r.indexOf(D0)?r.split(D0):[r.substring(0,r.lastIndexOf(xg)+1),r.substring(r.lastIndexOf(xg)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(QA));for(let u=0;u<c.length;u++){const d=c.charAt(u);d===xg?t.minFrac=t.maxFrac=u+1:d===QA?t.maxFrac=u+1:t.posSuf+=d}const l=a.split(Lfe);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){const u=r.length-t.posPre.length-t.posSuf.length,d=s.indexOf(QA);t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function KA(n,e){return es(n)[Pn.NumberFormats][e]}(e,w0.Currency),lo(e,mi.MinusSign));return o.minFrac=function bfe(n){let e;const t=q5[n];return t&&(e=t[2]),"number"==typeof e?e:2}(i),o.maxFrac=o.minFrac,function JA(n,e,t,i,r,s,o=!1){let a="",c=!1;if(isFinite(n)){let l=function Hfe(n){let i,r,s,o,a,e=Math.abs(n)+"",t=0;for((r=e.indexOf(D0))>-1&&(e=e.replace(D0,"")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;e.charAt(s)===xg;s++);if(s===(a=e.length))i=[0],r=1;else{for(a--;e.charAt(a)===xg;)a--;for(r-=s,i=[],o=0;s<=a;s++,o++)i[o]=Number(e.charAt(s))}return r>Q5&&(i=i.splice(0,Q5-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}(n);o&&(l=function zfe(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(l));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){const y=s.match(Nfe);if(null===y)throw new Error(`${s} is not a valid digit info`);const v=y[1],b=y[3],M=y[5];null!=v&&(u=tI(v)),null!=b&&(d=tI(b)),null!=M?h=tI(M):null!=b&&d>h&&(h=d)}!function Gfe(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen;const s=Math.min(Math.max(e,r),t);let o=s+n.integerLen,a=i[o];if(o>0){i.splice(Math.max(n.integerLen,o));for(let d=o;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,o=s+1),i[0]=0;for(let d=1;d<o;d++)i[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[o-1]++;for(;r<Math.max(0,s);r++)i.push(0);let c=0!==s;const l=e+n.integerLen,u=i.reduceRight(function(d,h,f,p){return p[f]=(h+=d)<10?h:h-10,c&&(0===p[f]&&f>=l?p.pop():c=!1),h>=10?1:0},0);u&&(i.unshift(u),n.integerLen++)}(l,d,h);let f=l.digits,p=l.integerLen;const g=l.exponent;let m=[];for(c=f.every(y=>!y);p<u;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?m=f.splice(p,f.length):(m=f,f=[0]);const _=[];for(f.length>=e.lgSize&&_.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)_.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&_.unshift(f.join("")),a=_.join(lo(t,i)),m.length&&(a+=lo(t,r)+m.join("")),g&&(a+=lo(t,mi.Exponential)+"+"+g)}else a=lo(t,mi.Infinity);return a=n<0&&!c?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,o,e,mi.CurrencyGroup,mi.CurrencyDecimal,r).replace("\xa4",t).replace("\xa4","").trim()}function tI(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function tj(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}const iI=/\s+/,nj=[];let Jh=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=nj,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(iI):nj}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(iI):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(iI).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(j(y0),j(Sg),j(fi),j(Ao))};static#t=this.\u0275dir=dt({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Wfe{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Tg=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Wfe(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),rj(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{rj(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(j(oo),j(la),j(y0))};static#t=this.\u0275dir=dt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function rj(n,e){n.context.$implicit=e.item}let Oo=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new qfe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sj("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sj("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(j(oo),j(la))};static#t=this.\u0275dir=dt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class qfe{constructor(){this.$implicit=null,this.ngIf=null}}function sj(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Fi(e)}'.`)}let oI=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:el.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||n)(j(fi),j(Sg),j(Ao))};static#t=this.\u0275dir=dt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})();function No(n,e){return new se(2100,!1)}class Zfe{createSubscription(e,t){return G3(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){G3(()=>e.unsubscribe())}}class Qfe{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Jfe=new Qfe,epe=new Zfe;let aj=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(lg(t))return Jfe;if(JH(t))return epe;throw No()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(j(Su,16))};static#t=this.\u0275pipe=Wr({name:"async",type:n,pure:!1,standalone:!0})}return n})(),cj=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw No();return t.toUpperCase()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=Wr({name:"uppercase",type:n,pure:!0,standalone:!0})}return n})();const spe=new Se("DATE_PIPE_DEFAULT_TIMEZONE"),ope=new Se("DATE_PIPE_DEFAULT_OPTIONS");let lj=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,s){if(null==t||""===t||t!=t)return null;try{return Sfe(t,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw No()}}static#e=this.\u0275fac=function(i){return new(i||n)(j(Qa,16),j(spe,24),j(ope,24))};static#t=this.\u0275pipe=Wr({name:"date",type:n,pure:!0,standalone:!0})}return n})(),R0=(()=>{class n{constructor(t,i="USD"){this._locale=t,this._defaultCurrencyCode=i}transform(t,i=this._defaultCurrencyCode,r="symbol",s,o){if(!function aI(n){return!(null==n||""===n||n!=n)}(t))return null;o=o||this._locale,"boolean"==typeof r&&(r=r?"symbol":"code");let a=i||this._defaultCurrencyCode;"code"!==r&&(a="symbol"===r||"symbol-narrow"===r?function yfe(n,e,t="en"){const i=function pfe(n){return es(n)[Pn.Currencies]}(t)[n]||q5[n]||[],r=i[1];return"narrow"===e&&"string"==typeof r?r:i[0]||n}(a,"symbol"===r?"wide":"narrow",o):r);try{return Ufe(function cI(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),o,a,i,s)}catch(c){throw No()}}static#e=this.\u0275fac=function(i){return new(i||n)(j(Qa,16),j(Kde,16))};static#t=this.\u0275pipe=Wr({name:"currency",type:n,pure:!0,standalone:!0})}return n})();let Rr=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({})}return n})();const dj="browser";function P0(n){return n===dj}function hj(n){return"server"===n}let ype=(()=>{class n{static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:()=>new vpe(z(rn),window)})}return n})();class vpe{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function bpe(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class fj{}class Gpe extends tfe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class dI extends Gpe{static makeCurrent(){!function efe(n){$A||($A=n)}(new dI)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function jpe(){return Ag=Ag||document.querySelector("base"),Ag?Ag.getAttribute("href"):null}();return null==t?null:function $pe(n){k0=k0||document.createElement("a"),k0.setAttribute("href",n);const e=k0.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ag=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tj(document.cookie,e)}}let k0,Ag=null,qpe=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const hI=new Se("EventManagerPlugins");let yj=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new se(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(z(hI),z(pt))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();class vj{constructor(e){this._doc=e}}const fI="ng-app-id";let bj=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=hj(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${fI}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(fI),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(fI,this.appId),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(z(rn),z(Ob),z(gM,8),z(ks))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const pI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mI=/%COMP%/g,Zpe=new Se("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ej(n,e){return e.map(t=>t.replace(mI,n))}let gI=(()=>{class n{constructor(t,i,r,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=hj(a),this.defaultRenderer=new _I(t,o,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===to.ShadowDom&&(i={...i,encapsulation:to.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof Cj?r.applyToHost(t):r instanceof yI&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case to.Emulated:s=new Cj(c,l,i,this.appId,u,o,a,d);break;case to.ShadowDom:return new tme(c,l,t,i,o,a,this.nonce,d);default:s=new yI(c,l,i,u,o,a,d)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(z(yj),z(bj),z(Ob),z(Zpe),z(rn),z(ks),z(pt),z(gM))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();class _I{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(pI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Sj(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Sj(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new se(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=pI[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=pI[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(el.DashCase|el.Important)?e.style.setProperty(t,i,r&el.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&el.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=rl().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Sj(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class tme extends _I{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Ej(r.id,r.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class yI extends _I{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?Ej(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Cj extends yI{constructor(e,t,i,r,s,o,a,c){const l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=function Qpe(n){return"_ngcontent-%COMP%".replace(mI,n)}(l),this.hostAttr=function Jpe(n){return"_nghost-%COMP%".replace(mI,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let nme=(()=>{class n extends vj{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(z(rn))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const xj=["alt","control","meta","shift"],ime={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rme={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let sme=(()=>{class n extends vj{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rl().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),xj.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=ime[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),xj.forEach(o=>{o!==r&&(0,rme[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(z(rn))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const Mj=[{provide:ks,useValue:dj},{provide:Rz,useValue:function ome(){dI.makeCurrent()},multi:!0},{provide:rn,useFactory:function cme(){return function toe(n){iM=n}(document),document},deps:[]}],lme=_5(Vhe,"browser",Mj),ume=new Se(""),Aj=[{provide:p0,useClass:class Wpe{addToWindow(e){Dn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new se(5103,!1);return s},Dn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Dn.getAllAngularRootElements=()=>e.getAllRootElements(),Dn.frameworkStabilizers||(Dn.frameworkStabilizers=[]),Dn.frameworkStabilizers.push(i=>{const r=Dn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?rl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h5,useClass:NA,deps:[pt,kA,p0]},{provide:NA,useClass:NA,deps:[pt,kA,p0]}],Ij=[{provide:dM,useValue:"root"},{provide:Ka,useFactory:function ame(){return new Ka},deps:[]},{provide:hI,useClass:nme,multi:!0,deps:[rn,pt,ks]},{provide:hI,useClass:sme,multi:!0,deps:[rn]},gI,bj,yj,{provide:Zm,useExisting:gI},{provide:fj,useClass:qpe,deps:[]},[]];let Dj=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ob,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(z(ume,12))};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({providers:[...Ij,...Aj],imports:[Rr,zhe]})}return n})(),vI=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(z(rn))};static#t=this.\u0275prov=me({token:n,factory:function(i){let r=null;return r=i?new i:function hme(){return new vI(z(rn))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;let L0=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(i){let r=null;return r=i?new(i||n):z(Oj),r},providedIn:"root"})}return n})(),Oj=(()=>{class n extends L0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Qr.NONE:return i;case Qr.HTML:return ra(i,"HTML")?Os(i):wz(this._doc,String(i)).toString();case Qr.STYLE:return ra(i,"Style")?Os(i):i;case Qr.SCRIPT:if(ra(i,"Script"))return Os(i);throw new se(5200,!1);case Qr.URL:return ra(i,"URL")?Os(i):Tb(String(i));case Qr.RESOURCE_URL:if(ra(i,"ResourceURL"))return Os(i);throw new se(5201,!1);default:throw new se(5202,!1)}}bypassSecurityTrustHtml(t){return function coe(n){return new noe(n)}(t)}bypassSecurityTrustStyle(t){return function loe(n){return new ioe(n)}(t)}bypassSecurityTrustScript(t){return function uoe(n){return new roe(n)}(t)}bypassSecurityTrustUrl(t){return function doe(n){return new soe(n)}(t)}bypassSecurityTrustResourceUrl(t){return function hoe(n){return new ooe(n)}(t)}static#e=this.\u0275fac=function(i){return new(i||n)(z(rn))};static#t=this.\u0275prov=me({token:n,factory:function(i){let r=null;return r=i?new i:function gme(n){return new Oj(n.get(rn))}(z(Tn)),r},providedIn:"root"})}return n})();function Tu(n,e){return Yt(e)?Li(n,e,1):Li(n,1)}function Ti(n,e){return Hn((t,i)=>{let r=0;t.subscribe(Mn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Ig(n){return Hn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class F0{}class ef{}class ho{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ho?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ho;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ho?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class _me{encodeKey(e){return kj(e)}encodeValue(e){return kj(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const vme=/%(\d[a-f0-9])/gi,bme={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kj(n){return encodeURIComponent(n).replace(vme,(e,t)=>bme[t]??e)}function U0(n){return`${n}`}class nc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new _me,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yme(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(U0):[U0(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new nc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(U0(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(U0(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class wme{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Lj(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Fj(n){return typeof Blob<"u"&&n instanceof Blob}function Uj(n){return typeof FormData<"u"&&n instanceof FormData}class Mu{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Eme(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ho),this.context||(this.context=new wme),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new nc,this.urlWithParams=t}serializeBody(){return null===this.body?null:Lj(this.body)||Fj(this.body)||Uj(this.body)||function Sme(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof nc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Uj(this.body)?null:Fj(this.body)?this.body.type||null:Lj(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),l)),new Mu(t,i,s,{params:l,headers:c,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var tf=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(tf||{});class wI{constructor(e,t=200,i="OK"){this.headers=e.headers||new ho,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class EI extends wI{constructor(e={}){super(e),this.type=tf.ResponseHeader}clone(e={}){return new EI({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ol extends wI{constructor(e={}){super(e),this.type=tf.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ol({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Bj extends wI{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function SI(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Vj=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Mu)s=t;else{let c,l;c=r.headers instanceof ho?r.headers:new ho(r.headers),r.params&&(l=r.params instanceof nc?r.params:new nc({fromObject:r.params})),s=new Mu(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Ye(s).pipe(Tu(c=>this.handler.handle(c)));if(t instanceof Mu||"events"===r.observe)return o;const a=o.pipe(Ti(c=>c instanceof ol));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(zt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(zt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(zt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(zt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new nc).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,SI(r,i))}post(t,i,r={}){return this.request("POST",t,SI(r,i))}put(t,i,r={}){return this.request("PUT",t,SI(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(z(F0))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();function Gj(n,e){return e(n)}function xme(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const Mme=new Se(""),Dg=new Se(""),jj=new Se("");function Ame(){let n=null;return(e,t)=>{null===n&&(n=(Ie(Mme,{optional:!0})??[]).reduceRight(xme,Gj));const i=Ie(h0),r=i.add();return n(e,t).pipe(Ig(()=>i.remove(r)))}}let $j=(()=>{class n extends F0{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Ie(h0)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Dg),...this.injector.get(jj,[])]));this.chain=r.reduceRight((s,o)=>function Tme(n,e,t){return(i,r)=>t.runInContext(()=>e(i,s=>n(s,r)))}(s,o,this.injector),Gj)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Ig(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(z(ef),z(Ns))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const Pme=/^\)\]\}',?\n/;let qj=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new se(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?Ci(i.\u0275loadImpl()):Ye(null)).pipe(ds(()=>new yn(s=>{const o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((g,m)=>o.setRequestHeader(g,m.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&o.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();o.responseType="json"!==g?g:"text"}const a=t.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const g=o.statusText||"OK",m=new ho(o.getAllResponseHeaders()),_=function Ome(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return c=new EI({headers:m,status:o.status,statusText:g,url:_}),c},u=()=>{let{headers:g,status:m,statusText:_,url:y}=l(),v=null;204!==m&&(v=typeof o.response>"u"?o.responseText:o.response),0===m&&(m=v?200:0);let b=m>=200&&m<300;if("json"===t.responseType&&"string"==typeof v){const M=v;v=v.replace(Pme,"");try{v=""!==v?JSON.parse(v):null}catch(S){v=M,b&&(b=!1,v={error:S,text:v})}}b?(s.next(new ol({body:v,headers:g,status:m,statusText:_,url:y||void 0})),s.complete()):s.error(new Bj({error:v,headers:g,status:m,statusText:_,url:y||void 0}))},d=g=>{const{url:m}=l(),_=new Bj({error:g,status:o.status||0,statusText:o.statusText||"Unknown Error",url:m||void 0});s.error(_)};let h=!1;const f=g=>{h||(s.next(l()),h=!0);let m={type:tf.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),"text"===t.responseType&&o.responseText&&(m.partialText=o.responseText),s.next(m)},p=g=>{let m={type:tf.UploadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),s.next(m)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",f),null!==a&&o.upload&&o.upload.addEventListener("progress",p)),o.send(a),s.next({type:tf.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",f),null!==a&&o.upload&&o.upload.removeEventListener("progress",p)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(z(fj))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const CI=new Se("XSRF_ENABLED"),Kj=new Se("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Xj=new Se("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Yj{}let Lme=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=tj(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(z(rn),z(ks),z(Kj))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();function Fme(n,e){const t=n.url.toLowerCase();if(!Ie(CI)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=Ie(Yj).getToken(),r=Ie(Xj);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var al=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(al||{});function Ume(...n){const e=[Vj,qj,$j,{provide:F0,useExisting:$j},{provide:ef,useExisting:qj},{provide:Dg,useValue:Fme,multi:!0},{provide:CI,useValue:!0},{provide:Yj,useClass:Lme}];for(const t of n)e.push(...t.\u0275providers);return Ab(e)}const Zj=new Se("LEGACY_INTERCEPTOR_FN");function Bme(){return function Au(n,e){return{\u0275kind:n,\u0275providers:e}}(al.LegacyInterceptors,[{provide:Zj,useFactory:Ame},{provide:Dg,useExisting:Zj,multi:!0}])}let Vme=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({providers:[Ume(Bme())]})}return n})();function Qj(n){return!!n&&(n instanceof yn||Yt(n.lift)&&Yt(n.subscribe))}const{isArray:Wme}=Array,{getPrototypeOf:qme,prototype:Kme,keys:Xme}=Object;function Jj(n){if(1===n.length){const e=n[0];if(Wme(e))return{args:e,keys:null};if(function Yme(n){return n&&"object"==typeof n&&qme(n)===Kme}(e)){const t=Xme(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:Zme}=Array;function xI(n){return zt(e=>function Qme(n,e){return Zme(e)?n(...e):n(e)}(n,e))}function e$(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function V0(...n){const e=bm(n),t=n3(n),{args:i,keys:r}=Jj(n);if(0===i.length)return Ci([],e);const s=new yn(function Jme(n,e,t=Ua){return i=>{t$(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)t$(e,()=>{const l=Ci(n[c],e);let u=!1;l.subscribe(Mn(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>e$(r,o):Ua));return t?s.pipe(xI(t)):s}function t$(n,e,t){n?Ba(t,n,e):e()}const Rg=ym(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function z0(...n){return function ege(){return rh(1)}()(Ci(n,bm(n)))}function n$(n){return new yn(e=>{cr(n()).subscribe(e)})}function nf(n,e){const t=Yt(n)?n:()=>n,i=r=>r.error(t());return new yn(e?r=>e.schedule(i,0,r):i)}function TI(){return Hn((n,e)=>{let t=null;n._refCount++;const i=Mn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class i$ extends yn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,zB(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ar;const t=this.getSubject();e.add(this.source.subscribe(Mn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ar.EMPTY)}return e}refCount(){return TI()(this)}}function Pr(n){return n<=0?()=>Zo:Hn((e,t)=>{let i=0;e.subscribe(Mn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function H0(...n){const e=bm(n);return Hn((t,i)=>{(e?z0(n,t,e):z0(n,t)).subscribe(i)})}function G0(n){return Hn((e,t)=>{let i=!1;e.subscribe(Mn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function r$(n=tge){return Hn((e,t)=>{let i=!1;e.subscribe(Mn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function tge(){return new Rg}function cl(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ti((r,s)=>n(r,s,i)):Ua,Pr(1),t?G0(e):r$(()=>new Rg))}function pr(n,e,t){const i=Yt(n)||e||t?{next:n,error:e,complete:t}:n;return i?Hn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Mn(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Ua}function ic(n){return Hn((e,t)=>{let s,i=null,r=!1;i=e.subscribe(Mn(t,void 0,void 0,o=>{s=cr(n(o,ic(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function MI(n){return n<=0?()=>Zo:Hn((e,t)=>{let i=[];e.subscribe(Mn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function rc(n){return Hn((e,t)=>{cr(n).subscribe(Mn(t,()=>t.complete(),Lx)),!t.closed&&e.subscribe(t)})}const Lt="primary",Pg=Symbol("RouteTitle");class oge{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function rf(n){return new oge(n)}function age(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ha(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!s$(n[r],e[r]))return!1;return!0}function s$(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function o$(n){return n.length>0?n[n.length-1]:null}function ll(n){return Qj(n)?n:lg(n)?Ci(Promise.resolve(n)):Ye(n)}const lge={exact:function l$(n,e,t){if(!Iu(n.segments,e.segments)||!j0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!l$(n.children[i],e.children[i],t))return!1;return!0},subset:u$},a$={exact:function uge(n,e){return ha(n,e)},subset:function dge(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>s$(n[t],e[t]))},ignored:()=>!0};function c$(n,e,t){return lge[t.paths](n.root,e.root,t.matrixParams)&&a$[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function u$(n,e,t){return d$(n,e,e.segments,t)}function d$(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Iu(r,t)||e.hasChildren()||!j0(r,t,i))}if(n.segments.length===t.length){if(!Iu(n.segments,t)||!j0(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!u$(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Iu(n.segments,r)&&j0(n.segments,r,i)&&n.children[Lt])&&d$(n.children[Lt],e,s,i)}}function j0(n,e,t){return e.every((i,r)=>a$[t](n[r].parameters,i.parameters))}class sf{constructor(e=new wn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rf(this.queryParams)),this._queryParamMap}toString(){return pge.serialize(this)}}class wn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $0(this)}}class Og{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=rf(this.parameters)),this._parameterMap}toString(){return p$(this)}}function Iu(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Ng=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return new AI},providedIn:"root"})}return n})();class AI{parse(e){const t=new xge(e);return new sf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${kg(e.root,!0)}`,i=function _ge(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${W0(t)}=${W0(r)}`).join("&"):`${W0(t)}=${W0(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function mge(n){return encodeURI(n)}(e.fragment)}`:""}`}}const pge=new AI;function $0(n){return n.segments.map(e=>p$(e)).join("/")}function kg(n,e){if(!n.hasChildren())return $0(n);if(e){const t=n.children[Lt]?kg(n.children[Lt],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Lt&&i.push(`${r}:${kg(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function fge(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Lt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Lt&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===Lt?[kg(n.children[Lt],!1)]:[`${r}:${kg(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${$0(n)}/${t[0]}`:`${$0(n)}/(${t.join("//")})`}}function h$(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function W0(n){return h$(n).replace(/%3B/gi,";")}function II(n){return h$(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function q0(n){return decodeURIComponent(n)}function f$(n){return q0(n.replace(/\+/g,"%20"))}function p$(n){return`${II(n.path)}${function gge(n){return Object.keys(n).map(e=>`;${II(e)}=${II(n[e])}`).join("")}(n.parameters)}`}const yge=/^[^\/()?;#]+/;function DI(n){const e=n.match(yge);return e?e[0]:""}const vge=/^[^\/()?;=#]+/,wge=/^[^=?&#]+/,Sge=/^[^&#]+/;class xge{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wn([],{}):new wn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Lt]=new wn(e,t)),i}parseSegment(){const e=DI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new Og(q0(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function bge(n){const e=n.match(vge);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=DI(this.remaining);r&&(i=r,this.capture(i))}e[q0(t)]=q0(i)}parseQueryParam(e){const t=function Ege(n){const e=n.match(wge);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function Cge(n){const e=n.match(Sge);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=f$(t),s=f$(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=DI(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new se(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Lt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Lt]:new wn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}}function m$(n){return n.segments.length>0?new wn([],{[Lt]:n}):n}function g$(n){const e={};for(const i of Object.keys(n.children)){const s=g$(n.children[i]);if(i===Lt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Tge(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new wn(n.segments.concat(e.segments),e.children)}return n}(new wn(n.segments,e))}function Du(n){return n instanceof sf}function _$(n){let e;const r=m$(function t(s){const o={};for(const c of s.children){const l=t(c);o[c.outlet]=l}const a=new wn(s.url,o);return s===n&&(e=a),a}(n.root));return e??r}function y$(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return RI(r,r,r,t,i);const s=function Age(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new b$(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new b$(t,e,i)}(e);if(s.toRoot())return RI(r,r,new wn([],{}),t,i);const o=function Ige(n,e,t){if(n.isAbsolute)return new X0(e,!0,0);if(!t)return new X0(e,!1,NaN);if(null===t.parent)return new X0(t,!0,0);const i=K0(n.commands[0])?0:1;return function Dge(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new se(4005,!1);r=i.segments.length}return new X0(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?Fg(o.segmentGroup,o.index,s.commands):w$(o.segmentGroup,o.index,s.commands);return RI(r,o.segmentGroup,a,t,i)}function K0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Lg(n){return"object"==typeof n&&null!=n&&n.outlets}function RI(n,e,t,i,r){let o,s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===e?t:v$(n,e,t);const a=m$(g$(o));return new sf(a,s,r)}function v$(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:v$(s,e,t)}),new wn(n.segments,i)}class b${constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&K0(i[0]))throw new se(4003,!1);const r=i.find(Lg);if(r&&r!==o$(i))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class X0{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function w$(n,e,t){if(n||(n=new wn([],{})),0===n.segments.length&&n.hasChildren())return Fg(n,e,t);const i=function Pge(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(Lg(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!S$(c,l,o))return s;i+=2}else{if(!S$(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new wn(n.segments.slice(0,i.pathIndex),{});return s.children[Lt]=new wn(n.segments.slice(i.pathIndex),n.children),Fg(s,0,r)}return i.match&&0===r.length?new wn(n.segments,{}):i.match&&!n.hasChildren()?PI(n,e,t):i.match?Fg(n,0,r):PI(n,e,t)}function Fg(n,e,t){if(0===t.length)return new wn(n.segments,{});{const i=function Rge(n){return Lg(n[0])?n[0].outlets:{[Lt]:n}}(t),r={};if(Object.keys(i).some(s=>s!==Lt)&&n.children[Lt]&&1===n.numberOfChildren&&0===n.children[Lt].segments.length){const s=Fg(n.children[Lt],e,t);return new wn(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=w$(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new wn(n.segments,r)}}function PI(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Lg(s)){const c=Oge(s.outlets);return new wn(i,c)}if(0===r&&K0(t[0])){i.push(new Og(n.segments[e].path,E$(t[0]))),r++;continue}const o=Lg(s)?s.outlets[Lt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&K0(a)?(i.push(new Og(o,E$(a))),r+=2):(i.push(new Og(o,{})),r++)}return new wn(i,{})}function Oge(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=PI(new wn([],{}),0,i))}),e}function E$(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function S$(n,e,t){return n==t.path&&ha(e,t.parameters)}const Ug="imperative";class fa{constructor(e,t){this.id=e,this.url=t}}class Y0 extends fa{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ul extends fa{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bg extends fa{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class af extends fa{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class Z0 extends fa{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class C$ extends fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nge extends fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kge extends fa{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Lge extends fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fge extends fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uge{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bge{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vge{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zge{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hge{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class x${constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class T${constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class OI{}class NI{constructor(e){this.url=e}}class Gge{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Vg,this.attachRef=null}}let Vg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Gge,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class M${constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=kI(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=kI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=LI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return LI(e,this._root).map(t=>t.value)}}function kI(n,e){if(n===e.value)return e;for(const t of e.children){const i=kI(n,t);if(i)return i}return null}function LI(n,e){if(n===e.value)return[e];for(const t of e.children){const i=LI(n,t);if(i.length)return i.unshift(e),i}return[]}class sc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function cf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class A$ extends M${constructor(e,t){super(e),this.snapshot=t,FI(this,e)}toString(){return this.snapshot.toString()}}function I$(n,e){const t=function jge(n,e){const o=new Q0([],{},{},"",{},Lt,e,null,{});return new R$("",new sc(o,[]))}(0,e),i=new us([new Og("",{})]),r=new us({}),s=new us({}),o=new us({}),a=new us(""),c=new oc(i,r,o,a,s,Lt,e,t.root);return c.snapshot=t.root,new A$(new sc(c,[]),t)}class oc{constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(zt(l=>l[Pg]))??Ye(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(zt(e=>rf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(zt(e=>rf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function D$(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function $ge(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Q0{get title(){return this.data?.[Pg]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=rf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class R$ extends M${constructor(e,t){super(t),this.url=e,FI(this,t)}toString(){return P$(this._root)}}function FI(n,e){e.value._routerState=n,e.children.forEach(t=>FI(n,t))}function P$(n){const e=n.children.length>0?` { ${n.children.map(P$).join(", ")} } `:"";return`${n.value}${e}`}function UI(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ha(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ha(e.params,t.params)||n.paramsSubject.next(t.params),function cge(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ha(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ha(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function BI(n,e){const t=ha(n.params,e.params)&&function hge(n,e){return Iu(n,e)&&n.every((t,i)=>ha(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||BI(n.parent,e.parent))}let VI=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Lt,this.activateEvents=new qt,this.deactivateEvents=new qt,this.attachEvents=new qt,this.detachEvents=new qt,this.parentContexts=Ie(Vg),this.location=Ie(oo),this.changeDetector=Ie(Su),this.environmentInjector=Ie(Ns),this.inputBinder=Ie(J0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Wge(t,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=dt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ps]})}return n})();class Wge{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===oc?this.route:e===Vg?this.childContexts:this.parent.get(e,t)}}const J0=new Se("");let O$=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=V0([i.queryParams,i.params,i.data]).pipe(ds(([s,o,a],c)=>(a={...s,...o,...a},0===c?Ye(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const o=function Jhe(n){const e=Qt(n);if(!e)return null;const t=new ng(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();function zg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Kge(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return zg(n,i,r);return zg(n,i)})}(n,e,t);return new sc(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>zg(n,a)),o}}const i=function Xge(n){return new oc(new us(n.url),new us(n.params),new us(n.queryParams),new us(n.fragment),new us(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>zg(n,s));return new sc(i,r)}}const zI="ngNavigationCancelingError";function N$(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Du(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=k$(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function k$(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[zI]=!0,i.cancellationCode=e,t&&(i.url=t),i}function L$(n){return n&&n[zI]}let HI=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["ng-component"]],standalone:!0,features:[gg],decls:1,vars:0,template:function(i,r){1&i&&$(0,"router-outlet")},dependencies:[VI],encapsulation:2})}return n})();function GI(n){const e=n.children&&n.children.map(GI),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=HI),t}function ko(n){return n.outlet||Lt}function Hg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class i_e{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),UI(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=cf(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=cf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=cf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=cf(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new x$(s.value.snapshot))}),e.children.length&&this.forwardEvent(new zge(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(UI(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),UI(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Hg(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class F${constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ew{constructor(e,t){this.component=e,this.route=t}}function r_e(n,e,t){const i=n._root;return Gg(i,e?e._root:null,t,[i.value])}function lf(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function mie(n){return null!==Vv(n)}(n)?e.get(n):n:i}function Gg(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=cf(e);return n.children.forEach(o=>{(function o_e(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function a_e(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Iu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Iu(n.url,e.url)||!ha(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!BI(n,e)||!ha(n.queryParams,e.queryParams);default:return!BI(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new F$(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Gg(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ew(a.outlet.component,o))}else o&&jg(e,a,r),r.canActivateChecks.push(new F$(i)),Gg(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>jg(a,t.getContext(o),r)),r}function jg(n,e,t){const i=cf(n),r=n.value;Object.entries(i).forEach(([s,o])=>{jg(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new ew(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function $g(n){return"function"==typeof n}function U$(n){return n instanceof Rg||"EmptyError"===n?.name}const tw=Symbol("INITIAL_VALUE");function uf(){return ds(n=>V0(n.map(e=>e.pipe(Pr(1),H0(tw)))).pipe(zt(e=>{for(const t of e)if(!0!==t){if(t===tw)return tw;if(!1===t||t instanceof sf)return t}return!0}),Ti(e=>e!==tw),Pr(1)))}function B$(n){return function Ene(...n){return UB(n)}(pr(e=>{if(Du(e))throw N$(0,e)}),zt(e=>!0===e))}class nw{constructor(e){this.segmentGroup=e||null}}class V${constructor(e){this.urlTree=e}}function df(n){return nf(new nw(n))}function z$(n){return nf(new V$(n))}class M_e{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new se(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ye(i);if(r.numberOfChildren>1||!r.children[Lt])return nf(new se(4e3,!1));r=r.children[Lt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new sf(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new wn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new se(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const jI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function A_e(n,e,t,i,r){const s=$I(n,e,t);return s.matched?(i=function Zge(n,e){return n.providers&&!n._injector&&(n._injector=mA(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function C_e(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Ye(r.map(o=>{const a=lf(o,n);return ll(function f_e(n){return n&&$g(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(uf(),B$()):Ye(!0)}(i,e,t).pipe(zt(o=>!0===o?s:{...jI}))):Ye(s)}function $I(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...jI}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||age)(t,n,e);if(!r)return{...jI};const s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function H$(n,e,t,i){return t.length>0&&function R_e(n,e,t){return t.some(i=>iw(n,e,i)&&ko(i)!==Lt)}(n,t,i)?{segmentGroup:new wn(e,D_e(i,new wn(t,n.children))),slicedSegments:[]}:0===t.length&&function P_e(n,e,t){return t.some(i=>iw(n,e,i))}(n,t,i)?{segmentGroup:new wn(n.segments,I_e(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new wn(n.segments,n.children),slicedSegments:t}}function I_e(n,e,t,i,r){const s={};for(const o of i)if(iw(n,t,o)&&!r[ko(o)]){const a=new wn([],{});s[ko(o)]=a}return{...r,...s}}function D_e(n,e){const t={};t[Lt]=e;for(const i of n)if(""===i.path&&ko(i)!==Lt){const r=new wn([],{});t[ko(i)]=r}return t}function iw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class L_e{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new M_e(this.urlSerializer,this.urlTree)}noMatchError(e){return new se(4002,!1)}recognize(){const e=H$(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Lt).pipe(ic(t=>{if(t instanceof V$)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof nw?this.noMatchError(t):t}),zt(t=>{const i=new Q0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,{}),r=new sc(i,t),s=new R$("",r),o=function Mge(n,e,t=null,i=null){return y$(_$(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Lt).pipe(ic(i=>{throw i instanceof nw?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=D$(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Ci(r).pipe(Tu(s=>{const o=i.children[s],a=function t_e(n,e){const t=n.filter(i=>ko(i)===e);return t.push(...n.filter(i=>ko(i)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),function ige(n,e){return Hn(function nge(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(Mn(o,u=>{const d=l++;c=a?n(c,u,d):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),G0(null),function rge(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ti((r,s)=>n(r,s,i)):Ua,MI(1),t?G0(e):r$(()=>new Rg))}(),Li(s=>{if(null===s)return df(i);const o=G$(s);return function F_e(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),Ye(o)}))}processSegment(e,t,i,r,s,o){return Ci(t).pipe(Tu(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(ic(c=>{if(c instanceof nw)return Ye(null);throw c}))),cl(a=>!!a),ic(a=>{if(U$(a))return function N_e(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?Ye([]):df(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return function O_e(n,e,t,i){return!!(ko(n)===i||i!==Lt&&iw(e,t,n))&&("**"===n.path||$I(e,n,t).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):df(r):df(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?z$(s):this.applyRedirects.lineralizeSegments(i,s).pipe(Li(o=>{const a=new wn(o,{});return this.processSegment(e,t,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=$I(t,r,s);if(!a)return df(t);const d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,u);return r.redirectTo.startsWith("/")?z$(d):this.applyRedirects.lineralizeSegments(r,d).pipe(Li(h=>this.processSegment(e,i,t,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a;if("**"===i.path){const c=r.length>0?o$(r).parameters:{};a=Ye({snapshot:new Q0(r,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j$(i),ko(i),i.component??i._loadedComponent??null,i,$$(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=A_e(t,i,r,e).pipe(zt(({matched:c,consumedSegments:l,remainingSegments:u,parameters:d})=>c?{snapshot:new Q0(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j$(i),ko(i),i.component??i._loadedComponent??null,i,$$(i)),consumedSegments:l,remainingSegments:u}:null));return a.pipe(ds(c=>null===c?df(t):this.getChildConfig(e=i._injector??e,i,r).pipe(ds(({routes:l})=>{const u=i._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=c,{segmentGroup:p,slicedSegments:g}=H$(t,h,f,l);if(0===g.length&&p.hasChildren())return this.processChildren(u,l,p).pipe(zt(_=>null===_?null:[new sc(d,_)]));if(0===l.length&&0===g.length)return Ye([new sc(d,[])]);const m=ko(i)===s;return this.processSegment(u,l,p,g,m?Lt:s,!0).pipe(zt(_=>[new sc(d,_)]))}))))}getChildConfig(e,t,i){return t.children?Ye({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ye({routes:t._loadedRoutes,injector:t._loadedInjector}):function S_e(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Ye(!0):Ye(r.map(o=>{const a=lf(o,n);return ll(function l_e(n){return n&&$g(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(uf(),B$())}(e,t,i).pipe(Li(r=>r?this.configLoader.loadChildren(e,t).pipe(pr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function T_e(n){return nf(k$(!1,3))}())):Ye({routes:[],injector:e})}}function U_e(n){const e=n.value.routeConfig;return e&&""===e.path}function G$(n){const e=[],t=new Set;for(const i of n){if(!U_e(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=G$(i.children);e.push(new sc(i.value,r))}return e.filter(i=>!t.has(i))}function j$(n){return n.data||{}}function $$(n){return n.resolve||{}}function W$(n){return"string"==typeof n.title||null===n.title}function WI(n){return ds(e=>{const t=n(e);return t?Ci(t).pipe(zt(()=>e)):Ye(e)})}const hf=new Se("ROUTES");let qI=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ie(c5)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ye(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=ll(t.loadComponent()).pipe(zt(q$),pr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ig(()=>{this.componentLoaders.delete(t)})),r=new i$(i,()=>new Gt).pipe(TI());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ye({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function $_e(n,e,t,i){return ll(n.loadChildren()).pipe(zt(q$),Li(r=>r instanceof gG||Array.isArray(r)?Ye(r):Ci(e.compileModuleAsync(r))),zt(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(t).injector,o=s.get(hf,[],{optional:!0,self:!0}).flat()),{routes:o.map(GI),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(Ig(()=>{this.childrenLoaders.delete(i)})),o=new i$(s,()=>new Gt).pipe(TI());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function q$(n){return function W_e(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let rw=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Gt,this.transitionAbortSubject=new Gt,this.configLoader=Ie(qI),this.environmentInjector=Ie(Ns),this.urlSerializer=Ie(Ng),this.rootContexts=Ie(Vg),this.inputBindingEnabled=null!==Ie(J0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ye(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Bge(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Uge(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new us({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ug,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ti(s=>0!==s.id),zt(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),ds(s=>{this.currentTransition=s;let o=!1,a=!1;return Ye(s).pipe(pr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ds(c=>{const l=c.currentBrowserUrl.toString(),u=!t.navigated||c.extractedUrl.toString()!==l||l!==c.currentUrlTree.toString();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new af(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),Zo}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Ye(c).pipe(ds(h=>{const f=this.transitions?.getValue();return this.events.next(new Y0(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Zo:Promise.resolve(h)}),function B_e(n,e,t,i,r,s){return Li(o=>function k_e(n,e,t,i,r,s,o="emptyOnly"){return new L_e(n,e,t,i,r,o,s).recognize()}(n,e,t,i,o.extractedUrl,r,s).pipe(zt(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),pr(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const f=new C$(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=c,_=new Y0(h,this.urlSerializer.serialize(f),p,g);this.events.next(_);const y=I$(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:y,urlAfterRedirects:f,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},Ye(s)}{const h="";return this.events.next(new af(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),Zo}}),pr(c=>{const l=new Nge(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),zt(c=>(this.currentTransition=s={...c,guards:r_e(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function m_e(n,e){return Li(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ye({...t,guardsResult:!0}):function g_e(n,e,t,i){return Ci(n).pipe(Li(r=>function E_e(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ye(s.map(a=>{const c=Hg(e)??r,l=lf(a,c);return ll(function h_e(n){return n&&$g(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i))).pipe(cl())})).pipe(uf()):Ye(!0)}(r.component,r.route,t,e,i)),cl(r=>!0!==r,!0))}(o,i,r,n).pipe(Li(a=>a&&function c_e(n){return"boolean"==typeof n}(a)?function __e(n,e,t,i){return Ci(e).pipe(Tu(r=>z0(function v_e(n,e){return null!==n&&e&&e(new Vge(n)),Ye(!0)}(r.route.parent,i),function y_e(n,e){return null!==n&&e&&e(new Hge(n)),Ye(!0)}(r.route,i),function w_e(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function s_e(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>n$(()=>Ye(o.guards.map(c=>{const l=Hg(o.node)??t,u=lf(c,l);return ll(function d_e(n){return n&&$g(n.canActivateChild)}(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n))).pipe(cl())})).pipe(uf())));return Ye(s).pipe(uf())}(n,r.path,t),function b_e(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ye(!0);const r=i.map(s=>n$(()=>{const o=Hg(e)??t,a=lf(s,o);return ll(function u_e(n){return n&&$g(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(cl())}));return Ye(r).pipe(uf())}(n,r.route,t))),cl(r=>!0!==r,!0))}(i,s,n,e):Ye(a)),zt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),pr(c=>{if(s.guardsResult=c.guardsResult,Du(c.guardsResult))throw N$(0,c.guardsResult);const l=new kge(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Ti(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),WI(c=>{if(c.guards.canActivateChecks.length)return Ye(c).pipe(pr(l=>{const u=new Lge(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ds(l=>{let u=!1;return Ye(l).pipe(function V_e(n,e){return Li(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ye(t);let s=0;return Ci(r).pipe(Tu(o=>function z_e(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!W$(r)&&(s[Pg]=r.title),function H_e(n,e,t,i){const r=function G_e(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Ye({});const s={};return Ci(r).pipe(Li(o=>function j_e(n,e,t,i){const r=Hg(e)??i,s=lf(n,r);return ll(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(cl(),pr(a=>{s[o]=a}))),MI(1),function sge(n){return zt(()=>n)}(s),ic(o=>U$(o)?Zo:nf(o)))}(s,n,e,i).pipe(zt(o=>(n._resolvedData=o,n.data=D$(n,t).resolve,r&&W$(r)&&(n.data[Pg]=r.title),null)))}(o.route,i,n,e)),pr(()=>s++),MI(1),Li(o=>s===r.length?Ye(t):Zo))})}(t.paramsInheritanceStrategy,this.environmentInjector),pr({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",2)}}))}),pr(l=>{const u=new Fge(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),WI(c=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(pr(h=>{u.component=h}),zt(()=>{})));for(const h of u.children)d.push(...l(h));return d};return V0(l(c.targetSnapshot.root)).pipe(G0(),Pr(1))}),WI(()=>this.afterPreactivation()),zt(c=>{const l=function qge(n,e,t){const i=zg(n,e._root,t?t._root:void 0);return new A$(i,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:l},s}),pr(()=>{this.events.next(new OI)}),((n,e,t,i)=>zt(r=>(new i_e(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Pr(1),pr({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ul(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),rc(this.transitionAbortSubject.pipe(pr(c=>{throw c}))),Ig(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),ic(c=>{if(a=!0,L$(c))this.events.next(new Bg(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function Yge(n){return L$(n)&&Du(n.url)}(c)?this.events.next(new NI(c.url)):s.resolve(!1);else{this.events.next(new Z0(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(l){s.reject(l)}}return Zo}))}))}cancelNavigationTransition(t,i,r){const s=new Bg(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function K$(n){return n!==Ug}let X$=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Lt);return i}getResolvedTitleForRoute(t){return t.data[Pg]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return Ie(q_e)},providedIn:"root"})}return n})(),q_e=(()=>{class n extends X${constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(z(vI))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),K_e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return Ie(Y_e)},providedIn:"root"})}return n})();class X_e{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Y_e=(()=>{class n extends X_e{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=fr(n)))(r||n)}}();static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const sw=new Se("",{providedIn:"root",factory:()=>({})});let Z_e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return Ie(Q_e)},providedIn:"root"})}return n})(),Q_e=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Wg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Wg||{});function Y$(n,e){n.events.pipe(Ti(t=>t instanceof ul||t instanceof Bg||t instanceof Z0||t instanceof af),zt(t=>t instanceof ul||t instanceof af?Wg.COMPLETE:t instanceof Bg&&(0===t.code||1===t.code)?Wg.REDIRECTING:Wg.FAILED),Ti(t=>t!==Wg.REDIRECTING),Pr(1)).subscribe(()=>{e()})}function J_e(n){throw n}function eye(n,e,t){return e.parse("/")}const tye={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nye={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ie(a5),this.isNgZoneEnabled=!1,this._events=new Gt,this.options=Ie(sw,{optional:!0})||{},this.pendingTasks=Ie(h0),this.errorHandler=this.options.errorHandler||J_e,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||eye,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ie(Z_e),this.routeReuseStrategy=Ie(K_e),this.titleStrategy=Ie(X$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ie(hf,{optional:!0})?.flat()??[],this.navigationTransitions=Ie(rw),this.urlSerializer=Ie(Ng),this.location=Ie(b0),this.componentInputBindingEnabled=!!Ie(J0,{optional:!0}),this.eventsSubscription=new ar,this.isNgZoneEnabled=Ie(pt)instanceof pt&&pt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new sf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=I$(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(Z$(i)&&this._events.next(i));if(i instanceof Y0)K$(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof af)this.rawUrlTree=r.rawUrl;else if(i instanceof C$){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof OI)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof Bg)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof NI){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),o={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||K$(r.source)};this.scheduleNavigation(s,Ug,null,o,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof Z0&&this.restoreHistory(r,!0),i instanceof ul&&(this.navigated=!0),Z$(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ug,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const c={...r};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(GI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:o;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{d=_$(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return y$(d,t,u,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Du(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Ug,null,i)}navigate(t,i={skipLocationChange:!1}){return function iye(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new se(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...tye}:!1===i?{...nye}:i,Du(t))return c$(this.currentUrlTree,t,r);const s=this.parseUrl(t);return c$(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,c=h});const u=this.pendingTasks.add();return Y$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z$(n){return!(n instanceof OI||n instanceof NI)}let Us=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Gt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof ul&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function Sz(n,e,t){return function Toe(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?Ez:Wa}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(j(Mi),j(oc),function cb(n){return function Gre(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(_3(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(hr(),n)}("tabindex"),j(Ao),j(fi),j(xu))};static#t=this.\u0275dir=dt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&it("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&i&&Jr("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Zh],skipLocationChange:["skipLocationChange","skipLocationChange",Zh],replaceUrl:["replaceUrl","replaceUrl",Zh],routerLink:"routerLink"},standalone:!0,features:[kH,ps]})}return n})(),Q$=(()=>{class n{get isActive(){return this._isActive}constructor(t,i,r,s,o){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new qt,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof ul&&this.update()})}ngAfterContentInit(){Ye(this.links.changes,Ye(null)).pipe(rh()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Ci(t).pipe(rh()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function rye(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(i){return new(i||n)(j(Mi),j(fi),j(Ao),j(Su),j(Us,8))};static#t=this.\u0275dir=dt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,s){if(1&i&&xA(s,Us,5),2&i){let o;ao(o=co())&&(r.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[ps]})}return n})();class J${}let sye=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ti(t=>t instanceof ul),Tu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=mA(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ci(r).pipe(rh())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Ye(null);const s=r.pipe(Li(o=>null===o?Ye(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?Ci([s,this.loader.loadComponent(i)]).pipe(rh()):s})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Mi),z(c5),z(Ns),z(J$),z(qI))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const KI=new Se("");let eW=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Y0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ul?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof af&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof T$&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new T$(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){!function cH(){throw new Error("invalid")}()};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();function ac(n,e){return{\u0275kind:n,\u0275providers:e}}function nW(){const n=Ie(Tn);return e=>{const t=n.get(da);if(e!==t.components[0])return;const i=n.get(Mi),r=n.get(iW);1===n.get(XI)&&i.initialNavigation(),n.get(rW,null,jt.Optional)?.setUpPreloading(),n.get(KI,null,jt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const iW=new Se("",{factory:()=>new Gt}),XI=new Se("",{providedIn:"root",factory:()=>1}),rW=new Se("");function lye(n){return ac(0,[{provide:rW,useExisting:sye},{provide:J$,useExisting:n}])}const sW=new Se("ROUTER_FORROOT_GUARD"),dye=[b0,{provide:Ng,useClass:AI},Mi,Vg,{provide:oc,useFactory:function tW(n){return n.routerState.root},deps:[Mi]},qI,[]];function hye(){return new m5("Router",Mi)}let YI=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[dye,[],{provide:hf,multi:!0,useValue:t},{provide:sW,useFactory:gye,deps:[[Mi,new hi,new db]]},{provide:sw,useValue:i||{}},i?.useHash?{provide:xu,useClass:rfe}:{provide:xu,useClass:$5},{provide:KI,useFactory:()=>{const n=Ie(ype),e=Ie(pt),t=Ie(sw),i=Ie(rw),r=Ie(Ng);return t.scrollOffset&&n.setOffset(t.scrollOffset),new eW(r,i,n,e,t)}},i?.preloadingStrategy?lye(i.preloadingStrategy).\u0275providers:[],{provide:m5,multi:!0,useFactory:hye},i?.initialNavigation?_ye(i):[],i?.bindToComponentInputs?ac(8,[O$,{provide:J0,useExisting:O$}]).\u0275providers:[],[{provide:oW,useFactory:nW},{provide:UA,multi:!0,useExisting:oW}]]}}static forChild(t){return{ngModule:n,providers:[{provide:hf,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(z(sW,8))};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({})}return n})();function gye(n){return"guarded"}function _ye(n){return["disabled"===n.initialNavigation?ac(3,[{provide:wg,multi:!0,useFactory:()=>{const e=Ie(Mi);return()=>{e.setUpLocationChangeListener()}}},{provide:XI,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ac(2,[{provide:XI,useValue:0},{provide:wg,multi:!0,deps:[Tn],useFactory:e=>{const t=e.get(nfe,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Mi),s=e.get(iW);Y$(r,()=>{i(!0)}),e.get(rw).afterPreactivation=()=>(i(!0),s.closed?Ye(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const oW=new Se("");var rt=function(n){return n.HOME="home",n.ABOUT_US="about-us",n.FEATURES="features",n.FITTING_ROOM="fitting-room",n.SHOP="shop",n.PARTNERS="partners",n.LOGIN="login",n.REGISTER_USER="sign-up",n.REGISTER_CLIENT="client-sign-up",n.FORGOT_PASSWORD="forgot-password",n.CONTACT_US="contact-us",n}(rt||{});function aW(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function N(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){aW(s,i,r,o,a,"next",c)}function a(c){aW(s,i,r,o,a,"throw",c)}o(void 0)})}}const cW=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):55296==(64512&r)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&n.charCodeAt(++i)),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e},QI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0;let h=(15&a)<<2|l>>6,f=63&l;c||(f=64,o||(h=64)),i.push(t[s>>2],t[(3&s)<<4|a>>4],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cW(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const c=((7&r)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(1023&c))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const l=r<n.length?t[n.charAt(r)]:64;++r;const d=r<n.length?t[n.charAt(r)]:64;if(++r,null==s||null==a||null==l||null==d)throw new Eye;i.push(s<<2|a>>4),64!==l&&(i.push(a<<4&240|l>>2),64!==d&&i.push(l<<6&192|d))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Eye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ow=function(n){return function(n){const e=cW(n);return QI.encodeByteArray(e,!0)}(n).replace(/\./g,"")},aw=function(n){try{return QI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},cw=()=>{try{return function xye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&aw(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},uW=n=>{var e,t;return null===(t=null===(e=cw())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},dW=()=>{var n;return null===(n=cw())||void 0===n?void 0:n.config},hW=n=>{var e;return null===(e=cw())||void 0===e?void 0:e[`_${n}`]};class lw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function qi(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function JI(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function dl(){try{return"object"==typeof indexedDB}catch{return!1}}function ff(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e((null===(s=r.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function uw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class fo extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,fo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lo.prototype.create)}}class Lo{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?function Lye(n,e){return n.replace(Fye,(t,i)=>{const r=e[i];return null!=r?String(r):`<${i}?>`})}(s,i):"Error";return new fo(r,`${this.serviceName}: ${o} (${r}).`,i)}}const Fye=/\{\$([^}]+)}/g;function qg(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(pW(s)&&pW(o)){if(!qg(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function pW(n){return null!==n&&"object"==typeof n}function hw(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Kg(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Xg(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class Vye{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(void 0===e&&void 0===t&&void 0===i)throw new Error("Missing Observer.");r=function zye(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:i},void 0===r.next&&(r.next=eD),void 0===r.error&&(r.error=eD),void 0===r.complete&&(r.complete=eD);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eD(){}const Hye=1e3,Gye=2,jye=144e5,$ye=.5;function nD(n,e=Hye,t=Gye){const i=e*Math.pow(t,n),r=Math.round($ye*i*(Math.random()-.5)*2);return Math.min(jye,i+r)}function Yn(n){return n&&n._delegate?n._delegate:n}class mr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ru="[DEFAULT]";class qye{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new lw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),r=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Xye(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ru})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Ru){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return N(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ru){return this.instances.has(e)}getOptions(e=Ru){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(s)&&o.resolve(r);return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Ru?void 0:n),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}var n;return i||null}normalizeInstanceIdentifier(e=Ru){return this.component?this.component.multipleInstances?e:Ru:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Yye{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qye(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const iD=[];var en=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(en||{});const mW={debug:en.DEBUG,verbose:en.VERBOSE,info:en.INFO,warn:en.WARN,error:en.ERROR,silent:en.SILENT},Zye=en.INFO,Qye={[en.DEBUG]:"log",[en.VERBOSE]:"log",[en.INFO]:"info",[en.WARN]:"warn",[en.ERROR]:"error"},Jye=(n,e,...t)=>{if(e<n.logLevel)return;const i=(new Date).toISOString(),r=Qye[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${n.name}:`,...t)};class Pu{constructor(e){this.name=e,this._logLevel=Zye,this._logHandler=Jye,this._userLogHandler=null,iD.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in en))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?mW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,en.DEBUG,...e),this._logHandler(this,en.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,en.VERBOSE,...e),this._logHandler(this,en.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,en.INFO,...e),this._logHandler(this,en.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,en.WARN,...e),this._logHandler(this,en.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,en.ERROR,...e),this._logHandler(this,en.ERROR,...e)}}const eve=(n,e)=>e.some(t=>n instanceof t);let gW,_W;const yW=new WeakMap,rD=new WeakMap,vW=new WeakMap,sD=new WeakMap,oD=new WeakMap;let aD={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return rD.get(n);if("objectStoreNames"===e)return n.objectStoreNames||vW.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hl(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function ave(n){return"function"==typeof n?function ove(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function nve(){return _W||(_W=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(cD(this),e),hl(yW.get(this))}:function(...e){return hl(n.apply(cD(this),e))}:function(e,...t){const i=n.call(cD(this),e,...t);return vW.set(i,e.sort?e.sort():[e]),hl(i)}}(n):(n instanceof IDBTransaction&&function rve(n){if(rD.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});rD.set(n,e)}(n),eve(n,function tve(){return gW||(gW=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,aD):n)}function hl(n){if(n instanceof IDBRequest)return function ive(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(hl(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&yW.set(t,n)}).catch(()=>{}),oD.set(e,n),e}(n);if(sD.has(n))return sD.get(n);const e=ave(n);return e!==n&&(sD.set(n,e),oD.set(e,n)),e}const cD=n=>oD.get(n),lve=["get","getKey","getAll","getAllKeys","count"],uve=["put","add","delete","clear"],lD=new Map;function bW(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(lD.get(e))return lD.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=uve.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!lve.includes(t))return;const s=function(){var o=N(function*(a,...c){const l=this.transaction(a,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),r&&l.done]))[0]});return function(c){return o.apply(this,arguments)}}();return lD.set(e,s),s}!function sve(n){aD=n(aD)}(n=>({...n,get:(e,t,i)=>bW(e,t)||n.get(e,t,i),has:(e,t)=>!!bW(e,t)||n.has(e,t)}));class dve{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function hve(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}return null}).filter(t=>t).join(" ")}}const uD="@firebase/app",Ou=new Pu("@firebase/app"),fw="[DEFAULT]",Uve={[uD]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nu=new Map,pw=new Map;function Bve(n,e){try{n.container.addComponent(e)}catch(t){Ou.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Or(n){const e=n.name;if(pw.has(e))return Ou.debug(`There were multiple attempts to register component ${e}.`),!1;pw.set(e,n);for(const t of Nu.values())Bve(t,n);return!0}function pa(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const cc=new Lo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class zve{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cc.create("app-deleted",{appName:this._name})}}const ku="9.23.0";function EW(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:fw,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw cc.create("bad-app-name",{appName:String(r)});if(t||(t=dW()),!t)throw cc.create("no-options");const s=Nu.get(r);if(s){if(qg(t,s.options)&&qg(i,s.config))return s;throw cc.create("duplicate-app",{appName:r})}const o=new Yye(r);for(const c of pw.values())o.addComponent(c);const a=new zve(t,i,o);return Nu.set(r,a),a}function pf(n=fw){const e=Nu.get(n);if(!e&&n===fw&&dW())return EW();if(!e)throw cc.create("no-app",{appName:n});return e}function SW(){return Array.from(Nu.values())}function En(n,e,t){var i;let r=null!==(i=Uve[n])&&void 0!==i?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];return s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ou.warn(a.join(" "))}Or(new mr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Hve="firebase-heartbeat-database",Gve=1,Yg="firebase-heartbeat-store";let hD=null;function CW(){return hD||(hD=function cve(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=hl(o);return i&&o.addEventListener("upgradeneeded",c=>{i(hl(o.result),c.oldVersion,c.newVersion,hl(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}(Hve,Gve,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Yg)}}).catch(n=>{throw cc.create("idb-open",{originalErrorMessage:n.message})})),hD}function fD(){return(fD=N(function*(n){try{return yield(yield CW()).transaction(Yg).objectStore(Yg).get(TW(n))}catch(e){if(e instanceof fo)Ou.warn(e.message);else{const t=cc.create("idb-get",{originalErrorMessage:e?.message});Ou.warn(t.message)}}})).apply(this,arguments)}function xW(n,e){return pD.apply(this,arguments)}function pD(){return(pD=N(function*(n,e){try{const i=(yield CW()).transaction(Yg,"readwrite");yield i.objectStore(Yg).put(e,TW(n)),yield i.done}catch(t){if(t instanceof fo)Ou.warn(t.message);else{const i=cc.create("idb-set",{originalErrorMessage:t?.message});Ou.warn(i.message)}}})).apply(this,arguments)}function TW(n){return`${n.name}!${n.options.appId}`}class qve{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Xve(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return N(function*(){const i=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=MW();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==r&&!e._heartbeatsCache.heartbeats.some(s=>s.date===r))return e._heartbeatsCache.heartbeats.push({date:r,agent:i}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return N(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=MW(),{heartbeatsToSend:i,unsentEntries:r}=function Kve(n,e=1024){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),AW(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),AW(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}(e._heartbeatsCache.heartbeats),s=ow(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function MW(){return(new Date).toISOString().substring(0,10)}class Xve{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return N(function*(){return!!dl()&&ff().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return N(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function jve(n){return fD.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return N(function*(){var i;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return xW(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return N(function*(){var i;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return xW(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function AW(n){return ow(JSON.stringify({version:2,heartbeats:n})).length}!function Yve(n){Or(new mr("platform-logger",e=>new dve(e),"PRIVATE")),Or(new mr("heartbeat",e=>new qve(e),"PRIVATE")),En(uD,"0.9.13",n),En(uD,"0.9.13","esm2017"),En("fire-js","")}(""),En("firebase","9.23.0","app");const Jve=(n,e)=>e.some(t=>n instanceof t);let IW,DW;const RW=new WeakMap,mD=new WeakMap,PW=new WeakMap,gD=new WeakMap,_D=new WeakMap;let yD={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return mD.get(n);if("objectStoreNames"===e)return n.objectStoreNames||PW.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fl(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function obe(n){return"function"==typeof n?function sbe(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function tbe(){return DW||(DW=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(vD(this),e),fl(RW.get(this))}:function(...e){return fl(n.apply(vD(this),e))}:function(e,...t){const i=n.call(vD(this),e,...t);return PW.set(i,e.sort?e.sort():[e]),fl(i)}}(n):(n instanceof IDBTransaction&&function ibe(n){if(mD.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});mD.set(n,e)}(n),Jve(n,function ebe(){return IW||(IW=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,yD):n)}function fl(n){if(n instanceof IDBRequest)return function nbe(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(fl(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&RW.set(t,n)}).catch(()=>{}),_D.set(e,n),e}(n);if(gD.has(n))return gD.get(n);const e=obe(n);return e!==n&&(gD.set(n,e),_D.set(e,n)),e}const vD=n=>_D.get(n),cbe=["get","getKey","getAll","getAllKeys","count"],lbe=["put","add","delete","clear"],bD=new Map;function OW(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(bD.get(e))return bD.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=lbe.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!cbe.includes(t))return;const s=function(){var o=N(function*(a,...c){const l=this.transaction(a,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),r&&l.done]))[0]});return function(c){return o.apply(this,arguments)}}();return bD.set(e,s),s}!function rbe(n){yD=n(yD)}(n=>({...n,get:(e,t,i)=>OW(e,t)||n.get(e,t,i),has:(e,t)=>!!OW(e,t)||n.has(e,t)}));const NW="@firebase/installations",wD="0.6.4",kW=1e4,LW=`w:${wD}`,FW="FIS_v2",ube="https://firebaseinstallations.googleapis.com/v1",dbe=36e5,lc=new Lo("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function UW(n){return n instanceof fo&&n.code.includes("request-failed")}function ED({projectId:n}){return`${ube}/projects/${n}/installations`}function BW(n){return{token:n.token,requestStatus:2,expiresIn:mbe(n.expiresIn),creationTime:Date.now()}}function SD(n,e){return CD.apply(this,arguments)}function CD(){return(CD=N(function*(n,e){const i=(yield e.json()).error;return lc.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})).apply(this,arguments)}function VW({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function xD(n){return TD.apply(this,arguments)}function TD(){return(TD=N(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function mbe(n){return Number(n.replace("s","000"))}function MD(){return(MD=N(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=ED(n),r=VW(n),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&r.append("x-firebase-client",l)}const a={method:"POST",headers:r,body:JSON.stringify({fid:t,authVersion:FW,appId:n.appId,sdkVersion:LW})},c=yield xD(()=>fetch(i,a));if(c.ok){const l=yield c.json();return{fid:l.fid||t,registrationStatus:2,refreshToken:l.refreshToken,authToken:BW(l.authToken)}}throw yield SD("Create Installation",c)})).apply(this,arguments)}function HW(n){return new Promise(e=>{setTimeout(e,n)})}const vbe=/^[cdef][\w-]{21}$/,AD="";function bbe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function wbe(n){return function ybe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return vbe.test(t)?t:AD}catch{return AD}}function mf(n){return`${n.appName}!${n.appId}`}const gf=new Map;function GW(n,e){const t=mf(n);jW(t,e),function Cbe(n,e){const t=function $W(){return!Lu&&"BroadcastChannel"in self&&(Lu=new BroadcastChannel("[Firebase] FID Change"),Lu.onmessage=n=>{jW(n.data.key,n.data.fid)}),Lu}();t&&t.postMessage({key:n,fid:e}),function WW(){0===gf.size&&Lu&&(Lu.close(),Lu=null)}()}(t,e)}function jW(n,e){const t=gf.get(n);if(t)for(const i of t)i(e)}let Lu=null;const xbe="firebase-installations-database",Tbe=1,Fu="firebase-installations-store";let ID=null;function DD(){return ID||(ID=function abe(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=fl(o);return i&&o.addEventListener("upgradeneeded",c=>{i(fl(o.result),c.oldVersion,c.newVersion,fl(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}(xbe,Tbe,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Fu)}})),ID}function mw(n,e){return RD.apply(this,arguments)}function RD(){return(RD=N(function*(n,e){const t=mf(n),r=(yield DD()).transaction(Fu,"readwrite"),s=r.objectStore(Fu),o=yield s.get(t);return yield s.put(e,t),yield r.done,(!o||o.fid!==e.fid)&&GW(n,e.fid),e})).apply(this,arguments)}function PD(n){return OD.apply(this,arguments)}function OD(){return(OD=N(function*(n){const e=mf(n),i=(yield DD()).transaction(Fu,"readwrite");yield i.objectStore(Fu).delete(e),yield i.done})).apply(this,arguments)}function Zg(n,e){return ND.apply(this,arguments)}function ND(){return(ND=N(function*(n,e){const t=mf(n),r=(yield DD()).transaction(Fu,"readwrite"),s=r.objectStore(Fu),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield r.done,a&&(!o||o.fid!==a.fid)&&GW(n,a.fid),a})).apply(this,arguments)}function kD(n){return LD.apply(this,arguments)}function LD(){return LD=N(function*(n){let e;const t=yield Zg(n.appConfig,i=>{const r=function Mbe(n){return KW(n||{fid:bbe(),registrationStatus:0})}(i),s=function Abe(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(lc.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function Ibe(n,e){return FD.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Dbe(n)}:{installationEntry:e}}(n,r);return e=s.registrationPromise,s.installationEntry});return t.fid===AD?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),LD.apply(this,arguments)}function FD(){return FD=N(function*(n,e){try{const t=yield function _be(n,e){return MD.apply(this,arguments)}(n,e);return mw(n.appConfig,t)}catch(t){throw UW(t)&&409===t.customData.serverCode?yield PD(n.appConfig):yield mw(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),FD.apply(this,arguments)}function Dbe(n){return UD.apply(this,arguments)}function UD(){return(UD=N(function*(n){let e=yield qW(n.appConfig);for(;1===e.registrationStatus;)yield HW(100),e=yield qW(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:i}=yield kD(n);return i||t}return e})).apply(this,arguments)}function qW(n){return Zg(n,e=>{if(!e)throw lc.create("installation-not-found");return KW(e)})}function KW(n){return function Rbe(n){return 1===n.registrationStatus&&n.registrationTime+kW<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function BD(){return(BD=N(function*({appConfig:n,heartbeatServiceProvider:e},t){const i=function Obe(n,{fid:e}){return`${ED(n)}/${e}/authTokens:generate`}(n,t),r=function zW(n,{refreshToken:e}){const t=VW(n);return t.append("Authorization",function gbe(n){return`${FW} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&r.append("x-firebase-client",l)}const a={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:LW,appId:n.appId}})},c=yield xD(()=>fetch(i,a));if(c.ok)return BW(yield c.json());throw yield SD("Generate Auth Token",c)})).apply(this,arguments)}function VD(n){return zD.apply(this,arguments)}function zD(){return zD=N(function*(n,e=!1){let t;const i=yield Zg(n.appConfig,s=>{if(!YW(s))throw lc.create("not-registered");const o=s.authToken;if(!e&&function Lbe(n){return 2===n.requestStatus&&!function Fbe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+dbe}(n)}(o))return s;if(1===o.requestStatus)return t=function Nbe(n,e){return HD.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw lc.create("app-offline");const a=function Ube(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function kbe(n,e){return GD.apply(this,arguments)}(n,a),a}});return t?yield t:i.authToken}),zD.apply(this,arguments)}function HD(){return(HD=N(function*(n,e){let t=yield XW(n.appConfig);for(;1===t.authToken.requestStatus;)yield HW(100),t=yield XW(n.appConfig);const i=t.authToken;return 0===i.requestStatus?VD(n,e):i})).apply(this,arguments)}function XW(n){return Zg(n,e=>{if(!YW(e))throw lc.create("not-registered");return function Bbe(n){return 1===n.requestStatus&&n.requestTime+kW<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function GD(){return GD=N(function*(n,e){try{const t=yield function Pbe(n,e){return BD.apply(this,arguments)}(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield mw(n.appConfig,i),t}catch(t){if(!UW(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield mw(n.appConfig,i)}else yield PD(n.appConfig);throw t}}),GD.apply(this,arguments)}function YW(n){return void 0!==n&&2===n.registrationStatus}function jD(){return(jD=N(function*(n){const e=n,{installationEntry:t,registrationPromise:i}=yield kD(e);return i?i.catch(console.error):VD(e).catch(console.error),t.fid})).apply(this,arguments)}function $D(){return $D=N(function*(n,e=!1){const t=n;return yield function Hbe(n){return WD.apply(this,arguments)}(t),(yield VD(t,e)).token}),$D.apply(this,arguments)}function WD(){return(WD=N(function*(n){const{registrationPromise:e}=yield kD(n);e&&(yield e)})).apply(this,arguments)}function XD(n){return lc.create("missing-app-config-values",{valueName:n})}const ZW="installations",qbe=n=>{const e=n.getProvider("app").getImmediate(),t=function $be(n){if(!n||!n.options)throw XD("App Configuration");if(!n.name)throw XD("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw XD(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:pa(e,"heartbeat"),_delete:()=>Promise.resolve()}},Kbe=n=>{const t=pa(n.getProvider("app").getImmediate(),ZW).getImmediate();return{getId:()=>function Vbe(n){return jD.apply(this,arguments)}(t),getToken:r=>function zbe(n){return $D.apply(this,arguments)}(t,r)}};(function Xbe(){Or(new mr(ZW,qbe,"PUBLIC")),Or(new mr("installations-internal",Kbe,"PRIVATE"))})(),En(NW,wD),En(NW,wD,"esm2017");const YD="@firebase/remote-config",ws=new Lo("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class o0e{constructor(e,t,i,r){this.client=e,this.storage=t,this.storageCache=i,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const i=Date.now()-t,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return N(function*(){const[i,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,i))return r;e.eTag=r&&r.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function a0e(n=navigator){return n.languages&&n.languages[0]||n.language}class c0e{constructor(e,t,i,r,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=i,this.projectId=r,this.apiKey=s,this.appId=o}fetch(e){var t=this;return N(function*(){const[i,r]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},c={sdk_version:t.sdkVersion,app_instance_id:i,app_instance_id_token:r,app_id:t.appId,language_code:a0e()},l={method:"POST",headers:a,body:JSON.stringify(c)},u=fetch(o,l),d=new Promise((_,y)=>{e.signal.addEventListener(()=>{const v=new Error("The operation was aborted.");v.name="AbortError",y(v)})});let h;try{yield Promise.race([u,d]),h=yield u}catch(_){let y="fetch-client-network";throw"AbortError"===_?.name&&(y="fetch-timeout"),ws.create(y,{originalErrorMessage:_?.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,m;if(200===h.status){let _;try{_=yield h.json()}catch(y){throw ws.create("fetch-client-parse",{originalErrorMessage:y?.message})}g=_.entries,m=_.state}if("INSTANCE_STATE_UNSPECIFIED"===m?f=500:"NO_CHANGE"===m?f=304:("NO_TEMPLATE"===m||"EMPTY_CONFIG"===m)&&(g={}),304!==f&&200!==f)throw ws.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class d0e{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return N(function*(){const i=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,i)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:i}){var r=this;return N(function*(){yield function l0e(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(ws.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),s}catch(s){if(!function u0e(n){if(!(n instanceof fo&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+nD(i),backoffCount:i+1};return yield r.storage.setThrottleMetadata(o),r.attemptFetch(e,o)}})()}}class p0e{constructor(e,t,i,r,s){this.app=e,this._client=t,this._storageCache=i,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _w(n,e){const t=n.target.error||void 0;return ws.create(e,{originalErrorMessage:t&&t?.message})}const Uu="app_namespace_store";class y0e{constructor(e,t,i,r=function _0e(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=i=>{e(_w(i,"storage-open"))},t.onsuccess=i=>{n(i.target.result)},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Uu,{keyPath:"compositeKey"})}}catch(t){e(ws.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return N(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{const a=i.transaction([Uu],"readonly").objectStore(Uu),c=t.createCompositeKey(e);try{const l=a.get(c);l.onerror=u=>{s(_w(u,"storage-get"))},l.onsuccess=u=>{const d=u.target.result;r(d?d.value:void 0)}}catch(l){s(ws.create("storage-get",{originalErrorMessage:l?.message}))}})})()}set(e,t){var i=this;return N(function*(){const r=yield i.openDbPromise;return new Promise((s,o)=>{const c=r.transaction([Uu],"readwrite").objectStore(Uu),l=i.createCompositeKey(e);try{const u=c.put({compositeKey:l,value:t});u.onerror=d=>{o(_w(d,"storage-set"))},u.onsuccess=()=>{s()}}catch(u){o(ws.create("storage-set",{originalErrorMessage:u?.message}))}})})()}delete(e){var t=this;return N(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{const a=i.transaction([Uu],"readwrite").objectStore(Uu),c=t.createCompositeKey(e);try{const l=a.delete(c);l.onerror=u=>{s(_w(u,"storage-delete"))},l.onsuccess=()=>{r()}}catch(l){s(ws.create("storage-delete",{originalErrorMessage:l?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class v0e{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return N(function*(){const t=e.storage.getLastFetchStatus(),i=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield i;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield r;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function w0e(){return t1.apply(this,arguments)}function t1(){return(t1=N(function*(){if(!dl())return!1;try{return yield ff()}catch{return!1}})).apply(this,arguments)}!function b0e(){Or(new mr("remote-config",function n(e,{instanceIdentifier:t}){const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ws.create("registration-window");if(!dl())throw ws.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=i.options;if(!s)throw ws.create("registration-project-id");if(!o)throw ws.create("registration-api-key");if(!a)throw ws.create("registration-app-id");const c=new y0e(a,i.name,t=t||"firebase"),l=new v0e(c),u=new Pu(YD);u.logLevel=en.ERROR;const d=new c0e(r,ku,t,s,o,a),h=new d0e(d,c),f=new o0e(h,c,l,u),p=new p0e(i,f,l,c,u);return function i0e(n){const e=Yn(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),En(YD,"0.4.4"),En(YD,"0.4.4","esm2017")}();const E0e=(n,e)=>e.some(t=>n instanceof t);let t6,n6;const i6=new WeakMap,n1=new WeakMap,r6=new WeakMap,r1=new WeakMap,s1=new WeakMap;let o1={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return n1.get(n);if("objectStoreNames"===e)return n.objectStoreNames||r6.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return uc(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function I0e(n){return"function"==typeof n?function A0e(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function C0e(){return n6||(n6=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(a1(this),e),uc(i6.get(this))}:function(...e){return uc(n.apply(a1(this),e))}:function(e,...t){const i=n.call(a1(this),e,...t);return r6.set(i,e.sort?e.sort():[e]),uc(i)}}(n):(n instanceof IDBTransaction&&function T0e(n){if(n1.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});n1.set(n,e)}(n),E0e(n,function S0e(){return t6||(t6=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,o1):n)}function uc(n){if(n instanceof IDBRequest)return function x0e(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(uc(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&i6.set(t,n)}).catch(()=>{}),s1.set(e,n),e}(n);if(r1.has(n))return r1.get(n);const e=I0e(n);return e!==n&&(r1.set(n,e),s1.set(e,n)),e}const a1=n=>s1.get(n);function s6(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=uc(o);return i&&o.addEventListener("upgradeneeded",c=>{i(uc(o.result),c.oldVersion,c.newVersion,uc(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}function c1(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),uc(t).then(()=>{})}const D0e=["get","getKey","getAll","getAllKeys","count"],R0e=["put","add","delete","clear"],l1=new Map;function o6(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(l1.get(e))return l1.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=R0e.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!D0e.includes(t))return;const s=function(){var o=N(function*(a,...c){const l=this.transaction(a,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),r&&l.done]))[0]});return function(c){return o.apply(this,arguments)}}();return l1.set(e,s),s}!function M0e(n){o1=n(o1)}(n=>({...n,get:(e,t,i)=>o6(e,t)||n.get(e,t,i),has:(e,t)=>!!o6(e,t)||n.has(e,t)}));const P0e="/firebase-messaging-sw.js",O0e="/firebase-cloud-messaging-push-scope",a6="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",N0e="https://fcmregistrations.googleapis.com/v1",c6="google.c.a.c_id",k0e="google.c.a.c_l",L0e="google.c.a.ts";var yw=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(yw||{});function dc(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function B0e(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}const u1="fcm_token_details_db",V0e=5,l6="fcm_token_object_Store";function d1(){return d1=N(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(u1))return null;let e=null;return(yield s6(u1,V0e,{upgrade:(i=N(function*(r,s,o,a){var c;if(s<2||!r.objectStoreNames.contains(l6))return;const l=a.objectStore(l6),u=yield l.index("fcmSenderId").get(n);if(yield l.clear(),u)if(2===s){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(c=d.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:dc(d.vapidKey)}}}else if(3===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:dc(d.auth),p256dh:dc(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:dc(d.vapidKey)}}}else if(4===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:dc(d.auth),p256dh:dc(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:dc(d.vapidKey)}}}}),function(s,o,a,c){return i.apply(this,arguments)})})).close(),yield c1(u1),yield c1("fcm_vapid_details_db"),yield c1("undefined"),function H0e(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var i}),d1.apply(this,arguments)}const G0e="firebase-messaging-database",j0e=1,Bu="firebase-messaging-store";let h1=null;function f1(){return h1||(h1=s6(G0e,j0e,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Bu)}})),h1}function u6(n){return p1.apply(this,arguments)}function p1(){return p1=N(function*(n){const e=y1(n),i=yield(yield f1()).transaction(Bu).objectStore(Bu).get(e);if(i)return i;{const r=yield function z0e(n){return d1.apply(this,arguments)}(n.appConfig.senderId);if(r)return yield m1(n,r),r}}),p1.apply(this,arguments)}function m1(n,e){return g1.apply(this,arguments)}function g1(){return(g1=N(function*(n,e){const t=y1(n),r=(yield f1()).transaction(Bu,"readwrite");return yield r.objectStore(Bu).put(e,t),yield r.done,e})).apply(this,arguments)}function _1(){return(_1=N(function*(n){const e=y1(n),i=(yield f1()).transaction(Bu,"readwrite");yield i.objectStore(Bu).delete(e),yield i.done})).apply(this,arguments)}function y1({appConfig:n}){return n.appId}const gr=new Lo("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function q0e(n,e){return v1.apply(this,arguments)}function v1(){return(v1=N(function*(n,e){const t=yield S1(n),i=h6(e),r={method:"POST",headers:t,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(E1(n.appConfig),r)).json()}catch(o){throw gr.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw gr.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw gr.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function b1(){return(b1=N(function*(n,e){const t=yield S1(n),i=h6(e.subscriptionOptions),r={method:"PATCH",headers:t,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(`${E1(n.appConfig)}/${e.token}`,r)).json()}catch(o){throw gr.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw gr.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw gr.create("token-update-no-token");return s.token})).apply(this,arguments)}function d6(n,e){return w1.apply(this,arguments)}function w1(){return(w1=N(function*(n,e){const i={method:"DELETE",headers:yield S1(n)};try{const s=yield(yield fetch(`${E1(n.appConfig)}/${e}`,i)).json();if(s.error)throw gr.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(r){throw gr.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})).apply(this,arguments)}function E1({projectId:n}){return`${N0e}/projects/${n}/registrations`}function S1(n){return C1.apply(this,arguments)}function C1(){return(C1=N(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function h6({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const r={web:{endpoint:t,auth:e,p256dh:n}};return i!==a6&&(r.web.applicationPubKey=i),r}const X0e=6048e5;function x1(){return x1=N(function*(n){const e=yield function Q0e(n,e){return I1.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:dc(e.getKey("auth")),p256dh:dc(e.getKey("p256dh"))},i=yield u6(n.firebaseDependencies);if(i){if(function J0e(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(i.subscriptionOptions,t))return Date.now()>=i.createTime+X0e?function Z0e(n,e){return M1.apply(this,arguments)}(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{yield d6(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return p6(n.firebaseDependencies,t)}return p6(n.firebaseDependencies,t)}),x1.apply(this,arguments)}function T1(){return T1=N(function*(n){const e=yield u6(n.firebaseDependencies);e&&(yield d6(n.firebaseDependencies,e.token),yield function $0e(n){return _1.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),T1.apply(this,arguments)}function M1(){return M1=N(function*(n,e){try{const t=yield function K0e(n,e){return b1.apply(this,arguments)}(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield m1(n.firebaseDependencies,i),t}catch(t){throw yield function f6(n){return T1.apply(this,arguments)}(n),t}}),M1.apply(this,arguments)}function p6(n,e){return A1.apply(this,arguments)}function A1(){return(A1=N(function*(n,e){const i={token:yield q0e(n,e),createTime:Date.now(),subscriptionOptions:e};return yield m1(n,i),i.token})).apply(this,arguments)}function I1(){return(I1=N(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:B0e(e)})})).apply(this,arguments)}function m6(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function ewe(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const r=e.notification.image;r&&(n.notification.image=r);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function twe(n,e){e.data&&(n.data=e.data)}(e,n),function nwe(n,e){var t,i,r,s,o;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const a=null!==(r=null===(i=e.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==r?r:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const c=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}(e,n),e}function g6(n,e){const t=[];for(let i=0;i<n.length;i++)t.push(n.charAt(i)),i<e.length&&t.push(e.charAt(i));return t.join("")}function D1(n){return gr.create("missing-app-config-values",{valueName:n})}g6("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),g6("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class swe{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function rwe(n){if(!n||!n.options)throw D1("App Configuration Object");if(!n.name)throw D1("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw D1(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}function R1(){return(R1=N(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(P0e,{scope:O0e}),n.swRegistration.update().catch(()=>{})}catch(e){throw gr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function P1(){return(P1=N(function*(n,e){if(!e&&!n.swRegistration&&(yield function _6(n){return R1.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw gr.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function O1(){return(O1=N(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=a6)})).apply(this,arguments)}function N1(){return N1=N(function*(n,e){if(!navigator)throw gr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gr.create("permission-blocked");return yield function awe(n,e){return O1.apply(this,arguments)}(n,e?.vapidKey),yield function owe(n,e){return P1.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function Y0e(n){return x1.apply(this,arguments)}(n)}),N1.apply(this,arguments)}function k1(){return(k1=N(function*(n,e,t){const i=function lwe(n){switch(n){case yw.NOTIFICATION_CLICKED:return"notification_open";case yw.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[c6],message_name:t[k0e],message_time:t[L0e],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function L1(){return L1=N(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===yw.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(m6(t)):n.onMessageHandler.next(m6(t)));const i=t.data;(function iwe(n){return"object"==typeof n&&!!n&&c6 in n})(i)&&"1"===i["google.c.a.e"]&&(yield function cwe(n,e,t){return k1.apply(this,arguments)}(n,t.messageType,i))}),L1.apply(this,arguments)}const v6="@firebase/messaging",dwe=n=>{const e=new swe(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function uwe(n,e){return L1.apply(this,arguments)}(e,t)),e},hwe=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>function y6(n,e){return N1.apply(this,arguments)}(e,i)}};function w6(){return F1.apply(this,arguments)}function F1(){return(F1=N(function*(){try{yield ff()}catch{return!1}return typeof window<"u"&&dl()&&uw()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function gwe(n=pf()){return w6().then(e=>{if(!e)throw gr.create("unsupported-browser")},e=>{throw gr.create("indexed-db-unsupported")}),pa(Yn(n),"messaging").getImmediate()}!function fwe(){Or(new mr("messaging",dwe,"PUBLIC")),Or(new mr("messaging-internal",hwe,"PRIVATE")),En(v6,"0.12.4"),En(v6,"0.12.4","esm2017")}();const vw="analytics",_we="firebase_id",ywe="origin",vwe=6e4,bwe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",V1="https://www.googletagmanager.com/gtag/js",Ki=new Pu("@firebase/analytics"),is=new Lo("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ewe(n){if(!n.startsWith(V1)){const e=is.create("invalid-gtag-resource",{gtagURL:n});return Ki.warn(e.message),""}return n}function E6(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function z1(){return(z1=N(function*(n,e,t,i,r,s){const o=i[r];try{if(o)yield e[o];else{const c=(yield E6(t)).find(l=>l.measurementId===r);c&&(yield e[c.appId])}}catch(a){Ki.error(a)}n("config",r,s)})).apply(this,arguments)}function H1(){return(H1=N(function*(n,e,t,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=yield E6(t);for(const c of o){const l=a.find(d=>d.measurementId===c),u=l&&e[l.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",i,r||{})}catch(s){Ki.error(s)}})).apply(this,arguments)}const Rwe=30,S6=new class Owe{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Nwe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function G1(){return(G1=N(function*(n){var e;const{appId:t,apiKey:i}=n,r={method:"GET",headers:Nwe(i)},s=bwe.replace("{app-id}",t),o=yield fetch(s,r);if(200!==o.status&&304!==o.status){let a="";try{const c=yield o.json();null!==(e=c.error)&&void 0!==e&&e.message&&(a=c.error.message)}catch{}throw is.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function j1(){return(j1=N(function*(n,e=S6,t){const{appId:i,apiKey:r,measurementId:s}=n.options;if(!i)throw is.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw is.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Bwe;return setTimeout(N(function*(){a.abort()}),void 0!==t?t:vwe),C6({appId:i,apiKey:r,measurementId:s},o,a,e)})).apply(this,arguments)}function C6(n,e,t){return $1.apply(this,arguments)}function $1(){return $1=N(function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=S6){var s;const{appId:o,measurementId:a}=n;try{yield function Fwe(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(is.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(i,e)}catch(c){if(a)return Ki.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw c}try{const c=yield function kwe(n){return G1.apply(this,arguments)}(n);return r.deleteThrottleMetadata(o),c}catch(c){const l=c;if(!function Uwe(n){if(!(n instanceof fo&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l)){if(r.deleteThrottleMetadata(o),a)return Ki.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw c}const u=503===Number(null===(s=l?.customData)||void 0===s?void 0:s.httpStatus)?nD(t,r.intervalMillis,Rwe):nD(t,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return r.setThrottleMetadata(o,d),Ki.debug(`Calling attemptFetch again in ${u} millis`),C6(n,d,i,r)}}),$1.apply(this,arguments)}class Bwe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let W1,J1;function q1(){return(q1=N(function*(n,e,t,i,r){if(r&&r.global)n("event",t,i);else{const s=yield e;n("event",t,Object.assign(Object.assign({},i),{send_to:s}))}})).apply(this,arguments)}function X1(){return(X1=N(function*(n,e,t,i){if(i&&i.global)return n("set",{user_id:t}),Promise.resolve();n("config",yield e,{update:!0,user_id:t})})).apply(this,arguments)}function eR(){return(eR=N(function*(){if(!dl())return Ki.warn(is.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield ff()}catch(n){return Ki.warn(is.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function tR(){return tR=N(function*(n,e,t,i,r,s,o){var a;const c=function Lwe(n){return j1.apply(this,arguments)}(n);c.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&Ki.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Ki.error(f)),e.push(c);const l=function Wwe(){return eR.apply(this,arguments)}().then(f=>{if(f)return i.getId()}),[u,d]=yield Promise.all([c,l]);(function Dwe(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(V1)&&t.src.includes(n))return t;return null})(s)||function Cwe(n,e){const t=function Swe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:Ewe}),i=document.createElement("script"),r=`${V1}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(s,u.measurementId),J1&&(r("consent","default",J1),function x6(n){J1=n}(void 0)),r("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[ywe]="firebase",h.update=!0,null!=d&&(h[_we]=d),r("config",u.measurementId,h),W1&&(r("set",W1),function T6(n){W1=n}(void 0)),u.measurementId}),tR.apply(this,arguments)}class Kwe{constructor(e){this.app=e}_delete(){return delete ma[this.app.options.appId],Promise.resolve()}}let ma={},M6=[];const A6={};let D6,ga,bw="dataLayer",nR=!1;function Ywe(n,e,t){!function Xwe(){const n=[];if(JI()&&n.push("This is a browser extension environment."),uw()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=is.create("invalid-analytics-context",{errorInfo:e});Ki.warn(t.message)}}();const i=n.options.appId;if(!i)throw is.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw is.create("no-api-key");Ki.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ma[i])throw is.create("already-exists",{id:i});if(!nR){!function xwe(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(bw);const{wrappedGtag:s,gtagCore:o}=function Iwe(n,e,t,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function Awe(n,e,t,i){function s(){return s=N(function*(o,...a){try{if("event"===o){const[c,l]=a;yield function Mwe(n,e,t,i,r){return H1.apply(this,arguments)}(n,e,t,c,l)}else if("config"===o){const[c,l]=a;yield function Twe(n,e,t,i,r,s){return z1.apply(this,arguments)}(n,e,t,i,c,l)}else if("consent"===o){const[c]=a;n("consent","update",c)}else if("get"===o){const[c,l,u]=a;n("get",c,l,u)}else if("set"===o){const[c]=a;n("set",c)}else n(o,...a)}catch(c){Ki.error(c)}}),s.apply(this,arguments)}return function r(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}(ma,M6,A6,bw,"gtag");ga=s,D6=o,nR=!0}return ma[i]=function qwe(n,e,t,i,r,s,o){return tR.apply(this,arguments)}(n,M6,A6,e,D6,bw,t),new Kwe(n)}function Zwe(n=pf()){const e=pa(n=Yn(n),vw);return e.isInitialized()?e.getImmediate():function Qwe(n,e={}){const t=pa(n,vw);if(t.isInitialized()){const r=t.getImmediate();if(qg(e,t.getOptions()))return r;throw is.create("already-initialized")}return t.initialize({options:e})}(n)}function Jwe(){return iR.apply(this,arguments)}function iR(){return(iR=N(function*(){if(JI()||!uw()||!dl())return!1;try{return yield ff()}catch{return!1}})).apply(this,arguments)}function eEe(n,e,t){n=Yn(n),function Hwe(n,e,t,i){return X1.apply(this,arguments)}(ga,ma[n.app.options.appId],e,t).catch(i=>Ki.error(i))}function R6(n,e,t,i){n=Yn(n),function Vwe(n,e,t,i,r){return q1.apply(this,arguments)}(ga,ma[n.app.options.appId],e,t,i).catch(r=>Ki.error(r))}const P6="@firebase/analytics";!function tEe(){Or(new mr(vw,(e,{options:t})=>Ywe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Or(new mr("analytics-internal",function n(e){try{const t=e.getProvider(vw).getImmediate();return{logEvent:(i,r,s)=>R6(t,i,r,s)}}catch(t){throw is.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),En(P6,"0.10.0"),En(P6,"0.10.0","esm2017")}();class nEe extends ar{constructor(e,t){super()}schedule(e,t=0){return this}}const ww={setInterval(n,e,...t){const{delegate:i}=ww;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=ww;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class Ew extends nEe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return ww.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&ww.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ih(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const sR={now:()=>(sR.delegate||Date).now(),delegate:void 0};class Qg{constructor(e,t=Qg.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Qg.now=sR.now;class Sw extends Qg{constructor(e,t=Qg.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const sEe=new class rEe extends Sw{}(class iEe extends Ew{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}}),Cw=new Sw(Ew),oEe=Cw,hc=new Oh("7.6.1"),oR="__angularfire_symbol__analyticsIsSupportedValue",aR="__angularfire_symbol__analyticsIsSupported",cR="__angularfire_symbol__remoteConfigIsSupportedValue",lR="__angularfire_symbol__remoteConfigIsSupported",uR="__angularfire_symbol__messagingIsSupportedValue",dR="__angularfire_symbol__messagingIsSupported";globalThis[aR]||(globalThis[aR]=Jwe().then(n=>globalThis[oR]=n).catch(()=>globalThis[oR]=!1)),globalThis[dR]||(globalThis[dR]=w6().then(n=>globalThis[uR]=n).catch(()=>globalThis[uR]=!1)),globalThis[lR]||(globalThis[lR]=w0e().then(n=>globalThis[cR]=n).catch(()=>globalThis[cR]=!1));const hR=n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`,xw={async:()=>globalThis[dR],sync:()=>{const n=globalThis[uR];if(void 0===n)throw new Error(hR("Messaging"));return n}},Tw={async:()=>globalThis[aR],sync:()=>{const n=globalThis[oR];if(void 0===n)throw new Error(hR("Analytics"));return n}};function _f(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const yf=(n,e)=>{const t=e?[e]:SW(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i};function vf(){}class N6{constructor(e,t=sEe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{e.apply(this,[o])})},t,i)}}class aEe{constructor(e){this.zone=e,this.task=null}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vf,{},vf,vf)),t.pipe(pr({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let bf=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new N6(Zone.current)),this.insideAngular=t.run(()=>new N6(Zone.current,Cw)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(z(pt))},n.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Vu(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function zu(n){return Vu().ngZone.run(()=>n())}function lEe(n){return Vu(),function uEe(n){return function(t){return(t=t.lift(new aEe(n.ngZone))).pipe(Fv(n.outsideAngular),Lv(n.insideAngular))}}(Vu())(n)}const dEe=(n,e)=>function(){const i=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),zu(()=>n.apply(void 0,i))},Xi=(n,e)=>function(){let t;const i=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof i[s]&&(e&&(t||(t=zu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vf,{},vf,vf)))),i[s]=dEe(i[s],t));const r=function cEe(n){return Vu().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,i));if(!e){if(r instanceof yn){const s=Vu();return r.pipe(Fv(s.outsideAngular),Lv(s.insideAngular))}return zu(()=>r)}return r instanceof yn?r.pipe(lEe):r instanceof Promise?zu(()=>new Promise((s,o)=>r.then(a=>zu(()=>s(a)),a=>zu(()=>o(a))))):"function"==typeof r&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),r.apply(this,arguments)}:zu(()=>r)};class fc{constructor(e){return e}}class wf{constructor(){return SW()}}const fR=new Se("angularfire2._apps"),fEe={provide:fc,useFactory:function hEe(n){return n&&1===n.length?n[0]:new fc(pf())},deps:[[new hi,fR]]},pEe={provide:wf,deps:[[new hi,fR]]};function mEe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new fc(i)}}let gEe=(()=>{class n{constructor(t){En("angularfire",hc.full,"core"),En("angularfire",hc.full,"app"),En("angular",Fz.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(z(ks))},n.\u0275mod=Rt({type:n}),n.\u0275inj=Tt({providers:[fEe,pEe]}),n})();function _Ee(n,...e){return{ngModule:gEe,providers:[{provide:fR,useFactory:mEe(n),multi:!0,deps:[pt,Tn,bf,...e]}]}}const yEe=Xi(EW,!0),pR=new Map,k6={activated:!1,tokenObservers:[]},vEe={initialized:!1,enabled:!1};function ni(n){return pR.get(n)||Object.assign({},k6)}function Mw(){return vEe}const mR="https://content-firebaseappcheck.googleapis.com/v1",SEe="exchangeDebugToken",L6={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class xEe{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return N(function*(){t.stop();try{t.pending=new lw,yield function TEe(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new lw,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _r=new Lo("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gR(n){if(!ni(n).activated)throw _r.create("use-before-activation",{appName:n.name})}function Dw(n,e){return yR.apply(this,arguments)}function yR(){return(yR=N(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const d=yield r.getHeartbeatsHeader();d&&(i["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:i};let o,a;try{o=yield fetch(n,s)}catch(d){throw _r.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw _r.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw _r.create("fetch-parse-error",{originalErrorMessage:d?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw _r.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=1e3*Number(c[1]),u=Date.now();return{token:a.token,expireTimeMillis:u+l,issuedAtTimeMillis:u}})).apply(this,arguments)}function F6(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${mR}/projects/${t}/apps/${i}:${SEe}?key=${r}`,body:{debug_token:e}}}const DEe="firebase-app-check-database",REe=1,Jg="firebase-app-check-store";let Rw=null;function vR(){return(vR=N(function*(n,e){const i=(yield function B6(){return Rw||(Rw=new Promise((n,e)=>{try{const t=indexedDB.open(DEe,REe);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(_r.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Jg,{keyPath:"compositeKey"})}}catch(t){e(_r.create("storage-open",{originalErrorMessage:t?.message}))}}),Rw)}()).transaction(Jg,"readwrite"),s=i.objectStore(Jg).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},i.onerror=c=>{var l;a(_r.create("storage-set",{originalErrorMessage:null===(l=c.target.error)||void 0===l?void 0:l.message}))}})})).apply(this,arguments)}const e_=new Pu("@firebase/app-check");function ER(n,e){return dl()?function OEe(n,e){return function V6(n,e){return vR.apply(this,arguments)}(function H6(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{e_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function CR(){return Mw().enabled}function xR(){return TR.apply(this,arguments)}function TR(){return(TR=N(function*(){const n=Mw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const BEe={error:"UNKNOWN_ERROR"};function VEe(n){return QI.encodeString(JSON.stringify(n),!1)}function Pw(n){return MR.apply(this,arguments)}function MR(){return(MR=N(function*(n,e=!1){const t=n.app;gR(t);const i=ni(t);let s,r=i.token;if(r&&!Ef(r)&&(i.token=void 0,r=void 0),!r){const c=yield i.cachedTokenPromise;c&&(Ef(c)?r=c:yield ER(t,void 0))}if(!e&&r&&Ef(r))return{token:r.token};let a,o=!1;if(CR()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Dw(F6(t,yield xR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const c=yield i.exchangeTokenPromise;return yield ER(t,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield ni(t).exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?e_.warn(c.message):e_.error(c),s=c}return r?s?a=Ef(r)?{token:r.token,internalError:s}:W6(s):(a={token:r.token},i.token=r,yield ER(t,r)):a=W6(s),o&&function $6(n,e){const t=ni(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(t,a),a})).apply(this,arguments)}function G6(n){return AR.apply(this,arguments)}function AR(){return(AR=N(function*(n){const e=n.app;gR(e);const{provider:t}=ni(e);if(CR()){const i=yield xR(),{token:r}=yield Dw(F6(e,i),n.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield t.getToken();return{token:i}}})).apply(this,arguments)}function DR(n,e){const t=ni(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function j6(n){const{app:e}=n,t=ni(e);let i=t.tokenRefresher;i||(i=function zEe(n){const{app:e}=n;return new xEe(N(function*(){let i;if(i=ni(e).token?yield Pw(n,!0):yield Pw(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=ni(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},L6.RETRIAL_MIN_WAIT,L6.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Ef(n){return n.expireTimeMillis-Date.now()>0}function W6(n){return{token:VEe(BEe),error:n}}class HEe{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ni(this.app);for(const t of e)DR(this.app,t.next);return Promise.resolve()}}const e8="app-check-internal";!function nSe(){Or(new mr("app-check",n=>function GEe(n,e){return new HEe(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(e8).initialize()})),Or(new mr(e8,n=>function jEe(n){return{getToken:e=>Pw(n,e),getLimitedUseToken:()=>G6(n),addTokenListener:e=>function IR(n,e,t,i){const{app:r}=n,s=ni(r);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:i,type:e}],s.token&&Ef(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),j6(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>j6(n))}(n,"INTERNAL",e),removeTokenListener:e=>DR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),En("@firebase/app-check","0.8.0")}();class NR{constructor(){return yf("app-check")}}typeof window<"u"&&window;const aSe=function n8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},i8=new Lo("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nw=new Pu("@firebase/auth");function kw(n,...e){Nw.logLevel<=en.ERROR&&Nw.error(`Auth (${ku}): ${n}`,...e)}function Es(n,...e){throw LR(n,...e)}function _a(n,...e){return LR(n,...e)}function LR(n,...e){if("string"!=typeof n){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return i8.create(n,...e)}function De(n,e,...t){if(!n)throw LR(e,...t)}function ya(n){const e="INTERNAL ASSERTION FAILED: "+n;throw kw(e),new Error(e)}function pl(n,e){n||ya(e)}function t_(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function s8(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class n_{constructor(e,t){this.shortDelay=e,this.longDelay=t,pl(t>e,"Short delay should be less than long delay!"),this.isMobile=function Rye(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qi())}()||function Oye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function lSe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function FR(){return"http:"===s8()||"https:"===s8()}()||JI()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function UR(n,e){pl(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class o8{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ya("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ya("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ya("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dSe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},hSe=new n_(3e4,6e4);function Zn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ii(n,e,t,i){return BR.apply(this,arguments)}function BR(){return(BR=N(function*(n,e,t,i,r={}){return a8(n,r,N(function*(){let s={},o={};i&&("GET"===e?o=i:s={body:JSON.stringify(i)});const a=hw(Object.assign({key:n.config.apiKey},o)).slice(1),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),o8.fetch()(c8(n,n.config.apiHost,t,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function a8(n,e,t){return VR.apply(this,arguments)}function VR(){return(VR=N(function*(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},dSe),e);try{const r=new fSe(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw i_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw i_(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===c)throw i_(n,"email-already-in-use",o);if("USER_DISABLED"===c)throw i_(n,"user-disabled",o);const u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw function r8(n,e,t){const i=Object.assign(Object.assign({},aSe()),{[e]:t});return new Lo("auth","Firebase",i).create(e,{appName:n.name})}(n,u,l);Es(n,u)}}catch(r){if(r instanceof fo)throw r;Es(n,"network-request-failed",{message:String(r)})}})).apply(this,arguments)}function pc(n,e,t,i){return zR.apply(this,arguments)}function zR(){return(zR=N(function*(n,e,t,i,r={}){const s=yield ii(n,e,t,i,r);return"mfaPendingCredential"in s&&Es(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function c8(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?UR(n.config,r):`${n.config.apiScheme}://${r}`}class fSe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(_a(this.auth,"network-request-failed")),hSe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function i_(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=_a(n,e,i);return r.customData._tokenResponse=t,r}function HR(){return(HR=N(function*(n,e){return ii(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function jR(){return(jR=N(function*(n,e){return ii(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function r_(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $R(){return($R=N(function*(n,e=!1){const t=Yn(n),i=yield t.getIdToken(e),r=Lw(i);De(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:r_(WR(r.auth_time)),issuedAtTime:r_(WR(r.iat)),expirationTime:r_(WR(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function WR(n){return 1e3*Number(n)}function Lw(n){const[e,t,i]=n.split(".");if(void 0===e||void 0===t||void 0===i)return kw("JWT malformed, contained fewer than 3 sections"),null;try{const r=aw(t);return r?JSON.parse(r):(kw("Failed to decode base64 JWT payload"),null)}catch(r){return kw("Caught error parsing JWT payload as JSON",r?.toString()),null}}function mc(n,e){return qR.apply(this,arguments)}function qR(){return(qR=N(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(i){throw i instanceof fo&&function vSe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})).apply(this,arguments)}class bSe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),i}{this.errorBackoff=3e4;const r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(N(function*(){yield t.iteration()}),i)}iteration(){var e=this;return N(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class l8{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=r_(this.lastLoginAt),this.creationTime=r_(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function s_(n){return KR.apply(this,arguments)}function KR(){return KR=N(function*(n){var e;const t=n.auth,i=yield n.getIdToken(),r=yield mc(n,function gSe(n,e){return jR.apply(this,arguments)}(t,{idToken:i}));De(r?.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function SSe(n){return n.map(e=>{var{providerId:t}=e,i=jx(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}(s.providerUserInfo):[],a=function ESe(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new l8(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}),KR.apply(this,arguments)}function XR(){return(XR=N(function*(n){const e=Yn(n);yield s_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function YR(){return(YR=N(function*(n,e){const t=yield a8(n,{},N(function*(){const i=hw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=c8(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",o8.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class o_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function ySe(n){const e=Lw(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var i=this;return N(function*(){return De(!i.accessToken||i.refreshToken,e,"user-token-expired"),t||!i.accessToken||i.isExpired?i.refreshToken?(yield i.refresh(e,i.refreshToken),i.accessToken):null:i.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var i=this;return N(function*(){const{accessToken:r,refreshToken:s,expiresIn:o}=yield function CSe(n,e){return YR.apply(this,arguments)}(e,t);i.updateTokensAndExpiration(r,s,Number(o))})()}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new o_;return i&&(De("string"==typeof i,"internal-error",{appName:e}),o.refreshToken=i),r&&(De("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),s&&(De("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new o_,this.toJSON())}_performRefresh(){return ya("not implemented")}}function ml(n,e){De("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Hu{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=jx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bSe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new l8(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return N(function*(){const i=yield mc(t,t.stsTokenManager.getToken(t.auth,e));return De(i,t.auth,"internal-error"),t.accessToken!==i&&(t.accessToken=i,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),i})()}getIdTokenResult(e){return function _Se(n){return $R.apply(this,arguments)}(this,e)}reload(){return function wSe(n){return XR.apply(this,arguments)}(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Hu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var i=this;return N(function*(){let r=!1;e.idToken&&e.idToken!==i.stsTokenManager.accessToken&&(i.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield s_(i)),yield i.auth._persistUserIfCurrent(i),r&&i.auth._notifyListenersIfCurrent(i)})()}delete(){var e=this;return N(function*(){const t=yield e.getIdToken();return yield mc(e,function pSe(n,e){return HR.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,c,l,u;const d=null!==(i=t.displayName)&&void 0!==i?i:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,g=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,_=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:M,providerData:S,stsTokenManager:x}=t;De(v&&x,e,"internal-error");const O=o_.fromJSON(this.name,x);De("string"==typeof v,e,"internal-error"),ml(d,e.name),ml(h,e.name),De("boolean"==typeof b,e,"internal-error"),De("boolean"==typeof M,e,"internal-error"),ml(f,e.name),ml(p,e.name),ml(g,e.name),ml(m,e.name),ml(_,e.name),ml(y,e.name);const C=new Hu({uid:v,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:M,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:O,createdAt:_,lastLoginAt:y});return S&&Array.isArray(S)&&(C.providerData=S.map(w=>Object.assign({},w))),m&&(C._redirectEventId=m),C}static _fromIdTokenResponse(e,t,i=!1){return N(function*(){const r=new o_;r.updateFromServerResponse(t);const s=new Hu({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield s_(s),s})()}}const u8=new Map;function gc(n){pl(n instanceof Function,"Expected a class definition");let e=u8.get(n);return e?(pl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,u8.set(n,e),e)}const d8=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return N(function*(){return!0})()}_set(t,i){var r=this;return N(function*(){r.storage[t]=i})()}_get(t){var i=this;return N(function*(){const r=i.storage[t];return void 0===r?null:r})()}_remove(t){var i=this;return N(function*(){delete i.storage[t]})()}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})();function Fw(n,e,t){return`firebase:${n}:${e}:${t}`}class Cf{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Fw(this.userKey,r.apiKey,s),this.fullPersistenceKey=Fw("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return N(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Hu._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return N(function*(){if(t.persistence===e)return;const i=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,i?t.setCurrentUser(i):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return N(function*(){if(!t.length)return new Cf(gc(d8),e,i);const r=(yield Promise.all(t.map(function(){var l=N(function*(u){if(yield u._isAvailable())return u});return function(u){return l.apply(this,arguments)}}()))).filter(l=>l);let s=r[0]||gc(d8);const o=Fw(i,e.config.apiKey,e.name);let a=null;for(const l of t)try{const u=yield l._get(o);if(u){const d=Hu._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}const c=r.filter(l=>l._shouldAllowMigration);return s._shouldAllowMigration&&c.length?(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var l=N(function*(u){if(u!==s)try{yield u._remove(o)}catch{}});return function(u){return l.apply(this,arguments)}}())),new Cf(s,e,i)):new Cf(s,e,i)})()}}function h8(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_8(e))return"Blackberry";if(y8(e))return"Webos";if(ZR(e))return"Safari";if((e.includes("chrome/")||p8(e))&&!e.includes("edge/"))return"Chrome";if(g8(e))return"Android";{const i=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===i?.length)return i[1]}return"Other"}function f8(n=qi()){return/firefox\//i.test(n)}function ZR(n=qi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p8(n=qi()){return/crios\//i.test(n)}function m8(n=qi()){return/iemobile/i.test(n)}function g8(n=qi()){return/android/i.test(n)}function _8(n=qi()){return/blackberry/i.test(n)}function y8(n=qi()){return/webos/i.test(n)}function Uw(n=qi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function v8(n=qi()){return Uw(n)||g8(n)||y8(n)||_8(n)||/windows phone/i.test(n)||m8(n)}function b8(n,e=[]){let t;switch(n){case"Browser":t=h8(qi());break;case"Worker":t=`${h8(qi())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ku}/${i}`}function w8(n,e){return JR.apply(this,arguments)}function JR(){return(JR=N(function*(n,e){return ii(n,"GET","/v2/recaptchaConfig",Zn(n,e))})).apply(this,arguments)}function S8(n){return void 0!==n&&void 0!==n.enterprise}class C8{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}function eP(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=_a("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",function ISe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(i)})}function x8(n){return`__${n}${Math.floor(1e6*Math.random())}`}class T8{constructor(e){this.type="recaptcha-enterprise",this.auth=Yi(e)}verify(e="verify",t=!1){var i=this;return N(function*(){function s(){return s=N(function*(a){if(!t){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var c=N(function*(l,u){w8(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new C8(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}u(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{u(d)})});return function(l,u){return c.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,c,l){const u=window.grecaptcha;S8(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{c(d)}).catch(()=>{c("NO_RECAPTCHA")})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,c)=>{(function r(a){return s.apply(this,arguments)})(i.auth).then(l=>{if(!t&&S8(window.grecaptcha))o(l,a,c);else{if(typeof window>"u")return void c(new Error("RecaptchaVerifier is only supported in browser"));eP("https://www.google.com/recaptcha/enterprise.js?render="+l).then(()=>{o(l,a,c)}).catch(u=>{c(u)})}}).catch(l=>{c(l)})})})()}}function gl(n,e,t){return tP.apply(this,arguments)}function tP(){return(tP=N(function*(n,e,t,i=!1){const r=new T8(n);let s;try{s=yield r.verify(t)}catch{s=yield r.verify(t,!0)}const o=Object.assign({},e);return Object.assign(o,i?{captchaResp:s}:{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})).apply(this,arguments)}class OSe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{o(e(s))}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return N(function*(){if(t.auth.currentUser===e)return;const i=[];try{for(const r of t.queue)yield r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const s of i)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})()}}class NSe{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M8(this),this.idTokenSubscription=new M8(this),this.beforeStateQueue=new OSe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=i8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var i=this;return t&&(this._popupRedirectResolver=gc(t)),this._initializationPromise=this.queue(N(function*(){var r,s;if(!i._deleted&&(i.persistenceManager=yield Cf.create(i,e),!i._deleted)){if(null!==(r=i._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{yield i._popupRedirectResolver._initialize(i)}catch{}yield i.initializeCurrentUser(t),i.lastNotifiedUid=(null===(s=i.currentUser)||void 0===s?void 0:s.uid)||null,!i._deleted&&(i._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return N(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return N(function*(){var i;const r=yield t.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId,c=s?._redirectEventId,l=yield t.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(s=l.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return De(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return N(function*(){let i=null;try{i=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return i})()}reloadAndSetCurrentUserOrClear(e){var t=this;return N(function*(){try{yield s_(e)}catch(i){if("auth/network-request-failed"!==i?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function uSe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return N(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return N(function*(){const i=e?Yn(e):null;return i&&De(i.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(i&&i._clone(t))})()}_updateCurrentUser(e,t=!1){var i=this;return N(function*(){if(!i._deleted)return e&&De(i.tenantId===e.tenantId,i,"tenant-id-mismatch"),t||(yield i.beforeStateQueue.runMiddleware(e)),i.queue(N(function*(){yield i.directlySetCurrentUser(e),i.notifyAuthListeners()}))})()}signOut(){var e=this;return N(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(N(function*(){yield t.assertedPersistence.setPersistence(gc(e))}))}initializeRecaptchaConfig(){var e=this;return N(function*(){const t=yield w8(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new C8(t);null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.emailPasswordEnabled&&new T8(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Lo("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var i=this;return N(function*(){const r=yield i.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return N(function*(){if(!t.redirectPersistenceManager){const i=e&&gc(e)||t._popupRedirectResolver;De(i,t,"argument-error"),t.redirectPersistenceManager=yield Cf.create(t,[gc(i._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return N(function*(){var i,r;return t._isInitialized&&(yield t.queue(N(function*(){}))),(null===(i=t._currentUser)||void 0===i?void 0:i._redirectEventId)===e?t._currentUser:(null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return N(function*(){if(e===t.currentUser)return t.queue(N(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return De(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,i,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return N(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=b8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return N(function*(){var t;const i={"X-Client-Version":e.clientVersion};e.app.options.appId&&(i["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();r&&(i["X-Firebase-Client"]=r);const s=yield e._getAppCheckToken();return s&&(i["X-Firebase-AppCheck"]=s),i})()}_getAppCheckToken(){var e=this;return N(function*(){var t;const i=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return i?.error&&function cSe(n,...e){Nw.logLevel<=en.WARN&&Nw.warn(`Auth (${ku}): ${n}`,...e)}(`Error while retrieving App Check token: ${i.error}`),i?.token})()}}function Yi(n){return Yn(n)}class M8{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Bye(n,e){const t=new Vye(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function A8(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function I8(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class D8{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ya("not implemented")}_getIdTokenResponse(e){return ya("not implemented")}_linkToIdToken(e,t){return ya("not implemented")}_getReauthenticationResolver(e){return ya("not implemented")}}function P8(n,e){return iP.apply(this,arguments)}function iP(){return(iP=N(function*(n,e){return ii(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function sP(n,e){return oP.apply(this,arguments)}function oP(){return(oP=N(function*(n,e){return pc(n,"POST","/v1/accounts:signInWithPassword",Zn(n,e))})).apply(this,arguments)}function Bw(n,e){return aP.apply(this,arguments)}function aP(){return(aP=N(function*(n,e){return ii(n,"POST","/v1/accounts:sendOobCode",Zn(n,e))})).apply(this,arguments)}function cP(){return(cP=N(function*(n,e){return Bw(n,e)})).apply(this,arguments)}function lP(n,e){return uP.apply(this,arguments)}function uP(){return(uP=N(function*(n,e){return Bw(n,e)})).apply(this,arguments)}function pP(){return(pP=N(function*(n,e){return pc(n,"POST","/v1/accounts:signInWithEmailLink",Zn(n,e))})).apply(this,arguments)}function mP(){return(mP=N(function*(n,e){return pc(n,"POST","/v1/accounts:signInWithEmailLink",Zn(n,e))})).apply(this,arguments)}class a_ extends D8{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new a_(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new a_(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return N(function*(){var i;switch(t.signInMethod){case"password":const r={returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.emailPasswordEnabled){const s=yield gl(e,r,"signInWithPassword");return sP(e,s)}return sP(e,r).catch(function(){var s=N(function*(o){if("auth/missing-recaptcha-token"===o.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const a=yield gl(e,r,"signInWithPassword");return sP(e,a)}return Promise.reject(o)});return function(o){return s.apply(this,arguments)}}());case"emailLink":return function GSe(n,e){return pP.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:Es(e,"internal-error")}})()}_linkToIdToken(e,t){var i=this;return N(function*(){switch(i.signInMethod){case"password":return P8(e,{idToken:t,returnSecureToken:!0,email:i._email,password:i._password});case"emailLink":return function jSe(n,e){return mP.apply(this,arguments)}(e,{idToken:t,email:i._email,oobCode:i._password});default:Es(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function _c(n,e){return gP.apply(this,arguments)}function gP(){return(gP=N(function*(n,e){return pc(n,"POST","/v1/accounts:signInWithIdp",Zn(n,e))})).apply(this,arguments)}class u_{constructor(e){var t,i,r,s,o,a;const c=Kg(Xg(e)),l=null!==(t=c.apiKey)&&void 0!==t?t:null,u=null!==(i=c.oobCode)&&void 0!==i?i:null,d=function ZSe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=c.mode)&&void 0!==r?r:null);De(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function QSe(n){const e=Kg(Xg(n)).link,t=e?Kg(Xg(e)).deep_link_id:null,i=Kg(Xg(n)).deep_link_id;return(i?Kg(Xg(i)).link:null)||i||t||e||n}(e);try{return new u_(t)}catch{return null}}}let O8=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return a_._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=u_.parseLink(i);return De(r,"argument-error"),a_._fromEmailAndCode(t,r.code,r.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class _l{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class JSe extends _l{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function zw(n,e){return EP.apply(this,arguments)}function EP(){return(EP=N(function*(n,e){return pc(n,"POST","/v1/accounts:signUp",Zn(n,e))})).apply(this,arguments)}class po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return N(function*(){const s=yield Hu._fromIdTokenResponse(e,i,r),o=N8(i);return new po({user:s,providerId:o,_tokenResponse:i,operationType:t})})()}static _forOperation(e,t,i){return N(function*(){yield e._updateTokensIfNecessary(i,!0);const r=N8(i);return new po({user:e,providerId:r,_tokenResponse:i,operationType:t})})()}}function N8(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Hw extends fo{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Hw.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Hw(e,t,i,r)}}function k8(n,e,t,i){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?Hw._fromErrorAndOperation(n,s,e,i):s})}function TP(){return(TP=N(function*(n,e,t=!1){const i=yield mc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return po._forOperation(n,"link",i)})).apply(this,arguments)}function AP(){return(AP=N(function*(n,e,t=!1){const{auth:i}=n,r="reauthenticate";try{const s=yield mc(n,k8(i,r,e,n),t);De(s.idToken,i,"internal-error");const o=Lw(s.idToken);De(o,i,"internal-error");const{sub:a}=o;return De(n.uid===a,i,"user-mismatch"),po._forOperation(n,r,s)}catch(s){throw"auth/user-not-found"===s?.code&&Es(i,"user-mismatch"),s}})).apply(this,arguments)}function U8(n,e){return IP.apply(this,arguments)}function IP(){return(IP=N(function*(n,e,t=!1){const i="signIn",r=yield k8(n,i,e),s=yield po._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function RP(){return(RP=N(function*(n,e){return U8(Yi(n),e)})).apply(this,arguments)}function xf(n,e,t){var i;De((null===(i=t.url)||void 0===i?void 0:i.length)>0,n,"invalid-continue-uri"),De(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(De(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(De(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function sCe(n,e,t){return BP.apply(this,arguments)}function BP(){return BP=N(function*(n,e,t){var i;const r=Yi(n),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(null!==(i=r._getRecaptchaConfig())&&void 0!==i&&i.emailPasswordEnabled){const o=yield gl(r,s,"getOobCode",!0);t&&xf(r,o,t),yield lP(r,o)}else t&&xf(r,s,t),yield lP(r,s).catch(function(){var o=N(function*(a){if("auth/missing-recaptcha-token"!==a.code)return Promise.reject(a);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const c=yield gl(r,s,"getOobCode",!0);t&&xf(r,c,t),yield lP(r,c)}});return function(a){return o.apply(this,arguments)}}())}),BP.apply(this,arguments)}function aCe(n,e,t){return jP.apply(this,arguments)}function jP(){return jP=N(function*(n,e,t){var i;const r=Yi(n),s={returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"};let o;if(null!==(i=r._getRecaptchaConfig())&&void 0!==i&&i.emailPasswordEnabled){const l=yield gl(r,s,"signUpPassword");o=zw(r,l)}else o=zw(r,s).catch(function(){var l=N(function*(u){if("auth/missing-recaptcha-token"===u.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const d=yield gl(r,s,"signUpPassword");return zw(r,d)}return Promise.reject(u)});return function(u){return l.apply(this,arguments)}}());const a=yield o.catch(l=>Promise.reject(l)),c=yield po._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(c.user),c}),jP.apply(this,arguments)}function cCe(n,e,t){return function DP(n,e){return RP.apply(this,arguments)}(Yn(n),O8.credential(e,t))}function uCe(n,e){return XP.apply(this,arguments)}function XP(){return XP=N(function*(n,e){const t=Yn(n),r={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&xf(t.auth,r,e);const{email:s}=yield function zSe(n,e){return cP.apply(this,arguments)}(t.auth,r);s!==n.email&&(yield n.reload())}),XP.apply(this,arguments)}const jw="__sak";class V8{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jw,"1"),this.storage.removeItem(jw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const MCe=(()=>{class n extends V8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function CCe(){const n=qi();return ZR(n)||Uw(n)}()&&function MSe(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=v8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key)return void this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});const r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}const s=()=>{const a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);!function TSe(){return function Nye(){const n=qi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,i){var r=()=>super._set,s=this;return N(function*(){yield r().call(s,t,i),s.localCache[t]=JSON.stringify(i)})()}_get(t){var i=()=>super._get,r=this;return N(function*(){const s=yield i().call(r,t);return r.localCache[t]=JSON.stringify(s),s})()}_remove(t){var i=()=>super._remove,r=this;return N(function*(){yield i().call(r,t),delete r.localCache[t]})()}}return n.type="LOCAL",n})(),z8=(()=>{class n extends V8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})();let ICe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;const r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){var i=this;return N(function*(){const r=t,{eventId:s,eventType:o,data:a}=r.data,c=i.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const l=Array.from(c).map(function(){var d=N(function*(h){return h(r.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function ACe(n){return Promise.all(n.map(function(){var e=N(function*(t){try{return{fulfilled:!0,value:yield t}}catch(i){return{fulfilled:!1,reason:i}}});return function(t){return e.apply(this,arguments)}}()))}(l);r.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,i){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function sO(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(10*Math.random());return n+t}class DCe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){var r=this;return N(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((c,l)=>{const u=sO("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(f.data.response);break;default:clearTimeout(d),clearTimeout(o),l(new Error("invalid_response"))}}},r.handlers.add(a),s.port1.addEventListener("message",a.onMessage),r.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&r.removeMessageHandler(a)})})()}}function Ai(){return window}function oO(){return typeof Ai().WorkerGlobalScope<"u"&&"function"==typeof Ai().importScripts}function aO(){return(aO=N(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const H8="firebaseLocalStorageDb",$w="firebaseLocalStorage",G8="fbase_key";class h_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ww(n,e){return n.transaction([$w],e?"readwrite":"readonly").objectStore($w)}function cO(){const n=indexedDB.open(H8,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore($w,{keyPath:G8})}catch(r){t(r)}}),n.addEventListener("success",N(function*(){const i=n.result;i.objectStoreNames.contains($w)?e(i):(i.close(),yield function LCe(){const n=indexedDB.deleteDatabase(H8);return new h_(n).toPromise()}(),e(yield cO()))}))})}function j8(n,e,t){return lO.apply(this,arguments)}function lO(){return(lO=N(function*(n,e,t){const i=Ww(n,!0).put({[G8]:e,value:t});return new h_(i).toPromise()})).apply(this,arguments)}function uO(){return(uO=N(function*(n,e){const t=Ww(n,!1).get(e),i=yield new h_(t).toPromise();return void 0===i?null:i.value})).apply(this,arguments)}function $8(n,e){const t=Ww(n,!0).delete(e);return new h_(t).toPromise()}const VCe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return N(function*(){return t.db||(t.db=yield cO()),t.db})()}_withRetries(t){var i=this;return N(function*(){let r=0;for(;;)try{const s=yield i._openDb();return yield t(s)}catch(s){if(r++>3)throw s;i.db&&(i.db.close(),i.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return N(function*(){return oO()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return N(function*(){t.receiver=ICe._getInstance(function NCe(){return oO()?self:null}()),t.receiver._subscribe("keyChanged",function(){var i=N(function*(r,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(r,s){return i.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var i=N(function*(r,s){return["keyChanged"]});return function(r,s){return i.apply(this,arguments)}}())})()}initializeSender(){var t=this;return N(function*(){var i,r;if(t.activeServiceWorker=yield function PCe(){return aO.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new DCe(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(i=s[0])&&void 0!==i&&i.fulfilled&&null!==(r=s[0])&&void 0!==r&&r.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var i=this;return N(function*(){if(i.sender&&i.activeServiceWorker&&function OCe(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===i.activeServiceWorker)try{yield i.sender._send("keyChanged",{key:t},i.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return N(function*(){try{if(!indexedDB)return!1;const t=yield cO();return yield j8(t,jw,"1"),yield $8(t,jw),!0}catch{}return!1})()}_withPendingWrite(t){var i=this;return N(function*(){i.pendingWrites++;try{yield t()}finally{i.pendingWrites--}})()}_set(t,i){var r=this;return N(function*(){return r._withPendingWrite(N(function*(){return yield r._withRetries(s=>j8(s,t,i)),r.localCache[t]=i,r.notifyServiceWorker(t)}))})()}_get(t){var i=this;return N(function*(){const r=yield i._withRetries(s=>function FCe(n,e){return uO.apply(this,arguments)}(s,t));return i.localCache[t]=r,r})()}_remove(t){var i=this;return N(function*(){return i._withPendingWrite(N(function*(){return yield i._withRetries(r=>$8(r,t)),delete i.localCache[t],i.notifyServiceWorker(t)}))})()}_poll(){var t=this;return N(function*(){const i=yield t._withRetries(o=>{const a=Ww(o,!1).getAll();return new h_(a).toPromise()});if(!i)return[];if(0!==t.pendingWrites)return[];const r=[],s=new Set;for(const{fbase_key:o,value:a}of i)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),r.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),r.push(o));return r})()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(N(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();x8("rcb"),new n_(3e4,6e4);class vO extends D8{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _c(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _c(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _c(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nxe(n){return U8(n.auth,new vO(n),n.bypassAuthState)}function ixe(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),function F8(n,e){return AP.apply(this,arguments)}(t,new vO(n),n.bypassAuthState)}function rxe(n){return bO.apply(this,arguments)}function bO(){return(bO=N(function*(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),function xP(n,e){return TP.apply(this,arguments)}(t,new vO(n),n.bypassAuthState)})).apply(this,arguments)}class sxe{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=N(function*(i,r){e.pendingPromise={resolve:i,reject:r};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(i,r){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return N(function*(){const{urlResponse:i,sessionId:r,postBody:s,tenantId:o,error:a,type:c}=e;if(a)return void t.reject(a);const l={auth:t.auth,requestUri:i,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(c)(l))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nxe;case"linkViaPopup":case"linkViaRedirect":return rxe;case"reauthViaPopup":case"reauthViaRedirect":return ixe;default:Es(this.auth,"internal-error")}}resolve(e){pl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new n_(2e3,1e4);const oxe="pendingRedirect",f_=new Map;class axe extends sxe{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){var e=()=>super.execute,t=this;return N(function*(){let i=f_.get(t.auth._key());if(!i){try{const s=(yield function cxe(n,e){return xO.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;i=()=>Promise.resolve(s)}catch(r){i=()=>Promise.reject(r)}f_.set(t.auth._key(),i)}return t.bypassAuthState||f_.set(t.auth._key(),()=>Promise.resolve(null)),i()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,i=this;return N(function*(){if("signInViaRedirect"===e.type)return t().call(i,e);if("unknown"!==e.type){if(e.eventId){const r=yield i.auth._redirectUserForId(e.eventId);if(r)return i.user=r,t().call(i,e);i.resolve(null)}}else i.resolve(null)})()}onExecution(){return N(function*(){})()}cleanUp(){}}function xO(){return(xO=N(function*(n,e){const t=function K8(n){return Fw(oxe,n.config.apiKey,n.name)}(e),i=function q8(n){return gc(n._redirectPersistence)}(n);if(!(yield i._isAvailable()))return!1;const r="true"===(yield i._get(t));return yield i._remove(t),r})).apply(this,arguments)}function lxe(n,e){f_.set(n._key(),e)}function X8(n,e){return PO.apply(this,arguments)}function PO(){return(PO=N(function*(n,e,t=!1){const i=Yi(n),r=function ju(n,e){return e?gc(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(i,e),o=yield new axe(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})).apply(this,arguments)}class pxe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function mxe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q8(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Q8(e)){const r=(null===(i=e.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";t.onError(_a(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z8(e))}saveEventToCache(e){this.cachedEventUids.add(Z8(e)),this.lastProcessedEventTime=Date.now()}}function Z8(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Q8({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function NO(){return(NO=N(function*(n,e={}){return ii(n,"GET","/v1/projects",e)})).apply(this,arguments)}const _xe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yxe=/^https?/;function kO(){return kO=N(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function gxe(n){return NO.apply(this,arguments)}(n);for(const t of e)try{if(bxe(t))return}catch{}Es(n,"unauthorized-domain")}),kO.apply(this,arguments)}function bxe(n){const e=t_(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===i?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===i}if(!yxe.test(t))return!1;if(_xe.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const wxe=new n_(3e4,6e4);function J8(){const n=Ai().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let Kw=null;const Cxe=new n_(5e3,15e3),xxe="__/auth/iframe",Txe="emulator/auth/iframe",Mxe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Axe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ixe(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?UR(e,Txe):`https://${n.config.authDomain}/${xxe}`,i={apiKey:e.apiKey,appName:n.name,v:ku},r=Axe.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${hw(i).slice(1)}`}function LO(){return LO=N(function*(n){const e=yield function Sxe(n){return Kw=Kw||function Exe(n){return new Promise((e,t)=>{var i,r,s;function o(){J8(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J8(),t(_a(n,"network-request-failed"))},timeout:wxe.get()})}if(null!==(r=null===(i=Ai().gapi)||void 0===i?void 0:i.iframes)&&void 0!==r&&r.Iframe)e(gapi.iframes.getContext());else{if(null===(s=Ai().gapi)||void 0===s||!s.load){const a=x8("iframefcb");return Ai()[a]=()=>{gapi.load?o():t(_a(n,"network-request-failed"))},eP(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>t(c))}o()}}).catch(e=>{throw Kw=null,e})}(n),Kw}(n),t=Ai().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:Ixe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mxe,dontclear:!0},i=>new Promise(function(){var r=N(function*(s,o){yield i.restyle({setHideOnLeave:!1});const a=_a(n,"network-request-failed"),c=Ai().setTimeout(()=>{o(a)},Cxe.get());function l(){Ai().clearTimeout(c),s(i)}i.ping(l).then(l,()=>{o(a)})});return function(s,o){return r.apply(this,arguments)}}()))}),LO.apply(this,arguments)}const Rxe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class e9{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Uxe="__/auth/handler",Bxe="emulator/auth/handler",Vxe=encodeURIComponent("fac");function t9(n,e,t,i,r,s){return FO.apply(this,arguments)}function FO(){return(FO=N(function*(n,e,t,i,r,s){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ku,eventId:r};if(e instanceof _l){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",function Uye(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof JSe){const u=e.getScopes().filter(d=>""!==d);u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=yield n._getAppCheckToken(),l=c?`#${Vxe}=${encodeURIComponent(c)}`:"";return`${function zxe({config:n}){return n.emulator?UR(n,Bxe):`https://${n.authDomain}/${Uxe}`}(n)}?${hw(a).slice(1)}${l}`})).apply(this,arguments)}const UO="webStorageSupport",Gxe=class Hxe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=z8,this._completeRedirectFn=X8,this._overrideRedirectResult=lxe}_openPopup(e,t,i,r){var s=this;return N(function*(){var o;pl(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield t9(e,t,i,t_(),r);return function Lxe(n,e,t,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Rxe),{width:i.toString(),height:r.toString(),top:s,left:o}),l=qi().toLowerCase();t&&(a=p8(l)?"_blank":t),f8(l)&&(e=e||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function xSe(n=qi()){var e;return Uw(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(l)&&"_self"!==a)return function Fxe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}(e||"",a),new e9(null);const d=window.open(e||"",a,u);De(d,n,"popup-blocked");try{d.focus()}catch{}return new e9(d)}(e,a,sO())})()}_openRedirect(e,t,i,r){var s=this;return N(function*(){return yield s._originValidation(e),function RCe(n){Ai().location.href=n}(yield t9(e,t,i,t_(),r)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(pl(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){var t=this;return N(function*(){const i=yield function Dxe(n){return LO.apply(this,arguments)}(e),r=new pxe(e);return i.register("authEvent",s=>(De(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=i,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(UO,{type:UO},r=>{var s;const o=null===(s=r?.[0])||void 0===s?void 0:s[UO];void 0!==o&&t(!!o),Es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function vxe(n){return kO.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return v8()||ZR()||Uw()}};var r9="@firebase/auth";class jxe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return N(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Kxe=hW("authIdTokenMaxAge")||300;let o9=null;const Xxe=n=>function(){var e=N(function*(t){const i=t&&(yield t.getIdTokenResult()),r=i&&((new Date).getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>Kxe)return;const s=i?.token;o9!==s&&(o9=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function Yxe(n=pf()){const e=pa(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function kSe(n,e){const t=pa(n,"auth");if(t.isInitialized()){const r=t.getImmediate();if(qg(t.getOptions(),e??{}))return r;Es(r,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:Gxe,persistence:[VCe,MCe,z8]}),i=hW("authTokenSyncURL");if(i){const s=Xxe(i);(function yCe(n,e,t){Yn(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function _Ce(n,e,t,i){Yn(n).onIdTokenChanged(e,t,i)}(t,o=>s(o))}const r=uW("auth");return r&&function FSe(n,e,t){const i=Yi(n);De(i._canInitEmulator,i,"emulator-config-failed"),De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!t?.disableWarnings,s=A8(e),{host:o,port:a}=function USe(n){const e=A8(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:I8(i.substr(s.length+1))}}{const[s,o]=i.split(":");return{host:s,port:I8(o)}}}(e);i.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function BSe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${r}`),t}function Zxe(n){return new yn(function(e){var t=function vCe(n,e,t,i){return Yn(n).onAuthStateChanged(e,t,i)}(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}!function Wxe(n){Or(new mr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;De(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:b8(n)},l=new NSe(i,r,s,c);return function LSe(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(gc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Or(new mr("auth-internal",e=>{const t=Yi(e.getProvider("auth").getImmediate());return new jxe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(r9,"0.23.2",function $xe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),En(r9,"0.23.2","esm2017")}("Browser");class p_{constructor(e){return e}}class c9{constructor(){return yf("auth")}}const VO=new Se("angularfire2.auth-instances");function eTe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new p_(i)}}const tTe={provide:c9,deps:[[new hi,VO]]},nTe={provide:p_,useFactory:function Jxe(n,e){const t=_f("auth",n,e);return t&&new p_(t)},deps:[[new hi,VO],fc]};let iTe=(()=>{class n{constructor(){En("angularfire",hc.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Rt({type:n}),n.\u0275inj=Tt({providers:[nTe,tTe]}),n})();function rTe(n,...e){return{ngModule:iTe,providers:[{provide:VO,useFactory:eTe(n),multi:!0,deps:[pt,Tn,bf,wf,[new hi,NR],...e]}]}}const l9=Xi(Zxe,!0),u9=Xi(aCe,!0),sTe=Xi(Yxe,!0),oTe=Xi(uCe,!0),aTe=Xi(sCe,!0),cTe=Xi(cCe,!0);var Ue,lTe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fo={},zO=zO||{},At=lTe||self;function Yw(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function m_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var HO="closure_uid_"+(1e9*Math.random()>>>0),dTe=0;function hTe(n,e,t){return n.call.apply(n.bind,arguments)}function fTe(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Nr(n,e,t){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hTe:fTe).apply(null,arguments)}function Zw(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Zi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function yl(){this.s=this.s,this.o=this.o}yl.prototype.s=!1,yl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function uTe(n){Object.prototype.hasOwnProperty.call(n,HO)&&n[HO]||(n[HO]=++dTe)}(this)},yl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const d9=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function GO(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function h9(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Yw(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function kr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}kr.prototype.h=function(){this.defaultPrevented=!0};var mTe=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",()=>{},e),At.removeEventListener("test",()=>{},e)}catch{}return n}();function g_(n){return/^[\s\xa0]*$/.test(n)}function Qw(){var n=At.navigator;return n&&(n=n.userAgent)?n:""}function va(n){return-1!=Qw().indexOf(n)}function jO(n){return jO[" "](n),n}jO[" "]=function(){};var WO,n,_Te=va("Opera"),Tf=va("Trident")||va("MSIE"),f9=va("Edge"),$O=f9||Tf,p9=va("Gecko")&&!(-1!=Qw().toLowerCase().indexOf("webkit")&&!va("Edge"))&&!(va("Trident")||va("MSIE"))&&!va("Edge"),yTe=-1!=Qw().toLowerCase().indexOf("webkit")&&!va("Edge");function m9(){var n=At.document;return n?n.documentMode:void 0}e:{var qO="",KO=(n=Qw(),p9?/rv:([^\);]+)(\)|;)/.exec(n):f9?/Edge\/([\d\.]+)/.exec(n):Tf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):yTe?/WebKit\/(\S+)/.exec(n):_Te?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(KO&&(qO=KO?KO[1]:""),Tf){var XO=m9();if(null!=XO&&XO>parseFloat(qO)){WO=String(XO);break e}}WO=qO}var vTe=At.document&&Tf&&(m9()||parseInt(WO,10))||void 0;function __(n,e){if(kr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(p9){e:{try{jO(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:bTe[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&__.$.h.call(this)}}Zi(__,kr);var bTe={2:"touch",3:"pen",4:"mouse"};__.prototype.h=function(){__.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var y_="closure_listenable_"+(1e6*Math.random()|0),wTe=0;function ETe(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++wTe,this.fa=this.ia=!1}function Jw(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function ZO(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function _9(n){const e={};for(const t in n)e[t]=n[t];return e}const y9="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v9(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<y9.length;s++)t=y9[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function eE(n){this.src=n,this.g={},this.h=0}function QO(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=d9(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Jw(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function JO(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}eE.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=JO(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new ETe(e,this.src,s,!!i,r)).ia=t,n.push(e)),e};var eN="closure_lm_"+(1e6*Math.random()|0),tN={};function b9(n,e,t,i,r){if(i&&i.once)return E9(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)b9(n,e[s],t,i,r);return null}return t=sN(t),n&&n[y_]?n.O(e,t,m_(i)?!!i.capture:!!i,r):w9(n,e,t,!1,i,r)}function w9(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=m_(r)?!!r.capture:!!r,a=iN(n);if(a||(n[eN]=a=new eE(n)),(t=a.add(e,t,i,o,s)).proxy)return t;if(i=function CTe(){const e=xTe;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)mTe||(r=o),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(C9(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function E9(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)E9(n,e[s],t,i,r);return null}return t=sN(t),n&&n[y_]?n.P(e,t,m_(i)?!!i.capture:!!i,r):w9(n,e,t,!0,i,r)}function S9(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)S9(n,e[s],t,i,r);else i=m_(i)?!!i.capture:!!i,t=sN(t),n&&n[y_]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=JO(s=n.g[e],t,i,r))&&(Jw(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=iN(n))&&(e=n.g[e.toString()],n=-1,e&&(n=JO(e,t,i,r)),(t=-1<n?e[n]:null)&&nN(t))}function nN(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[y_])QO(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(C9(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=iN(e))?(QO(t,n),0==t.h&&(t.src=null,e[eN]=null)):Jw(n)}}}function C9(n){return n in tN?tN[n]:tN[n]="on"+n}function xTe(n,e){if(n.fa)n=!0;else{e=new __(e,this);var t=n.listener,i=n.la||n.src;n.ia&&nN(n),n=t.call(i,e)}return n}function iN(n){return(n=n[eN])instanceof eE?n:null}var rN="__closure_events_fn_"+(1e9*Math.random()>>>0);function sN(n){return"function"==typeof n?n:(n[rN]||(n[rN]=function(e){return n.handleEvent(e)}),n[rN])}function Qi(){yl.call(this),this.i=new eE(this),this.S=this,this.J=null}function yr(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new kr(e,n);else if(e instanceof kr)e.target=e.target||n;else{var r=e;v9(e=new kr(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=tE(o,i,!0,e)&&r}if(r=tE(o=e.g=n,i,!0,e)&&r,r=tE(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=tE(o=e.g=t[s],i,!1,e)&&r}function tE(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,c=o.la||o.src;o.ia&&QO(n.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}Zi(Qi,yl),Qi.prototype[y_]=!0,Qi.prototype.removeEventListener=function(n,e,t,i){S9(this,n,e,t,i)},Qi.prototype.N=function(){if(Qi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Jw(t[i]);delete n.g[e],n.h--}}this.J=null},Qi.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Qi.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var oN=At.JSON.stringify;function MTe(){var n=aN;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var x9=new class TTe{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ITe,n=>n.reset());class ITe{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function DTe(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function RTe(n){At.setTimeout(()=>{throw n},0)}let v_,b_=!1,aN=new class ATe{constructor(){this.h=this.g=null}add(e,t){const i=x9.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},T9=()=>{const n=At.Promise.resolve(void 0);v_=()=>{n.then(PTe)}};var PTe=()=>{for(var n;n=MTe();){try{n.h.call(n.g)}catch(t){RTe(t)}var e=x9;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}b_=!1};function nE(n,e){Qi.call(this),this.h=n||1,this.g=e||At,this.j=Nr(this.qb,this),this.l=Date.now()}function cN(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function lN(n,e,t){if("function"==typeof n)t&&(n=Nr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Nr(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function M9(n){n.g=lN(()=>{n.g=null,n.i&&(n.i=!1,M9(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Zi(nE,Qi),(Ue=nE.prototype).ga=!1,Ue.T=null,Ue.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yr(this,"tick"),this.ga&&(cN(this),this.start()))}},Ue.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ue.N=function(){nE.$.N.call(this),cN(this),delete this.g};class OTe extends yl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:M9(this)}N(){super.N(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function w_(n){yl.call(this),this.h=n,this.g={}}Zi(w_,yl);var A9=[];function I9(n,e,t,i){Array.isArray(t)||(t&&(A9[0]=t.toString()),t=A9);for(var r=0;r<t.length;r++){var s=b9(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function D9(n){ZO(n.g,function(e,t){this.g.hasOwnProperty(t)&&nN(e)},n),n.g={}}function iE(){this.g=!0}function Mf(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function FTe(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return oN(t)}catch{return e}}(n,t)+(i?" "+i:"")})}w_.prototype.N=function(){w_.$.N.call(this),D9(this)},w_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},iE.prototype.Ea=function(){this.g=!1},iE.prototype.info=function(){};var $u={},R9=null;function rE(){return R9=R9||new Qi}function P9(n){kr.call(this,$u.Ta,n)}function E_(n){const e=rE();yr(e,new P9(e))}function O9(n,e){kr.call(this,$u.STAT_EVENT,n),this.stat=e}function rs(n){const e=rE();yr(e,new O9(e,n))}function N9(n,e){kr.call(this,$u.Ua,n),this.size=e}function S_(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}$u.Ta="serverreachability",Zi(P9,kr),$u.STAT_EVENT="statevent",Zi(O9,kr),$u.Ua="timingevent",Zi(N9,kr);var sE={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},k9={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function uN(){}function F9(){}uN.prototype.h=null;var fN,C_={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function dN(){kr.call(this,"d")}function hN(){kr.call(this,"c")}function oE(){}function x_(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new w_(this),this.P=UTe,this.V=new nE(n=$O?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new U9}function U9(){this.i=null,this.g="",this.h=!1}Zi(dN,kr),Zi(hN,kr),Zi(oE,uN),oE.prototype.g=function(){return new XMLHttpRequest},oE.prototype.i=function(){return{}},fN=new oE;var UTe=45e3,pN={},aE={};function mN(n,e,t){n.L=1,n.v=dE(yc(e)),n.s=t,n.S=!0,B9(n,null)}function B9(n,e){n.G=Date.now(),T_(n),n.A=yc(n.v);var t=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),X9(t.i,"t",i),n.C=0,t=n.l.J,n.h=new U9,n.g=vq(n.l,t?e:null,!n.s),0<n.O&&(n.M=new OTe(Nr(n.Pa,n,n.g),n.O)),I9(n.U,n.g,"readystatechange",n.nb),e=n.I?_9(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),E_(),function NTe(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function V9(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function z9(n,e,t){let r,i=!0;for(;!n.J&&n.C<t.length;){if(r=BTe(n,t),r==aE){4==e&&(n.o=4,rs(14),i=!1),Mf(n.j,n.m,null,"[Incomplete Response]");break}if(r==pN){n.o=4,rs(15),Mf(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Mf(n.j,n.m,r,null),gN(n,r)}V9(n)&&r!=aE&&r!=pN&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,rs(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),SN(e),e.M=!0,rs(11))):(Mf(n.j,n.m,t,"[Invalid Chunked Response]"),Wu(n),M_(n))}function BTe(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?aE:(t=Number(e.substring(t,i)),isNaN(t)?pN:(i+=1)+t>e.length?aE:(e=e.slice(i,i+t),n.C=i+t,e))}function T_(n){n.Y=Date.now()+n.P,H9(n,n.P)}function H9(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=S_(Nr(n.lb,n),e)}function cE(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function M_(n){0==n.l.H||n.J||mq(n.l,n)}function Wu(n){cE(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,cN(n.V),D9(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function gN(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||_N(t.i,n)))if(!n.K&&_N(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;_E(t),mE(t)}EN(t),rs(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=S_(Nr(t.ib,t),6e3));if(1>=Q9(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ku(t,11)}else if((n.K||t.g==n)&&_E(t),!g_(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(t.V=l[0],l=l[1],2==t.H)if("c"==l[0]){t.K=l[1],t.pa=l[2];const u=l[3];null!=u&&(t.ra=u,t.l.info("VER="+t.ra));const d=l[4];null!=d&&(t.Ga=d,t.l.info("SVER="+t.Ga));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(t.L=i=1.5*h,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(yN(s,s.h),s.h=null))}if(i.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.Da=g,Ln(i.I,i.F,g))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((i=t).wa=yq(i,i.J?i.pa:null,i.Y),o.K){J9(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.B&&(cE(a),T_(a)),i.g=o}else fq(i);0<t.j.length&&gE(t)}else"stop"!=l[0]&&"close"!=l[0]||Ku(t,7);else 3==t.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Ku(t,7):wN(t):"noop"!=l[0]&&t.h&&t.h.Aa(l),t.A=0)}E_()}catch{}}function G9(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Yw(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function zTe(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Yw(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function VTe(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Yw(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(Ue=x_.prototype).setTimeout=function(n){this.P=n},Ue.nb=function(n){n=n.target;const e=this.M;e&&3==ba(n)?e.l():this.Pa(n)},Ue.Pa=function(n){try{if(n==this.g)e:{const u=ba(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||$O||this.g&&(this.h.h||this.g.ja()||aq(this.g)))){this.J||4!=u||7==e||E_(),cE(this);var t=this.g.da();this.ca=t;t:if(V9(this)){var i=aq(this.g);n="";var r=i.length,s=4==ba(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Wu(this),M_(this);var o="";break t}this.h.i=new At.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function kTe(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,u,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g_(a)){var l=a;break t}}l=null}if(!(t=l)){this.i=!1,this.o=3,rs(12),Wu(this),M_(this);break e}Mf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gN(this,t)}this.S?(z9(this,u,o),$O&&this.i&&3==u&&(I9(this.U,this.V,"tick",this.mb),this.V.start())):(Mf(this.j,this.m,o,null),gN(this,o)),4==u&&Wu(this),this.i&&!this.J&&(4==u?mq(this.l,this):(this.i=!1,T_(this)))}else(function sMe(n){const e={};n=(n.g&&2<=ba(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(g_(n[i]))continue;var t=DTe(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}!function STe(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.o=3,rs(12)):(this.o=0,rs(13)),Wu(this),M_(this)}}}catch{}},Ue.mb=function(){if(this.g){var n=ba(this.g),e=this.g.ja();this.C<e.length&&(cE(this),z9(this,n,e),this.i&&4!=n&&T_(this))}},Ue.cancel=function(){this.J=!0,Wu(this)},Ue.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function LTe(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(E_(),rs(17)),Wu(this),this.o=2,M_(this)):H9(this,this.Y-n)};var j9=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof qu){this.h=n.h,lE(this,n.j),this.s=n.s,this.g=n.g,uE(this,n.m),this.l=n.l;var e=n.i,t=new D_;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),$9(this,t),this.o=n.o}else n&&(e=String(n).match(j9))?(this.h=!1,lE(this,e[1]||"",!0),this.s=A_(e[2]||""),this.g=A_(e[3]||"",!0),uE(this,e[4]),this.l=A_(e[5]||"",!0),$9(this,e[6]||"",!0),this.o=A_(e[7]||"")):(this.h=!1,this.i=new D_(null,this.h))}function yc(n){return new qu(n)}function lE(n,e,t){n.j=t?A_(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function uE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function $9(n,e,t){e instanceof D_?(n.i=e,function KTe(n,e){e&&!n.j&&(vl(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(q9(this,i),X9(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=I_(e,WTe)),n.i=new D_(e,n.h))}function Ln(n,e,t){n.i.set(e,t)}function dE(n){return Ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function A_(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function I_(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,GTe),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function GTe(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}qu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(I_(e,W9,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(I_(e,W9,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(I_(t,"/"==t.charAt(0)?$Te:jTe,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",I_(t,qTe)),n.join("")};var W9=/[#\/\?@]/g,jTe=/[#\?:]/g,$Te=/[#\?]/g,WTe=/[#\?@]/g,qTe=/#/g;function D_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function vl(n){n.g||(n.g=new Map,n.h=0,n.i&&function HTe(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function q9(n,e){vl(n),e=Af(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function K9(n,e){return vl(n),e=Af(n,e),n.g.has(e)}function X9(n,e,t){q9(n,e),0<t.length&&(n.i=null,n.g.set(Af(n,e),GO(t)),n.h+=t.length)}function Af(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Y9(n){this.l=n||YTe,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ka&&At.g.Ka()&&At.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ue=D_.prototype).add=function(n,e){vl(this),this.i=null,n=Af(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ue.forEach=function(n,e){vl(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},Ue.ta=function(){vl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},Ue.Z=function(n){vl(this);let e=[];if("string"==typeof n)K9(this,n)&&(e=e.concat(this.g.get(Af(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ue.set=function(n,e){return vl(this),this.i=null,K9(this,n=Af(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ue.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};var YTe=10;function Z9(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Q9(n){return n.h?1:n.g?n.g.size:0}function _N(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function yN(n,e){n.g?n.g.add(e):n.h=e}function J9(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function eq(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return GO(n.i)}Y9.prototype.cancel=function(){if(this.i=eq(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var ZTe=class{stringify(n){return At.JSON.stringify(n,void 0)}parse(n){return At.JSON.parse(n,void 0)}};function QTe(){this.g=new ZTe}function JTe(n,e,t){const i=t||"";try{G9(n,function(r,s){let o=r;m_(r)&&(o=oN(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function hE(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function R_(n){this.l=n.fc||null,this.j=n.ob||!1}function fE(n,e){Qi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=vN,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zi(R_,uN),R_.prototype.g=function(){return new fE(this.l,this.j)},R_.prototype.i=function(n){return function(){return n}}({}),Zi(fE,Qi);var vN=0;function tq(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function P_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,O_(n)}function O_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ue=fE.prototype).open=function(n,e){if(this.readyState!=vN)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,O_(this)},Ue.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||At).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,P_(this)),this.readyState=vN},Ue.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,O_(this)),this.g&&(this.readyState=3,O_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof At.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tq(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ue.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?P_(this):O_(this),3==this.readyState&&tq(this)}},Ue.Za=function(n){this.g&&(this.response=this.responseText=n,P_(this))},Ue.Ya=function(n){this.g&&(this.response=n,P_(this))},Ue.ka=function(){this.g&&P_(this)},Ue.setRequestHeader=function(n,e){this.v.append(n,e)},Ue.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ue.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var tMe=At.JSON.parse;function ri(n){Qi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nq,this.L=this.M=!1}Zi(ri,Qi);var nq="",nMe=/^https?$/i,iMe=["POST","PUT"];function iq(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,rq(n),pE(n)}function rq(n){n.F||(n.F=!0,yr(n,"complete"),yr(n,"error"))}function sq(n){if(n.h&&typeof zO<"u"&&(!n.C[1]||4!=ba(n)||2!=n.da()))if(n.v&&4==ba(n))lN(n.La,0,n);else if(yr(n,"readystatechange"),4==ba(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===o){var r=String(n.I).match(j9)[1]||null;!r&&At.self&&At.self.location&&(r=At.self.location.protocol.slice(0,-1)),i=!nMe.test(r?r.toLowerCase():"")}t=i}if(t)yr(n,"complete"),yr(n,"success");else{n.m=6;try{var s=2<ba(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",rq(n)}}finally{pE(n)}}}function pE(n,e){if(n.g){oq(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||yr(n,"ready");try{t.onreadystatechange=i}catch{}}}function oq(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function ba(n){return n.g?n.g.readyState:0}function aq(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case nq:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function cq(n){let e="";return ZO(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function bN(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=cq(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ln(n,e,t))}function N_(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function lq(n){this.Ga=0,this.j=[],this.l=new iE,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=N_("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=N_("baseRetryDelayMs",5e3,n),this.hb=N_("retryDelaySeedMs",1e4,n),this.eb=N_("forwardChannelMaxRetries",2,n),this.xa=N_("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Y9(n&&n.concurrentRequestLimit),this.Ja=new QTe,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function wN(n){if(uq(n),3==n.H){var e=n.W++,t=yc(n.I);if(Ln(t,"SID",n.K),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),k_(n,t),(e=new x_(n,n.l,e)).L=2,e.v=dE(yc(t)),t=!1,At.navigator&&At.navigator.sendBeacon)try{t=At.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=vq(e.l,null),e.g.ha(e.v)),e.G=Date.now(),T_(e)}_q(n)}function mE(n){n.g&&(SN(n),n.g.cancel(),n.g=null)}function uq(n){mE(n),n.u&&(At.clearTimeout(n.u),n.u=null),_E(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function gE(n){if(!Z9(n.i)&&!n.m){n.m=!0;var e=n.Na;v_||T9(),b_||(v_(),b_=!0),aN.add(e,n),n.C=0}}function dq(n,e){var t;t=e?e.m:n.W++;const i=yc(n.I);Ln(i,"SID",n.K),Ln(i,"RID",t),Ln(i,"AID",n.V),k_(n,i),n.o&&n.s&&bN(i,n.o,n.s),t=new x_(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=hq(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),yN(n.i,t),mN(t,i,e)}function k_(n,e){n.na&&ZO(n.na,function(t,i){Ln(e,i,t)}),n.h&&G9({},function(t,i){Ln(e,i,t)})}function hq(n,e,t){t=Math.min(n.j.length,t);var i=n.h?Nr(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<t;c++){let l=r[c].g;const u=r[c].map;if(l-=s,0>l)s=Math.max(0,r[c].g-100),a=!1;else try{JTe(u,o,"req"+l+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function fq(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;v_||T9(),b_||(v_(),b_=!0),aN.add(e,n),n.A=0}}function EN(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=S_(Nr(n.Ma,n),gq(n,n.A)),n.A++,0))}function SN(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function pq(n){n.g=new x_(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=yc(n.wa);Ln(e,"RID","rpc"),Ln(e,"SID",n.K),Ln(e,"AID",n.V),Ln(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Ln(e,"TO",n.qa),Ln(e,"TYPE","xmlhttp"),k_(n,e),n.o&&n.s&&bN(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=dE(yc(e)),t.s=null,t.S=!0,B9(t,n)}function _E(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function mq(n,e){var t=null;if(n.g==e){_E(n),SN(n),n.g=null;var i=2}else{if(!_N(n.i,e))return;t=e.F,J9(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.G;var r=n.C;yr(i=rE(),new N9(i,t)),gE(n)}else fq(n);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==i&&function oMe(n,e){return!(Q9(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=S_(Nr(n.Na,n,e),gq(n,n.C)),n.C++,0)))}(n,e)||2==i&&EN(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:Ku(n,5);break;case 4:Ku(n,10);break;case 3:Ku(n,6);break;default:Ku(n,2)}}function gq(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ku(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=Nr(n.pb,n);t||(t=new qu("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||lE(t,"https"),dE(t)),function eMe(n,e){const t=new iE;if(At.Image){const i=new Image;i.onload=Zw(hE,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Zw(hE,t,i,"TestLoadImage: error",!1,e),i.onabort=Zw(hE,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Zw(hE,t,i,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else rs(2);n.H=0,n.h&&n.h.za(e),_q(n),uq(n)}function _q(n){if(n.H=0,n.ma=[],n.h){const e=eq(n.i);(0!=e.length||0!=n.j.length)&&(h9(n.ma,e),h9(n.ma,n.j),n.i.i.length=0,GO(n.j),n.j.length=0),n.h.ya()}}function yq(n,e,t){var i=t instanceof qu?yc(t):new qu(t);if(""!=i.g)e&&(i.g=e+"."+i.g),uE(i,i.m);else{var r=At.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new qu(null);i&&lE(s,i),e&&(s.g=e),r&&uE(s,r),t&&(s.l=t),i=s}return e=n.Da,(t=n.F)&&e&&Ln(i,t,e),Ln(i,"VER",n.ra),k_(n,i),i}function vq(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ri(t&&n.Ha&&!n.va?new R_({ob:!0}):n.va)).Oa(n.J),e}function bq(){}function yE(){if(Tf&&!(10<=Number(vTe)))throw Error("Environmental error: no available transport.")}function Bs(n,e){Qi.call(this),this.g=new lq(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!g_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!g_(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new If(this)}function wq(n){dN.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Eq(){hN.call(this),this.status=1}function If(n){this.g=n}function Uo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function CN(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;o=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(t|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(r^(t|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~t))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function Sn(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==e||(t[r]=s,i=!1)}this.g=t}(Ue=ri.prototype).Oa=function(n){this.M=n},Ue.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fN.g(),this.C=function L9(n){return n.h||(n.h=n.i())}(this.u?this.u:fN),this.g.onreadystatechange=Nr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void iq(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=At.FormData&&n instanceof At.FormData,!(0<=d9(iMe,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{oq(this),0<this.B&&((this.L=function rMe(n){return Tf&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.ua,this)):this.A=lN(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){iq(this,s)}},Ue.ua=function(){typeof zO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yr(this,"timeout"),this.abort(8))},Ue.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,yr(this,"complete"),yr(this,"abort"),pE(this))},Ue.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pE(this,!0)),ri.$.N.call(this)},Ue.La=function(){this.s||(this.G||this.v||this.l?sq(this):this.kb())},Ue.kb=function(){sq(this)},Ue.isActive=function(){return!!this.g},Ue.da=function(){try{return 2<ba(this)?this.g.status:-1}catch{return-1}},Ue.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ue.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),tMe(e)}},Ue.Ia=function(){return this.m},Ue.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ue=lq.prototype).ra=8,Ue.H=1,Ue.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new x_(this,this.l,n);let s=this.s;if(this.U&&(s?(s=_9(s),v9(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=hq(this,r,e),Ln(t=yc(this.I),"RID",n),Ln(t,"CVER",22),this.F&&Ln(t,"X-HTTP-Session-Id",this.F),k_(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(cq(s)))+"&"+e:this.o&&bN(t,this.o,s)),yN(this.i,r),this.bb&&Ln(t,"TYPE","init"),this.P?(Ln(t,"$req",e),Ln(t,"SID","null"),r.aa=!0,mN(r,t,null)):mN(r,t,e),this.H=2}}else 3==this.H&&(n?dq(this,n):0==this.j.length||Z9(this.i)||dq(this))},Ue.Ma=function(){if(this.u=null,pq(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=S_(Nr(this.jb,this),n)}},Ue.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,rs(10),mE(this),pq(this))},Ue.ib=function(){null!=this.v&&(this.v=null,mE(this),EN(this),rs(19))},Ue.pb=function(n){n?(this.l.info("Successfully pinged google.com"),rs(2)):(this.l.info("Failed to ping google.com"),rs(1))},Ue.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ue=bq.prototype).Ba=function(){},Ue.Aa=function(){},Ue.za=function(){},Ue.ya=function(){},Ue.isActive=function(){return!0},Ue.Va=function(){},yE.prototype.g=function(n,e){return new Bs(n,e)},Zi(Bs,Qi),Bs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;rs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=yq(n,null,n.Y),gE(n)},Bs.prototype.close=function(){wN(this.g)},Bs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=oN(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&gE(e)},Bs.prototype.N=function(){this.g.h=null,delete this.j,wN(this.g),delete this.g,Bs.$.N.call(this)},Zi(wq,dN),Zi(Eq,hN),Zi(If,bq),If.prototype.Ba=function(){yr(this.g,"a")},If.prototype.Aa=function(n){yr(this.g,new wq(n))},If.prototype.za=function(n){yr(this.g,new Eq)},If.prototype.ya=function(){yr(this.g,"b")},Zi(Uo,function aMe(){this.blockSize=-1}),Uo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Uo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=t;)CN(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){CN(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){CN(this,i),r=0;break}}this.h=r,this.i+=e},Uo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var cMe={};function xN(n){return-128<=n&&128>n?function gTe(n,e){var t=cMe;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Sn([0|e],0>e?-1:0)}):new Sn([0|n],0>n?-1:0)}function wa(n){if(isNaN(n)||!isFinite(n))return Df;if(0>n)return vr(wa(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=TN;return new Sn(e,0)}var TN=4294967296,Df=xN(0),MN=xN(1),Cq=xN(16777216);function vc(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function mo(n){return-1==n.h}function vr(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Sn(t,~n.h).add(MN)}function vE(n,e){return n.add(vr(e))}function bE(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function L_(n,e){this.g=n,this.h=e}function wE(n,e){if(vc(e))throw Error("division by zero");if(vc(n))return new L_(Df,Df);if(mo(n))return e=wE(vr(n),e),new L_(vr(e.g),vr(e.h));if(mo(e))return e=wE(n,vr(e)),new L_(vr(e.g),e.h);if(30<n.g.length){if(mo(n)||mo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=MN,i=e;0>=i.X(n);)t=xq(t),i=xq(i);var r=Rf(t,1),s=Rf(i,1);for(i=Rf(i,2),t=Rf(t,2);!vc(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=Rf(i,1),t=Rf(t,1)}return e=vE(n,r.R(e)),new L_(r,e)}for(r=Df;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),o=(s=wa(t)).R(e);mo(o)||0<o.X(n);)o=(s=wa(t-=i)).R(e);vc(s)&&(s=MN),r=r.add(s),n=vE(n,o)}return new L_(r,n)}function xq(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Sn(t,n.h)}function Rf(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Sn(r,n.h)}(Ue=Sn.prototype).ea=function(){if(mo(this))return-vr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:TN+i)*e,e*=TN}return n},Ue.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(vc(this))return"0";if(mo(this))return"-"+vr(this).toString(n);for(var e=wa(Math.pow(n,6)),t=this,i="";;){var r=wE(t,e).g,s=((0<(t=vE(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(vc(t=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Ue.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ue.X=function(n){return mo(n=vE(this,n))?-1:vc(n)?0:1},Ue.abs=function(){return mo(this)?vr(this):this},Ue.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,t[r]=(o&=65535)<<16|(s&=65535)}return new Sn(t,-2147483648&t[t.length-1]?-1:0)},Ue.R=function(n){if(vc(this)||vc(n))return Df;if(mo(this))return mo(n)?vr(this).R(vr(n)):vr(vr(this).R(n));if(mo(n))return vr(this.R(vr(n)));if(0>this.X(Cq)&&0>n.X(Cq))return wa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=n.D(r)>>>16,c=65535&n.D(r);t[2*i+2*r]+=o*c,bE(t,2*i+2*r),t[2*i+2*r+1]+=s*c,bE(t,2*i+2*r+1),t[2*i+2*r+1]+=o*a,bE(t,2*i+2*r+1),t[2*i+2*r+2]+=s*a,bE(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Sn(t,0)},Ue.gb=function(n){return wE(this,n).h},Ue.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Sn(t,this.h&n.h)},Ue.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Sn(t,this.h|n.h)},Ue.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Sn(t,this.h^n.h)},yE.prototype.createWebChannel=yE.prototype.g,Bs.prototype.send=Bs.prototype.u,Bs.prototype.open=Bs.prototype.m,Bs.prototype.close=Bs.prototype.close,sE.NO_ERROR=0,sE.TIMEOUT=8,sE.HTTP_ERROR=6,k9.COMPLETE="complete",F9.EventType=C_,C_.OPEN="a",C_.CLOSE="b",C_.ERROR="c",C_.MESSAGE="d",Qi.prototype.listen=Qi.prototype.O,ri.prototype.listenOnce=ri.prototype.P,ri.prototype.getLastError=ri.prototype.Sa,ri.prototype.getLastErrorCode=ri.prototype.Ia,ri.prototype.getStatus=ri.prototype.da,ri.prototype.getResponseJson=ri.prototype.Wa,ri.prototype.getResponseText=ri.prototype.ja,ri.prototype.send=ri.prototype.ha,ri.prototype.setWithCredentials=ri.prototype.Oa,Uo.prototype.digest=Uo.prototype.l,Uo.prototype.reset=Uo.prototype.reset,Uo.prototype.update=Uo.prototype.j,Sn.prototype.add=Sn.prototype.add,Sn.prototype.multiply=Sn.prototype.R,Sn.prototype.modulo=Sn.prototype.gb,Sn.prototype.compare=Sn.prototype.X,Sn.prototype.toNumber=Sn.prototype.ea,Sn.prototype.toString=Sn.prototype.toString,Sn.prototype.getBits=Sn.prototype.D,Sn.fromNumber=wa,Sn.fromString=function Sq(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return vr(Sq(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=wa(Math.pow(e,8)),i=Df,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=wa(Math.pow(e,s)),i=i.R(s).add(wa(o))):i=(i=i.R(t)).add(wa(o))}return i};var lMe=Fo.createWebChannelTransport=function(){return new yE},uMe=Fo.getStatEventTarget=function(){return rE()},AN=Fo.ErrorCode=sE,dMe=Fo.EventType=k9,hMe=Fo.Event=$u,Tq=Fo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},fMe=Fo.FetchXmlHttpFactory=R_,EE=Fo.WebChannel=F9,pMe=Fo.XhrIo=ri,mMe=Fo.Md5=Uo,Pf=Fo.Integer=Sn;const Mq="@firebase/firestore";class Ji{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ji.UNAUTHENTICATED=new Ji(null),Ji.GOOGLE_CREDENTIALS=new Ji("google-credentials-uid"),Ji.FIRST_PARTY=new Ji("first-party-uid"),Ji.MOCK_USER=new Ji("mock-user");let Of="9.23.0";const bl=new Pu("@firebase/firestore");function IN(){return bl.logLevel}function ye(n,...e){if(bl.logLevel<=en.DEBUG){const t=e.map(DN);bl.debug(`Firestore (${Of}): ${n}`,...t)}}function gi(n,...e){if(bl.logLevel<=en.ERROR){const t=e.map(DN);bl.error(`Firestore (${Of}): ${n}`,...t)}}function Bo(n,...e){if(bl.logLevel<=en.WARN){const t=e.map(DN);bl.warn(`Firestore (${Of}): ${n}`,...t)}}function DN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function $e(n="Unexpected state"){const e=`FIRESTORE (${Of}) INTERNAL ASSERTION FAILED: `+n;throw gi(e),new Error(e)}function Ze(n,e){n||$e()}function ke(n,e){return n}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends fo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Aq{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gMe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ji.UNAUTHENTICATED))}shutdown(){}}class _Me{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yMe{constructor(e){this.t=e,this.currentUser=Ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let o=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable(N(function*(){yield l.promise,yield s(i.currentUser)}))},c=l=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze("string"==typeof i.accessToken),new Aq(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ze(null===e||"string"==typeof e),new Ji(e)}}class vMe{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=Ji.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class bMe{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new vMe(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Iq{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wMe{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=s=>{null!=s.error&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,ye("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ze("string"==typeof t.token),this.T=t.token,new Iq(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function EMe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class Dq{static A(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=EMe(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function wt(n,e){return n<e?-1:n>e?1:0}function Nf(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Qn(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?wt(this.nanoseconds,e.nanoseconds):wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nt(e)}static min(){return new nt(new Qn(0,0))}static max(){return new nt(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class F_{constructor(e,t,i){void 0===t?t=0:t>e.length&&$e(),void 0===i?i=e.length-t:i>e.length-t&&$e(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===F_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof F_?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends F_{construct(e,t,i){return new tn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const SMe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _i extends F_{construct(e,t,i){return new _i(e,t,i)}static isValidIdentifier(e){return SMe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _i(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new fe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if("\\"===a){if(r+1===e.length)throw new fe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new fe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new fe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _i(t)}static emptyPath(){return new _i([])}}class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(tn.fromString(e))}static fromName(e){return new Oe(tn.fromString(e).popFirst(5))}static empty(){return new Oe(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new tn(e.slice()))}}function Oq(n){return new Vs(n.readTime,n.key,-1)}class Vs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Vs(nt.min(),Oe.empty(),-1)}static max(){return new Vs(nt.max(),Oe.empty(),-1)}}function PN(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Oe.comparator(n.documentKey,e.documentKey),0!==t?t:wt(n.largestBatchId,e.largestBatchId))}const Nq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TMe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wl(n){return ON.apply(this,arguments)}function ON(){return ON=N(function*(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==Nq)throw n;ye("LocalStore","Unexpectedly lost primary lease")}),ON.apply(this,arguments)}class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,i)=>{t(e)})}static reject(e){return new K((t,i)=>{i(e)})}static waitFor(e){return new K((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next(r=>r?K.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new K((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new K((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}function El(n){return"IndexedDbTransactionError"===n.name}let zs=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function V_(n){return null==n}function z_(n){return 0===n&&1/n==-1/0}function Gq(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jq(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Nn{constructor(e,t){this.comparator=e,this.root=t||br.EMPTY}insert(e,t){return new Nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,br.BLACK,null,null))}remove(e){return new Nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ME(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ME(this.root,e,this.comparator,!1)}getReverseIterator(){return new ME(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ME(this.root,e,this.comparator,!0)}}class ME{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class br{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??br.RED,this.left=r??br.EMPTY,this.right=s??br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new br(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return br.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $e();const e=this.left.check();if(e!==this.right.check())throw $e();return e+(this.isRed()?0:1)}}br.EMPTY=null,br.RED=!0,br.BLACK=!1,br.EMPTY=new class{constructor(){this.size=0}get key(){throw $e()}get value(){throw $e()}get color(){throw $e()}get left(){throw $e()}get right(){throw $e()}copy(n,e,t,i,r){return this}insert(n,e,t){return new br(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $q(this.data.getIterator())}getIteratorFrom(e){return new $q(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fn(this.comparator);return t.data=e,t}}class $q{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ss{constructor(e){this.fields=e,e.sort(_i.comparator)}static empty(){return new Ss([])}unionWith(e){let t=new Fn(_i.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ss(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nf(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class Wq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Wq("Invalid base64 string: "+r):r}}(e);return new zi(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new zi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zi.EMPTY_BYTE_STRING=new zi("");const XMe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cl(n){if(Ze(!!n),"string"==typeof n){let e=0;const t=XMe.exec(n);if(Ze(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:si(n.seconds),nanos:si(n.nanos)}}function si(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function bc(n){return"string"==typeof n?zi.fromBase64String(n):zi.fromUint8Array(n)}function AE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function IE(n){const e=n.mapValue.fields.__previous_value__;return AE(e)?IE(e):e}function H_(n){const e=Cl(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}class YMe{constructor(e,t,i,r,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class Zu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zu&&e.projectId===this.projectId&&e.database===this.database}}const xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Tl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?AE(n)?4:Yq(n)?9007199254740991:10:$e()}function Sa(n,e){if(n===e)return!0;const t=Tl(n);if(t!==Tl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return H_(n).isEqual(H_(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Cl(i.timestampValue),o=Cl(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,bc(n.bytesValue).isEqual(bc(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return si(i.geoPointValue.latitude)===si(r.geoPointValue.latitude)&&si(i.geoPointValue.longitude)===si(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return si(i.integerValue)===si(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=si(i.doubleValue),o=si(r.doubleValue);return s===o?z_(s)===z_(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Nf(n.arrayValue.values||[],e.arrayValue.values||[],Sa);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(Gq(s)!==Gq(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!Sa(s[a],o[a])))return!1;return!0}(n,e);default:return $e()}var r}function G_(n,e){return void 0!==(n.values||[]).find(t=>Sa(t,e))}function Ml(n,e){if(n===e)return 0;const t=Tl(n),i=Tl(e);if(t!==i)return wt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return wt(n.booleanValue,e.booleanValue);case 2:return function(r,s){const o=si(r.integerValue||r.doubleValue),a=si(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return qq(n.timestampValue,e.timestampValue);case 4:return qq(H_(n),H_(e));case 5:return wt(n.stringValue,e.stringValue);case 6:return function(r,s){const o=bc(r),a=bc(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){const l=wt(o[c],a[c]);if(0!==l)return l}return wt(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const o=wt(si(r.latitude),si(s.latitude));return 0!==o?o:wt(si(r.longitude),si(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){const l=Ml(o[c],a[c]);if(l)return l}return wt(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===xl.mapValue&&s===xl.mapValue)return 0;if(r===xl.mapValue)return 1;if(s===xl.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),c=s.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){const d=wt(a[u],l[u]);if(0!==d)return d;const h=Ml(o[a[u]],c[l[u]]);if(0!==h)return h}return wt(a.length,l.length)}(n.mapValue,e.mapValue);default:throw $e()}}function qq(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return wt(n,e);const t=Cl(n),i=Cl(e),r=wt(t.seconds,i.seconds);return 0!==r?r:wt(t.nanos,i.nanos)}function Lf(n){return LN(n)}function LN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Cl(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?bc(n.bytesValue).toBase64():"referenceValue"in n?Oe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=LN(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${LN(i.fields[a])}`;return s+"}"}(n.mapValue):$e();var e}function FN(n){return!!n&&"integerValue"in n}function j_(n){return!!n&&"arrayValue"in n}function Kq(n){return!!n&&"nullValue"in n}function Xq(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function PE(n){return!!n&&"mapValue"in n}function $_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sl(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=$_(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Yq(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!PE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$_(t)}setAll(e){let t=_i.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=$_(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());PE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];PE(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Sl(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new wr($_(this.value))}}function Jq(n){const e=[];return Sl(n.fields,(t,i)=>{const r=new _i([t]);if(PE(i)){const s=Jq(i.mapValue).fields;if(0===s.length)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Ss(e)}class Un{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Un(e,0,nt.min(),nt.min(),nt.min(),wr.empty(),0)}static newFoundDocument(e,t,i,r){return new Un(e,1,t,nt.min(),i,r,0)}static newNoDocument(e,t){return new Un(e,2,t,nt.min(),nt.min(),wr.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,nt.min(),nt.min(),wr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(nt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Al{constructor(e,t){this.position=e,this.inclusive=t}}function e7(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(i=s.field.isKeyField()?Oe.comparator(Oe.fromName(o.referenceValue),t.key):Ml(o,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function t7(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sa(n.position[t],e.position[t]))return!1;return!0}class Ff{constructor(e,t="asc"){this.field=e,this.dir=t}}function JMe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class n7{}class Kt extends n7{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new eAe(e,t,i):"array-contains"===t?new iAe(e,i):"in"===t?new c7(e,i):"not-in"===t?new rAe(e,i):"array-contains-any"===t?new sAe(e,i):new Kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new tAe(e,i):new nAe(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ml(t,this.value)):null!==t&&Tl(this.value)===Tl(t)&&this.matchesComparison(Ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Cn extends n7{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Cn(e,t)}matches(e){return Uf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Uf(n){return"and"===n.op}function BN(n){return function i7(n){for(const e of n.filters)if(e instanceof Cn)return!1;return!0}(n)&&Uf(n)}function VN(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+Lf(n.value);if(BN(n))return n.filters.map(e=>VN(e)).join(",");{const e=n.filters.map(t=>VN(t)).join(",");return`${n.op}(${e})`}}function r7(n,e){return n instanceof Kt?(t=n,(i=e)instanceof Kt&&t.op===i.op&&t.field.isEqual(i.field)&&Sa(t.value,i.value)):n instanceof Cn?function(t,i){return i instanceof Cn&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,s,o)=>r&&r7(s,i.filters[o]),!0)}(n,e):void $e();var t,i}function o7(n){return n instanceof Kt?`${(e=n).field.canonicalString()} ${e.op} ${Lf(e.value)}`:n instanceof Cn?function(e){return e.op.toString()+" {"+e.getFilters().map(o7).join(" ,")+"}"}(n):"Filter";var e}class eAe extends Kt{constructor(e,t,i){super(e,t,i),this.key=Oe.fromName(i.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class tAe extends Kt{constructor(e,t){super(e,"in",t),this.keys=a7(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nAe extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=a7(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function a7(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Oe.fromName(i.referenceValue))}class iAe extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return j_(t)&&G_(t.arrayValue,this.value)}}class c7 extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&G_(this.value.arrayValue,t)}}class rAe extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(G_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!G_(this.value.arrayValue,t)}}class sAe extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!j_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>G_(this.value.arrayValue,i))}}class oAe{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function zN(n,e=null,t=[],i=[],r=null,s=null,o=null){return new oAe(n,e,t,i,r,s,o)}function Ju(n){const e=ke(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>VN(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),V_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Lf(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Lf(i)).join(",")),e.dt=t}return e.dt}function W_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!JMe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!r7(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!t7(n.startAt,e.startAt)&&t7(n.endAt,e.endAt)}function OE(n){return Oe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class wc{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.wt=null,this._t=null}}function Bf(n){return new wc(n)}function h7(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ed(n){const e=ke(n);if(null===e.wt){e.wt=[];const t=function kE(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),i=function HN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===i)t.isKeyField()||e.wt.push(new Ff(t)),e.wt.push(new Ff(_i.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ff(_i.keyField(),s))}}}return e.wt}function ss(n){const e=ke(n);if(!e._t)if("F"===e.limitType)e._t=zN(e.path,e.collectionGroup,ed(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of ed(e))t.push(new Ff(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new Al(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Al(e.startAt.position,e.startAt.inclusive):null;e._t=zN(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e._t}function LE(n,e,t){return new wc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function q_(n,e){return W_(ss(n),ss(e))&&n.limitType===e.limitType}function f7(n){return`${Ju(ss(n))}|lt:${n.limitType}`}function $N(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>o7(i)).join(", ")}]`),V_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Lf(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Lf(i)).join(",")),`Target(${t})`}(ss(n))}; limitType=${n.limitType})`}function K_(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):Oe.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of ed(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,o){const a=e7(r,s,o);return r.inclusive?a<=0:a<0}(t.startAt,ed(t),i)||t.endAt&&!function(r,s,o){const a=e7(r,s,o);return r.inclusive?a>=0:a>0}(t.endAt,ed(t),i)));var t,i}function m7(n){return(e,t)=>{let i=!1;for(const r of ed(n)){const s=aAe(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function aAe(n,e,t){const i=n.field.isKeyField()?Oe.comparator(e.key,t.key):function(r,s,o){const a=s.data.field(r),c=o.data.field(r);return null!==a&&null!==c?Ml(a,c):$e()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return $e()}}class Ec{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Sl(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return jq(this.inner)}size(){return this.innerSize}}const cAe=new Nn(Oe.comparator);function Cs(){return cAe}const g7=new Nn(Oe.comparator);function X_(...n){let e=g7;for(const t of n)e=e.insert(t.key,t);return e}function _7(n){let e=g7;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ca(){return Y_()}function y7(){return Y_()}function Y_(){return new Ec(n=>n.toString(),(n,e)=>n.isEqual(e))}const lAe=new Nn(Oe.comparator),uAe=new Fn(Oe.comparator);function Ft(...n){let e=uAe;for(const t of n)e=e.add(t);return e}const dAe=new Fn(wt);function v7(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:z_(e)?"-0":e}}function b7(n){return{integerValue:""+n}}function w7(n,e){return function Lq(n){return"number"==typeof n&&Number.isInteger(n)&&!z_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?b7(e):v7(n,e)}class FE{constructor(){this._=void 0}}function hAe(n,e,t){return n instanceof Vf?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&AE(r)&&(r=IE(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof td?S7(n,e):n instanceof nd?C7(n,e):function(i,r){const s=E7(i,r),o=x7(s)+x7(i.gt);return FN(s)&&FN(i.gt)?b7(o):v7(i.serializer,o)}(n,e)}function fAe(n,e,t){return n instanceof td?S7(n,e):n instanceof nd?C7(n,e):t}function E7(n,e){return n instanceof zf?FN(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class Vf extends FE{}class td extends FE{constructor(e){super(),this.elements=e}}function S7(n,e){const t=T7(e);for(const i of n.elements)t.some(r=>Sa(r,i))||t.push(i);return{arrayValue:{values:t}}}class nd extends FE{constructor(e){super(),this.elements=e}}function C7(n,e){let t=T7(e);for(const i of n.elements)t=t.filter(r=>!Sa(r,i));return{arrayValue:{values:t}}}class zf extends FE{constructor(e,t){super(),this.serializer=e,this.gt=t}}function x7(n){return si(n.integerValue||n.doubleValue)}function T7(n){return j_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class mAe{constructor(e,t){this.version=e,this.transformResults=t}}class $n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function UE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class BE{}function M7(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Gf(n.key,$n.none()):new Hf(n.key,n.data,$n.none());{const t=n.data,i=wr.empty();let r=new Fn(_i.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new Sc(n.key,i,new Ss(r.toArray()),$n.none())}}function gAe(n,e,t){n instanceof Hf?function(i,r,s){const o=i.value.clone(),a=D7(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Sc?function(i,r,s){if(!UE(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=D7(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(I7(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Q_(n,e,t,i){return n instanceof Hf?function(r,s,o,a){if(!UE(r.precondition,s))return o;const c=r.value.clone(),l=R7(r.fieldTransforms,a,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof Sc?function(r,s,o,a){if(!UE(r.precondition,s))return o;const c=R7(r.fieldTransforms,a,s),l=s.data;return l.setAll(I7(r)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null===o?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(n,e,t,i):(o=t,UE(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function _Ae(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=E7(i.transform,r||null);null!=s&&(null===t&&(t=wr.empty()),t.set(i.field,s))}return t||null}function A7(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Nf(t,i,(r,s)=>function pAe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof td&&i instanceof td||t instanceof nd&&i instanceof nd?Nf(t.elements,i.elements,Sa):t instanceof zf&&i instanceof zf?Sa(t.gt,i.gt):t instanceof Vf&&i instanceof Vf);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Hf extends BE{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Sc extends BE{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function I7(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function D7(n,e,t){const i=new Map;Ze(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,fAe(o,a,t[r]))}return i}function R7(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,hAe(s,o,e))}return i}class Gf extends BE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qN extends BE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class KN{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&gAe(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Q_(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Q_(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=y7();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const c=M7(o,a);null!==c&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(nt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ft())}isEqual(e){return this.batchId===e.batchId&&Nf(this.mutations,e.mutations,(t,i)=>A7(t,i))&&Nf(this.baseMutations,e.baseMutations,(t,i)=>A7(t,i))}}class XN{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ze(e.mutations.length===i.length);let r=lAe;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new XN(e,t,i,r)}}class YN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class vAe{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ii,nn;function O7(n){if(void 0===n)return gi("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Ii.OK:return ee.OK;case Ii.CANCELLED:return ee.CANCELLED;case Ii.UNKNOWN:return ee.UNKNOWN;case Ii.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ii.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ii.INTERNAL:return ee.INTERNAL;case Ii.UNAVAILABLE:return ee.UNAVAILABLE;case Ii.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ii.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ii.NOT_FOUND:return ee.NOT_FOUND;case Ii.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ii.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ii.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ii.ABORTED:return ee.ABORTED;case Ii.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ii.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ii.DATA_LOSS:return ee.DATA_LOSS;default:return $e()}}(nn=Ii||(Ii={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class ZN{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return VE}static getOrCreateInstance(){return null===VE&&(VE=new ZN),VE}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let VE=null;const bAe=new Pf([4294967295,4294967295],0);function k7(n){const e=function N7(){return new TextEncoder}().encode(n),t=new mMe;return t.update(e),new Uint8Array(t.digest())}function L7(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Pf([t,i],0),new Pf([r,s],0)]}class QN{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new J_(`Invalid padding: ${t}`);if(i<0)throw new J_(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new J_(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new J_(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Pf.fromNumber(this.It)}Et(e,t,i){let r=e.add(t.multiply(Pf.fromNumber(i)));return 1===r.compare(bAe)&&(r=new Pf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=k7(e),[i,r]=L7(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);if(!this.At(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new QN(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const t=k7(e),[i,r]=L7(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);this.Rt(o)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class J_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ey{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,ty.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ey(nt.min(),r,new Nn(wt),Cs(),Ft())}}class ty{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ty(i,t,Ft(),Ft(),Ft())}}class zE{constructor(e,t,i,r){this.Pt=e,this.removedTargetIds=t,this.key=i,this.bt=r}}class F7{constructor(e,t){this.targetId=e,this.Vt=t}}class U7{constructor(e,t,i=zi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class B7{constructor(){this.St=0,this.Dt=z7(),this.Ct=zi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Ft(),t=Ft(),i=Ft();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:$e()}}),new ty(this.Ct,this.xt,e,t,i)}Ft(){this.Nt=!1,this.Dt=z7()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class wAe{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Cs(),this.zt=V7(),this.Wt=new Nn(wt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const i=this.Zt(t);switch(e.state){case 0:this.te(t)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(t);break;case 3:this.te(t)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),i.$t(e.resumeToken));break;default:$e()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((i,r)=>{this.te(r)&&t(r)})}ne(e){var t;const i=e.targetId,r=e.Vt.count,s=this.se(i);if(s){const o=s.target;if(OE(o))if(0===r){const a=new Oe(o.path);this.Yt(i,a,Un.newNoDocument(a,nt.min()))}else Ze(1===r);else{const a=this.ie(i);if(a!==r){const c=this.re(e,a);0!==c&&(this.ee(i),this.Wt=this.Wt.insert(i,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=ZN.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(l,u,d){var h,f,p,g,m,_;const y={localCacheCount:u,existenceFilterCount:d.count},v=d.unchangedNames;return v&&(y.bloomFilter={applied:0===l,hashCount:null!==(h=v?.hashCount)&&void 0!==h?h:0,bitmapLength:null!==(g=null===(p=null===(f=v?.bits)||void 0===f?void 0:f.bitmap)||void 0===p?void 0:p.length)&&void 0!==g?g:0,padding:null!==(_=null===(m=v?.bits)||void 0===m?void 0:m.padding)&&void 0!==_?_:0}),y}(c,a,e.Vt))}}}}re(e,t){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=i;let c,l;try{c=bc(s).toUint8Array()}catch(u){if(u instanceof Wq)return Bo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{l=new QN(c,o,a)}catch(u){return Bo(u instanceof J_?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.vt(a)||(this.Yt(e,s,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&OE(a.target)){const c=new Oe(a.target.path);null!==this.jt.get(c)||this.ae(o,c)||this.Yt(o,c,Un.newNoDocument(c,e))}s.Mt&&(t.set(o,s.Ot()),s.Ft())}});let i=Ft();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.se(c);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const r=new ey(e,t,this.Wt,this.jt,i);return this.jt=Cs(),this.zt=V7(),this.Wt=new Nn(wt),r}Jt(e,t){if(!this.te(e))return;const i=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,i),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),i&&(this.jt=this.jt.insert(t,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new B7,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Fn(wt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ye("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new B7),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function V7(){return new Nn(Oe.comparator)}function z7(){return new Nn(Oe.comparator)}const EAe={asc:"ASCENDING",desc:"DESCENDING"},SAe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CAe={and:"AND",or:"OR"};class xAe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function JN(n,e){return n.useProto3Json||V_(e)?e:{value:e}}function jf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H7(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function TAe(n,e){return jf(n,e.toTimestamp())}function yi(n){return Ze(!!n),nt.fromTimestamp(function(e){const t=Cl(e);return new Qn(t.seconds,t.nanos)}(n))}function ek(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function G7(n){const e=tn.fromString(n);return Ze(Q7(e)),e}function ny(n,e){return ek(n.databaseId,e.path)}function xa(n,e){const t=G7(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe($7(t))}function tk(n,e){return ek(n.databaseId,e)}function iy(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $7(n){return Ze(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function W7(n,e,t){return{name:ny(n,e),fields:t.value.mapValue.fields}}function K7(n,e){return{documents:[tk(n,e.path)]}}function ik(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=tk(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tk(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(c){if(0!==c.length)return Z7(Cn.create(c,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(c){if(0!==c.length)return c.map(l=>{return{field:Il((u=l).field),direction:RAe(u.dir)};var u})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=JN(n,e.limit);var a,c;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(c=e.endAt).inclusive,values:c.position}),t}function X7(n){let e=function j7(n){const e=G7(n);return 4===e.length?tn.emptyPath():$7(e)}(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ze(1===i);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(u){const d=Y7(u);return d instanceof Cn&&BN(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(u=>{return new Ff($f((d=u).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,V_(d)?null:d}(t.limit));let c=null;var u;t.startAt&&(c=new Al((u=t.startAt).values||[],!!u.before));let l=null;return t.endAt&&(l=function(u){return new Al(u.values||[],!u.before)}(t.endAt)),function d7(n,e,t,i,r,s,o,a){return new wc(n,e,t,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function Y7(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=$f(e.unaryFilter.field);return Kt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=$f(e.unaryFilter.field);return Kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$f(e.unaryFilter.field);return Kt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=$f(e.unaryFilter.field);return Kt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return $e()}}(n):void 0!==n.fieldFilter?Kt.create($f((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $e()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Cn.create(e.compositeFilter.filters.map(t=>Y7(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return $e()}}(e.compositeFilter.op))}(n):$e();var e}function RAe(n){return EAe[n]}function PAe(n){return SAe[n]}function OAe(n){return CAe[n]}function Il(n){return{fieldPath:n.canonicalString()}}function $f(n){return _i.fromServerFormat(n.fieldPath)}function Z7(n){return n instanceof Kt?function(e){if("=="===e.op){if(Xq(e.value))return{unaryFilter:{field:Il(e.field),op:"IS_NAN"}};if(Kq(e.value))return{unaryFilter:{field:Il(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xq(e.value))return{unaryFilter:{field:Il(e.field),op:"IS_NOT_NAN"}};if(Kq(e.value))return{unaryFilter:{field:Il(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Il(e.field),op:PAe(e.op),value:e.value}}}(n):n instanceof Cn?function(e){const t=e.getFilters().map(i=>Z7(i));return 1===t.length?t[0]:{compositeFilter:{op:OAe(e.op),filters:t}}}(n):$e()}function NAe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Q7(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Cc{constructor(e,t,i,r,s=nt.min(),o=nt.min(),a=zi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Cc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class J7{constructor(e){this.fe=e}}function rk(n){const e=X7({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?LE(e,e.limit,"L"):e}class od{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(si(e.integerValue));else if("doubleValue"in e){const i=si(e.doubleValue);isNaN(i)?this.ye(t,13):(this.ye(t,15),z_(i)?t.pe(0):t.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(t,20),"string"==typeof i?t.Ie(i):(t.Ie(`${i.seconds||""}`),t.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(bc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?Yq(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):$e()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const i=e.fields||{};this.ye(t,55);for(const r of Object.keys(i))this.Te(r,t),this.me(i[r],t)}Pe(e,t){const i=e.values||[];this.ye(t,50);for(const r of i)this.me(r,t)}ve(e,t){this.ye(t,37),Oe.fromName(e).path.forEach(i=>{this.ye(t,60),this.be(i,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}od.Ve=new od;class GAe{constructor(){this.rn=new uk}addToCollectionParentIndex(e,t){return this.rn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Vs.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class uk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Fn(tn.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Fn(tn.comparator)).toArray()}}new Uint8Array(0);class Fr{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Fr(e,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(41943040,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);class cd{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new cd(0)}static Mn(){return new cd(-1)}}class XAe{constructor(){this.changes=new Ec(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QAe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xK{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&Q_(i.mutation,r,Ss.empty(),Qn.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ft()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ft()){const r=Ca();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=X_();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Ca();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ft()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Cs();const o=Y_(),a=Y_();return t.forEach((c,l)=>{const u=i.get(l.key);r.has(l.key)&&(void 0===u||u.mutation instanceof Sc)?s=s.insert(l.key,l):void 0!==u?(o.set(l.key,u.mutation.getFieldMask()),Q_(u.mutation,l,u.mutation.getFieldMask(),Qn.now())):o.set(l.key,Ss.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var d;return a.set(l,new QAe(u,null!==(d=o.get(l))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const i=Y_();let r=new Nn((o,a)=>o-a),s=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=t.get(c);if(null===l)return;let u=i.get(c)||Ss.empty();u=a.applyToLocalView(l,u),i.set(c,u);const d=(r.get(a.batchId)||Ft()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,d=y7();u.forEach(h=>{if(!s.has(h)){const f=M7(t.get(h),i.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return K.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return Oe.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function GN(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):K.resolve(Ca());let a=-1,c=s;return o.next(l=>K.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?K.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ft())).next(u=>({batchId:a,changes:_7(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next(i=>{let r=X_();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=X_();return this.indexManager.getCollectionParents(e,r).next(o=>K.forEach(o,a=>{const c=(l=t,u=a.child(r),new wc(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,u;return this.getDocumentsMatchingCollectionQuery(e,c,i).next(l=>{l.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r))).next(s=>{r.forEach((a,c)=>{const l=c.getKey();null===s.get(l)&&(s=s.insert(l,Un.newInvalidDocument(l)))});let o=X_();return s.forEach((a,c)=>{const l=r.get(a);void 0!==l&&Q_(l.mutation,c,Ss.empty(),Qn.now()),K_(t,c)&&(o=o.insert(a,c))}),o})}}class JAe{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return K.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var i;return this.cs.set(t.id,{id:(i=t).id,version:i.version,createTime:yi(i.createTime)}),K.resolve()}getNamedQuery(e,t){return K.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(i=t).name,query:rk(i.bundledQuery),readTime:yi(i.readTime)}),K.resolve();var i}}class eIe{constructor(){this.overlays=new Nn(Oe.comparator),this.ls=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ca();return K.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.we(e,t,s)}),K.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const r=Ca(),s=t.length+1,o=new Oe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return K.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Nn((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let u=s.get(l.largestBatchId);null===u&&(u=Ca(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=Ca(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return K.resolve(a)}we(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new YN(t,i));let s=this.ls.get(t);void 0===s&&(s=Ft(),this.ls.set(t,s)),this.ls.set(t,s.add(i.key))}}class dk{constructor(){this.fs=new Fn(tr.ds),this.ws=new Fn(tr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const i=new tr(e,t);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ys(new tr(e,t))}ps(e,t){e.forEach(i=>this.removeReference(i,t))}Is(e){const t=new Oe(new tn([])),i=new tr(t,e),r=new tr(t,e+1),s=[];return this.ws.forEachInRange([i,r],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Oe(new tn([])),i=new tr(t,e),r=new tr(t,e+1);let s=Ft();return this.ws.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new tr(e,0),i=this.fs.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class tr{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Oe.comparator(e.key,t.key)||wt(e.As,t.As)}static _s(e,t){return wt(e.As,t.As)||Oe.comparator(e.key,t.key)}}class tIe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Fn(tr.ds)}checkEmpty(e){return K.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.vs;this.vs++;const o=new KN(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.Rs=this.Rs.add(new tr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,t){return K.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.bs(t+1),s=r<0?0:r;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new tr(t,0),r=new tr(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],o=>{const a=this.Ps(o.As);s.push(a)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Fn(wt);return t.forEach(r=>{const s=new tr(r,0),o=new tr(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{i=i.add(a.As)})}),K.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;Oe.isDocumentKey(s)||(s=s.child(""));const o=new tr(new Oe(s),0);let a=new Fn(wt);return this.Rs.forEachWhile(c=>{const l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.As)),!0)},o),K.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(i=>{const r=this.Ps(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Ze(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return K.forEach(t.mutations,r=>{const s=new tr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,t){const i=new tr(t,0),r=this.Rs.firstAfterOrEqual(i);return K.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return K.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nIe{constructor(e){this.Ds=e,this.docs=new Nn(Oe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():Un.newInvalidDocument(t))}getEntries(e,t){let i=Cs();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Un.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Cs();const o=t.path,a=new Oe(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||PN(Oq(u),i)<=0||(r.has(u.key)||K_(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,t,i,r){$e()}Cs(e,t){return K.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new iIe(this)}getSize(e){return K.resolve(this.size)}}class iIe extends XAe{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),K.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class rIe{constructor(e){this.persistence=e,this.xs=new Ec(t=>Ju(t),W_),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new dk,this.targetCount=0,this.Ms=cd.kn()}forEachTarget(e,t){return this.xs.forEach((i,r)=>t(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ns&&(this.Ns=t),K.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new cd(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Fn(t),K.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),K.waitFor(s).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.xs.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this.ks.gs(t,i),K.resolve()}removeMatchingKeys(e,t,i){this.ks.ps(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ks.Es(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this.ks.containsKey(t))}}class hk{constructor(e,t){this.$s={},this.overlays={},this.Os=new zs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new rIe(this),this.indexManager=new GAe,this.remoteDocumentCache=new nIe(i=>this.referenceDelegate.Ls(i)),this.serializer=new J7(t),this.qs=new JAe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eIe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.$s[e.toKey()];return i||(i=new tIe(t,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const r=new sIe(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(e,t){return K.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,t)))}}class sIe extends TMe{constructor(e){super(),this.currentSequenceNumber=e}}class YE{constructor(e){this.persistence=e,this.Qs=new dk,this.js=null}static zs(e){return new YE(e)}get Ws(){if(this.js)return this.js;throw $e()}addReference(e,t,i){return this.Qs.addReference(i,t),this.Ws.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Qs.removeReference(i,t),this.Ws.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),K.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Ws,i=>{const r=Oe.fromPath(i);return this.Hs(e,r).next(s=>{s||t.removeEntry(r,nt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(i=>{i?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return K.or([()=>K.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class gk{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Fi=i,this.Bi=r}static Li(e,t){let i=Ft(),r=Ft();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new gk(e,t.fromCache,i,r)}}class MK{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,i)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(h7(t))return K.resolve(null);let i=ss(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=LE(t,null,"F"),i=ss(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Ft(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{const l=this.ji(t,a);return this.zi(t,l,o,c.readTime)?this.Ki(e,LE(t,null,"F")):this.Wi(e,l,t,c)}))})))}Gi(e,t,i,r){return h7(t)||r.isEqual(nt.min())?this.Qi(e,t):this.Ui.getDocuments(e,i).next(s=>{const o=this.ji(t,s);return this.zi(t,o,i,r)?this.Qi(e,t):(IN()<=en.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$N(t)),this.Wi(e,o,t,function Pq(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=nt.fromTimestamp(1e9===i?new Qn(t+1,0):new Qn(t,i));return new Vs(r,Oe.empty(),e)}(r,-1)))})}ji(e,t){let i=new Fn(m7(e));return t.forEach((r,s)=>{K_(e,s)&&(i=i.add(s))}),i}zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return IN()<=en.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",$N(t)),this.Ui.getDocumentsMatchingQuery(e,t,Vs.min())}Wi(e,t,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class aIe{constructor(e,t,i,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Nn(wt),this.Yi=new Ec(s=>Ju(s),W_),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xK(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function IK(n,e){return _k.apply(this,arguments)}function _k(){return _k=N(function*(n,e){const t=ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.tr(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let c=Ft();for(const l of r){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(i,c).next(l=>({er:l,removedBatchIds:o,addedBatchIds:a}))})})}),_k.apply(this,arguments)}function DK(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function uIe(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Xf(n,e,t){return yk.apply(this,arguments)}function yk(){return yk=N(function*(n,e,t){const i=ke(n),r=i.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!El(o))throw o;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}),yk.apply(this,arguments)}function JE(n,e,t){const i=ke(n);let r=nt.min(),s=Ft();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){const u=ke(a),d=u.Yi.get(l);return void 0!==d?K.resolve(u.Ji.get(d)):u.Bs.getTargetData(c,l)}(i,o,ss(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.Hi.getDocumentsMatchingQuery(o,e,t?r:nt.min(),t?s:Ft())).next(a=>(function NK(n,e,t){let i=n.Xi.get(e)||nt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(e,i)}(i,function p7(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ir:s})))}class Sk{constructor(){this.activeTargetIds=function WN(){return dAe}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FK{constructor(){this.Hr=new Sk,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,i){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Sk,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fIe{Yr(e){}shutdown(){}}class UK{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nS=null;function xk(){return null===nS?nS=268435456+Math.round(2147483648*Math.random()):nS++,"0x"+nS.toString(16)}const pIe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mIe{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ur="WebChannelConnection";class gIe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,i,r,s){const o=xk(),a=this.To(e,t);ye("RestConnection",`Sending RPC '${e}' ${o}:`,a,i);const c={};return this.Eo(c,r,s),this.Ao(e,a,c,i).then(l=>(ye("RestConnection",`Received RPC '${e}' ${o}: `,l),l),l=>{throw Bo("RestConnection",`RPC '${e}' ${o} failed with error: `,l,"url: ",a,"request:",i),l})}vo(e,t,i,r,s,o){return this.Io(e,t,i,r,s)}Eo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Of,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}To(e,t){return`${this.mo}/v1/${t}:${pIe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,i,r){const s=xk();return new Promise((o,a)=>{const c=new pMe;c.setWithCredentials(!0),c.listenOnce(dMe.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case AN.NO_ERROR:const u=c.getResponseJson();ye(Ur,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case AN.TIMEOUT:ye(Ur,`RPC '${e}' ${s} timed out`),a(new fe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case AN.HTTP_ERROR:const d=c.getStatus();if(ye(Ur,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(g){const m=g.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(m)>=0?m:ee.UNKNOWN}(f.status);a(new fe(p,f.message))}else a(new fe(ee.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new fe(ee.UNAVAILABLE,"Connection failed."));break;default:$e()}}finally{ye(Ur,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);ye(Ur,`RPC '${e}' ${s} sending request:`,r),c.send(t,"POST",l,i,15)})}Ro(e,t,i){const r=xk(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lMe(),a=uMe(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new fMe({})),this.Eo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;const u=s.join("");ye(Ur,`Creating RPC '${e}' stream ${r}: ${u}`,c);const d=o.createWebChannel(u,c);let h=!1,f=!1;const p=new mIe({ro:m=>{f?ye(Ur,`Not sending because RPC '${e}' stream ${r} is closed:`,m):(h||(ye(Ur,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),ye(Ur,`RPC '${e}' stream ${r} sending:`,m),d.send(m))},oo:()=>d.close()}),g=(m,_,y)=>{m.listen(_,v=>{try{y(v)}catch(b){setTimeout(()=>{throw b},0)}})};return g(d,EE.EventType.OPEN,()=>{f||ye(Ur,`RPC '${e}' stream ${r} transport opened.`)}),g(d,EE.EventType.CLOSE,()=>{f||(f=!0,ye(Ur,`RPC '${e}' stream ${r} transport closed`),p.wo())}),g(d,EE.EventType.ERROR,m=>{f||(f=!0,Bo(Ur,`RPC '${e}' stream ${r} transport errored:`,m),p.wo(new fe(ee.UNAVAILABLE,"The operation could not be completed")))}),g(d,EE.EventType.MESSAGE,m=>{var _;if(!f){const y=m.data[0];Ze(!!y);const b=y.error||(null===(_=y[0])||void 0===_?void 0:_.error);if(b){ye(Ur,`RPC '${e}' stream ${r} received error:`,b);const M=b.status;let S=function(O){const C=Ii[O];if(void 0!==C)return O7(C)}(M),x=b.message;void 0===S&&(S=ee.INTERNAL,x="Unknown error status: "+M+" with message "+b.message),f=!0,p.wo(new fe(S,x)),d.close()}else ye(Ur,`RPC '${e}' stream ${r} received:`,y),p._o(y)}}),g(a,hMe.STAT_EVENT,m=>{m.stat===Tq.PROXY?ye(Ur,`RPC '${e}' stream ${r} detected buffering proxy`):m.stat===Tq.NOPROXY&&ye(Ur,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function iS(){return typeof document<"u"?document:null}function fy(n){return new xAe(n,!0)}class Tk{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-i);r>0&&ye("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class VK{constructor(e,t,i,r,s,o,a,c){this.ii=e,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Tk(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return N(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return N(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var i=this;return N(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==e?i.qo.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(gi(t.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):t&&t.code===ee.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===t&&this.Zo(i,r)},i=>{e(()=>{const r=new fe(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,t){const i=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var e=this;this.state=5,this.qo.No(N(function*(){e.state=0,e.start()}))}tu(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _Ie extends VK{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function AAe(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:$e(),r=e.targetChange.targetIds||[],s=function(c,l){return c.useProto3Json?(Ze(void 0===l||"string"==typeof l),zi.fromBase64String(l||"")):(Ze(void 0===l||l instanceof Uint8Array),zi.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const l=void 0===c.code?ee.UNKNOWN:O7(c.code);return new fe(l,c.message||"")}(o);t=new U7(i,r,s,a||null)}else if("documentChange"in e){const i=e.documentChange,r=xa(n,i.document.name),s=yi(i.document.updateTime),o=i.document.createTime?yi(i.document.createTime):nt.min(),a=new wr({mapValue:{fields:i.document.fields}}),c=Un.newFoundDocument(r,s,o,a);t=new zE(i.targetIds||[],i.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const i=e.documentDelete,r=xa(n,i.document),s=i.readTime?yi(i.readTime):nt.min(),o=Un.newNoDocument(r,s);t=new zE([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,r=xa(n,i.document);t=new zE([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return $e();{const i=e.filter,{count:r=0,unchangedNames:s}=i,o=new vAe(r,s);t=new F7(i.targetId,o)}}var c;return t}(this.serializer,e),i=function(r){if(!("targetChange"in r))return nt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?nt.min():s.readTime?yi(s.readTime):nt.min()}(e);return this.listener.nu(t,i)}su(e){const t={};t.database=iy(this.serializer),t.addTarget=function(r,s){let o;const a=s.target;if(o=OE(a)?{documents:K7(r,a)}:{query:ik(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=H7(r,s.resumeToken);const c=JN(r,s.expectedCount);null!==c&&(o.expectedCount=c)}else if(s.snapshotVersion.compareTo(nt.min())>0){o.readTime=jf(r,s.snapshotVersion.toTimestamp());const c=JN(r,s.expectedCount);null!==c&&(o.expectedCount=c)}return o}(this.serializer,e);const i=function DAe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Wo(t)}iu(e){const t={};t.database=iy(this.serializer),t.removeTarget=e,this.Wo(t)}}class yIe extends VK{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function IAe(n,e){return n&&n.length>0?(Ze(void 0!==e),n.map(t=>function(i,r){let s=yi(i.updateTime?i.updateTime:r);return s.isEqual(nt.min())&&(s=yi(r)),new mAe(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=yi(e.commitTime);return this.listener.cu(i,t)}return Ze(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=iy(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>function ry(n,e){let t;if(e instanceof Hf)t={update:W7(n,e.key,e.value)};else if(e instanceof Gf)t={delete:ny(n,e.key)};else if(e instanceof Sc)t={update:W7(n,e.key,e.data),updateMask:NAe(e.fieldMask)};else{if(!(e instanceof qN))return $e();t={verify:ny(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof Vf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof td)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof nd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof zf)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw $e()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:TAe(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:$e()),t;var r}(this.serializer,i))};this.Wo(t)}}class vIe extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new fe(ee.UNKNOWN,r.toString())})}vo(e,t,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,t,i,s,o,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(ee.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class wIe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(gi(t),this.mu=!1):ye("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class EIe{constructor(e,t,i,r,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{i.enqueueAndForget(N(function*(){var c;Ol(o)&&(ye("RemoteStore","Restarting streams for network reachability change."),yield(c=N(function*(l){const u=ke(l);u.vu.add(4),yield Yf(u),u.bu.set("Unknown"),u.vu.delete(4),yield py(u)}),function(l){return c.apply(this,arguments)})(o))}))}),this.bu=new wIe(i,r)}}function py(n){return Ak.apply(this,arguments)}function Ak(){return Ak=N(function*(n){if(Ol(n))for(const e of n.Ru)yield e(!0)}),Ak.apply(this,arguments)}function Yf(n){return Ik.apply(this,arguments)}function Ik(){return Ik=N(function*(n){for(const e of n.Ru)yield e(!1)}),Ik.apply(this,arguments)}function rS(n,e){const t=ke(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Pk(t)?Rk(t):Qf(t).Ko()&&Dk(t,e))}function my(n,e){const t=ke(n),i=Qf(t);t.Au.delete(e),i.Ko()&&zK(t,e),0===t.Au.size&&(i.Ko()?i.jo():Ol(t)&&t.bu.set("Unknown"))}function Dk(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qf(n).su(e)}function zK(n,e){n.Vu.qt(e),Qf(n).iu(e)}function Rk(n){n.Vu=new wAe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Qf(n).start(),n.bu.gu()}function Pk(n){return Ol(n)&&!Qf(n).Uo()&&n.Au.size>0}function Ol(n){return 0===ke(n).vu.size}function HK(n){n.Vu=void 0}function SIe(n){return Ok.apply(this,arguments)}function Ok(){return Ok=N(function*(n){n.Au.forEach((e,t)=>{Dk(n,e)})}),Ok.apply(this,arguments)}function CIe(n,e){return Nk.apply(this,arguments)}function Nk(){return Nk=N(function*(n,e){HK(n),Pk(n)?(n.bu.Iu(e),Rk(n)):n.bu.set("Unknown")}),Nk.apply(this,arguments)}function xIe(n,e,t){return kk.apply(this,arguments)}function kk(){return kk=N(function*(n,e,t){if(n.bu.set("Online"),e instanceof U7&&2===e.state&&e.cause)try{yield(i=N(function*(r,s){const o=s.cause;for(const a of s.targetIds)r.Au.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.Au.delete(a),r.Vu.removeTarget(a))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield sS(n,i)}else if(e instanceof zE?n.Vu.Ht(e):e instanceof F7?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(nt.min()))try{const i=yield DK(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const o=r.Vu.ce(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const l=r.Au.get(c);l&&r.Au.set(c,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,c)=>{const l=r.Au.get(a);if(!l)return;r.Au.set(a,l.withResumeToken(zi.EMPTY_BYTE_STRING,l.snapshotVersion)),zK(r,a);const u=new Cc(l.target,a,c,l.sequenceNumber);Dk(r,u)}),r.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(i){ye("RemoteStore","Failed to raise snapshot:",i),yield sS(n,i)}var i}),kk.apply(this,arguments)}function sS(n,e,t){return Lk.apply(this,arguments)}function Lk(){return Lk=N(function*(n,e,t){if(!El(e))throw e;n.vu.add(1),yield Yf(n),n.bu.set("Offline"),t||(t=()=>DK(n.localStore)),n.asyncQueue.enqueueRetryable(N(function*(){ye("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield py(n)}))}),Lk.apply(this,arguments)}function GK(n,e){return e().catch(t=>sS(n,t,e))}function Zf(n){return Fk.apply(this,arguments)}function Fk(){return Fk=N(function*(n){const e=ke(n),t=Nl(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;TIe(e);)try{const r=yield uIe(e.localStore,i);if(null===r){0===e.Eu.length&&t.jo();break}i=r.batchId,MIe(e,r)}catch(r){yield sS(e,r)}jK(e)&&$K(e)}),Fk.apply(this,arguments)}function TIe(n){return Ol(n)&&n.Eu.length<10}function MIe(n,e){n.Eu.push(e);const t=Nl(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function jK(n){return Ol(n)&&!Nl(n).Uo()&&n.Eu.length>0}function $K(n){Nl(n).start()}function AIe(n){return Uk.apply(this,arguments)}function Uk(){return Uk=N(function*(n){Nl(n).hu()}),Uk.apply(this,arguments)}function IIe(n){return Bk.apply(this,arguments)}function Bk(){return Bk=N(function*(n){const e=Nl(n);for(const t of n.Eu)e.uu(t.mutations)}),Bk.apply(this,arguments)}function DIe(n,e,t){return Vk.apply(this,arguments)}function Vk(){return Vk=N(function*(n,e,t){const i=n.Eu.shift(),r=XN.from(i,e,t);yield GK(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Zf(n)}),Vk.apply(this,arguments)}function RIe(n,e){return zk.apply(this,arguments)}function zk(){return zk=N(function*(n,e){var t;e&&Nl(n).ou&&(yield(t=N(function*(i,r){if(function P7(n){switch(n){default:return $e();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}(s=r.code)&&s!==ee.ABORTED){const o=i.Eu.shift();Nl(i).Qo(),yield GK(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Zf(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),jK(n)&&$K(n)}),zk.apply(this,arguments)}function WK(n,e){return Hk.apply(this,arguments)}function Hk(){return Hk=N(function*(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const i=Ol(t);t.vu.add(3),yield Yf(t),i&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield py(t)}),Hk.apply(this,arguments)}function jk(){return jk=N(function*(n,e){const t=ke(n);e?(t.vu.delete(2),yield py(t)):e||(t.vu.add(2),yield Yf(t),t.bu.set("Unknown"))}),jk.apply(this,arguments)}function Qf(n){return n.Su||(n.Su=function(e,t,i){const r=ke(e);return r.fu(),new _Ie(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:SIe.bind(null,n),ao:CIe.bind(null,n),nu:xIe.bind(null,n)}),n.Ru.push(function(){var e=N(function*(t){t?(n.Su.Qo(),Pk(n)?Rk(n):n.bu.set("Unknown")):(yield n.Su.stop(),HK(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Nl(n){return n.Du||(n.Du=function(e,t,i){const r=ke(e);return r.fu(),new yIe(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:AIe.bind(null,n),ao:RIe.bind(null,n),au:IIe.bind(null,n),cu:DIe.bind(null,n)}),n.Ru.push(function(){var e=N(function*(t){t?(n.Du.Qo(),yield Zf(n)):(yield n.Du.stop(),n.Eu.length>0&&(ye("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class $k{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new $k(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jf(n,e){if(gi("AsyncQueue",`${e}: ${n}`),El(n))return new fe(ee.UNAVAILABLE,`${e}: ${n}`);throw n}class ep{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Oe.comparator(t.key,i.key):(t,i)=>Oe.comparator(t.key,i.key),this.keyedMap=X_(),this.sortedSet=new Nn(this.comparator)}static emptySet(e){return new ep(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ep)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new ep;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class qK{constructor(){this.Cu=new Nn(Oe.comparator)}track(e){const t=e.doc.key,i=this.Cu.get(t);i?0!==e.type&&3===i.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==i.type?this.Cu=this.Cu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Cu=this.Cu.remove(t):1===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):$e():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,i)=>{e.push(i)}),e}}class tp{constructor(e,t,i,r,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new tp(e,t,ep.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&q_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class PIe{constructor(){this.Nu=void 0,this.listeners=[]}}class OIe{constructor(){this.queries=new Ec(e=>f7(e),q_),this.onlineState="Unknown",this.ku=new Set}}function qk(){return qk=N(function*(n,e){const t=ke(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new PIe),r)try{s.Nu=yield t.onListen(i)}catch(o){const a=Jf(o,`Initialization of query '${$N(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&Yk(t)}),qk.apply(this,arguments)}function Xk(){return Xk=N(function*(n,e){const t=ke(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),Xk.apply(this,arguments)}function NIe(n,e){const t=ke(n);let i=!1;for(const r of e){const o=t.queries.get(r.query);if(o){for(const a of o.listeners)a.$u(r)&&(i=!0);o.Nu=r}}i&&Yk(t)}function kIe(n,e,t){const i=ke(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function Yk(n){n.ku.forEach(e=>{e.next()})}class Zk{constructor(e,t,i){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new tp(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=tp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class YK{constructor(e){this.key=e}}class ZK{constructor(e){this.key=e}}class QK{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Ft(),this.mutatedKeys=Ft(),this.tc=m7(e),this.ec=new ep(this.tc)}get nc(){return this.Yu}sc(e,t){const i=t?t.ic:new qK,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{const h=r.get(u),f=K_(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),m=!0):this.rc(h,f)||(i.track({type:2,doc:f}),m=!0,(c&&this.tc(f,c)>0||l&&this.tc(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),m=!0):h&&!f&&(i.track({type:1,doc:h}),m=!0,(c||l)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{ec:o,ic:i,zi:a,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((l,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e()}};return f(d)-f(h)}(l.type,u.type)||this.tc(l.doc,u.doc)),this.oc(i);const o=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,c=a!==this.Xu;return this.Xu=a,0!==s.length||c?{snapshot:new tp(this.query,e.ec,r,s,e.mutatedKeys,0===a,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new qK,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Ft(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const t=[];return e.forEach(i=>{this.Zu.has(i)||t.push(new ZK(i))}),this.Zu.forEach(i=>{e.has(i)||t.push(new YK(i))}),t}hc(e){this.Yu=e.ir,this.Zu=Ft();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return tp.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class UIe{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class BIe{constructor(e){this.key=e,this.fc=!1}}class VIe{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Ec(a=>f7(a),q_),this._c=new Map,this.mc=new Set,this.gc=new Nn(Oe.comparator),this.yc=new Map,this.Ic=new dk,this.Tc={},this.Ec=new Map,this.Ac=cd.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function zIe(n,e){return Qk.apply(this,arguments)}function Qk(){return Qk=N(function*(n,e){const t=function wL(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JK.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YIe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jIe.bind(null,e),e.dc.nu=NIe.bind(null,e.eventManager),e.dc.Pc=kIe.bind(null,e.eventManager),e}(n);let i,r;const s=t.wc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const o=yield function Kf(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Bs.getTargetData(i,e).next(s=>s?(r=s,K.resolve(r)):t.Bs.allocateTargetId(i).next(o=>(r=new Cc(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(i.targetId,i),t.Yi.set(e,i.targetId)),i})}(t.localStore,ss(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield function Jk(n,e,t,i,r){return eL.apply(this,arguments)}(t,e,i,"current"===a,o.resumeToken),t.isPrimaryClient&&rS(t.remoteStore,o)}return r}),Qk.apply(this,arguments)}function eL(){return eL=N(function*(n,e,t,i,r){n.Rc=(d,h,f)=>{return(p=N(function*(g,m,_,y){let v=m.view.sc(_);v.zi&&(v=yield JE(g.localStore,m.query,!1).then(({documents:S})=>m.view.sc(S,v)));const b=y&&y.targetChanges.get(m.targetId),M=m.view.applyChanges(v,g.isPrimaryClient,b);return uL(g,m.targetId,M.cc),M.snapshot}),function(g,m,_,y){return p.apply(this,arguments)})(n,d,h,f);var p};const s=yield JE(n.localStore,e,!0),o=new QK(e,s.ir),a=o.sc(s.documents),c=ty.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),l=o.applyChanges(a,n.isPrimaryClient,c);uL(n,t,l.cc);const u=new UIe(e,t,o);return n.wc.set(e,u),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),l.snapshot}),eL.apply(this,arguments)}function HIe(n,e){return tL.apply(this,arguments)}function tL(){return tL=N(function*(n,e){const t=ke(n),i=t.wc.get(e),r=t._c.get(i.targetId);if(r.length>1)return t._c.set(i.targetId,r.filter(s=>!q_(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Xf(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),my(t.remoteStore,i.targetId),np(t,i.targetId)}).catch(wl))):(np(t,i.targetId),yield Xf(t.localStore,i.targetId,!0))}),tL.apply(this,arguments)}function nL(){return nL=N(function*(n,e,t){const i=function EL(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$Ie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WIe.bind(null,e),e}(n);try{const r=yield function(s,o){const a=ke(s),c=Qn.now(),l=o.reduce((h,f)=>h.add(f.key),Ft());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Cs(),p=Ft();return a.Zi.getEntries(h,l).next(g=>{f=g,f.forEach((m,_)=>{_.isValidDocument()||(p=p.add(m))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{u=g;const m=[];for(const _ of o){const y=_Ae(_,u.get(_.key).overlayedDocument);null!=y&&m.push(new Sc(_.key,y,Jq(y.value.mapValue),$n.exists(!0)))}return a.mutationQueue.addMutationBatch(h,c,m,o)}).next(g=>{d=g;const m=g.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,m)})}).then(()=>({batchId:d.batchId,changes:_7(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let c=s.Tc[s.currentUser.toKey()];c||(c=new Nn(wt)),c=c.insert(o,a),s.Tc[s.currentUser.toKey()]=c}(i,r.batchId,t),yield xc(i,r.changes),yield Zf(i.remoteStore)}catch(r){const s=Jf(r,"Failed to persist write");t.reject(s)}}),nL.apply(this,arguments)}function JK(n,e){return iL.apply(this,arguments)}function iL(){return iL=N(function*(n,e){const t=ke(n);try{const i=yield function lIe(n,e){const t=ke(n),i=e.snapshotVersion;let r=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Zi.newChangeBuffer({trackRemovals:!0});r=t.Ji;const a=[];e.targetChanges.forEach((u,d)=>{const h=r.get(d);if(!h)return;a.push(t.Bs.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Bs.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,m;null!==e.targetMismatches.get(d)?f=f.withResumeToken(zi.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),g=f,m=u,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0)&&a.push(t.Bs.updateTargetData(s,f))});let c=Cs(),l=Ft();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(function RK(n,e,t){let i=Ft(),r=Ft();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Cs();return t.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(nt.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ye("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{nr:o,sr:r}})}(s,o,e.documentUpdates).next(u=>{c=u.nr,l=u.sr})),!i.isEqual(nt.min())){const u=t.Bs.getLastRemoteSnapshotVersion(s).next(d=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return K.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Ji=r,s))}(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.yc.get(s);o&&(Ze(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.fc=!0:r.modifiedDocuments.size>0?Ze(o.fc):r.removedDocuments.size>0&&(Ze(o.fc),o.fc=!1))}),yield xc(t,i,e)}catch(i){yield wl(i)}}),iL.apply(this,arguments)}function eX(n,e,t){const i=ke(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=ke(s);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(const d of u.listeners)d.Mu(o)&&(c=!0)}),c&&Yk(a)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function jIe(n,e,t){return rL.apply(this,arguments)}function rL(){return rL=N(function*(n,e,t){const i=ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.yc.get(e),s=r&&r.key;if(s){let o=new Nn(Oe.comparator);o=o.insert(s,Un.newNoDocument(s,nt.min()));const a=Ft().add(s),c=new ey(nt.min(),new Map,new Nn(wt),o,a);yield JK(i,c),i.gc=i.gc.remove(s),i.yc.delete(e),dL(i)}else yield Xf(i.localStore,e,!1).then(()=>np(i,e,t)).catch(wl)}),rL.apply(this,arguments)}function $Ie(n,e){return sL.apply(this,arguments)}function sL(){return sL=N(function*(n,e){const t=ke(n),i=e.batch.batchId;try{const r=yield function cIe(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){const u=c.batch,d=u.keys();let h=K.resolve();return d.forEach(f=>{h=h.next(()=>l.getEntry(a,f)).next(p=>{const g=c.docVersions.get(f);Ze(null!==g),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),l.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=Ft();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);lL(t,i,null),cL(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield xc(t,r)}catch(r){yield wl(r)}}),sL.apply(this,arguments)}function WIe(n,e,t){return oL.apply(this,arguments)}function oL(){return oL=N(function*(n,e,t){const i=ke(n);try{const r=yield function(s,o){const a=ke(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a.mutationQueue.lookupMutationBatch(c,o).next(u=>(Ze(null!==u),l=u.keys(),a.mutationQueue.removeMutationBatch(c,u))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>a.localDocuments.getDocuments(c,l))})}(i.localStore,e);lL(i,e,t),cL(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield xc(i,r)}catch(r){yield wl(r)}}),oL.apply(this,arguments)}function cL(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function lL(n,e,t){const i=ke(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function np(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n._c.get(e))n.wc.delete(i),t&&n.dc.Pc(i,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(i=>{n.Ic.containsKey(i)||tX(n,i)})}function tX(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(my(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),dL(n))}function uL(n,e,t){for(const i of t)i instanceof YK?(n.Ic.addReference(i.key,e),KIe(n,i)):i instanceof ZK?(ye("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,e),n.Ic.containsKey(i.key)||tX(n,i.key)):$e()}function KIe(n,e){const t=e.key,i=t.path.canonicalString();n.gc.get(t)||n.mc.has(i)||(ye("SyncEngine","New document in limbo: "+t),n.mc.add(i),dL(n))}function dL(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Oe(tn.fromString(e)),i=n.Ac.next();n.yc.set(i,new BIe(t)),n.gc=n.gc.insert(t,i),rS(n.remoteStore,new Cc(ss(Bf(t.path)),i,"TargetPurposeLimboResolution",zs.ct))}}function xc(n,e,t){return hL.apply(this,arguments)}function hL(){return hL=N(function*(n,e,t){const i=ke(n),r=[],s=[],o=[];var a;i.wc.isEmpty()||(i.wc.forEach((a,c)=>{o.push(i.Rc(c,e,t).then(l=>{if((l||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);const u=gk.Li(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),i.dc.nu(r),yield(a=N(function*(c,l){const u=ke(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>K.forEach(l,h=>K.forEach(h.Fi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>K.forEach(h.Bi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!El(d))throw d;ye("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const f=u.Ji.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);u.Ji=u.Ji.insert(h,g)}}}),function(c,l){return a.apply(this,arguments)})(i.localStore,s))}),hL.apply(this,arguments)}function XIe(n,e){return fL.apply(this,arguments)}function fL(){return fL=N(function*(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const i=yield IK(t.localStore,e);t.currentUser=e,(r=t).Ec.forEach(o=>{o.forEach(a=>{a.reject(new fe(ee.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield xc(t,i.er)}var r}),fL.apply(this,arguments)}function YIe(n,e){const t=ke(n),i=t.yc.get(e);if(i&&i.fc)return Ft().add(i.key);{let r=Ft();const s=t._c.get(e);if(!s)return r;for(const o of s){const a=t.wc.get(o);r=r.unionWith(a.view.nc)}return r}}class oS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return N(function*(){t.serializer=fy(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function AK(n,e,t,i){return new aIe(n,e,t,i)}(this.persistence,new MK,e.initialUser,this.serializer)}createPersistence(e){return new hk(YE.zs,this.serializer)}createSharedClientState(e){return new FK}terminate(){var e=this;return N(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ip{initialize(e,t){var i=this;return N(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>eX(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=XIe.bind(null,i.syncEngine),yield function Gk(n,e){return jk.apply(this,arguments)}(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OIe}createDatastore(e){const t=fy(e.databaseInfo.databaseId),i=new gIe(e.databaseInfo);return new vIe(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=a=>eX(this.syncEngine,a,0),o=UK.D()?new UK:new fIe,new EIe(t,i,r,s,o);var t,i,r,s,o}createSyncEngine(e,t){return function(i,r,s,o,a,c,l){const u=new VIe(i,r,s,o,a,c);return l&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=N(function*(t){const i=ke(t);ye("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield Yf(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class aS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class lDe{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Ji.UNAUTHENTICATED,this.clientId=Dq.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=N(function*(a){ye("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(ye("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return N(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(N(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Jf(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function cS(n,e){return SL.apply(this,arguments)}function SL(){return SL=N(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=N(function*(s){i.isEqual(s)||(yield IK(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),SL.apply(this,arguments)}function CL(n,e){return xL.apply(this,arguments)}function xL(){return xL=N(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function TL(n){return ML.apply(this,arguments)}(n);ye("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>WK(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>WK(e.remoteStore,s)),n._onlineComponents=e}),xL.apply(this,arguments)}function ML(){return ML=N(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{yield cS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function aX(n){return"FirebaseError"===n.name?n.code===ee.FAILED_PRECONDITION||n.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;Bo("Error using user provided cache. Falling back to memory cache: "+t),yield cS(n,new oS)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),yield cS(n,new oS);return n._offlineComponents}),ML.apply(this,arguments)}function lS(n){return AL.apply(this,arguments)}function AL(){return AL=N(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),yield CL(n,n._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),yield CL(n,new ip))),n._onlineComponents}),AL.apply(this,arguments)}function DL(){return DL=N(function*(n){const e=yield lS(n),t=e.eventManager;return t.onListen=zIe.bind(null,e.syncEngine),t.onUnlisten=HIe.bind(null,e.syncEngine),t}),DL.apply(this,arguments)}function dX(n,e,t={}){const i=new Vi;return n.asyncQueue.enqueueAndForget(N(function*(){return function(r,s,o,a,c){const l=new aS({next:d=>{s.enqueueAndForget(()=>function Kk(n,e){return Xk.apply(this,arguments)}(r,u));const h=d.docs.has(o);!h&&d.fromCache?c.reject(new fe(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?c.reject(new fe(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),u=new Zk(Bf(o.path),l,{includeMetadataChanges:!0,Ku:!0});return function Wk(n,e){return qk.apply(this,arguments)}(r,u)}(yield function rp(n){return DL.apply(this,arguments)}(n),n.asyncQueue,e,t,i)})),i.promise}function fX(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const pX=new Map;function RL(n,e,t){if(!t)throw new fe(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mX(n){if(!Oe.isDocumentKey(n))throw new fe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gX(n){if(Oe.isDocumentKey(n))throw new fe(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":$e()}function Zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dS(n);throw new fe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class yX{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new fe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new fe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function yDe(n,e,t,i){if(!0===e&&!0===i)throw new fe(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=fX(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gy{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yX({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new fe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new fe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yX(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new gMe;switch(t.type){case"firstParty":return new bMe(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new fe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pX.get(e);t&&(ye("ComponentProvider","Removing Datastore"),pX.delete(e),t.terminate())}(this),Promise.resolve()}}class vi{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vi(this.firestore,e,this._key)}}class Er{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Er(this.firestore,e,this._query)}}class Ta extends Er{constructor(e,t,i){super(e,t,Bf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vi(this.firestore,null,new Oe(e))}withConverter(e){return new Ta(this.firestore,e,this._path)}}function bDe(n,e,...t){if(n=Yn(n),RL("collection","path",e),n instanceof gy){const i=tn.fromString(e,...t);return gX(i),new Ta(n,null,i)}{if(!(n instanceof vi||n instanceof Ta))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tn.fromString(e,...t));return gX(i),new Ta(n.firestore,null,i)}}function vX(n,e,...t){if(n=Yn(n),1===arguments.length&&(e=Dq.A()),RL("doc","path",e),n instanceof gy){const i=tn.fromString(e,...t);return mX(i),new vi(n,null,new Oe(i))}{if(!(n instanceof vi||n instanceof Ta))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tn.fromString(e,...t));return mX(i),new vi(n.firestore,n instanceof Ta?n.converter:null,new Oe(i))}}class wDe{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Tk(this,"async_queue_retry"),this.Xc=()=>{const t=iS();t&&ye("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=iS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=iS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Vi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return N(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!El(t))throw t;ye("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{throw this.Wc=i,this.Hc=!1,gi("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=t,t}enqueueAfterDelay(e,t,i){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=$k.createAndSchedule(this,e,t,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&$e()}verifyOperationInProgress(){}sa(){var e=this;return N(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class Bn extends gy{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new wDe,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||wX(this),this._firestoreClient.terminate()}}function SDe(n,e){const i="string"==typeof n?n:e||"(default)",r=pa("object"==typeof n?n:pf(),"firestore").getImmediate({identifier:i});if(!r._initialized){const s=(n=>{const e=uW("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),i]:[e.substring(0,t),i]})();s&&function vDe(n,e,t,i={}){var r;const s=(n=Zt(n,gy))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if("string"==typeof i.mockUserToken)a=i.mockUserToken,c=Ji.MOCK_USER;else{a=function Dye(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ow(JSON.stringify({alg:"none",type:"JWT"})),ow(JSON.stringify(o)),""].join(".")}(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new fe(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ji(l)}n._authCredentials=new _Me(new Aq(a,c))}}(r,...s)}return r}function Di(n){return n._firestoreClient||wX(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wX(n){var e,t,i;const r=n._freezeSettings(),s=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new YMe(n._databaseId,a,n._persistenceKey,(l=r).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,fX(l.experimentalLongPollingOptions),l.useFetchStreams));var a,l;n._firestoreClient=new lDe(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=r.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}class ud{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ud(zi.fromBase64String(e))}catch(t){throw new fe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ud(zi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class sp{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new fe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class OL{constructor(e){this._methodName=e}}class NL{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return wt(this._lat,e._lat)||wt(this._long,e._long)}}const xDe=/^__.*__$/;class TDe{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Sc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hf(e,this.data,t,this.fieldTransforms)}}class CX{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Sc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xX(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e()}}class hS{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new hS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return pS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(xX(this.ca)&&xDe.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class MDe{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||fy(e)}ya(e,t,i,r=!1){return new hS({ca:e,methodName:t,ga:i,path:_i.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function op(n){const e=n._freezeSettings(),t=fy(n._databaseId);return new MDe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kL(n,e,t,i,r,s={}){const o=n.ya(s.merge||s.mergeFields?2:0,e,t,r);FL("Data must be an object, but it was:",o,i);const a=DX(i,o);let c,l;if(s.merge)c=new Ss(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=vy(e,d,t);if(!o.contains(h))throw new fe(ee.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);PX(u,h)||u.push(h)}c=new Ss(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new TDe(new wr(a),c,l)}class yy extends OL{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yy}}function dd(n,e){if(RX(n=Yn(n)))return FL("Unsupported field value:",e,n),DX(n,e);if(n instanceof OL)return function(t,i){if(!xX(i.ca))throw i._a(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const o of t){let a=dd(o,i.wa(s));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=Yn(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return w7(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Qn.fromDate(t);return{timestampValue:jf(i.serializer,r)}}if(t instanceof Qn){const r=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:jf(i.serializer,r)}}if(t instanceof NL)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ud)return{bytesValue:H7(i.serializer,t._byteString)};if(t instanceof vi){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:ek(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i._a(`Unsupported field value: ${dS(t)}`)}(n,e)}function DX(n,e){const t={};return jq(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sl(n,(i,r)=>{const s=dd(r,e.ha(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function RX(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof NL||n instanceof ud||n instanceof vi||n instanceof OL)}function FL(n,e,t){if(!RX(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=dS(t);throw e._a("an object"===i?n+" a custom object":n+" "+i)}var i}function vy(n,e,t){if((e=Yn(e))instanceof sp)return e._internalPath;if("string"==typeof e)return fS(n,e);throw pS("Field path arguments must be of type string or ",n,!1,void 0,t)}const RDe=new RegExp("[~\\*/\\[\\]]");function fS(n,e,t){if(e.search(RDe)>=0)throw pS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sp(...e.split("."))._internalPath}catch{throw pS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pS(n,e,t,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new fe(ee.INVALID_ARGUMENT,a+n+c)}function PX(n,e){return n.some(t=>t.isEqual(e))}class UL{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new PDe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class PDe extends UL{data(){return super.data()}}function mS(n,e){return"string"==typeof e?fS(n,e):e instanceof sp?e._internalPath:e._delegate._internalPath}class NDe{convertValue(e,t="none"){switch(Tl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $e()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Sl(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new NL(si(e.latitude),si(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=IE(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(H_(e));default:return null}}convertTimestamp(e){const t=Cl(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tn.fromString(e);Ze(Q7(i));const r=new Zu(i.get(1),i.get(3)),s=new Oe(i.popFirst(5));return r.isEqual(t)||gi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class hd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cp extends UL{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(mS("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class vS extends cp{data(e={}){return super.data(e)}}function FDe(n){n=Zt(n,vi);const e=Zt(n.firestore,Bn);return dX(Di(e),n._key).then(t=>function zL(n,e,t){const i=t.docs.get(e._key),r=new kl(n);return new cp(n,r,e._key,i,new hd(t.hasPendingWrites,t.fromCache),e.converter)}(e,n,t))}class kl extends NDe{constructor(e){super(),this.firestore=e}convertBytes(e){return new ud(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vi(this.firestore,null,t)}}function UDe(n,e,t){n=Zt(n,vi);const i=Zt(n.firestore,Bn),r=function VL(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}(n.converter,e,t);return wy(i,[kL(op(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,$n.none())])}function BDe(n,e,t,...i){n=Zt(n,vi);const r=Zt(n.firestore,Bn),s=op(r);let o;return o="string"==typeof(e=Yn(e))||e instanceof sp?function AX(n,e,t,i,r,s){const o=n.ya(1,e,t),a=[vy(e,i,t)],c=[r];if(s.length%2!=0)throw new fe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(vy(e,s[h])),c.push(s[h+1]);const l=[],u=wr.empty();for(let h=a.length-1;h>=0;--h)if(!PX(l,a[h])){const f=a[h];let p=c[h];p=Yn(p);const g=o.da(f);if(p instanceof yy)l.push(f);else{const m=dd(p,g);null!=m&&(l.push(f),u.set(f,m))}}const d=new Ss(l);return new CX(u,d,o.fieldTransforms)}(s,"updateDoc",n._key,e,t,i):function MX(n,e,t,i){const r=n.ya(1,e,t);FL("Data must be an object, but it was:",r,i);const s=[],o=wr.empty();Sl(i,(c,l)=>{const u=fS(e,c,t);l=Yn(l);const d=r.da(u);if(l instanceof yy)s.push(u);else{const h=dd(l,d);null!=h&&(s.push(u),o.set(u,h))}});const a=new Ss(s);return new CX(o,a,r.fieldTransforms)}(s,"updateDoc",n._key,e),wy(r,[o.toMutation(n._key,$n.exists(!0))])}function wy(n,e){return function(t,i){const r=new Vi;return t.asyncQueue.enqueueAndForget(N(function*(){return function GIe(n,e,t){return nL.apply(this,arguments)}(yield function IL(n){return lS(n).then(e=>e.syncEngine)}(t),i,r)})),r.promise}(Di(n),e)}!function(n,e=!0){Of=ku,Or(new mr("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),o=new Bn(new yMe(t.getProvider("auth-internal")),new wMe(t.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new fe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(a.options.projectId,c)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),En(Mq,"3.13.0",n),En(Mq,"3.13.0","esm2017")}();class fd{constructor(e){return e}}const zX="firestore",HL=new Se("angularfire2.firestore-instances");function JDe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new fd(i)}}const e1e={provide:class ZDe{constructor(){return yf(zX)}},deps:[[new hi,HL]]},t1e={provide:fd,useFactory:function QDe(n,e){const t=_f(zX,n,e);return t&&new fd(t)},deps:[[new hi,HL],fc]};let n1e=(()=>{class n{constructor(){En("angularfire",hc.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Rt({type:n}),n.\u0275inj=Tt({providers:[t1e,e1e]}),n})();function i1e(n,...e){return{ngModule:n1e,providers:[{provide:HL,useFactory:JDe(n),multi:!0,deps:[pt,Tn,bf,wf,[new hi,c9],[new hi,NR],...e]}]}}const r1e=Xi(bDe,!0),Ma=Xi(vX,!0),wS=Xi(FDe,!0),s1e=Xi(SDe,!0),ES=Xi(UDe,!0),HX=Xi(BDe,!0);function GL(n=0,e,t=oEe){let i=-1;return null!=e&&(t3(e)?t=e:i=e),new yn(r=>{let s=function o1e(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}class c1e extends Gt{constructor(e=1/0,t=1/0,i=sR){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=t.now();let a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}}function GX(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,Yx({connector:()=>new c1e(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}var jX={},$X={};function l1e(n){for(var e=[],t=0,i=0,r=0;r<n.length;r+=1){var s=jX[n[r]];if(void 0===s)throw new Error("Invalid character ("+n[r]+")");var o=32&s;if(i+=(s&=31)<<t,o)t+=5;else{var a=1&i;i>>>=1,e.push(a?0===i?-2147483648:-i:i),i=t=0}}return e}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(n,e){jX[n]=e,$X[e]=n});const SS="TOKEN_LOGGER_CONFIG";class u1e{constructor(e){this.config=this._clone(e)}get level(){return this.config.level}get serverLogLevel(){return this.config.serverLogLevel}updateConfig(e){this.config=this._clone(e)}partialUpdateConfig(e){e&&Object.keys(e).forEach(t=>{this.config[t]=e[t]})}getConfig(){return this._clone(this.config)}_clone(e){const t={level:null};return Object.keys(e).forEach(i=>{t[i]=e[i]}),t}}const Ey="TOKEN_LOGGER_CONFIG_ENGINE_FACTORY";class d1e{provideConfigEngine(e){return new u1e(e)}}const Sy="TOKEN_LOGGER_MAPPER_SERVICE";let h1e=(()=>{class n{constructor(t){this.httpBackend=t,this.sourceMapCache=new Map,this.logPositionCache=new Map}getLogPosition(t,i){const r=this.getStackLine(t);if(!r)return Ye({fileName:"",lineNumber:0,columnNumber:0});const s=this.getLocalPosition(r);if(!t.enableSourceMaps)return Ye(s);const o=this.getSourceMapLocation(r);return this.getSourceMap(o,s)}getStackLine(t){const i=new Error;try{throw i}catch{try{let s=4;return i.stack.split("\n")[0].includes(".js:")||(s+=1),i.stack.split("\n")[s+(t.proxiedSteps||0)]}catch{return null}}}getLocalPosition(t){const i=t.lastIndexOf("/");let r=t.indexOf(")");r<0&&(r=void 0);const o=t.substring(i+1,r).split(":");return 3===o.length?{fileName:o[0],lineNumber:+o[1],columnNumber:+o[2]}:{fileName:"unknown",lineNumber:0,columnNumber:0}}getTranspileLocation(t){let i=t.indexOf("(");i<0&&(i=t.lastIndexOf("@"),i<0&&(i=t.lastIndexOf(" ")));let r=t.indexOf(")");return r<0&&(r=void 0),t.substring(i+1,r)}getSourceMapLocation(t){const i=this.getTranspileLocation(t),r=i.substring(0,i.lastIndexOf(":"));return r.substring(0,r.lastIndexOf(":"))+".map"}getMapping(t,i){let r=0,s=0,o=0;const a=t.mappings.split(";");for(let c=0;c<a.length;c++){let l=0;const u=a[c].split(",");for(let d=0;d<u.length;d++){const h=l1e(u[d]);if(h.length>=4&&(l+=h[0],r+=h[1],s+=h[2],o+=h[3]),c===i.lineNumber){if(l===i.columnNumber)return{fileName:t.sources[r],lineNumber:s,columnNumber:o};if(d+1===u.length)return{fileName:t.sources[r],lineNumber:s,columnNumber:0}}}}return{fileName:"unknown",lineNumber:0,columnNumber:0}}getSourceMap(t,i){const r=new Mu("GET",t),s=`${i.fileName}:${i.lineNumber}:${i.columnNumber}`;if(this.logPositionCache.has(s))return this.logPositionCache.get(s);this.sourceMapCache.has(t)||(this.httpBackend?this.sourceMapCache.set(t,this.httpBackend.handle(r).pipe(Ti(a=>a instanceof ol),zt(a=>a.body),function a1e(n=1/0){let e;e=n&&"object"==typeof n?n:{count:n};const{count:t=1/0,delay:i,resetOnSuccess:r=!1}=e;return t<=0?Ua:Hn((s,o)=>{let c,a=0;const l=()=>{let u=!1;c=s.subscribe(Mn(o,d=>{r&&(a=0),o.next(d)},void 0,d=>{if(a++<t){const h=()=>{c?(c.unsubscribe(),c=null,l()):u=!0};if(null!=i){const f="number"==typeof i?GL(i):cr(i(d,a)),p=Mn(o,()=>{p.unsubscribe(),h()},()=>{o.complete()});f.subscribe(p)}else h()}else o.error(d)})),u&&(c.unsubscribe(),c=null,l())};l()})}(3),GX(1))):(console.error("NGXLogger : Can't get sourcemap because HttpBackend is not provided. You need to import HttpClientModule"),this.sourceMapCache.set(t,Ye(null))));const o=this.sourceMapCache.get(t).pipe(zt(a=>a?this.getMapping(a,i):i),ic(()=>Ye(i)),GX(1));return this.logPositionCache.set(s,o),o}}return n.\u0275fac=function(t){return new(t||n)(z(ef,8))},n.\u0275prov=me({token:n,factory:n.\u0275fac}),n})();const Cy="TOKEN_LOGGER_METADATA_SERVICE";let f1e=(()=>{class n{constructor(t){this.datePipe=t}computeTimestamp(t){const i=()=>(new Date).toISOString();return t.timestampFormat?this.datePipe?this.datePipe.transform(new Date,t.timestampFormat):(console.error("NGXLogger : Can't use timeStampFormat because DatePipe is not provided. You need to provide DatePipe"),i()):i()}getMetadata(t,i,r,s){const o={level:t,additional:s};return o.message=r&&"function"==typeof r?r():r,o.timestamp=this.computeTimestamp(i),o}}return n.\u0275fac=function(t){return new(t||n)(z(lj,8))},n.\u0275prov=me({token:n,factory:n.\u0275fac}),n})();const xy="TOKEN_LOGGER_RULES_SERVICE";let p1e=(()=>{class n{shouldCallWriter(t,i,r,s){return!i.disableConsoleLogging&&t>=i.level}shouldCallServer(t,i,r,s){return!!i.serverLoggingUrl&&t>=i.serverLogLevel}shouldCallMonitor(t,i,r,s){return this.shouldCallWriter(t,i,r,s)||this.shouldCallServer(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=me({token:n,factory:n.\u0275fac}),n})();const Ty="TOKEN_LOGGER_SERVER_SERVICE";let m1e=(()=>{class n{constructor(t,i){this.httpBackend=t,this.ngZone=i,this.serverCallsQueue=[],this.flushingQueue=new us(!1)}ngOnDestroy(){this.flushingQueue&&(this.flushingQueue.complete(),this.flushingQueue=null),this.addToQueueTimer&&(this.addToQueueTimer.unsubscribe(),this.addToQueueTimer=null)}secureErrorObject(t){return t?.stack}secureAdditionalParameters(t){return null==t?null:t.map((i,r)=>{try{return i instanceof Error?this.secureErrorObject(i):("object"==typeof i&&JSON.stringify(i),i)}catch{return`The additional[${r}] value could not be parsed using JSON.stringify().`}})}secureMessage(t){try{if(t instanceof Error)return this.secureErrorObject(t);"string"!=typeof t&&(t=JSON.stringify(t,null,2))}catch{t='The provided "message" value could not be parsed with JSON.stringify().'}return t}alterHttpRequest(t){return t}logOnServer(t,i,r){if(!this.httpBackend)return console.error("NGXLogger : Can't log on server because HttpBackend is not provided. You need to import HttpClientModule"),Ye(null);let s=new Mu("POST",t,i,r||{}),o=Ye(s);const a=this.alterHttpRequest(s);return Qj(a)?o=a:a?o=Ye(a):console.warn("NGXLogger : alterHttpRequest returned an invalid request. Using default one instead"),o.pipe(Tu(c=>c?this.httpBackend.handle(c):(console.warn("NGXLogger : alterHttpRequest returned an invalid request (observable). Using default one instead"),this.httpBackend.handle(s))),Ti(c=>c instanceof ol),zt(c=>c.body))}customiseRequestBody(t){return t}flushQueue(t){this.flushingQueue.next(!0),this.addToQueueTimer&&(this.addToQueueTimer.unsubscribe(),this.addToQueueTimer=null),this.serverCallsQueue&&this.serverCallsQueue.length>0&&this.sendToServerAction(this.serverCallsQueue,t),this.serverCallsQueue=[],this.flushingQueue.next(!1)}sendToServerAction(t,i){let r;const s=c=>{const l={...c};return l.additional=this.secureAdditionalParameters(l.additional),l.message=this.secureMessage(l.message),l};Array.isArray(t)?(r=[],t.forEach(c=>{r.push(s(c))})):r=s(t),r=this.customiseRequestBody(r);const o=i.customHttpHeaders||new ho;o.has("Content-Type")||o.set("Content-Type","application/json");const a=()=>{this.logOnServer(i.serverLoggingUrl,r,{headers:o,params:i.customHttpParams||new nc,responseType:i.httpResponseType||"json",withCredentials:i.withCredentials||!1}).pipe(ic(c=>(console.error("NGXLogger: Failed to log on server",c),nf(c)))).subscribe()};if(!0===i.serverCallsOutsideNgZone){if(!this.ngZone)return void console.error("NGXLogger: NgZone is not provided and serverCallsOutsideNgZone is set to true");this.ngZone.runOutsideAngular(a)}else a()}sendToServer(t,i){if((!i.serverCallsBatchSize||i.serverCallsBatchSize<=0)&&(!i.serverCallsTimer||i.serverCallsTimer<=0))return void this.sendToServerAction(t,i);const r=()=>{this.serverCallsQueue.push({...t}),i.serverCallsBatchSize&&this.serverCallsQueue.length>i.serverCallsBatchSize&&this.flushQueue(i),i.serverCallsTimer>0&&!this.addToQueueTimer&&(this.addToQueueTimer=GL(i.serverCallsTimer).subscribe(s=>{this.flushQueue(i)}))};!0===this.flushingQueue.value?this.flushingQueue.pipe(Ti(s=>!1===s),Pr(1)).subscribe(s=>{r()}):r()}}return n.\u0275fac=function(t){return new(t||n)(z(ef,8),z(pt,8))},n.\u0275prov=me({token:n,factory:n.\u0275fac}),n})();const My="TOKEN_LOGGER_WRITER_SERVICE";var Ri=function(n){return n[n.TRACE=0]="TRACE",n[n.DEBUG=1]="DEBUG",n[n.INFO=2]="INFO",n[n.LOG=3]="LOG",n[n.WARN=4]="WARN",n[n.ERROR=5]="ERROR",n[n.FATAL=6]="FATAL",n[n.OFF=7]="OFF",n}(Ri||{});const g1e=["purple","teal","gray","gray","red","red","red"];let _1e=(()=>{class n{constructor(t){this.platformId=t,this.prepareMetaStringFuncs=[this.getTimestampToWrite,this.getLevelToWrite,this.getFileDetailsToWrite,this.getContextToWrite],this.isIE=P0(t)&&navigator&&navigator.userAgent&&!(-1===navigator.userAgent.indexOf("MSIE")&&!navigator.userAgent.match(/Trident\//)&&!navigator.userAgent.match(/Edge\//)),this.logFunc=this.isIE?this.logIE.bind(this):this.logModern.bind(this)}getTimestampToWrite(t,i){return t.timestamp}getLevelToWrite(t,i){return Ri[t.level]}getFileDetailsToWrite(t,i){return!0===i.disableFileDetails?"":`[${t.fileName}:${t.lineNumber}:${t.columnNumber}]`}getContextToWrite(t,i){return i.context?`{${i.context}}`:""}prepareMetaString(t,i){let r="";return this.prepareMetaStringFuncs.forEach(s=>{const o=s(t,i);o&&(r=r+" "+o)}),r.trim()}getColor(t,i){if(t.level!==Ri.OFF)return(i.colorScheme??g1e)[t.level]}logIE(t,i,r){const s=t.additional||[];switch(t.level){case Ri.WARN:console.warn(`${r} `,t.message,...s);break;case Ri.ERROR:case Ri.FATAL:console.error(`${r} `,t.message,...s);break;case Ri.INFO:console.info(`${r} `,t.message,...s);break;default:console.log(`${r} `,t.message,...s)}}logModern(t,i,r){const s=this.getColor(t,i),o=t.additional||[];switch(t.level){case Ri.WARN:console.warn(`%c${r}`,`color:${s}`,t.message,...o);break;case Ri.ERROR:case Ri.FATAL:console.error(`%c${r}`,`color:${s}`,t.message,...o);break;case Ri.INFO:console.info(`%c${r}`,`color:${s}`,t.message,...o);break;case Ri.DEBUG:console.debug(`%c${r}`,`color:${s}`,t.message,...o);break;default:console.log(`%c${r}`,`color:${s}`,t.message,...o)}}writeMessage(t,i){const r=this.prepareMetaString(t,i);this.logFunc(t,i,r)}}return n.\u0275fac=function(t){return new(t||n)(z(ks))},n.\u0275prov=me({token:n,factory:n.\u0275fac}),n})(),oi=(()=>{class n{constructor(t,i,r,s,o,a,c){this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=a,this.serverService=c,this.configEngine=i.provideConfigEngine(t)}get level(){return this.configEngine.level}get serverLogLevel(){return this.configEngine.serverLogLevel}trace(t,...i){this._log(Ri.TRACE,t,i)}debug(t,...i){this._log(Ri.DEBUG,t,i)}info(t,...i){this._log(Ri.INFO,t,i)}log(t,...i){this._log(Ri.LOG,t,i)}warn(t,...i){this._log(Ri.WARN,t,i)}error(t,...i){this._log(Ri.ERROR,t,i)}fatal(t,...i){this._log(Ri.FATAL,t,i)}setCustomHttpHeaders(t){const i=this.getConfigSnapshot();i.customHttpHeaders=t,this.updateConfig(i)}setCustomParams(t){const i=this.getConfigSnapshot();i.customHttpParams=t,this.updateConfig(i)}setWithCredentialsOptionValue(t){const i=this.getConfigSnapshot();i.withCredentials=t,this.updateConfig(i)}registerMonitor(t){this._loggerMonitor=t}updateConfig(t){this.configEngine.updateConfig(t)}partialUpdateConfig(t){this.configEngine.partialUpdateConfig(t)}getConfigSnapshot(){return this.configEngine.getConfig()}flushServerQueue(){this.serverService.flushQueue(this.getConfigSnapshot())}_log(t,i,r=[]){const s=this.configEngine.getConfig(),o=this.ruleService.shouldCallWriter(t,s,i,r),a=this.ruleService.shouldCallServer(t,s,i,r),c=this.ruleService.shouldCallMonitor(t,s,i,r);if(!o&&!a&&!c)return;const l=this.metadataService.getMetadata(t,s,i,r);this.mapperService.getLogPosition(s,l).pipe(Pr(1)).subscribe(u=>{u&&(l.fileName=u.fileName,l.lineNumber=u.lineNumber,l.columnNumber=u.columnNumber),c&&this._loggerMonitor&&this._loggerMonitor.onLog(l,s),o&&this.writerService.writeMessage(l,s),a&&this.serverService.sendToServer(l,s)})}}return n.\u0275fac=function(t){return new(t||n)(z(SS),z(Ey),z(Cy),z(xy),z(Sy),z(My),z(Ty))},n.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),y1e=(()=>{class n{constructor(t,i,r,s,o,a,c){this.logger=t,this.configEngineFactory=i,this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=a,this.serverService=c}create(t,i,r,s){return this.getNewInstance({config:t,serverService:i,logMonitor:r,mapperService:s})}getNewInstance(t){const i=new oi(t?.config??this.logger.getConfigSnapshot(),t?.configEngineFactory??this.configEngineFactory,t?.metadataService??this.metadataService,t?.ruleService??this.ruleService,t?.mapperService??this.mapperService,t?.writerService??this.writerService,t?.serverService??this.serverService);return t?.partialConfig&&i.partialUpdateConfig(t.partialConfig),t?.logMonitor&&i.registerMonitor(t.logMonitor),i}}return n.\u0275fac=function(t){return new(t||n)(z(oi),z(Ey),z(Cy),z(xy),z(Sy),z(My),z(Ty))},n.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),v1e=(()=>{class n{static forRoot(t,i){if(i||(i={}),i.configProvider){if(i.configProvider.provide!==SS)throw new Error(`Wrong injection token for configProvider, it should be ${SS} and you used ${i.configProvider.provide}`)}else i.configProvider={provide:SS,useValue:t||{}};if(i.configEngineFactoryProvider){if(i.configEngineFactoryProvider.provide!==Ey)throw new Error(`Wrong injection token for configEngineFactoryProvider, it should be '${Ey}' and you used '${i.configEngineFactoryProvider.provide}'`)}else i.configEngineFactoryProvider={provide:Ey,useClass:d1e};if(i.metadataProvider){if(i.metadataProvider.provide!==Cy)throw new Error(`Wrong injection token for metadataProvider, it should be '${Cy}' and you used '${i.metadataProvider.provide}'`)}else i.metadataProvider={provide:Cy,useClass:f1e};if(i.ruleProvider){if(i.ruleProvider.provide!==xy)throw new Error(`Wrong injection token for ruleProvider, it should be '${xy}' and you used '${i.ruleProvider.provide}'`)}else i.ruleProvider={provide:xy,useClass:p1e};if(i.mapperProvider){if(i.mapperProvider.provide!==Sy)throw new Error(`Wrong injection token for mapperProvider, it should be '${Sy}' and you used '${i.mapperProvider.provide}'`)}else i.mapperProvider={provide:Sy,useClass:h1e};if(i.writerProvider){if(i.writerProvider.provide!==My)throw new Error(`Wrong injection token for writerProvider, it should be '${My}' and you used '${i.writerProvider.provide}'`)}else i.writerProvider={provide:My,useClass:_1e};if(i.serverProvider){if(i.serverProvider.provide!==Ty)throw new Error(`Wrong injection token for serverProvider, it should be '${Ty}' and you used '${i.writerProvider.provide}'`)}else i.serverProvider={provide:Ty,useClass:m1e};return{ngModule:n,providers:[oi,i.configProvider,i.configEngineFactoryProvider,i.metadataProvider,i.ruleProvider,i.mapperProvider,i.writerProvider,i.serverProvider,y1e]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Rt({type:n}),n.\u0275inj=Tt({imports:[[Rr]]}),n})(),pd=(()=>{class n{constructor(t,i){this.logger=t,this.router=i,this.auth=Ie(p_),this.firestore=Ie(fd),this.authState$=l9(this.auth),this.authStateSubscription=this.authState$.subscribe(r=>{r?(this.userData=r,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}logIn(t,i){var r=this;return N(function*(){try{const s=yield cTe(r.auth,t,i);yield r.updateUserData(s.user)}catch(s){throw r.logger.error(s),s}})()}signUp(t,i,r){var s=this;return N(function*(){try{const o=yield u9(s.auth,i,r);yield s.sendVerificationEmail(),yield s.createUserData(o.user,t)}catch(o){throw s.logger.error(o),o}})()}clientSignUp(t,i,r,s){var o=this;return N(function*(){try{const a=yield u9(o.auth,i,s);yield o.sendVerificationEmail(),yield o.createUserData(a.user,t),yield o.createClientData(a.user,t,r)}catch(a){throw o.logger.error(a),a}})()}sendVerificationEmail(){var t=this;return N(function*(){if(t.auth.currentUser)try{yield oTe(t.auth.currentUser),t.logger.debug("Navigate to email verification")}catch(i){throw t.logger.error(i),i}})()}forgotPassword(t){aTe(this.auth,t).then(()=>{window.alert("Password reset email sent, check your inbox")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!=t&&(this.userData=t,!0)}updateUserData(t){var i=this;return N(function*(){const r=Ma(i.firestore,"users",t.uid);let s={uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified};try{yield HX(r,s)}catch(o){throw i.logger.error(`Error Updating Doc = ${o}`),o}})()}createClientData(t,i,r){var s=this;return N(function*(){const o={name:i,phoneNumber:r,email:t.email};try{yield ES(Ma(s.firestore,"userClients",t.uid),{clients:[o]})}catch(a){throw s.logger.error(`Error creating client ${a}`),a}})()}createUserData(t,i){var r=this;return N(function*(){let s={uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified,name:i};try{yield ES(Ma(r.firestore,"users",t.uid),s)}catch(o){throw r.logger.error(`Error Creating Doc = ${o}`),o}})()}signOut(){var t=this;return N(function*(){yield t.auth.signOut(),localStorage.removeItem("user"),t.router.navigate([rt.HOME])})()}static#e=this.\u0275fac=function(i){return new(i||n)(z(oi),z(Mi))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const b1e=["addListener","removeListener"],w1e=["addEventListener","removeEventListener"],E1e=["on","off"];function zo(n,e,t,i){if(Yt(t)&&(i=t,t=void 0),i)return zo(n,e,t).pipe(xI(i));const[r,s]=function x1e(n){return Yt(n.addEventListener)&&Yt(n.removeEventListener)}(n)?w1e.map(o=>a=>n[o](e,a,t)):function S1e(n){return Yt(n.addListener)&&Yt(n.removeListener)}(n)?b1e.map(qX(n,e)):function C1e(n){return Yt(n.on)&&Yt(n.off)}(n)?E1e.map(qX(n,e)):[];if(!r&&Kx(n))return Li(o=>zo(o,e,t))(cr(n));if(!r)throw new TypeError("Invalid event target");return new yn(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function qX(n,e){return t=>i=>n[t](e,i)}let T1e=(()=>{class n{_elementRef;_renderer;constructor(t,i){this._elementRef=t,this._renderer=i}collapseClass=!0;collapseShow=new qt;collapseShown=new qt;collapseHide=new qt;collapseHidden=new qt;set collapsed(t){t!==this._collapsed&&(t?this.hide():this.show(),this._collapsed=t)}get collapsed(){return this._collapsed}_collapsed=!0;get host(){return this._elementRef.nativeElement}_isTransitioning=!1;show(){if(this._isTransitioning||!this.collapsed)return;this.collapseShow.emit(this),this._renderer.removeClass(this.host,"collapse"),this._renderer.addClass(this.host,"collapsing"),this._renderer.setStyle(this.host,"height","0px"),this._isTransitioning=!0;const t=this.host.scrollHeight;zo(this.host,"transitionend").pipe(Pr(1)).subscribe(()=>{this._isTransitioning=!1,this.collapsed=!1,this._renderer.removeClass(this.host,"collapsing"),this._renderer.addClass(this.host,"collapse"),this._renderer.addClass(this.host,"show"),this._renderer.removeStyle(this.host,"height"),this.collapseShown.emit(this)}),this._emulateTransitionEnd(this.host,350),this._renderer.setStyle(this.host,"height",`${t}px`)}hide(){if(this._isTransitioning||this.collapsed)return;this.collapseHide.emit(this);const t=this.host.getBoundingClientRect().height;this._renderer.setStyle(this.host,"height",`${t}px`),this._reflow(this.host),this._renderer.addClass(this.host,"collapsing"),this._renderer.removeClass(this.host,"collapse"),this._renderer.removeClass(this.host,"show"),this._isTransitioning=!0,zo(this.host,"transitionend").pipe(Pr(1)).subscribe(()=>{this._renderer.removeClass(this.host,"collapsing"),this._renderer.addClass(this.host,"collapse"),this._isTransitioning=!1,this.collapsed=!0,this.collapseHidden.emit(this)}),this._renderer.removeStyle(this.host,"height"),this._emulateTransitionEnd(this.host,350)}toggle(){this._isTransitioning||(this.collapsed=!this.collapsed,this.collapsed?this.hide():this.show())}_reflow(t){return t.offsetHeight}_emulateTransitionEnd(t,i){let r=!1;const o=i+5;zo(t,"transitionend").pipe(Pr(1)).subscribe(()=>{r=!0}),setTimeout(()=>{r||t.dispatchEvent(new Event("transitionend"))},o)}static \u0275fac=function(i){return new(i||n)(j(fi),j(Ao))};static \u0275dir=dt({type:n,selectors:[["","mdbCollapse",""]],hostVars:2,hostBindings:function(i,r){2&i&&bu("collapse",r.collapseClass)},inputs:{collapsed:"collapsed"},outputs:{collapseShow:"collapseShow",collapseShown:"collapseShown",collapseHide:"collapseHide",collapseHidden:"collapseHidden"},exportAs:["mdbCollapse"]})}return n})(),XX=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({})}return n})();function M1e(n,e){if(1&n){const t=jn();I(0,"a",12),it("click",function(){return ln(t),un(ot().sessionChange())}),I(1,"u"),P(2,"LOG IN"),D()()}}function A1e(n,e){if(1&n){const t=jn();I(0,"a",12),it("click",function(){return ln(t),un(ot().sessionChange())}),I(1,"u"),P(2,"LOG OUT"),D()()}}var Ay=function(n){return n.IN="LOG IN",n.OUT="LOG OUT",n}(Ay||{});let jL,Aa=(()=>{class n{constructor(t,i){this.authRepo=t,this.router=i,this.signInState=Ay.IN,this.routes=rt,this.isLoggedIn$=this.authRepo.authState$.pipe(zt(r=>!!r)),this.authSubscription=this.authRepo.authState$.subscribe(r=>{r&&(this.signInState=Ay.OUT)})}ngOnDestroy(){this.authSubscription.unsubscribe()}sessionChange(){console.log("sessionChange clicked"),this.signInState==Ay.IN?this.router.navigate([rt.LOGIN]):(this.authRepo.signOut(),this.signInState=Ay.IN,this.router.url.slice(1)!=rt.HOME&&this.router.navigate([rt.HOME]))}static#e=this.\u0275fac=function(i){return new(i||n)(j(pd),j(Mi))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-header"]],decls:35,vars:14,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-0"],[1,"container"],[1,"navbar-brand","me-2",3,"routerLink"],["src","/live/assets/images/try-on-logo-big-icon.png","alt","TryOn Logo","loading","lazy"],["type","button","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"fas","fa-bars"],["id","navbarButtonsExample","mdbCollapse","",1,"collapse","navbar-collapse"],["buttonsNav","mdbCollapse"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["class","nav-link","style","cursor: pointer;",3,"click",4,"ngIf"],[1,"nav-link",2,"cursor","pointer",3,"click"]],template:function(i,r){if(1&i){const s=jn();I(0,"nav",0)(1,"div",1)(2,"a",2),$(3,"img",3),D(),I(4,"button",4),it("click",function(){return ln(s),un(so(7).toggle())}),$(5,"i",5),D(),I(6,"div",6,7)(8,"ul",8)(9,"li",9)(10,"a",10),P(11,"HOME"),D()(),I(12,"li",9)(13,"a",10),P(14,"ABOUT US"),D()(),I(15,"li",9)(16,"a",10),P(17,"FEATURES"),D()(),I(18,"li",9)(19,"a",10),P(20,"FITTING ROOM"),D()(),I(21,"li",9)(22,"a",10),P(23,"SHOP"),D()(),I(24,"li",9)(25,"a",10),P(26,"PARTNERS"),D()(),I(27,"li",9)(28,"a",10),P(29,"CONTACT"),D()(),I(30,"li",9),kt(31,M1e,3,0,"a",11),nl(32,"async"),kt(33,A1e,3,0,"a",11),nl(34,"async"),D()()()()()}2&i&&(le(2),Xn("routerLink","/",r.routes.HOME,""),le(8),Xn("routerLink","/",r.routes.HOME,""),le(3),Xn("routerLink","/",r.routes.ABOUT_US,""),le(3),Xn("routerLink","/",r.routes.FEATURES,""),le(3),Xn("routerLink","/",r.routes.FITTING_ROOM,""),le(3),Xn("routerLink","/",r.routes.SHOP,""),le(3),Xn("routerLink","/",r.routes.PARTNERS,""),le(3),Xn("routerLink","/",r.routes.CONTACT_US,""),le(3),Pe("ngIf",!yg(32,10,r.isLoggedIn$)),le(2),Pe("ngIf",yg(34,12,r.isLoggedIn$)))},dependencies:[Oo,Us,Q$,T1e,aj],styles:["ul[_ngcontent-%COMP%] > li.nav-item[_ngcontent-%COMP%] > a.nav-link[_ngcontent-%COMP%]{color:#190101;font-family:Montserrat,serif}button[_ngcontent-%COMP%] > i.fas[_ngcontent-%COMP%]{color:#190101}@media only screen and (min-width: 0px){nav.navbar[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}ul[_ngcontent-%COMP%] > li.nav-item[_ngcontent-%COMP%] > a.nav-link[_ngcontent-%COMP%]{text-align:center;font-size:medium}img[_ngcontent-%COMP%]{height:32px;margin-top:-1px}.active[_ngcontent-%COMP%]{border-bottom:2px solid #CF0A2C;padding:0 0 4px 4px}}@media only screen and (min-width: 375px){nav.navbar[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}ul[_ngcontent-%COMP%] > li.nav-item[_ngcontent-%COMP%] > a.nav-link[_ngcontent-%COMP%]{text-align:center;font-size:medium}img[_ngcontent-%COMP%]{height:40px;margin-top:-1px}.active[_ngcontent-%COMP%]{border-bottom:4px solid #CF0A2C;padding:0 0 4px 4px}}@media only screen and (min-width: 414px){nav.navbar[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:1.5rem}ul[_ngcontent-%COMP%] > li.nav-item[_ngcontent-%COMP%] > a.nav-link[_ngcontent-%COMP%]{text-align:center;font-size:medium}img[_ngcontent-%COMP%]{height:48px;margin-top:-1px}.active[_ngcontent-%COMP%]{border-bottom:4px solid #CF0A2C;padding:0 0 4px 4px}}@media only screen and (min-width: 820px){ul[_ngcontent-%COMP%] > li.nav-item[_ngcontent-%COMP%] > a.nav-link[_ngcontent-%COMP%]{text-align:center;font-size:medium}img[_ngcontent-%COMP%]{height:56px;margin-top:-1px}button[_ngcontent-%COMP%] > i.fas[_ngcontent-%COMP%]{font-size:1.5rem}.active[_ngcontent-%COMP%]{border-bottom:4px solid #CF0A2C;padding:0 0 4px 4px}}@media only screen and (min-width: 992px){nav.navbar[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem}ul[_ngcontent-%COMP%] > li.nav-item[_ngcontent-%COMP%] > a.nav-link[_ngcontent-%COMP%]{font-size:medium;margin-right:0rem}.active[_ngcontent-%COMP%]{border-bottom:4px solid #CF0A2C;padding-bottom:3px;padding-top:.5rem}}@media only screen and (min-width: 1200px){nav.navbar[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem}ul[_ngcontent-%COMP%] > li.nav-item[_ngcontent-%COMP%] > a.nav-link[_ngcontent-%COMP%]{font-size:medium;margin-right:1rem}.active[_ngcontent-%COMP%]{border-bottom:4px solid #CF0A2C;padding-bottom:3px;padding-top:.5rem}}@media only screen and (min-width: 1300px){nav.navbar[_ngcontent-%COMP%]{padding-top:2.2rem;padding-bottom:2.2rem}ul[_ngcontent-%COMP%] > li.nav-item[_ngcontent-%COMP%] > a.nav-link[_ngcontent-%COMP%]{font-size:large;margin-right:.25rem}.active[_ngcontent-%COMP%]{border-bottom:4px solid #CF0A2C;padding-bottom:3px;padding-top:.5rem}}@media only screen and (min-width: 1400px){nav.navbar[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:1.2rem}ul[_ngcontent-%COMP%] > li.nav-item[_ngcontent-%COMP%] > a.nav-link[_ngcontent-%COMP%]{font-size:large;margin-right:1.25rem}img[_ngcontent-%COMP%]{height:72px;margin-top:-1px}.active[_ngcontent-%COMP%]{border-bottom:4px solid #CF0A2C;padding-bottom:3px;padding-top:.5rem}}"]})}return n})();function Iy(n){return null!=n&&"false"!=`${n}`}function CS(n){return Array.isArray(n)?n:[n]}function Pi(n){return null==n?"":"string"==typeof n?n:`${n}px`}try{jL=typeof Intl<"u"&&Intl.v8BreakIterator}catch{jL=!1}let gd,md=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?P0(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!jL)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(z(ks))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function N1e(){if(null==gd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return gd=!1,gd;if("scrollBehavior"in document.documentElement.style)gd=!0;else{const n=Element.prototype.scrollTo;gd=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return gd}function QX(n){return n.composedPath?n.composedPath()[0]:n.target}function JX(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}let L1e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({})}return n})();const eY=new Set;let _d,F1e=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):B1e}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function U1e(n,e){if(!eY.has(n))try{_d||(_d=document.createElement("style"),e&&(_d.nonce=e),_d.setAttribute("type","text/css"),document.head.appendChild(_d)),_d.sheet&&(_d.sheet.insertRule(`@media ${n} {body{ }}`,0),eY.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(z(md),z(gM,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function B1e(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let tY=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Gt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return nY(CS(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=V0(nY(CS(t)).map(o=>this._registerQuery(o).observable));return s=z0(s.pipe(Pr(1)),s.pipe(function R1e(n){return Ti((e,t)=>n<=t)}(1),function P1e(n,e=Cw){return Hn((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,i.next(l)}};function c(){const l=o+n,u=e.now();if(u<l)return r=this.schedule(void 0,l-u),void i.add(r);a()}t.subscribe(Mn(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(0))),s.pipe(zt(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new yn(o=>{const a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(H0(i),zt(({matches:o})=>({query:t,matches:o})),rc(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(i){return new(i||n)(z(F1e),z(pt))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nY(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const V1e=function(){return{3:"d-padding",2:"m-padding",1:"l-padding",0:"xl-padding"}};let z1e=(()=>{class n{constructor(t){this.breakPointObserver=t,this.showNav=!0,this.topPadding=!0,this.breakpoints=["(min-width: 992px)","(min-width: 831px)","(min-width: 768px)","(min-width: 0px)"],this.useBreakpoint=3,this.routes=rt}ngOnInit(){this.topPadding&&this.breakPointObserver.observe(this.breakpoints).subscribe(t=>{for(let i=0;i<this.breakpoints.length;i++)if(t.breakpoints[this.breakpoints[i]]){this.useBreakpoint=i;break}})}static#e=this.\u0275fac=function(i){return new(i||n)(j(tY))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-about-us-landing"]],inputs:{showNav:"showNav",topPadding:"topPadding"},decls:28,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md","text-white",3,"ngClass"],[1,"about-title"],["type","button",3,"routerLink"],[1,"col-md"],[1,"about-picture"]],template:function(i,r){1&i&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),P(5,"About Us"),D(),I(6,"p"),P(7,'We understand that e-commerce businesses have unique challenges compared to brick-and-mortar businesses. The most prominent challenge for online retailers has always been high product returns and refunds. For shoppers it is the "feel factor", the inability to touch, see, and fit a product as you would in a store. While returns and refunds are a standard part of the business model, they can considerably impact the brands\' profitability and reputation. That is why we created Try-On. '),D(),I(8,"p"),P(9,"An innovative-based solution that eliminates the need for "),I(10,"b"),P(11,"trail"),D(),P(12," and "),I(13,"b"),P(14,"error"),D(),P(15," and helps "),I(16,"b"),P(17,"bridge the gap between online and in-store shopping experiences"),D(),P(18," - improving customer satisfaction, reducing returns, and driving sales for online stores. "),D(),I(19,"p"),P(20,"Our innovation works for you, your business, and your customers."),D(),I(21,"p")(22,"u")(23,"b")(24,"a",4),P(25,"READ MORE"),D()()()()()(),I(26,"div",5),$(27,"div",6),D()()()),2&i&&(le(2),Pe("ngClass",_A(2,V1e)[r.useBreakpoint]),le(22),Xn("routerLink","/",r.routes.FEATURES,""))},dependencies:[Jh,Us],styles:[".container-fluid[_ngcontent-%COMP%]{padding:0}p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:Montserrat,serif}.about-title[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:2rem}.about-title[_ngcontent-%COMP%], .about-subtitle[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{font-weight:500}a[_ngcontent-%COMP%]{color:#fff}div.col-md.text-white[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:justify;word-break:keep-all}.d-padding[_ngcontent-%COMP%]{padding-top:5rem}.m-padding[_ngcontent-%COMP%]{padding-top:6rem}.l-padding[_ngcontent-%COMP%]{padding-top:7rem}.xl-padding[_ngcontent-%COMP%]{padding-top:10rem}@media only screen and (min-width: 0px){div.row[_ngcontent-%COMP%]{background-color:#cf0a2c;height:100%;width:100%;margin:0}div.text-white[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-left:2rem;padding-right:1rem}.about-title[_ngcontent-%COMP%]{font-size:40px}.team-heading[_ngcontent-%COMP%]{font-size:32px}.about-subtitle[_ngcontent-%COMP%]{font-size:16px}.about-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/about.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;height:50vh}}@media only screen and (min-width: 320px){.about-title[_ngcontent-%COMP%]{font-size:48px}.team-heading[_ngcontent-%COMP%]{font-size:40px}.about-subtitle[_ngcontent-%COMP%]{font-size:24px}}@media only screen and (min-width: 450px){.about-title[_ngcontent-%COMP%]{font-size:64px}.team-heading[_ngcontent-%COMP%]{font-size:56px}.about-subtitle[_ngcontent-%COMP%]{font-size:24px}}@media only screen and (min-width: 700px){.about-title[_ngcontent-%COMP%]{font-size:72px}.team-heading[_ngcontent-%COMP%]{font-size:64px}.about-subtitle[_ngcontent-%COMP%]{font-size:24px}}@media only screen and (min-width: 768px){div.col-md[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:2rem}.about-title[_ngcontent-%COMP%]{font-size:72px}.team-heading[_ngcontent-%COMP%]{font-size:64px}.about-subtitle[_ngcontent-%COMP%]{font-size:24px}.about-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/about.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:100%}}@media only screen and (min-width: 831px){div.row[_ngcontent-%COMP%]{background-color:#cf0a2c;height:100%;width:100%;margin:0}div.col-md[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:2rem}}@media only screen and (min-width: 992px){div.col-md[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:2rem}}@media only screen and (min-width: 1242px){.about-title[_ngcontent-%COMP%]{font-size:80px}.team-heading[_ngcontent-%COMP%]{font-size:72px}.about-subtitle[_ngcontent-%COMP%]{font-size:24px}.about-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/about.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:100%}}@media only screen and (min-width: 1400px){p[_ngcontent-%COMP%]{font-size:20px}.about-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/about.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:100%}}.team-section[_ngcontent-%COMP%]{background-color:#f4f4f4!important;padding:5rem 0 5rem 2rem}.team-subheading[_ngcontent-%COMP%]{color:#cf0a2c}.team-heading[_ngcontent-%COMP%]{color:#190101}.team-body[_ngcontent-%COMP%]{padding-top:2rem;color:#190101;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:space-between}.team-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:400px}.team-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{padding-top:1rem;font-size:20px;font-weight:700}.team-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{font-weight:300}"]})}return n})(),iY=(()=>{class n{constructor(){this.showNav=!0,this.routes=rt}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-features"]],inputs:{showNav:"showNav"},decls:102,vars:3,consts:[[1,"container-fluid"],[1,"fixed-top",3,"hidden"],[1,"row","first-section"],[1,"col-md","feature-video"],["autoplay","","loop",""],["src","/live/assets/videos/features.mp4","type","video/mp4"],[1,"col-md"],[1,"feature-title","text-center"],[1,"future-list"],[1,"row"],[1,"col-1"],[1,"fas","fa-fingerprint","list-icon"],[1,"col-11"],[1,"fas","fa-gift","list-icon"],[1,"fas","fa-atom","list-icon"],[1,"row","second-section"],[1,"mb-4"],[1,"feature-title"],[1,"feature-list"],[1,"col-6"],[1,"avatar-picture"],[1,"row","create-heading",2,"width","99vw"],[1,"text-center"],[1,"row","create",2,"width","99vw"],[1,"col-md","create-avatar"],["type","button",1,"btn","btn-lg",3,"routerLink"],[1,"col-md","become-partner"],[1,"text-white"]],template:function(i,r){1&i&&(I(0,"div",0),$(1,"app-header",1),I(2,"div",2)(3,"div",3)(4,"video",4),$(5,"source",5),P(6," Your browser does not support the video tag. "),D()(),I(7,"div",6)(8,"h1",7),P(9," Welcome to the "),I(10,"span"),P(11,"Future"),D(),P(12," of"),$(13,"br"),I(14,"span"),P(15,"Online Shopping"),D(),P(16," with Try-On "),D(),I(17,"p"),P(18," Are you ready to revolutionise your online store and enhance the shopping experience for your customers? Look no further! Try-On is a game-changing solution that empowers e-commerce businesses to seamlessly integrate virtual try-on technology into their websites. Say goodbye to traditional shopping limitations and embrace the future of interactive online shopping! "),D(),I(19,"div",8)(20,"div",9)(21,"div",10),$(22,"i",11),D(),I(23,"div",12)(24,"h5"),P(25,"SEAMLESS INTEGRATION"),D(),I(26,"p"),P(27,"Easily integrate Try-On Plugin into your e-commerce website."),D()()(),I(28,"div",9)(29,"div",10),$(30,"i",13),D(),I(31,"div",12)(32,"h5"),P(33,"CUSTOMER ENGAGEMENT"),D(),I(34,"p"),P(35,"Shoppers can now enjoy a photo-realistic virtual try-on experience, helping them make confident buying decisions. "),D()()(),I(36,"div",9)(37,"div",10),$(38,"i",14),D(),I(39,"div",12)(40,"h5"),P(41,"DATA ANALYTICS & INSIGHTS"),D(),I(42,"p"),P(43,"Leverage the data collected to improve your offerings and tailor marketing"),D()()()()()(),I(44,"div",15)(45,"div",6)(46,"h6",16),P(47,"FEATURES"),D(),I(48,"h1",17),P(49," Easily create a 3D photo-realistic avatar "),D(),I(50,"p"),P(51,"The app provides shoppers with accurate size recommendations & fit based on their precise body measurements. "),D(),I(52,"div",18)(53,"div",9)(54,"div",19)(55,"div"),P(56,"SEAMLESS INTEGRATION"),D()(),I(57,"div",19)(58,"div"),P(59,"VIRTUAL FITTING ROOM"),D()()(),I(60,"div",9)(61,"div",19)(62,"div"),P(63,"2D - 3D CONVERSION"),D()(),I(64,"div",19)(65,"div"),P(66,"3D AVATARS & MANNEQUINS"),D()()(),I(67,"div",9)(68,"div",19)(69,"div"),P(70,"SIZE RECOMMENDATION"),D()(),I(71,"div",19)(72,"div"),P(73,"MIX AND MATCH"),D()()(),I(74,"div",9)(75,"div",19)(76,"div"),P(77,"DATA ANALYTICS"),D()(),I(78,"div",19)(79,"div"),P(80,"MOBILE FRIENDLY"),D()()()()(),I(81,"div",6),$(82,"div",20),D()(),I(83,"div",21)(84,"h1",22),P(85,'"we take the '),I(86,"span"),P(87,"guesswork"),D(),P(88,' out of online shopping"'),D()(),I(89,"div",23)(90,"div",24)(91,"div")(92,"p"),P(93,"Create your own personalised virtual twin"),D(),I(94,"button",25),P(95,"CREATE AVATAR"),D()()(),I(96,"div",26)(97,"div")(98,"p",27),P(99,"With just a click of a button, join the revolution today!"),D(),I(100,"button",25),P(101,"BECOME PARTNER"),D()()()()()),2&i&&(le(1),Pe("hidden",!r.showNav),le(93),Xn("routerLink","/",r.routes.REGISTER_USER,""),le(6),Xn("routerLink","/",r.routes.REGISTER_CLIENT,""))},dependencies:[Aa,Us],styles:[".container-fluid[_ngcontent-%COMP%]{padding:0}body[_ngcontent-%COMP%]{padding:0;margin:0}h1[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Montserrat,serif;color:#190101}div.row[_ngcontent-%COMP%] > h1.text-center[_ngcontent-%COMP%]{font-family:Garet,serif;font-weight:400;color:#190101}h6[_ngcontent-%COMP%]{color:#cf0a2c}h1[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#cf0a2c}p[_ngcontent-%COMP%], div.row[_ngcontent-%COMP%] > div.col-6[_ngcontent-%COMP%]{font-family:Garet,serif;color:#190101}div.first-section[_ngcontent-%COMP%] > div.col-md[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:justify;word-break:keep-all}@media only screen and (min-width: 0px){video[_ngcontent-%COMP%]{height:100%;width:100%;display:block;margin:0 auto 1.5rem 0}.feature-title[_ngcontent-%COMP%]{padding-left:.5rem}.first-section[_ngcontent-%COMP%]{padding-top:5rem}.first-section[_ngcontent-%COMP%] > div.col-md[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding:0 2rem}.future-list[_ngcontent-%COMP%]{padding-top:2rem}.future-list[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%]{padding-left:1rem}.future-list[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-11[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{padding-left:2.5rem}.future-list[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-11[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding-left:2.5rem}.future-list[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%]{padding-bottom:.5rem}.second-section[_ngcontent-%COMP%]{padding-top:9rem;padding-left:2rem;height:100%;width:100%}.feature-list[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-6[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:#fff;background-color:#cf0a2c;margin-bottom:1.5rem;border-radius:4px;font-size:10px;text-align:center;padding-top:1rem;padding-bottom:1rem}.avatar-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/photorealistic-avatar.jpg);background-size:cover;background-position:center;height:50vh}}@media only screen and (min-width: 414px){.first-section[_ngcontent-%COMP%]{padding-top:6rem}}@media only screen and (min-width: 450px){.feature-list[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-6[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:#fff;background-color:#cf0a2c;margin-bottom:1.5rem;font-size:1em;border-radius:4px;text-align:center;padding-top:1rem;padding-bottom:1rem}}@media only screen and (min-width: 530px){.avatar-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/photorealistic-avatar.jpg);background-size:cover;background-position:center;height:75vh}}@media only screen and (min-width: 768px){.first-section[_ngcontent-%COMP%]{padding-top:10rem;height:100%;width:100%}video[_ngcontent-%COMP%]{height:100%;width:100%}.future-list[_ngcontent-%COMP%]{padding-top:2rem}.future-list[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%]{padding-left:2rem}.future-list[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-11[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{padding-left:1.5rem}.future-list[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-11[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding-left:1.5rem}.future-list[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%]{padding-bottom:.5rem}.second-section[_ngcontent-%COMP%]{padding-top:9rem;padding-left:5rem;height:100%;width:100%}.feature-list[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-6[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:#fff;background-color:#cf0a2c;margin-bottom:1.8rem;border-radius:4px;text-align:center;padding:1rem}.avatar-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/photorealistic-avatar.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:100%}}@media only screen and (min-width: 2156px){.avatar-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/photorealistic-avatar.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:100vh}}.feature-title[_ngcontent-%COMP%]{padding-bottom:2rem}.list-icon[_ngcontent-%COMP%]{color:#cf0a2c;font-size:32px;padding:.5rem;border-style:solid;border-radius:100%;border-color:#cf0a2c;border-width:2px}.feature-list[_ngcontent-%COMP%]{padding-top:2rem}div.create[_ngcontent-%COMP%] > div.col-md[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-family:Montserrat,serif;font-weight:500;color:#fff;background-color:#cf0a2c}@media only screen and (min-width: 0px){div.row.create-heading[_ngcontent-%COMP%] > h1.text-center[_ngcontent-%COMP%]{padding-top:7rem;padding-bottom:1rem}div.row.create[_ngcontent-%COMP%] > div.col-md[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-left:2rem;padding-bottom:2rem;position:absolute;bottom:0}.create-avatar[_ngcontent-%COMP%]{background-image:url(/live/assets/images/create-avatar.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:50vh;width:100%;margin:0 0 8px;position:relative}.become-partner[_ngcontent-%COMP%]{background-image:url(/live/assets/images/become-partner.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:50vh;width:100%;margin:0 0 8px;position:relative}}@media only screen and (min-width: 768px){.create-avatar[_ngcontent-%COMP%]{background-image:url(/live/assets/images/create-avatar.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:75vh;width:100%;margin:0 8px 8px 0;position:relative}.become-partner[_ngcontent-%COMP%]{background-image:url(/live/assets/images/become-partner.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:75vh;width:100%;margin:0 0 8px 8px}}@media only screen and (min-width: 838px){div.row.create[_ngcontent-%COMP%] > div.col-md[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-left:2rem;padding-bottom:.5rem;position:absolute;bottom:0}}@media only screen and (min-width: 1000px){div.row.create-heading[_ngcontent-%COMP%] > h1.text-center[_ngcontent-%COMP%]{padding-top:9rem;padding-bottom:3rem}div.row.create[_ngcontent-%COMP%] > div.col-md[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-left:3rem;padding-bottom:1rem;position:absolute;bottom:0}}"]})}return n})();var Tc=function(n){return n.Men="Men",n.Women="Women",n.Unisex="Unisex",n.Kids="Kids",n.Accessories="Accessories",n.Footwear="Footwear",n}(Tc||{}),Mc=function(n){return n.Tops="top",n.Pants="pants",n.Skirts="skirt",n}(Mc||{});class H1e{constructor(e,t){this.data=e,this.timestamp=t}}let dp=(()=>{class n{constructor(t){this.logger=t,this.dataStore=new Map}fetch(t){var i=this;return N(function*(){return i.logger.info("storageinmemorymanager fetch "+t),i.dataStore.get(t)})()}store(t,i,r=!1){var s=this;return N(function*(){s.logger.info("storageinmemorymanager store "+i),s.dataStore.set(i,r?new H1e(t,Date.now()):JSON.parse(JSON.stringify(t)))})()}delete(t){var i=this;return N(function*(){i.logger.info("storageinmemorymanager delete "+t),i.dataStore.delete(t)})()}static#e=this.\u0275fac=function(i){return new(i||n)(z(oi))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})(),G1e=(()=>{class n{constructor(t){this.logger=t}getCollection(){var t=this;return N(function*(){t.logger.debug("getting collection from remote");try{return[{id:"Reebok_x_Cardi_B_Bodysuit",mainImage:"https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-body-suit-models.jpg",auxiliaryImages:["https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-body-suit-slider-1.jpg","https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-body-suit-slider-2.jpg","https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-body-suit-slider-3.jpg"],manufacturer:"Reebok",name:"REEBOK X CARDI B BODY SUIT",price:{value:599,currencyCode:"ZAR"},description:"Its figure-flattering design is inspired by\nCardi B's fearless style. Go big on texture\nwith exposed jacquard on the waist and a\nsoft, snug ribbed knit.",availableSizes:[],color:"Burgundy",category:Tc.Women,type:Mc.Tops},{id:"Reebok_x_Cardi_B_Bodycon_Skirt",mainImage:"https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-skirt-closeup.jpg",auxiliaryImages:["https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-skirt-slider-1.jpg","https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-skirt-slider-2.jpg","https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-skirt-slider-3.jpg"],manufacturer:"Reebok",name:"REEBOK X CARDI B BODYCON SKIRT",price:{value:399,currencyCode:"ZAR"},description:"Its figure-flattering design is inspired by Cardi B's fearless style.\nGo big on texture with exposed jacquard on the waist and a soft, snug ribbed knit.",availableSizes:[],color:"Military Green",category:Tc.Women,type:Mc.Skirts},{id:"Reebok_x_Cardi_B_Satin_Pants",mainImage:"https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-st-pants-closeup.jpg",auxiliaryImages:["https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-st-pants-closeup.jpg","https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-st-pants-closeup.jpg","https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-st-pants-closeup.jpg"],manufacturer:"Reebok",name:"REEBOX X CARDI B ST PANTS",price:{value:899,currencyCode:"ZAR"},description:"We are obsessing over all things satin right now and this tracksuit jacket is a total must-have!\nFeaturing a nude satin material with a black contrast stripe, zip up front and elasticated hem, what's not to love?\nFinish off the look with the matching sweatpants and add hoops and fresh kicks for a killer look.",availableSizes:[],color:"Black/Green",category:Tc.Women,type:Mc.Pants},{id:"Reebok_x_Cardi_B_Tracksuit_Top",mainImage:"https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-jacket.jpg",auxiliaryImages:["https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-jacket.jpg","https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-jacket.jpg","https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-jacket.jpg"],manufacturer:"Reebok",name:"REEBOK X CARDI B ST JACKET",price:{value:599,currencyCode:"ZAR"},description:"Its figure-flattering design is inspired by\nCardi B's fearless style. Go big on texture\nwith exposed jacquard on the waist and a\nsoft, snug ribbed knit.",availableSizes:[],color:"Burgundy",category:Tc.Women,type:Mc.Tops}]}catch(i){return t.logger.error(`Error fetching shopping collection ${JSON.stringify(i)}`),[]}})()}static#e=this.\u0275fac=function(i){return new(i||n)(z(oi))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rY=(()=>{class n{constructor(t,i,r){this.logger=t,this.storage=i,this.shoppingApi=r}getCollection(){var t=this;return N(function*(){const i="shopping-collection";let r;return r=yield t.storage.fetch(i),null!=r||(t.logger.info("collection not cached - fetching from online"),r=yield t.shoppingApi.getCollection(),r=yield Promise.all(r.map(function(){var s=N(function*(o){return o.mainImage=URL.createObjectURL(yield(yield fetch(o.mainImage)).blob()),o.auxiliaryImages=yield Promise.all(o.auxiliaryImages.map(function(){var a=N(function*(c){return URL.createObjectURL(yield(yield fetch(c)).blob())});return function(c){return a.apply(this,arguments)}}())),o});return function(o){return s.apply(this,arguments)}}())),yield t.storage.store(r,i)),r})()}static#e=this.\u0275fac=function(i){return new(i||n)(z(oi),z(dp),z(G1e))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j1e(n,e){if(1&n&&(I(0,"div",3),$(1,"img",4)(2,"img",5),I(3,"div",6)(4,"h6"),P(5),D(),I(6,"p"),P(7),D(),I(8,"p")(9,"b"),P(10),nl(11,"currency"),D()(),I(12,"button",7),P(13,"SHOP"),D()()()),2&n){const t=e.$implicit,i=ot();le(2),_s("src",t.mainImage,Wa),le(3),ys(t.name),le(2),ys(t.manufacturer),le(3),ys(c0(11,5,t.price.value,t.price.currencyCode,"symbol-narrow")),le(2),Xn("routerLink","/",i.routes.SHOP,"")}}let $1e=(()=>{class n{constructor(t){this.shoppingRepo=t,this.displayCollection=[],this.routes=rt,this.shoppingCollection=[]}ngOnInit(){var t=this;return N(function*(){t.shoppingCollection=yield t.shoppingRepo.getCollection(),t.displayCollection=[{id:"Reebok_x_Cardi_B_Bodysuit",mainImage:"https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-body-suit-closeup.jpg",auxiliaryImages:[],manufacturer:"Reebok",name:"REEBOK X CARDI B BODY SUIT",price:{value:599,currencyCode:"ZAR"},description:"",availableSizes:[],color:"Burgundy",category:Tc.Women,type:Mc.Tops},{id:"Reebok_x_Cardi_B_Bodycon_Skirt",mainImage:"https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-skirt.jpg",auxiliaryImages:[],manufacturer:"Reebok",name:"REEBOK X CARDI B BODYCON SKIRT",price:{value:399,currencyCode:"ZAR"},description:"",availableSizes:[],color:"Military Green",category:Tc.Women,type:Mc.Skirts},{id:"Reebok_x_Cardi_B_Satin_Pants",mainImage:"https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-st-pants.jpg",auxiliaryImages:[],manufacturer:"Reebok",name:"REEBOX X CARDI B ST PANTS",price:{value:899,currencyCode:"ZAR"},description:"",availableSizes:[],color:"Black/Green",category:Tc.Women,type:Mc.Pants},{id:"Reebok_x_Cardi_B_Tracksuit_Top",mainImage:"https://tryon-demo-assets.s3.us-east-1.amazonaws.com/images/reebok-x-cardi-b-jacket-closeup.jpg",auxiliaryImages:[],manufacturer:"Reebok",name:"REEBOK X CARDI B ST JACKET",price:{value:599,currencyCode:"ZAR"},description:"",availableSizes:[],color:"Burgundy",category:Tc.Women,type:Mc.Tops}]})()}static#e=this.\u0275fac=function(i){return new(i||n)(j(rY))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-shop-landing"]],decls:3,vars:1,consts:[[1,"container-fluid",2,"margin","8rem 0 3rem 0"],[1,"row"],["class","col-md-3 d-flex flex-column",4,"ngFor","ngForOf"],[1,"col-md-3","d-flex","flex-column"],["src","/live/assets/icons/tryon_icon.png",1,"m-3","pe-3","tryon-icon"],["alt","item.name",1,"pb-2","img-fluid",3,"src"],[1,"text-center"],[1,"btn",3,"routerLink"]],template:function(i,r){1&i&&(I(0,"div",0)(1,"div",1),kt(2,j1e,14,9,"div",2),D()()),2&i&&(le(2),Pe("ngForOf",r.displayCollection))},dependencies:[Tg,Us,R0],styles:["h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%] > b[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{font-family:Montserrat,serif;color:#190101}h1[_ngcontent-%COMP%]{font-size:48px}p[_ngcontent-%COMP%]{font-family:Garet,serif;color:#190101}h6[_ngcontent-%COMP%]{padding-bottom:.5rem}div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-top:1rem;font-family:Montserrat,serif;font-weight:600;color:#fff;background-color:#cf0a2c}div.col-md-3.d-flex.flex-column[_ngcontent-%COMP%]{align-items:center;position:relative}.tryon-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:36px}.back-arrow[_ngcontent-%COMP%]{flex:20%;cursor:pointer}@media only screen and (min-width: 0px){h1[_ngcontent-%COMP%]{padding-top:5rem;font-size:32px}div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:2rem}.tryon-icon[_ngcontent-%COMP%]{width:64px}.back-arrow[_ngcontent-%COMP%]{margin-bottom:2px}}@media only screen and (min-width: 414px){h1[_ngcontent-%COMP%]{padding-top:8rem;font-size:40px}.back-arrow[_ngcontent-%COMP%]{margin-bottom:8px}}@media only screen and (min-width: 768px){h1[_ngcontent-%COMP%]{padding-top:10rem;font-size:48px}div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:0}.tryon-icon[_ngcontent-%COMP%]{width:36px}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}@media only screen and (min-width: 0px){.selectedItemDetails[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-top:1em;padding-bottom:.2em}.selectedItemDetails[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding-bottom:.1rem}.selectedItemDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:.8em 0}.quantity-size-box[_ngcontent-%COMP%], .item-color[_ngcontent-%COMP%], .size-and-fit-disp[_ngcontent-%COMP%], .cart-fitting-buttons[_ngcontent-%COMP%], .ft-room-remove[_ngcontent-%COMP%]{padding-top:.8em}.slide-image[_ngcontent-%COMP%]{height:0;max-width:0}.cart-fitting-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:.8em;padding:.8em}.cart-fitting-buttons[_ngcontent-%COMP%] > button.ft-room[_ngcontent-%COMP%]{margin-left:1rem}.quantity-controls[_ngcontent-%COMP%]{border-width:1px;font-size:1.1em;font-weight:500;margin-right:1rem}.quantity-size-box[_ngcontent-%COMP%]{margin-bottom:1rem}.quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{padding-left:1rem;padding-right:.5rem;font-size:.8em;margin-left:0rem}.size-and-fit-disp[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.8rem;font-weight:300;font-size:.9em}div.col-md-6[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-top:.5rem}.selectedItemDetails[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-weight:600}.selectedItemDetails[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{font-weight:600}.selectedItemDetails[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:1.1em}.tryon-icon-b[_ngcontent-%COMP%]{width:20px}div.ft-room-remove[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:1em;font-weight:300;margin-top:1px}}@media only screen and (min-width: 768px){.selectedItemPictures[_ngcontent-%COMP%]{padding-top:0;padding-right:1rem}.selectedItemDetails[_ngcontent-%COMP%]{padding-left:2rem}.selectedItemDetails[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-top:0}.auxilaryImages[_ngcontent-%COMP%]{height:61vh}.main-image[_ngcontent-%COMP%]{height:61vh;max-width:100%}.cart-fitting-buttons[_ngcontent-%COMP%] > button.ft-room[_ngcontent-%COMP%]{margin-left:.1rem}.quantity-controls[_ngcontent-%COMP%]{border-width:1px;font-size:1.1em;font-weight:500;margin-right:.1em}.quantity-size-box[_ngcontent-%COMP%]{margin-bottom:1rem}.quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{padding-left:1rem;padding-right:.5rem;font-size:.9em;margin-left:.1rem}.size-and-fit-disp[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.8rem;font-weight:300;font-size:.9em}div.col-md-6[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-top:.5rem}.selectedItemDetails[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-weight:600}.selectedItemDetails[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{font-weight:600}.selectedItemDetails[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:1.1em}.tryon-icon-b[_ngcontent-%COMP%]{width:20px}div.ft-room-remove[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:1em;font-weight:300;margin-top:1px}}@media only screen and (min-width: 992px){.slide-image[_ngcontent-%COMP%]{height:19.2vh;max-width:100%}.quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{margin-left:.5rem}.cart-fitting-buttons[_ngcontent-%COMP%] > button.ft-room[_ngcontent-%COMP%]{margin-left:.5rem}}@media only screen and (min-width: 1200px){.selectedItemPictures[_ngcontent-%COMP%]{padding-right:3rem}.selectedItemDetails[_ngcontent-%COMP%]{padding-left:3rem}.selectedItemDetails[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-bottom:.3em}.selectedItemDetails[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding-bottom:.2rem}.selectedItemDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:1em 0}.quantity-size-box[_ngcontent-%COMP%], .item-color[_ngcontent-%COMP%], .size-and-fit-disp[_ngcontent-%COMP%], .cart-fitting-buttons[_ngcontent-%COMP%], .ft-room-remove[_ngcontent-%COMP%]{padding-top:1em}.slide-image[_ngcontent-%COMP%]{max-width:80%}.cart-fitting-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:1em}.cart-fitting-buttons[_ngcontent-%COMP%] > button.ft-room[_ngcontent-%COMP%]{margin-left:1em}.quantity-controls[_ngcontent-%COMP%]{border-width:1px}.quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{padding-left:2rem;padding-right:1rem;font-size:1.2em;margin-left:1em}.size-and-fit-disp[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.1em}.selectedItemDetails[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:1.3em}.tryon-icon-b[_ngcontent-%COMP%]{width:28px}div.ft-room-remove[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:1.3em;margin-top:10px}}@media only screen and (min-width: 1400px){.cart-fitting-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:1.2em}.quantity-controls[_ngcontent-%COMP%]{font-size:1.3em}.quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{padding-left:3rem}}.auxilaryImages[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;justify-content:space-between}.quantity-size-box[_ngcontent-%COMP%]{display:flex;align-items:center}.quantity-controls[_ngcontent-%COMP%]{width:100px;display:flex;flex-direction:row;height:40px;justify-content:space-evenly;align-items:center;border:solid;border-color:#000}.tryon-icon[_ngcontent-%COMP%]{background:url(/live/assets/icons/tryon_icon.png)}.size-and-fit-disp[_ngcontent-%COMP%]{color:#190101;display:flex;flex-direction:row}.cart-fitting-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{font-family:Montserrat,serif;font-weight:600;color:#fff}.cart-fitting-buttons[_ngcontent-%COMP%] > button.cart[_ngcontent-%COMP%]{background-color:#cf0a2c}.cart-fitting-buttons[_ngcontent-%COMP%] > button.ft-room[_ngcontent-%COMP%], .quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{background-color:#190101}div.ft-room-remove[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{text-transform:unset!important;font-family:Montserrat,serif;color:#dc4c64}div.measurements[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-2[_ngcontent-%COMP%], div.col-md-9[_ngcontent-%COMP%]{padding-left:0;margin-top:4px}div.measurements[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-3[_ngcontent-%COMP%]{margin-top:4px}.find-size-btn[_ngcontent-%COMP%]{background-color:#cf0a2c;color:#fff;scale:1.4;float:right;padding-left:32px;padding-right:32px}.add-size-btn[_ngcontent-%COMP%]{background-color:#cf0a2c;color:#fff;scale:1.4;padding-left:32px;padding-right:32px}.start-over-btn[_ngcontent-%COMP%]{font-weight:700;padding-left:32px;padding-right:32px;color:#000;text-decoration:underline;text-decoration-thickness:2px;cursor:pointer}.modal-bottom-buttons[_ngcontent-%COMP%]{display:flex;margin:64px 64px 0 0}"]})}return n})(),sY=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(j(Ao),j(fi))};static#t=this.\u0275dir=dt({type:n})}return n})(),yd=(()=>{class n extends sY{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=fr(n)))(r||n)}}();static#t=this.\u0275dir=dt({type:n,features:[mn]})}return n})();const Hs=new Se("NgValueAccessor"),K1e={provide:Hs,useExisting:bn(()=>Ry),multi:!0},Y1e=new Se("CompositionEventMode");let Ry=(()=>{class n extends sY{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function X1e(){const n=rl()?rl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(j(Ao),j(fi),j(Y1e,8))};static#t=this.\u0275dir=dt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&it("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[An([K1e]),mn]})}return n})();function Ll(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function aY(n){return null!=n&&"number"==typeof n.length}const Br=new Se("NgValidators"),Fl=new Se("NgAsyncValidators"),Z1e=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class go{static min(e){return function cY(n){return e=>{if(Ll(e.value)||Ll(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function lY(n){return e=>{if(Ll(e.value)||Ll(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return uY(e)}static requiredTrue(e){return function dY(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function hY(n){return Ll(n.value)||Z1e.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function fY(n){return e=>Ll(e.value)||!aY(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function pY(n){return e=>aY(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function mY(n){if(!n)return TS;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Ll(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return wY(e)}static composeAsync(e){return EY(e)}}function uY(n){return Ll(n.value)?{required:!0}:null}function TS(n){return null}function gY(n){return null!=n}function _Y(n){return lg(n)?Ci(n):n}function yY(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function vY(n,e){return e.map(t=>t(n))}function bY(n){return n.map(e=>function Q1e(n){return!n.validate}(e)?e:t=>e.validate(t))}function wY(n){if(!n)return null;const e=n.filter(gY);return 0==e.length?null:function(t){return yY(vY(t,e))}}function WL(n){return null!=n?wY(bY(n)):null}function EY(n){if(!n)return null;const e=n.filter(gY);return 0==e.length?null:function(t){return function W1e(...n){const e=n3(n),{args:t,keys:i}=Jj(n),r=new yn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let d=!1;cr(t[u]).subscribe(Mn(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?e$(i,a):a),s.complete())}))}});return e?r.pipe(xI(e)):r}(vY(t,e).map(_Y)).pipe(zt(yY))}}function qL(n){return null!=n?EY(bY(n)):null}function SY(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function CY(n){return n._rawValidators}function xY(n){return n._rawAsyncValidators}function KL(n){return n?Array.isArray(n)?n:[n]:[]}function MS(n,e){return Array.isArray(n)?n.includes(e):n===e}function TY(n,e){const t=KL(e);return KL(n).forEach(r=>{MS(t,r)||t.push(r)}),t}function MY(n,e){return KL(e).filter(t=>!MS(n,t))}class AY{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=WL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class os extends AY{get formDirective(){return null}get path(){return null}}class Ul extends AY{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class IY{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let XL=(()=>{class n extends IY{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(j(Ul,2))};static#t=this.\u0275dir=dt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&bu("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[mn]})}return n})(),hp=(()=>{class n extends IY{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(j(os,10))};static#t=this.\u0275dir=dt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&bu("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[mn]})}return n})();const Py="VALID",IS="INVALID",fp="PENDING",Oy="DISABLED";function QL(n){return(DS(n)?n.validators:n)||null}function JL(n,e){return(DS(e)?e.asyncValidators:n)||null}function DS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function RY(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new se(1e3,"");if(!i[t])throw new se(1001,"")}function PY(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new se(1002,"")})}class RS{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Py}get invalid(){return this.status===IS}get pending(){return this.status==fp}get disabled(){return this.status===Oy}get enabled(){return this.status!==Oy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(TY(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TY(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MY(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MY(e,this._rawAsyncValidators))}hasValidator(e){return MS(this._rawValidators,e)}hasAsyncValidator(e){return MS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fp,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Oy,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Py,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Py||this.status===fp)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oy:Py}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fp,this._hasOwnPendingAsyncValidator=!0;const t=_Y(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new qt,this.statusChanges=new qt}_calculateStatus(){return this._allControlsDisabled()?Oy:this.errors?IS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fp)?fp:this._anyControlsHaveStatus(IS)?IS:Py}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){DS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function nRe(n){return Array.isArray(n)?WL(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function iRe(n){return Array.isArray(n)?qL(n):n||null}(this._rawAsyncValidators)}}class Ny extends RS{constructor(e,t,i){super(QL(t),JL(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){PY(this,0,e),Object.keys(e).forEach(i=>{RY(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class OY extends Ny{}const vd=new Se("CallSetDisabledState",{providedIn:"root",factory:()=>ky}),ky="always";function Ly(n,e,t=ky){e2(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function sRe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&NY(n,e)})}(n,e),function aRe(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function oRe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&NY(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function rRe(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function OS(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),kS(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function NS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function e2(n,e){const t=CY(n);null!==e.validator?n.setValidators(SY(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=xY(n);null!==e.asyncValidator?n.setAsyncValidators(SY(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();NS(e._rawValidators,r),NS(e._rawAsyncValidators,r)}function kS(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=CY(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=xY(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return NS(e._rawValidators,i),NS(e._rawAsyncValidators,i),t}function NY(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kY(n,e){e2(n,e)}function LY(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const hRe={provide:os,useExisting:bn(()=>pp)},Fy=(()=>Promise.resolve())();let pp=(()=>{class n extends os{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new qt,this.form=new Ny({},WL(t),qL(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fy.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Ly(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fy.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Fy.then(()=>{const i=this._findContainer(t.path),r=new Ny({});kY(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fy.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Fy.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,LY(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(j(Br,10),j(Fl,10),j(vd,8))};static#t=this.\u0275dir=dt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&it("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[An([hRe]),mn]})}return n})();function FY(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function UY(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Gs=class extends RS{constructor(e=null,t,i){super(QL(t),JL(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),DS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=UY(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){FY(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){FY(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){UY(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let mp=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=dt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),jY=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({})}return n})();const s2=new Se("NgModelWithFormControlWarning"),wRe={provide:os,useExisting:bn(()=>Uy)};let Uy=(()=>{class n extends os{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new qt,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Ly(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){OS(t.control||null,t,!1),function dRe(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,LY(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(OS(i||null,t),(n=>n instanceof Gs)(r)&&(Ly(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);kY(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function cRe(n,e){return kS(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){e2(this.form,this),this._oldForm&&kS(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(j(Br,10),j(Fl,10),j(vd,8))};static#t=this.\u0275dir=dt({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&it("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[An([wRe]),mn,ps]})}return n})();const CRe={provide:Ul,useExisting:bn(()=>LS)};let LS=(()=>{class n extends Ul{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new qt,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function r2(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Ry?t=s:function uRe(n){return Object.getPrototypeOf(n.constructor)===yd}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function n2(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function PS(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(i){return new(i||n)(j(os,13),j(Br,10),j(Fl,10),j(Hs,10),j(s2,8))};static#n=this.\u0275dir=dt({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[An([CRe]),mn,ps]})}return n})(),bd=(()=>{class n{constructor(){this._validator=TS}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):TS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=dt({type:n,features:[ps]})}return n})();const ORe={provide:Br,useExisting:bn(()=>By),multi:!0};let By=(()=>{class n extends bd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Zh,this.createValidator=t=>uY}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=fr(n)))(r||n)}}();static#t=this.\u0275dir=dt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){2&i&&Jr("required",r._enabled?"":null)},inputs:{required:"required"},features:[An([ORe]),mn]})}return n})(),oZ=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({imports:[jY]})}return n})();class aZ extends RS{constructor(e,t,i){super(QL(t),JL(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){PY(this,0,e),e.forEach((i,r)=>{RY(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function cZ(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let lZ=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let s={};return cZ(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Ny(r,s)}record(t,i=null){const r=this._reduceControls(t);return new OY(r,i)}control(t,i,r){let s={};return this.useNonNullable?(cZ(i)?s=i:(s.validators=i,s.asyncValidators=r),new Gs(t,{...s,nonNullable:!0})):new Gs(t,i,r)}array(t,i,r){const s=t.map(o=>this._createControl(o));return new aZ(s,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof Gs||t instanceof RS?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vy=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:vd,useValue:t.callSetDisabledState??ky}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({imports:[oZ]})}return n})(),BRe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:s2,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:vd,useValue:t.callSetDisabledState??ky}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({imports:[oZ]})}return n})(),uZ=(()=>{class n{constructor(t){this.logger=t,this.firestore=Ie(fd)}sendContactMessage(t){var i=this;return N(function*(){try{yield ES(Ma(r1e(i.firestore,"contactUs")),t)}catch(r){throw i.logger.error(`Error Creating ContactUs Entry ${r}`),r}})()}static#e=this.\u0275fac=function(i){return new(i||n)(z(oi))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VRe(n,e){if(1&n){const t=jn();I(0,"div",1),P(1),I(2,"button",2),it("click",function(){return ln(t),un(ot().close())}),D()()}if(2&n){const t=ot();le(1),pi(" ",t.message," ")}}let dZ=(()=>{class n{constructor(){this.message="",this.show=!1}close(){this.show=!1}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-alert-warning"]],inputs:{message:"message",show:"show"},decls:1,vars:1,consts:[["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"]],template:function(i,r){1&i&&kt(0,VRe,3,1,"div",0),2&i&&Pe("ngIf",r.show)},dependencies:[Oo],styles:["div.alert[_ngcontent-%COMP%]{display:block;z-index:1;right:0}"]})}return n})();function zRe(n,e){if(1&n){const t=jn();I(0,"div",1),P(1),I(2,"button",2),it("click",function(){return ln(t),un(ot().close())}),D()()}if(2&n){const t=ot();le(1),pi(" ",t.message," ")}}let hZ=(()=>{class n{constructor(){this.message="",this.show=!1}close(){this.show=!1}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-alert-success"]],inputs:{message:"message",show:"show"},decls:1,vars:1,consts:[["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"]],template:function(i,r){1&i&&kt(0,zRe,3,1,"div",0),2&i&&Pe("ngIf",r.show)},dependencies:[Oo],styles:["div.alert[_ngcontent-%COMP%]{display:block;z-index:1;right:0}"]})}return n})(),HRe=(()=>{class n{constructor(t,i,r){this.logger=t,this.contactApi=i,this.formBuilder=r,this.alertMessage="",this.showSuccess=!1,this.showWarning=!1,this.name=new Gs("",[go.required]),this.email=new Gs("",[go.required,go.email,go.pattern("[A-Za-z0-9._%-]+@[A-Za-z0-9._%-]+\\.[a-z]{2,3}")]),this.subject=new Gs("",go.required),this.message=new Gs("",go.required),this.contactForm=r.group({name:this.name,email:this.email,subject:this.subject,message:this.message})}ngOnDestroy(){this.name=null,this.email=null,this.subject=null,this.message=null}sendMessage(t){var i=this;return N(function*(){if(i.contactForm.invalid)new Map([["name",i.name],["email",i.email],["subject",i.subject],["message",i.message]]).forEach((s,o,a)=>{if(s?.invalid)return i.alertMessage=`Please enter a valid ${o}`,i.showWarning=!0,void setTimeout(()=>i.showWarning=!1,2e3)});else try{yield i.contactApi.sendContactMessage({name:t.name,email:t.email,subject:t.subject,message:t.message}),i.contactForm.reset(),i.alertMessage="Successfully Submitted!",i.showSuccess=!0,setTimeout(()=>i.showSuccess=!1,4e3)}catch(r){i.logger.error(`Send Message Error = ${r}`),i.alertMessage="Error Submitting! Please try again later.",i.showWarning=!0,setTimeout(()=>i.showWarning=!1,4e3)}})()}static#e=this.\u0275fac=function(i){return new(i||n)(j(oi),j(uZ),j(lZ))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-contact-landing"]],decls:52,vars:5,consts:[[1,"container-fluid",2,"margin-top","8rem"],[1,"row","d-flex","contact-area","mt-2","ms-1",2,"padding-top","4rem"],[1,"col-md"],[1,"mb-3"],[1,"mb-5"],[1,"contact-list"],[1,"row","mb-4",2,"display","flex"],[2,"flex","1"],[1,"fas","fa-location-dot","text-center","list-icon"],[2,"flex","10"],[1,"fas","fa-envelope","list-icon"],[1,"fas","fa-phone","list-icon"],[1,"text-center","row","mb-3","form-container",3,"formGroup","ngSubmit"],[3,"message","show"],[1,"row",2,"margin","0"],[1,"formGroup","mb-3","col-md",2,"padding","0","margin","0"],["type","text","onkeydown","return /[a-z ]/i.test(event.key)","placeholder","Name:","required","","formControlName","name",1,"formControl",2,"width","100%"],["name",""],[1,"formGroup","mb-3","col-md","email-input"],["type","email","placeholder","Email:","required","","formControlName","email",1,"formControl",2,"width","100%"],["email",""],[1,"formGroup","mb-3"],["type","text","placeholder","Subject:","required","","formControlName","subject",1,"formControl",2,"width","100%"],["subject",""],["placeholder","Message:","rows","5","required","","formControlName","message",1,"formControl",2,"width","100%"],["message",""],[1,"formGroup"],["type","submit","value","SEND MESSAGE",1,"btn","btnPrimary","btn-lg","text-white","mb-2"]],template:function(i,r){1&i&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),P(4,"CONTACT"),D(),I(5,"h1",4),P(6,"Get in touch"),D(),I(7,"div",5)(8,"div",6)(9,"div",7),$(10,"i",8),D(),I(11,"div",9)(12,"h5"),P(13,"LOCATION"),D(),I(14,"p"),P(15,"Rustenburg, North West, South Africa, 0300"),D()()(),I(16,"div",6)(17,"div",7),$(18,"i",10),D(),I(19,"div",9)(20,"h5"),P(21,"EMAIL"),D(),I(22,"p"),P(23,"info@try-on.co.za"),D()()(),I(24,"div",6)(25,"div",7),$(26,"i",11),D(),I(27,"div",9)(28,"h5"),P(29,"CELL"),D(),I(30,"p"),P(31,"+27 63 410 5509"),D()()()()(),I(32,"div",2)(33,"form",12),it("ngSubmit",function(){return r.sendMessage(r.contactForm.value)}),$(34,"app-alert-success",13)(35,"app-alert-warning",13),I(36,"div",14)(37,"div",15),$(38,"input",16,17),D(),I(40,"div",18),$(41,"input",19,20),D()(),I(43,"div",21),$(44,"input",22,23),D(),I(46,"div",21),$(47,"textarea",24,25),P(49,", "),D(),I(50,"div",26),$(51,"input",27),D()()()()()),2&i&&(le(33),Pe("formGroup",r.contactForm),le(1),Pe("message",r.alertMessage)("show",r.showSuccess),le(1),Pe("message",r.alertMessage)("show",r.showWarning))},dependencies:[dZ,hZ,mp,Ry,XL,hp,By,Uy,LS],styles:[".contact-area[_ngcontent-%COMP%]{min-height:100%;background-color:#f4f4f4;width:100%}h5[_ngcontent-%COMP%]{color:#190101;font-family:Quicksand,sans-serif}div.col-md[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{color:#cf0a2c}h1[_ngcontent-%COMP%]{color:#190101;font-family:Montserrat,sans-serif;font-size:80px;font-weight:500}p[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:1.1em}.list-icon[_ngcontent-%COMP%]{color:#fff;font-size:32px;width:56px;height:56px;padding:.8rem;border-radius:100%;background-color:#cf0a2c}.formControl[_ngcontent-%COMP%]{border-radius:2px;border-style:solid;border-width:1px;border-color:#cf0a2c;background-color:#fff;padding:1rem}input.btn[_ngcontent-%COMP%]{background-color:#cf0a2c;font-size:16px;font-weight:700;padding-right:1em;padding-left:1em}@media only screen and (min-width: 0px){.contact-area[_ngcontent-%COMP%]{border-top-left-radius:44px;border-top-right-radius:44px;padding:1rem 1rem 0}.email-input[_ngcontent-%COMP%]{margin:0;padding:0}.form-container[_ngcontent-%COMP%]{margin-top:1rem}}@media only screen and (min-width: 375px){.contact-area[_ngcontent-%COMP%]{border-top-left-radius:66px;border-top-right-radius:66px;padding:1rem 3rem 0 2rem}}@media only screen and (min-width: 576px){.contact-area[_ngcontent-%COMP%]{border-top-left-radius:88px;border-top-right-radius:88px;padding:4rem 3rem 0}}@media only screen and (min-width: 768px){.email-input[_ngcontent-%COMP%]{padding:0 0 0 12px}.form-container[_ngcontent-%COMP%]{margin-top:9rem}}"]})}return n})(),GRe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-partners-landing"]],decls:67,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"stats-container","mb-5",2,"margin-top","8rem"],[1,"stat-bubble"],[1,"text-center"],[1,"slider"],[1,"slide-track"],[1,"slide"],["src","/live/assets/images/partners/mr-price-logo.png","height","80","alt",""],["src","/live/assets/images/partners/woolworths-logo.png","height","150","alt",""],["src","/live/assets/images/partners/superbalist-logo.png","height","40","width","400","alt",""],["src","/live/assets/images/partners/the-local-edit-logo.png","height","130","alt",""],["src","/live/assets/images/partners/takealot-logo.png","height","60","alt",""]],template:function(i,r){1&i&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),P(5,"X6"),D(),I(6,"p",4),P(7,"MORE USER"),$(8,"br"),P(9,"ENGAGEMENT IN"),$(10,"br"),P(11,"YOUR ONLINE SHOP"),D()(),I(12,"div",3)(13,"h1",4),P(14,"-30%"),D(),I(15,"p",4),P(16,"REDUCED PRODUCT"),$(17,"br"),P(18,"RETURN RATE FROM"),$(19,"br"),P(20,"FIRST-TIME"),$(21,"br"),P(22,"SHOPPERS"),D()(),I(23,"div",3)(24,"h1",4),P(25,"105"),D(),I(26,"p",4),P(27,"ON-BOARDED"),$(28,"br"),P(29,"CLIENTS/ONLINE"),$(30,"br"),P(31,"STORES"),D()(),I(32,"div",3)(33,"h1",4),P(34,"986"),D(),I(35,"p",4),P(36,"ONLINE USERS"),$(37,"br"),P(38,"CREATED THEIR"),$(39,"br"),P(40,"PHOTO-REALISTIC"),$(41,"br"),P(42,"AVATARS"),D()(),I(43,"div",3)(44,"h1",4),P(45,"1505"),D(),I(46,"p",4),P(47,"CLOTHING TREID ON"),$(48,"br"),P(49,"IN THE VIRTUAL"),$(50,"br"),P(51,"FITTING ROOM"),D()()()(),I(52,"div",1)(53,"h1",4),P(54,"Trusted by"),D(),I(55,"div",5)(56,"div",6)(57,"div",7),$(58,"img",8),D(),I(59,"div",7),$(60,"img",9),D(),I(61,"div",7),$(62,"img",10),D(),I(63,"div",7),$(64,"img",11),D(),I(65,"div",7),$(66,"img",12),D()()()()())},styles:["h1[_ngcontent-%COMP%]{color:#190101;font-family:Montserrat,sans-serif;font-size:80px;font-weight:500}@media only screen and (min-width: 0px){.stats-container[_ngcontent-%COMP%]{background-color:#cf0a2c;padding-top:2rem;padding-bottom:2rem;display:flex;flex-wrap:wrap;flex-direction:row;align-items:center;justify-content:center}.stat-bubble[_ngcontent-%COMP%]{background-color:#f4f4f4;height:14em;width:14em;border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center}.stat-bubble[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:600;font-size:48px}}@media only screen and (min-width: 1148px){.stats-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}}.slider[_ngcontent-%COMP%]{padding:3em 2em}.slide-track[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;flex-direction:row;align-items:center;justify-content:center;gap:3em}"]})}return n})(),jRe=(()=>{class n{constructor(){this.routes=rt}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-welcome"]],decls:161,vars:2,consts:[[1,"container-fluid"],[1,"fixed-top"],[1,"p-5","hero-background","bg-image",2,"height","100vh"],[1,"mask",2,"background-color","rgba(255, 255, 255, 0.0)"],[1,"d-flex","justify-content-start","align-items-end","h-100"],[1,"landing-title","landing-text","mb-3"],[1,"landing-subtitle","landing-text","mb-3"],["role","button",1,"btn","btn-primary","btn-lg",3,"routerLink"],[3,"showNav"],[1,"pricing-section","container"],[1,"row"],[1,"mb-3"],[1,"mb-5"],[1,"col-md-3"],[1,"headings"],[1,"btn"],[1,"row","disclaimer","mt-5","text-center"],[2,"background-size","cover","background","url('/live/assets/images/faqs-background.jpg')"],[2,"background-color","rgba(254, 255, 255, 0.7)"],[1,"frequently-asked","container"],[1,"col-md-6"],[1,"col-md-6","questions"]],template:function(i,r){1&i&&(I(0,"div",0),$(1,"app-header",1),I(2,"div")(3,"div",2)(4,"div",3)(5,"div",4)(6,"div")(7,"h1",5),P(8,"SIMPLIFYING ONLINE"),$(9,"br"),P(10,"SHOPPING!"),D(),I(11,"h4",6),P(12,"Welcome to the Future of Online Shopping with Try-On"),D(),I(13,"a",7),P(14,"LEARN MORE"),D()()()()()(),$(15,"app-about-us-landing")(16,"app-features",8)(17,"app-shop-landing")(18,"app-partners-landing"),I(19,"div",9)(20,"div",10)(21,"h5",11),P(22,"INVESTMENT"),D(),I(23,"h1",12),P(24,"Our Pricing"),D()(),I(25,"div",10)(26,"div",13)(27,"div")(28,"div",14)(29,"h6"),P(30,"START-UP"),D(),I(31,"h4"),P(32,"R3 500"),D()(),I(33,"p"),P(34,"X3 Free 3D assets"),$(35,"br"),P(36,"X1 Mannequin"),$(37,"br"),P(38,"Virtual Fitting Room"),$(39,"br"),P(40,"Unlimited users"),$(41,"br"),P(42,"Mix-and-match"),$(43,"br"),P(44,"Size recommendation"),D(),I(45,"button",15),P(46,"Select"),D()()(),I(47,"div",13)(48,"div")(49,"div",14)(50,"h6"),P(51,"BUSINESS"),D(),I(52,"h4"),P(53,"R5 500"),D()(),I(54,"p"),P(55,"X7 Free 3D assets"),$(56,"br"),P(57,"X2 Mannequins"),$(58,"br"),P(59,"X1 3D Avatar"),$(60,"br"),P(61,"Virtual Fitting Room"),$(62,"br"),P(63,"Unlimited users"),$(64,"br"),P(65,"Mix-and-match"),$(66,"br"),P(67,"Size recommendation"),$(68,"br"),P(69,"Analytics & Insights"),D(),I(70,"button",15),P(71,"Select"),D()()(),I(72,"div",13)(73,"div")(74,"div",14)(75,"h6"),P(76,"CORPORATE"),D(),I(77,"h4"),P(78,"R9 500"),D()(),I(79,"p"),P(80,"X15 Free 3D assets"),$(81,"br"),P(82,"Unlimited 3D Mannequins"),$(83,"br"),P(84,"X2 3D Avatars"),$(85,"br"),P(86,"Virtual Fitting Room"),$(87,"br"),P(88,"Unlimited users"),$(89,"br"),P(90,"Mix-and-match"),$(91,"br"),P(92,"Size recommendation"),$(93,"br"),P(94,"Analytics & Insights"),$(95,"br"),P(96,"24/7 Support"),D(),I(97,"button",15),P(98,"Select"),D()()(),I(99,"div",13)(100,"div")(101,"div",14)(102,"h6"),P(103,"ENTERPRISE"),D(),I(104,"h4"),P(105,"R19 000"),D()(),I(106,"p"),P(107,"X30 Free 3D assets"),$(108,"br"),P(109,"Unlimited 3D Mannequins"),$(110,"br"),P(111,"Unlimited 3D Avatars"),$(112,"br"),P(113,"Virtual Fitting Room"),$(114,"br"),P(115,"Unlimited users"),$(116,"br"),P(117,"Mix-and-match"),$(118,"br"),P(119,"Size recommendation"),$(120,"br"),P(121,"Analytics & Insights"),$(122,"br"),P(123,"Dedicated Support Team"),D(),I(124,"button",15),P(125,"Select"),D()()()(),I(126,"div",16)(127,"p"),P(128,"All plans include a choice of free 3D virtual try-on garments created from ghost mannequin images or CAD files. For Additional"),$(129,"br"),P(130,"virtual try-on assets we charge R250 per 3D assets"),D()()(),I(131,"div",17)(132,"div",18)(133,"div",19)(134,"div",10)(135,"div",20)(136,"h5"),P(137,"FREQUENTLY ASKED QUESTIONS"),D(),I(138,"h1"),P(139,"Best Answers about Virtual Try-On"),D(),I(140,"h6"),P(141,"Get to know us a little bit better"),D()(),I(142,"div",21)(143,"div")(144,"h5"),P(145,"WHAT IS THE VIRTUAL TRY-ON PLUGIN, AND HOW DOES IT WORK?"),D(),I(146,"p"),P(147,"Virtual Try-On is a virtual fitting room plugin that allows customers to try on products virtually on your e-commerce website. It works by integrating with your existing website, enabling customers to visualise products in real-time using their device's camera. "),D()(),I(148,"div")(149,"h5"),P(150,"WHICH TYPES OF PRODUCTS ARE COMPATIBLE WITH THE TRY-ON PLUGIN?"),D()(),I(151,"div")(152,"h5"),P(153,"IS THE TRY-ON PLUGIN MOBILE-FRIENDLY?"),D()(),I(154,"div")(155,"h5"),P(156,"DOES THE TRY-ON PLUGIN OFFER SIZE AND FIT RECOMMENDATIONS?"),D()(),I(157,"div")(158,"h5"),P(159,"HOW DOES THE TRY-ON PLUGIN HANDLE CUSTOMER DATA AND PRIVACY?"),D()()()()()()(),$(160,"app-contact-landing"),D()),2&i&&(le(13),Xn("routerLink","/",r.routes.ABOUT_US,""),le(3),Pe("showNav",!1))},dependencies:[Aa,Us,z1e,iY,$1e,HRe,GRe],styles:[".container-fluid[_ngcontent-%COMP%]{padding:0}.container-fluid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#E5E8EF,#F3F4F6)}@media only screen and (min-width: 0px){.hero-background[_ngcontent-%COMP%]{background-image:url(/live/assets/images/landing-one.jpg);background-size:cover;background-position:center;height:100vh}}@media only screen and (min-width: 1000px){.hero-background[_ngcontent-%COMP%]{background-image:url(/live/assets/images/landing-one.jpg);background-size:100% 100%;-moz-background-size:100% 100%;-webkit-background-size:100% 100%;background-position:center center;background-origin:padding-box;height:100vh}}@media only screen and (min-width: 1400px){.hero-background[_ngcontent-%COMP%]{background-image:url(/live/assets/images/landing-one.jpg);background-size:contain;background-repeat:no-repeat;background-position:center;background-origin:padding-box;height:100vh}}.landing-text[_ngcontent-%COMP%]{color:#190101;font-family:Montserrat,serif}@media only screen and (min-width: 0px){.landing-title[_ngcontent-%COMP%]{font-size:32px;font-weight:300}.landing-subtitle[_ngcontent-%COMP%]{font-size:16px}div.d-flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:1.5rem;margin-bottom:2rem}}@media only screen and (min-width: 320px){.landing-title[_ngcontent-%COMP%]{font-size:40px;font-weight:300}.landing-subtitle[_ngcontent-%COMP%]{font-size:16px}div.d-flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:2rem;margin-bottom:2rem}a.btn[_ngcontent-%COMP%]{font-size:16px}}@media only screen and (min-width: 700px){a.btn[_ngcontent-%COMP%]{font-weight:500;margin-top:1rem}}@media only screen and (min-width: 1000px){div.d-flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:3rem;margin-bottom:6rem}}@media only screen and (min-width: 1242px){div.d-flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:6rem;margin-bottom:6rem}}@media only screen and (min-width: 1336px){div.d-flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:8rem;margin-bottom:7.5rem}}.landing-subtitle[_ngcontent-%COMP%]{font-weight:400}a.btn[_ngcontent-%COMP%]{background-color:#cf0a2c;box-shadow:none;border-radius:4px;text-align:center;font-family:Montserrat,serif}.pricing-section[_ngcontent-%COMP%]{background-image:unset!important;margin-top:8rem}.pricing-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#190101;font-family:Montserrat,sans-serif;font-size:80px;font-weight:500}.pricing-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#cf0a2c;font-family:Quicksand,sans-serif}.pricing-section[_ngcontent-%COMP%]   .disclaimer[_ngcontent-%COMP%]{color:#190101;font-family:Garet,sans-serif}div.pricing-section[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-3[_ngcontent-%COMP%]{padding:4px}div.pricing-section[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;background-color:#efefef;text-align:center;border-radius:4px;font-family:Quicksand,sans-serif;font-weight:600;color:#190101;padding:1.8rem;display:flex;flex-direction:column;justify-content:space-between}div.pricing-section[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .headings[_ngcontent-%COMP%] > h6[_ngcontent-%COMP%]{color:#606060;font-weight:800;padding-bottom:1.4rem}div.pricing-section[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .headings[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{font-size:32px;font-family:Montserrat,sans-serif;font-weight:800}div.pricing-section[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{background-color:#cf0a2c;color:#fff;width:50%;margin:0 auto;font-size:16px;font-weight:700;padding-right:1em;padding-left:1em}div.pricing-section[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{background-color:#cf0a2c;color:#fff;box-shadow:0 4px 8px #0003,0 6px 20px #0003}div.pricing-section[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover   .headings[_ngcontent-%COMP%] > h6[_ngcontent-%COMP%]{color:#fff}div.pricing-section[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover   button.btn[_ngcontent-%COMP%]{border-style:solid;border-width:1px;border-color:#fff}.frequently-asked[_ngcontent-%COMP%]{background-image:unset!important;margin-top:8rem;padding:8rem 0 4rem}.frequently-asked[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#190101;font-family:Montserrat,sans-serif;font-size:48px;font-weight:500}.frequently-asked[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#cf0a2c;font-family:Quicksand,sans-serif}.frequently-asked[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#190101;font-family:Garet,sans-serif;font-weight:100}.frequently-asked[_ngcontent-%COMP%]   .questions[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-style:solid;border-width:3px 0 0 0;border-color:#cf0a2c;padding:1rem 0;text-align:justify;word-break:keep-all}.frequently-asked[_ngcontent-%COMP%]   .questions[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#190101;font-weight:700}.frequently-asked[_ngcontent-%COMP%]   .questions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#190101;font-family:Garet,sans-serif;font-weight:100}"]})}return n})();const $Re=function(){return{3:"d-padding",2:"m-padding",1:"l-padding",0:"xl-padding"}};let WRe=(()=>{class n{constructor(t){this.breakPointObserver=t,this.showNav=!0,this.topPadding=!0,this.breakpoints=["(min-width: 992px)","(min-width: 831px)","(min-width: 768px)","(min-width: 0px)"],this.useBreakpoint=3,this.routes=rt}ngOnInit(){this.topPadding&&this.breakPointObserver.observe(this.breakpoints).subscribe(t=>{for(let i=0;i<this.breakpoints.length;i++)if(t.breakpoints[this.breakpoints[i]]){this.useBreakpoint=i;break}})}static#e=this.\u0275fac=function(i){return new(i||n)(j(tY))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-about-us"]],inputs:{showNav:"showNav",topPadding:"topPadding"},decls:59,vars:4,consts:[[1,"container-fluid"],[1,"fixed-top",3,"hidden"],[1,"row"],[1,"col-md","text-white",3,"ngClass"],[1,"about-title"],["type","button",3,"routerLink"],[1,"col-md"],[1,"about-picture"],[1,"row","team-section"],[1,"team-subheading"],[1,"team-heading"],[1,"text-center","team-body"],["src","/live/assets/images/team/kele.png","alt","Kelebogile"],["src","/live/assets/images/team/tshego.png","alt","Tshegofatso"],["src","/live/assets/images/team/lesego.png","alt","Lesego"],["src","/live/assets/images/team/lesego.png","alt","Kearabilwe"]],template:function(i,r){1&i&&(I(0,"div",0),$(1,"app-header",1),I(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),P(6,"About Us"),D(),I(7,"p"),P(8,'We understand that e-commerce businesses have unique challenges compared to brick-and-mortar businesses. The most prominent challenge for online retailers has always been high product returns and refunds. For shoppers it is the "feel factor", the inability to touch, see, and fit a product as you would in a store. While returns and refunds are a standard part of the business model, they can considerably impact the brands\' profitability and reputation. That is why we created Try-On. '),D(),I(9,"p"),P(10,"An innovative-based solution that eliminates the need for "),I(11,"b"),P(12,"trail"),D(),P(13," and "),I(14,"b"),P(15,"error"),D(),P(16," and helps "),I(17,"b"),P(18,"bridge the gap between online and in-store shopping experiences"),D(),P(19," - improving customer satisfaction, reducing returns, and driving sales for online stores. "),D(),I(20,"p"),P(21,"Our innovation works for you, your business, and your customers."),D(),I(22,"p")(23,"u")(24,"b")(25,"a",5),P(26,"READ MORE"),D()()()()()(),I(27,"div",6),$(28,"div",7),D()(),I(29,"div",8)(30,"h4",9),P(31,"TEAM"),D(),I(32,"h1",10),P(33,"Our Fantastic Team"),D(),I(34,"div",11)(35,"div"),$(36,"img",12),I(37,"h4"),P(38,"KELEBOGILE MAKGALE"),D(),I(39,"h5"),P(40,"Founder & CEO"),D()(),I(41,"div"),$(42,"img",13),I(43,"h4"),P(44,"TSHEGOFATSO RAMOROA"),D(),I(45,"h5"),P(46,"Business Analyst"),D()(),I(47,"div"),$(48,"img",14),I(49,"h4"),P(50,"LESEGO MABE"),D(),I(51,"h5"),P(52,"Software Engineer"),D()(),I(53,"div"),$(54,"img",15),I(55,"h4"),P(56,"KEARABILWE NARE"),D(),I(57,"h5"),P(58,"Software Engineer"),D()()()()()),2&i&&(le(1),Pe("hidden",!r.showNav),le(2),Pe("ngClass",_A(3,$Re)[r.useBreakpoint]),le(22),Xn("routerLink","/",r.routes.FEATURES,""))},dependencies:[Jh,Aa,Us],styles:[".container-fluid[_ngcontent-%COMP%]{padding:0}p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:Montserrat,serif}.about-title[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:2rem}.about-title[_ngcontent-%COMP%], .about-subtitle[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{font-weight:500}a[_ngcontent-%COMP%]{color:#fff}div.col-md.text-white[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:justify;word-break:keep-all}.d-padding[_ngcontent-%COMP%]{padding-top:5rem}.m-padding[_ngcontent-%COMP%]{padding-top:6rem}.l-padding[_ngcontent-%COMP%]{padding-top:7rem}.xl-padding[_ngcontent-%COMP%]{padding-top:10rem}@media only screen and (min-width: 0px){div.row[_ngcontent-%COMP%]{background-color:#cf0a2c;height:100%;width:100%;margin:0}div.text-white[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-left:2rem;padding-right:1rem}.about-title[_ngcontent-%COMP%]{font-size:40px}.team-heading[_ngcontent-%COMP%]{font-size:32px}.about-subtitle[_ngcontent-%COMP%]{font-size:16px}.about-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/about.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;height:50vh}}@media only screen and (min-width: 320px){.about-title[_ngcontent-%COMP%]{font-size:48px}.team-heading[_ngcontent-%COMP%]{font-size:40px}.about-subtitle[_ngcontent-%COMP%]{font-size:24px}}@media only screen and (min-width: 450px){.about-title[_ngcontent-%COMP%]{font-size:64px}.team-heading[_ngcontent-%COMP%]{font-size:56px}.about-subtitle[_ngcontent-%COMP%]{font-size:24px}}@media only screen and (min-width: 700px){.about-title[_ngcontent-%COMP%]{font-size:72px}.team-heading[_ngcontent-%COMP%]{font-size:64px}.about-subtitle[_ngcontent-%COMP%]{font-size:24px}}@media only screen and (min-width: 768px){div.col-md[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:2rem}.about-title[_ngcontent-%COMP%]{font-size:72px}.team-heading[_ngcontent-%COMP%]{font-size:64px}.about-subtitle[_ngcontent-%COMP%]{font-size:24px}.about-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/about.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:100%}}@media only screen and (min-width: 831px){div.row[_ngcontent-%COMP%]{background-color:#cf0a2c;height:100%;width:100%;margin:0}div.col-md[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:2rem}}@media only screen and (min-width: 992px){div.col-md[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:2rem}}@media only screen and (min-width: 1242px){.about-title[_ngcontent-%COMP%]{font-size:80px}.team-heading[_ngcontent-%COMP%]{font-size:72px}.about-subtitle[_ngcontent-%COMP%]{font-size:24px}.about-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/about.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:100%}}@media only screen and (min-width: 1400px){p[_ngcontent-%COMP%]{font-size:20px}.about-picture[_ngcontent-%COMP%]{background-image:url(/live/assets/images/about.jpg);background-size:cover;background-origin:content-box;background-position:center center;height:100%}}.team-section[_ngcontent-%COMP%]{background-color:#f4f4f4!important;padding:5rem 0 5rem 2rem}.team-subheading[_ngcontent-%COMP%]{color:#cf0a2c}.team-heading[_ngcontent-%COMP%]{color:#190101}.team-body[_ngcontent-%COMP%]{padding-top:2rem;color:#190101;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:space-between}.team-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:400px}.team-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{padding-top:1rem;font-size:20px;font-weight:700}.team-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{font-weight:300}"]})}return n})();var bi=function(n){return n[n.USER_MUST_SIGN_IN=0]="USER_MUST_SIGN_IN",n[n.UNAUTHORISED=1]="UNAUTHORISED",n[n.DATABASE_ERROR=100]="DATABASE_ERROR",n[n.NOT_FOUND=101]="NOT_FOUND",n[n.DUPLICATES_NOT_ALLOWED=102]="DUPLICATES_NOT_ALLOWED",n}(bi||{});let js=(()=>{class n{static#e=this.DEFAULT_ERROR_MESSAGE="Something went wrong, please try later.";static#t=this.DEFAULT_DATA_ERROR="Something went wrong, data was corrupted.";static#n=this.SELECTED_ITEM="selected-clothing-article"}return n})();class fZ{}class qRe{}const Ac="*";function u2(n,e){return{type:7,name:n,definitions:e,options:{}}}function gp(n,e=null){return{type:4,styles:e,timings:n}}function pZ(n,e=null){return{type:2,steps:n,options:e}}function Ia(n){return{type:6,styles:n,offset:null}}function _p(n,e,t){return{type:0,name:n,styles:e,options:t}}function yp(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class zy{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class mZ{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const gZ=["toast-component",""];function KRe(n,e){if(1&n){const t=jn();I(0,"button",5),it("click",function(){return ln(t),un(ot().remove())}),I(1,"span",6),P(2,"\xd7"),D()()}}function XRe(n,e){if(1&n&&(ag(0),P(1),cg()),2&n){const t=ot(2);le(1),pi("[",t.duplicatesCount+1,"]")}}function YRe(n,e){if(1&n&&(I(0,"div"),P(1),kt(2,XRe,2,1,"ng-container",4),D()),2&n){const t=ot();Io(t.options.titleClass),Jr("aria-label",t.title),le(1),pi(" ",t.title," "),le(1),Pe("ngIf",t.duplicatesCount)}}function ZRe(n,e){if(1&n&&$(0,"div",7),2&n){const t=ot();Io(t.options.messageClass),Pe("innerHTML",t.message,Wm)}}function QRe(n,e){if(1&n&&(I(0,"div",8),P(1),D()),2&n){const t=ot();Io(t.options.messageClass),Jr("aria-label",t.message),le(1),pi(" ",t.message," ")}}function JRe(n,e){if(1&n&&(I(0,"div"),$(1,"div",9),D()),2&n){const t=ot();le(1),Za("width",t.width()+"%")}}class oPe{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class aPe{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class cPe{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Gt;_activate=new Gt;_manualClose=new Gt;_resetTimeout=new Gt;_countDuplicate=new Gt;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class FS{toastId;config;message;title;toastType;toastRef;_onTap=new Gt;_onAction=new Gt;constructor(e,t,i,r,s,o){this.toastId=e,this.config=t,this.message=i,this.title=r,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const yZ=new Se("ToastConfig");class lPe extends aPe{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,i){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=i}attachComponentPortal(e,t){const i=this._componentFactoryResolver.resolveComponentFactory(e.component);let r;return r=i.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let uPe=(()=>{class n{_document=Ie(rn);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class dPe{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let hPe=(()=>{class n{_overlayContainer=Ie(uPe);_componentFactoryResolver=Ie(qa);_appRef=Ie(da);_document=Ie(rn);_paneElements=new Map;create(t,i){return this._createOverlayRef(this.getPaneElement(t,i))}getPaneElement(t="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[t]||(this._paneElements.get(i)[t]=this._createPaneElement(t,i)),this._paneElements.get(i)[t]}_createPaneElement(t,i){const r=this._document.createElement("div");return r.id="toast-container",r.classList.add(t),r.classList.add("toast-container"),i?i.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(t){return new lPe(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new dPe(this._createPortalHost(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wd=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,i,r,s,o){this.overlay=i,this._injector=r,this.sanitizer=s,this.ngZone=o,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,i,r={},s=""){return this._preBuildNotification(s,t,i,this.applyConfig(r))}success(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,i,this.applyConfig(r))}error(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,i,this.applyConfig(r))}info(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,i,this.applyConfig(r))}warning(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,i,this.applyConfig(r))}clear(t){for(const i of this.toasts)if(void 0!==t){if(i.toastId===t)return void i.toastRef.manualClose()}else i.toastRef.manualClose()}remove(t){const i=this._findToast(t);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(t="",i="",r,s){const{includeTitleDuplicates:o}=this.toastrConfig;for(const a of this.toasts)if((!o||o&&a.title===t)&&a.message===i)return a.toastRef.onDuplicate(r,s),a;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===t)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(t,i,r,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,i,r,s)):this._buildNotification(t,i,r,s)}_buildNotification(t,i,r,s){if(!s.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(r,i,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||i)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=i;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const c=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let l=i;i&&s.enableHtml&&(l=this.sanitizer.sanitize(Qr.HTML,i));const u=new cPe(c),d=new FS(this.index,s,l,r,t,u),f=Tn.create({providers:[{provide:FS,useValue:d}],parent:this._injector}),p=new oPe(s.toastComponent,f),g=c.attach(p,s.newestOnTop);u.componentInstance=g.instance;const m={toastId:this.index,title:r||"",message:i||"",toastRef:u,onShown:u.afterActivate(),onHidden:u.afterClosed(),onTap:d.onTap(),onAction:d.onAction(),portal:g};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{m.toastRef.activate()})),this.toasts.push(m),m}static \u0275fac=function(i){return new(i||n)(z(yZ),z(hPe),z(Tn),z(L0),z(pt))};static \u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fPe={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=Qv(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if("inactive"===this.state().value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,i,r){this.toastrService=t,this.toastPackage=i,this.ngZone=r,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state=Qv({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(t=>({...t,value:"active"})),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width()||100===this.width()||!this.options.timeOut)return;const t=(new Date).getTime();this.width.set((this.hideTime-t)/this.options.timeOut*100),"increasing"===this.options.progressAnimation&&this.width.update(r=>100-r),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(t=>({...t,value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state().value&&(clearTimeout(this.timeout),this.state.update(t=>({...t,value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state().value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state().value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state().value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),i)):this.timeout=setTimeout(()=>t(),i)}outsideInterval(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),i)):this.intervalId=setInterval(()=>t(),i)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(i){return new(i||n)(j(wd),j(FS),j(pt))};static \u0275cmp=cn({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,r){1&i&&it("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&i&&(oA("@flyInOut",r._state),Io(r.toastClasses),Za("display",r.displayStyle))},standalone:!0,features:[gg],attrs:gZ,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,r){1&i&&(kt(0,KRe,3,0,"button",0),kt(1,YRe,3,5,"div",1),kt(2,ZRe,1,3,"div",2),kt(3,QRe,2,4,"div",3),kt(4,JRe,2,2,"div",4)),2&i&&(Pe("ngIf",r.options.closeButton),le(1),Pe("ngIf",r.title),le(1),Pe("ngIf",r.message&&r.options.enableHtml),le(1),Pe("ngIf",r.message&&!r.options.enableHtml),le(1),Pe("ngIf",r.options.progressBar))},dependencies:[Oo],encapsulation:2,data:{animation:[u2("flyInOut",[_p("inactive",Ia({opacity:0})),_p("active",Ia({opacity:1})),_p("removed",Ia({opacity:0})),yp("inactive => active",gp("{{ easeTime }}ms {{ easing }}")),yp("active => removed",gp("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})()},pPe=(n={})=>Ab([{provide:yZ,useValue:{default:fPe,config:n}}]);let mPe=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[pPe(t)]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({})}return n})();const gPe=["overlay"];function _Pe(n,e){1&n&&$(0,"div")}function yPe(n,e){if(1&n&&(I(0,"div"),kt(1,_Pe,1,0,"div",6),D()),2&n){const t=ot(2);Io(t.spinner.class),Za("color",t.spinner.color),le(1),Pe("ngForOf",t.spinner.divArray)}}function vPe(n,e){1&n&&($(0,"div",7),nl(1,"safeHtml")),2&n&&Pe("innerHTML",yg(1,1,ot(2).template),Wm)}function bPe(n,e){if(1&n&&(I(0,"div",1,2),kt(2,yPe,2,5,"div",3),kt(3,vPe,2,3,"div",4),I(4,"div",5),Qb(5),D()()),2&n){const t=ot();Za("background-color",t.spinner.bdColor)("z-index",t.spinner.zIndex)("position",t.spinner.fullScreen?"fixed":"absolute"),Pe("@.disabled",t.disableAnimation)("@fadeIn","in"),le(2),Pe("ngIf",!t.template),le(1),Pe("ngIf",t.template),le(1),Za("z-index",t.spinner.zIndex)}}const wPe=["*"],EPe={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},f2="primary";class Ed{constructor(e){Object.assign(this,e)}static create(e){return!e?.template&&!e?.type&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new Ed(e)}}let p2=(()=>{class n{constructor(){this.spinnerObservable=new us(null)}getSpinner(t){return this.spinnerObservable.asObservable().pipe(Ti(i=>i&&i.name===t))}show(t=f2,i){return new Promise((r,s)=>{setTimeout(()=>{i&&Object.keys(i).length?(i.name=t,this.spinnerObservable.next(new Ed({...i,show:!0})),r(!0)):(this.spinnerObservable.next(new Ed({name:t,show:!0})),r(!0))},10)})}hide(t=f2,i=10){return new Promise((r,s)=>{setTimeout(()=>{this.spinnerObservable.next(new Ed({name:t,show:!1})),r(!0)},i)})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const m2=new Se("NGX_SPINNER_CONFIG");let SPe=(()=>{class n{constructor(t){this._sanitizer=t}transform(t){if(t)return this._sanitizer.bypassSecurityTrustHtml(t)}static#e=this.\u0275fac=function(i){return new(i||n)(j(L0,16))};static#t=this.\u0275pipe=Wr({name:"safeHtml",type:n,pure:!0,standalone:!0})}return n})(),CPe=(()=>{class n{constructor(t,i,r,s){this.spinnerService=t,this.changeDetector=i,this.elementRef=r,this.globalConfig=s,this.disableAnimation=!1,this.spinner=new Ed,this.ngUnsubscribe=new Gt,this.setDefaultOptions=()=>{const{type:o}=this.globalConfig??{};this.spinner=Ed.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??o,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor="rgba(51,51,51,0.8)",this.zIndex=99999,this.color="#fff",this.size="large",this.fullScreen=!0,this.name=f2,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe(rc(this.ngUnsubscribe)).subscribe(t=>{this.setDefaultOptions(),Object.assign(this.spinner,t),t.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(t){return t===this.elementRef.nativeElement.parentElement||t.parentNode&&this.isSpinnerZone(t.parentNode)}ngOnChanges(t){for(const i in t)if(i){const r=t[i];if(r.isFirstChange())return;typeof r.currentValue<"u"&&r.currentValue!==r.previousValue&&""!==r.currentValue&&(this.spinner[i]=r.currentValue,"showSpinner"===i&&(r.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),"name"===i&&this.initObservable())}}getClass(t,i){this.spinner.divCount=EPe[t],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((s,o)=>o);let r="";switch(i.toLowerCase()){case"small":r="la-sm";break;case"medium":r="la-2x";break;case"large":r="la-3x"}return"la-"+t+" "+r}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(j(p2),j(Su),j(fi),j(m2,8))};static#t=this.\u0275cmp=cn({type:n,selectors:[["ngx-spinner"]],viewQuery:function(i,r){if(1&i&&ua(gPe,5),2&i){let s;ao(s=co())&&(r.spinnerDOM=s.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},standalone:!0,features:[ps,gg],ngContentSelectors:wPe,decls:1,vars:1,consts:[["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],["overlay",""],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(i,r){1&i&&(Zb(),kt(0,bPe,6,12,"div",0)),2&i&&Pe("ngIf",r.spinner.show)},dependencies:[SPe,Oo,Tg],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[u2("fadeIn",[_p("in",Ia({opacity:1})),yp(":enter",[Ia({opacity:0}),gp(300)]),yp(":leave",gp(200,Ia({opacity:0})))])]},changeDetection:0})}return n})(),xPe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:m2,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({imports:[Rr]})}return n})();const g2="user-measurements";let vZ=(()=>{class n{constructor(t,i,r){this.logger=t,this.authRepo=i,this.storage=r,this.firestore=Ie(fd)}getMeasurementsConfig(){var t=this;return N(function*(){try{const i=Ma(t.firestore,"measurementsConfig","default"),r=yield wS(i);if(null!=r.data())return r.data().measurements;throw t.logger.error("No config value set"),Error(bi.NOT_FOUND.toString())}catch(i){throw t.logger.error(`Error fetching measurements config from Firestore: ${i}`),Error(bi.DATABASE_ERROR.toString())}})()}saveMeasurements(t){var i=this;return N(function*(){if(!i.authRepo.isLoggedIn)throw Error(bi.USER_MUST_SIGN_IN.toString());try{const r=i.authRepo.userData,s={measurements:t,userId:r.uid},o=Ma(i.firestore,"measurements",r.uid);if(null!=(yield wS(o)).data()){const c=Ma(i.firestore,"measurements",r.uid);yield HX(c,s),i.storage.delete(g2)}else yield ES(Ma(i.firestore,"measurements",r.uid),s)}catch(r){throw i.logger.error(`Error checking measurements collection on firestore = ${r}`),Error(bi.DATABASE_ERROR.toString())}})()}getUserMeasurements(){var t=this;return N(function*(){if(!t.authRepo.isLoggedIn)throw Error(bi.USER_MUST_SIGN_IN.toString());{let i;if(i=yield t.storage.fetch(g2),null!=i)return i;try{const s=Ma(t.firestore,"measurements",t.authRepo.userData.uid),o=yield wS(s);return null!=o.data()?(i=o.data().measurements,yield t.storage.store(i,g2),i):[]}catch(r){throw t.logger.error(`Error fetching user's measurements: ${r}`),Error(bi.DATABASE_ERROR.toString())}}})()}static#e=this.\u0275fac=function(i){return new(i||n)(z(oi),z(pd),z(dp))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const TPe=["range"],MPe=function(n,e){return{background:n,"--thumb-color":e}};let bZ=(()=>{class n{set afterTargetRenders(t){null!=t&&null!=this.defaultValue&&(this._targetElem=t,this.onValueChange(this.defaultValue.toString()))}constructor(t){this.sanitizer=t,this.min=0,this.max=99,this.step=1,this.defaultValue=0,this.thumbColor="black",this.sliderColor="black",this.enabled=!0,this.onValueChanged=new qt}ngOnInit(){this.validateColors()}ngOnChanges(){this.validateColors()}validateColors(){var t=this.sanitizer.sanitize(Qr.STYLE,this.thumbColor);this.thumbColor=t??"black",t=null,t=this.sanitizer.sanitize(Qr.STYLE,this.sliderColor),this.sliderColor=t??"black"}onValueChange(t){var i=(Number(t)-this.min)/(this.max-this.min)*100;this._targetElem.nativeElement.setAttribute("style",`--thumb-color: ${this.thumbColor}; background: linear-gradient(to right, #cf0a2c 0%, #cf0a2c ${i}%, #ddd ${i}%, #ddd 100%);`),this.onValueChanged.emit(t)}static#e=this.\u0275fac=function(i){return new(i||n)(j(L0))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-range"]],viewQuery:function(i,r){if(1&i&&ua(TPe,5),2&i){let s;ao(s=co())&&(r.afterTargetRenders=s.first)}},inputs:{min:"min",max:"max",step:"step",enabled:"enabled",thumbColor:"thumbColor",sliderColor:"sliderColor",defaultValue:"defaultValue"},outputs:{onValueChanged:"onValueChanged"},features:[ps],decls:2,vars:8,consts:[["type","range",1,"slider",3,"min","max","value","disabled","ngStyle","input"],["range",""]],template:function(i,r){if(1&i){const s=jn();I(0,"input",0,1),it("input",function(){ln(s);const a=so(1);return un(r.onValueChange(a.value))}),D()}2&i&&(_s("min",r.min),_s("max",r.max),_s("value",r.defaultValue),Pe("disabled",!r.enabled)("ngStyle",CG(5,MPe,r.sliderColor,r.thumbColor)))},dependencies:[oI],styles:[".slider[_ngcontent-%COMP%]{appearance:none;width:100%;height:4px;outline:none;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:16px;height:16px;border-radius:24px;cursor:pointer;background:var(--thumb-color)}.black-thumb[_ngcontent-%COMP%]::-webkit-slider-thumb{background:black}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:24px;border-width:0;background:black;cursor:pointer}"]})}return n})();const EZ=1,DPe=2,Ic=3,BS=0,nOe=1,iOe=2,Vl=0,rOe=1,sOe=2,oOe=3,aOe=4,cOe=5,lOe=6,uOe=7,TZ="attached",zl=301,Cd=302,Hy=306,xd=1e3,_o=1001,nr=1003,Ep=1005,wi=1006,Ho=1008,Rc=1009,MZ=1010,AZ=1011,$y=1012,E2=1013,Hl=1014,$s=1015,Wy=1016,S2=1017,C2=1018,Sp=1020,IZ=35902,DZ=1021,RZ=1022,Ts=1023,PZ=1024,OZ=1025,Cp=1026,xp=1027,x2=1028,HS=1029,NZ=1030,T2=1031,M2=1033,GS=33776,jS=33777,$S=33778,WS=33779,A2=35840,I2=35841,D2=35842,R2=35843,P2=36196,O2=37492,N2=37496,k2=37808,L2=37809,F2=37810,U2=37811,B2=37812,V2=37813,z2=37814,H2=37815,G2=37816,j2=37817,$2=37818,W2=37819,q2=37820,K2=37821,qS=36492,X2=36494,Y2=36495,kZ=36283,Z2=36284,Q2=36285,J2=36286,qy=2300,Ky=2301,Vr="srgb",Sr="srgb-linear",iF="display-p3",XS="display-p3-linear",YS="linear",Vn="srgb",ZS="rec709",QS="p3",Ap=7680,VZ="300 es",Pc=2e3;class Md{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const zr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Ad=Math.PI/180,Ip=180/Math.PI;function Ws(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(zr[255&n]+zr[n>>8&255]+zr[n>>16&255]+zr[n>>24&255]+"-"+zr[255&e]+zr[e>>8&255]+"-"+zr[e>>16&15|64]+zr[e>>24&255]+"-"+zr[63&t|128]+zr[t>>8&255]+"-"+zr[t>>16&255]+zr[t>>24&255]+zr[255&i]+zr[i>>8&255]+zr[i>>16&255]+zr[i>>24&255]).toLowerCase()}function ai(n,e,t){return Math.max(e,Math.min(t,n))}function rF(n,e){return(n%e+e)%e}function Xy(n,e,t){return(1-t)*n+t*e}function as(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ut(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const HZ_DEG2RAD=Ad,HZ_radToDeg=function FOe(n){return n*Ip};class ce{constructor(e=0,t=0){ce.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ai(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Bt{constructor(e,t,i,r,s,o,a,c,l){Bt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,c,l)}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],g=r[0],m=r[3],_=r[6],y=r[1],v=r[4],b=r[7],M=r[2],S=r[5],x=r[8];return s[0]=o*g+a*y+c*M,s[3]=o*m+a*v+c*S,s[6]=o*_+a*b+c*x,s[1]=l*g+u*y+d*M,s[4]=l*m+u*v+d*S,s[7]=l*_+u*b+d*x,s[2]=h*g+f*y+p*M,s[5]=h*m+f*v+p*S,s[8]=h*_+f*b+p*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*o-a*l,h=a*c-u*s,f=l*s-o*c,p=t*d+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=d*g,e[1]=(r*l-u*i)*g,e[2]=(a*i-r*o)*g,e[3]=h*g,e[4]=(u*t-r*c)*g,e[5]=(r*s-a*t)*g,e[6]=f*g,e[7]=(i*c-l*t)*g,e[8]=(o*t-i*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(sF.makeScale(e,t)),this}rotate(e){return this.premultiply(sF.makeRotation(-e)),this}translate(e,t){return this.premultiply(sF.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const sF=new Bt;function GZ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Yy(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function GOe(){const n=Yy("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const jZ={};function oF(n){n in jZ||(jZ[n]=!0,console.warn(n))}const $Z=(new Bt).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),WZ=(new Bt).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),tC={[Sr]:{transfer:YS,primaries:ZS,toReference:n=>n,fromReference:n=>n},[Vr]:{transfer:Vn,primaries:ZS,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[XS]:{transfer:YS,primaries:QS,toReference:n=>n.applyMatrix3(WZ),fromReference:n=>n.applyMatrix3($Z)},[iF]:{transfer:Vn,primaries:QS,toReference:n=>n.convertSRGBToLinear().applyMatrix3(WZ),fromReference:n=>n.applyMatrix3($Z).convertLinearToSRGB()}},$Oe=new Set([Sr,XS]),an={enabled:!0,_workingColorSpace:Sr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!$Oe.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){return!1!==this.enabled&&e!==t&&e&&t?(0,tC[t].fromReference)((0,tC[e].toReference)(n)):n},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return tC[n].primaries},getTransfer:function(n){return""===n?YS:tC[n].transfer}};function Rp(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function aF(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Pp;class WOe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Pp&&(Pp=Yy("canvas")),Pp.width=e.width,Pp.height=e.height;const i=Pp.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Pp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Yy("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*Rp(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Rp(t[i]/255)):Rp(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let qOe=0;class Op{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:qOe++}),this.uuid=Ws(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(cF(r[o].isDataTexture?r[o].image:r[o]))}else s=cF(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function cF(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?WOe.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let KOe=0,yo=(()=>{class n extends Md{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=_o,s=_o,o=wi,a=Ho,c=Ts,l=Rc,u=n.DEFAULT_ANISOTROPY,d=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:KOe++}),this.uuid=Ws(),this.name="",this.source=new Op(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new ce(0,0),this.repeat=new ce(1,1),this.center=new ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case xd:t.x=t.x-Math.floor(t.x);break;case _o:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case xd:t.y=t.y-Math.floor(t.y);break;case _o:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class xn{constructor(e=0,t=0,i=0,r=1){xn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],d=c[8],h=c[1],f=c[5],p=c[9],g=c[2],m=c[6],_=c[10];if(Math.abs(u-h)<.01&&Math.abs(d-g)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+g)<.1&&Math.abs(p+m)<.1&&Math.abs(l+f+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(l+1)/2,b=(f+1)/2,M=(_+1)/2,S=(u+h)/4,x=(d+g)/4,O=(p+m)/4;return v>b&&v>M?v<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(v),r=S/i,s=x/i):b>M?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=S/r,s=O/r):M<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(M),i=x/s,r=O/s),this.set(i,r,s,t),this}let y=Math.sqrt((m-p)*(m-p)+(d-g)*(d-g)+(h-u)*(h-u));return Math.abs(y)<.001&&(y=1),this.x=(m-p)/y,this.y=(d-g)/y,this.z=(h-u)/y,this.w=Math.acos((l+f+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class XOe extends Md{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new xn(0,0,e,t),this.scissorTest=!1,this.viewport=new xn(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:wi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new yo(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Op(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Id extends XOe{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class lF extends yo{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=nr,this.minFilter=nr,this.wrapR=_o,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class qZ extends yo{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=nr,this.minFilter=nr,this.wrapR=_o,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Cr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],g=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=g);if(d!==g||c!==h||l!==f||u!==p){let m=1-a;const _=c*h+l*f+u*p+d*g,y=_>=0?1:-1,v=1-_*_;if(v>Number.EPSILON){const M=Math.sqrt(v),S=Math.atan2(M,_*y);m=Math.sin(m*S)/M,a=Math.sin(a*S)/M}const b=a*y;if(c=c*m+h*b,l=l*m+f*b,u=u*m+p*b,d=d*m+g*b,m===1-a){const M=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=M,l*=M,u*=M,d*=M}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+c*f-l*h,e[t+1]=c*p+u*h+l*d-a*f,e[t+2]=l*p+u*f+a*h-c*d,e[t+3]=u*p-a*d-c*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),d=a(s/2),h=c(i/2),f=c(r/2),p=c(s/2);switch(o){case"XYZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"YZX":this._x=h*u*d+l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d-h*f*p;break;case"XZY":this._x=h*u*d-l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-c)*f,this._y=(s-l)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-c)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+l)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-l)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(c+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+l)/f,this._y=(c+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ai(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class k{constructor(e=0,t=0,i=0){k.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(KZ.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(KZ.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+c*l+o*d-a*u,this.y=i+c*u+a*l-s*d,this.z=r+c*d+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return uF.copy(this).projectOnVector(e),this.sub(uF)}reflect(e){return this.sub(uF.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ai(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const uF=new k,KZ=new Cr;class Hr{constructor(e=new k(1/0,1/0,1/0),t=new k(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Go.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Go.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Go.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const s=i.getAttribute("position");if(!0===t&&void 0!==s&&!0!==e.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===e.isMesh?e.getVertexPosition(o,Go):Go.fromBufferAttribute(s,o),Go.applyMatrix4(e.matrixWorld),this.expandByPoint(Go);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),nC.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),nC.copy(i.boundingBox)),nC.applyMatrix4(e.matrixWorld),this.union(nC)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Go),Go.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Zy),iC.subVectors(this.max,Zy),Np.subVectors(e.a,Zy),kp.subVectors(e.b,Zy),Lp.subVectors(e.c,Zy),jl.subVectors(kp,Np),$l.subVectors(Lp,kp),Dd.subVectors(Np,Lp);let t=[0,-jl.z,jl.y,0,-$l.z,$l.y,0,-Dd.z,Dd.y,jl.z,0,-jl.x,$l.z,0,-$l.x,Dd.z,0,-Dd.x,-jl.y,jl.x,0,-$l.y,$l.x,0,-Dd.y,Dd.x,0];return!(!dF(t,Np,kp,Lp,iC)||(t=[1,0,0,0,1,0,0,0,1],!dF(t,Np,kp,Lp,iC)))&&(rC.crossVectors(jl,$l),t=[rC.x,rC.y,rC.z],dF(t,Np,kp,Lp,iC))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Go).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Go).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Oc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Oc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Oc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Oc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Oc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Oc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Oc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Oc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Oc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Oc=[new k,new k,new k,new k,new k,new k,new k,new k],Go=new k,nC=new Hr,Np=new k,kp=new k,Lp=new k,jl=new k,$l=new k,Dd=new k,Zy=new k,iC=new k,rC=new k,Rd=new k;function dF(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Rd.fromArray(n,s);const a=r.x*Math.abs(Rd.x)+r.y*Math.abs(Rd.y)+r.z*Math.abs(Rd.z),c=e.dot(Rd),l=t.dot(Rd),u=i.dot(Rd);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const YOe=new Hr,Qy=new k,hF=new k;class Gr{constructor(e=new k,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):YOe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qy.subVectors(e,this.center);const t=Qy.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Qy,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(hF.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qy.copy(e.center).add(hF)),this.expandByPoint(Qy.copy(e.center).sub(hF))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Nc=new k,fF=new k,sC=new k,Wl=new k,pF=new k,oC=new k,mF=new k;class Fp{constructor(e=new k,t=new k(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Nc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Nc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Nc.copy(this.origin).addScaledVector(this.direction,t),Nc.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){fF.copy(e).add(t).multiplyScalar(.5),sC.copy(t).sub(e).normalize(),Wl.copy(this.origin).sub(fF);const s=.5*e.distanceTo(t),o=-this.direction.dot(sC),a=Wl.dot(this.direction),c=-Wl.dot(sC),l=Wl.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*c-a,h=o*a-c,p=s*u,d>=0)if(h>=-p)if(h<=p){const g=1/u;d*=g,h*=g,f=d*(d+o*h+2*a)+h*(o*d+h+2*c)+l}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l):h<=p?(d=0,h=Math.min(Math.max(-s,-c),s),f=h*(h+2*c)+l):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(fF).addScaledVector(sC,h),f}intersectSphere(e,t){Nc.subVectors(e.center,this.origin);const i=Nc.dot(this.direction),r=Nc.dot(Nc)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-h.z)*d,c=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,c=(e.min.z-h.z)*d),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Nc)}intersectTriangle(e,t,i,r,s){pF.subVectors(t,e),oC.subVectors(i,e),mF.crossVectors(pF,oC);let a,o=this.direction.dot(mF);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Wl.subVectors(this.origin,e);const c=a*this.direction.dot(oC.crossVectors(Wl,oC));if(c<0)return null;const l=a*this.direction.dot(pF.cross(Wl));if(l<0||c+l>o)return null;const u=-a*Wl.dot(mF);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class lt{constructor(e,t,i,r,s,o,a,c,l,u,d,h,f,p,g,m){lt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,c,l,u,d,h,f,p,g,m)}set(e,t,i,r,s,o,a,c,l,u,d,h,f,p,g,m){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=c,_[2]=l,_[6]=u,_[10]=d,_[14]=h,_[3]=f,_[7]=p,_[11]=g,_[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new lt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Up.setFromMatrixColumn(e,0).length(),s=1/Up.setFromMatrixColumn(e,1).length(),o=1/Up.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,p=a*u,g=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=f+p*l,t[5]=h-g*l,t[9]=-a*c,t[2]=g-h*l,t[6]=p+f*l,t[10]=o*c}else if("YXZ"===e.order){const h=c*u,f=c*d,p=l*u,g=l*d;t[0]=h+g*a,t[4]=p*a-f,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=g+h*a,t[10]=o*c}else if("ZXY"===e.order){const h=c*u,f=c*d,p=l*u,g=l*d;t[0]=h-g*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=g-h*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const h=o*u,f=o*d,p=a*u,g=a*d;t[0]=c*u,t[4]=p*l-f,t[8]=h*l+g,t[1]=c*d,t[5]=g*l+h,t[9]=f*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const h=o*c,f=o*l,p=a*c,g=a*l;t[0]=c*u,t[4]=g-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=f*d+p,t[10]=h-g*d}else if("XZY"===e.order){const h=o*c,f=o*l,p=a*c,g=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=h*d+g,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=g*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ZOe,e,QOe)}lookAt(e,t,i){const r=this.elements;return qs.subVectors(e,t),0===qs.lengthSq()&&(qs.z=1),qs.normalize(),ql.crossVectors(i,qs),0===ql.lengthSq()&&(1===Math.abs(i.z)?qs.x+=1e-4:qs.z+=1e-4,qs.normalize(),ql.crossVectors(i,qs)),ql.normalize(),aC.crossVectors(qs,ql),r[0]=ql.x,r[4]=aC.x,r[8]=qs.x,r[1]=ql.y,r[5]=aC.y,r[9]=qs.y,r[2]=ql.z,r[6]=aC.z,r[10]=qs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],g=i[6],m=i[10],_=i[14],y=i[3],v=i[7],b=i[11],M=i[15],S=r[0],x=r[4],O=r[8],C=r[12],w=r[1],U=r[5],q=r[9],G=r[13],Y=r[2],ae=r[6],B=r[10],X=r[14],H=r[3],de=r[7],Ce=r[11],Me=r[15];return s[0]=o*S+a*w+c*Y+l*H,s[4]=o*x+a*U+c*ae+l*de,s[8]=o*O+a*q+c*B+l*Ce,s[12]=o*C+a*G+c*X+l*Me,s[1]=u*S+d*w+h*Y+f*H,s[5]=u*x+d*U+h*ae+f*de,s[9]=u*O+d*q+h*B+f*Ce,s[13]=u*C+d*G+h*X+f*Me,s[2]=p*S+g*w+m*Y+_*H,s[6]=p*x+g*U+m*ae+_*de,s[10]=p*O+g*q+m*B+_*Ce,s[14]=p*C+g*G+m*X+_*Me,s[3]=y*S+v*w+b*Y+M*H,s[7]=y*x+v*U+b*ae+M*de,s[11]=y*O+v*q+b*B+M*Ce,s[15]=y*C+v*G+b*X+M*Me,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*c*d-r*l*d-s*a*h+i*l*h+r*a*f-i*c*f)+e[7]*(+t*c*f-t*l*h+s*o*h-r*o*f+r*l*u-s*c*u)+e[11]*(+t*l*d-t*a*f-s*o*d+i*o*f+s*a*u-i*l*u)+e[15]*(-r*a*u-t*c*d+t*a*h+r*o*d-i*o*h+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],_=e[15],y=d*m*l-g*h*l+g*c*f-a*m*f-d*c*_+a*h*_,v=p*h*l-u*m*l-p*c*f+o*m*f+u*c*_-o*h*_,b=u*g*l-p*d*l+p*a*f-o*g*f-u*a*_+o*d*_,M=p*d*c-u*g*c-p*a*h+o*g*h+u*a*m-o*d*m,S=t*y+i*v+r*b+s*M;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/S;return e[0]=y*x,e[1]=(g*h*s-d*m*s-g*r*f+i*m*f+d*r*_-i*h*_)*x,e[2]=(a*m*s-g*c*s+g*r*l-i*m*l-a*r*_+i*c*_)*x,e[3]=(d*c*s-a*h*s-d*r*l+i*h*l+a*r*f-i*c*f)*x,e[4]=v*x,e[5]=(u*m*s-p*h*s+p*r*f-t*m*f-u*r*_+t*h*_)*x,e[6]=(p*c*s-o*m*s-p*r*l+t*m*l+o*r*_-t*c*_)*x,e[7]=(o*h*s-u*c*s+u*r*l-t*h*l-o*r*f+t*c*f)*x,e[8]=b*x,e[9]=(p*d*s-u*g*s-p*i*f+t*g*f+u*i*_-t*d*_)*x,e[10]=(o*g*s-p*a*s+p*i*l-t*g*l-o*i*_+t*a*_)*x,e[11]=(u*a*s-o*d*s-u*i*l+t*d*l+o*i*f-t*a*f)*x,e[12]=M*x,e[13]=(u*g*r-p*d*r+p*i*h-t*g*h-u*i*m+t*d*m)*x,e[14]=(p*a*r-o*g*r-p*i*c+t*g*c+o*i*m-t*a*m)*x,e[15]=(o*d*r-u*a*r+u*i*c-t*d*c-o*i*h+t*a*h)*x,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,d=a+a,h=s*l,f=s*u,p=s*d,g=o*u,m=o*d,_=a*d,y=c*l,v=c*u,b=c*d,M=i.x,S=i.y,x=i.z;return r[0]=(1-(g+_))*M,r[1]=(f+b)*M,r[2]=(p-v)*M,r[3]=0,r[4]=(f-b)*S,r[5]=(1-(h+_))*S,r[6]=(m+y)*S,r[7]=0,r[8]=(p+v)*x,r[9]=(m-y)*x,r[10]=(1-(h+g))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Up.set(r[0],r[1],r[2]).length();const o=Up.set(r[4],r[5],r[6]).length(),a=Up.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],jo.copy(this);const l=1/s,u=1/o,d=1/a;return jo.elements[0]*=l,jo.elements[1]*=l,jo.elements[2]*=l,jo.elements[4]*=u,jo.elements[5]*=u,jo.elements[6]*=u,jo.elements[8]*=d,jo.elements[9]*=d,jo.elements[10]*=d,t.setFromRotationMatrix(jo),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Pc){const c=this.elements,l=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r);let f,p;if(a===Pc)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);f=-o/(o-s),p=-o*s/(o-s)}return c[0]=l,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=u,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Pc){const c=this.elements,l=1/(t-e),u=1/(i-r),d=1/(o-s),h=(t+e)*l,f=(i+r)*u;let p,g;if(a===Pc)p=(o+s)*d,g=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=s*d,g=-1*d}return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-f,c[2]=0,c[6]=0,c[10]=g,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Up=new k,jo=new lt,ZOe=new k(0,0,0),QOe=new k(1,1,1),ql=new k,aC=new k,qs=new k,XZ=new lt,YZ=new Cr;let kc=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],d=s[9],h=s[2],f=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(ai(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ai(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(ai(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-ai(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(ai(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-ai(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return XZ.makeRotationFromQuaternion(t),this.setFromRotationMatrix(XZ,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return YZ.setFromEuler(this),this.setFromQuaternion(YZ,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class gF{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let JOe=0;const ZZ=new k,Bp=new Cr,Lc=new lt,cC=new k,Jy=new k,eNe=new k,tNe=new Cr,QZ=new k(1,0,0),JZ=new k(0,1,0),eQ=new k(0,0,1),tQ={type:"added"},nNe={type:"removed"},Vp={type:"childadded",child:null},_F={type:"childremoved",child:null};let Hi=(()=>{class n extends Md{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:JOe++}),this.uuid=Ws(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new k,i=new kc,r=new Cr,s=new k(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new lt},normalMatrix:{value:new Bt}}),this.matrix=new lt,this.matrixWorld=new lt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new gF,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Bp.setFromAxisAngle(t,i),this.quaternion.multiply(Bp),this}rotateOnWorldAxis(t,i){return Bp.setFromAxisAngle(t,i),this.quaternion.premultiply(Bp),this}rotateX(t){return this.rotateOnAxis(QZ,t)}rotateY(t){return this.rotateOnAxis(JZ,t)}rotateZ(t){return this.rotateOnAxis(eQ,t)}translateOnAxis(t,i){return ZZ.copy(t).applyQuaternion(this.quaternion),this.position.add(ZZ.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(QZ,t)}translateY(t){return this.translateOnAxis(JZ,t)}translateZ(t){return this.translateOnAxis(eQ,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Lc.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?cC.copy(t):cC.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Jy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Lc.lookAt(Jy,cC,this.up):Lc.lookAt(cC,Jy,this.up),this.quaternion.setFromRotationMatrix(Lc),s&&(Lc.extractRotation(s.matrixWorld),Bp.setFromRotationMatrix(Lc),this.quaternion.premultiply(Bp.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(tQ),Vp.child=t,this.dispatchEvent(Vp),Vp.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(nNe),_F.child=t,this.dispatchEvent(_F),_F.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Lc.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Lc.multiply(t.parent.matrixWorld)),t.applyMatrix4(Lc),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(tQ),Vp.child=t,this.dispatchEvent(Vp),Vp.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jy,t,eNe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jy,tNe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(s.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),g=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),g.length>0&&(r.nodes=g)}return r.object=s,r;function a(c){const l=[];for(const u in c){const d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new k(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const $o=new k,Fc=new k,yF=new k,Uc=new k,zp=new k,Hp=new k,nQ=new k,vF=new k,bF=new k,wF=new k;class vo{constructor(e=new k,t=new k,i=new k){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),$o.subVectors(e,t),r.cross($o);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){$o.subVectors(r,t),Fc.subVectors(i,t),yF.subVectors(e,t);const o=$o.dot($o),a=$o.dot(Fc),c=$o.dot(yF),l=Fc.dot(Fc),u=Fc.dot(yF),d=o*l-a*a;if(0===d)return s.set(0,0,0),null;const h=1/d,f=(l*c-a*u)*h,p=(o*u-a*c)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return null!==this.getBarycoord(e,t,i,r,Uc)&&Uc.x>=0&&Uc.y>=0&&Uc.x+Uc.y<=1}static getInterpolation(e,t,i,r,s,o,a,c){return null===this.getBarycoord(e,t,i,r,Uc)?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Uc.x),c.addScaledVector(o,Uc.y),c.addScaledVector(a,Uc.z),c)}static isFrontFacing(e,t,i,r){return $o.subVectors(i,t),Fc.subVectors(e,t),$o.cross(Fc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return $o.subVectors(this.c,this.b),Fc.subVectors(this.a,this.b),.5*$o.cross(Fc).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return vo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return vo.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return vo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;zp.subVectors(r,i),Hp.subVectors(s,i),vF.subVectors(e,i);const c=zp.dot(vF),l=Hp.dot(vF);if(c<=0&&l<=0)return t.copy(i);bF.subVectors(e,r);const u=zp.dot(bF),d=Hp.dot(bF);if(u>=0&&d<=u)return t.copy(r);const h=c*d-u*l;if(h<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(zp,o);wF.subVectors(e,s);const f=zp.dot(wF),p=Hp.dot(wF);if(p>=0&&f<=p)return t.copy(s);const g=f*l-c*p;if(g<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(Hp,a);const m=u*p-f*d;if(m<=0&&d-u>=0&&f-p>=0)return nQ.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(nQ,a);const _=1/(m+g+h);return o=g*_,a=h*_,t.copy(i).addScaledVector(zp,o).addScaledVector(Hp,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const iQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Kl={h:0,s:0,l:0},lC={h:0,s:0,l:0};function EF(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class Le{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Vr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,an.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=an.workingColorSpace){return this.r=e,this.g=t,this.b=i,an.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=an.workingColorSpace){if(e=rF(e,1),t=ai(t,0,1),i=ai(i,0,1),0===t)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=EF(o,s,e+1/3),this.g=EF(o,s,e),this.b=EF(o,s,e-1/3)}return an.toWorkingColorSpace(this,r),this}setStyle(e,t=Vr){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Vr){const i=iQ[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Rp(e.r),this.g=Rp(e.g),this.b=Rp(e.b),this}copyLinearToSRGB(e){return this.r=aF(e.r),this.g=aF(e.g),this.b=aF(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vr){return an.fromWorkingColorSpace(jr.copy(this),e),65536*Math.round(ai(255*jr.r,0,255))+256*Math.round(ai(255*jr.g,0,255))+Math.round(ai(255*jr.b,0,255))}getHexString(e=Vr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=an.workingColorSpace){an.fromWorkingColorSpace(jr.copy(this),t);const i=jr.r,r=jr.g,s=jr.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let c,l;const u=(a+o)/2;if(a===o)c=0,l=0;else{const d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case i:c=(r-s)/d+(r<s?6:0);break;case r:c=(s-i)/d+2;break;case s:c=(i-r)/d+4}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=an.workingColorSpace){return an.fromWorkingColorSpace(jr.copy(this),t),e.r=jr.r,e.g=jr.g,e.b=jr.b,e}getStyle(e=Vr){an.fromWorkingColorSpace(jr.copy(this),e);const t=jr.r,i=jr.g,r=jr.b;return e!==Vr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(Kl),this.setHSL(Kl.h+e,Kl.s+t,Kl.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Kl),e.getHSL(lC);const i=Xy(Kl.h,lC.h,t),r=Xy(Kl.s,lC.s,t),s=Xy(Kl.l,lC.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const jr=new Le;Le.NAMES=iQ;let iNe=0;class Wo extends Md{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iNe++}),this.uuid=Ws(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Le(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ap,this.stencilZFail=Ap,this.stencilZPass=Ap,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ap&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ap&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ap&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class bo extends Wo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new kc,this.combine=BS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Oi=new k,uC=new ce;class Wn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=$s,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return oF("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)uC.fromBufferAttribute(this,t),uC.applyMatrix3(e),this.setXY(t,uC.x,uC.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix3(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix4(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyNormalMatrix(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.transformDirection(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=as(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ut(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=as(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=as(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=as(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=as(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ut(t,this.array),i=Ut(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Ut(t,this.array),i=Ut(i,this.array),r=Ut(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Ut(t,this.array),i=Ut(i,this.array),r=Ut(r,this.array),s=Ut(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class rQ extends Wn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class sQ extends Wn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Qe extends Wn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let sNe=0;const wo=new lt,SF=new Hi,Gp=new k,Ks=new Hr,tv=new Hr,ir=new k;class Ht extends Md{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:sNe++}),this.uuid=Ws(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(GZ(e)?sQ:rQ)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Bt).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return wo.makeRotationFromQuaternion(e),this.applyMatrix4(wo),this}rotateX(e){return wo.makeRotationX(e),this.applyMatrix4(wo),this}rotateY(e){return wo.makeRotationY(e),this.applyMatrix4(wo),this}rotateZ(e){return wo.makeRotationZ(e),this.applyMatrix4(wo),this}translate(e,t,i){return wo.makeTranslation(e,t,i),this.applyMatrix4(wo),this}scale(e,t,i){return wo.makeScale(e,t,i),this.applyMatrix4(wo),this}lookAt(e){return SF.lookAt(e),SF.updateMatrix(),this.applyMatrix4(SF.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gp).negate(),this.translate(Gp.x,Gp.y,Gp.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Qe(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Hr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Ks.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(ir.addVectors(this.boundingBox.min,Ks.min),this.boundingBox.expandByPoint(ir),ir.addVectors(this.boundingBox.max,Ks.max),this.boundingBox.expandByPoint(ir)):(this.boundingBox.expandByPoint(Ks.min),this.boundingBox.expandByPoint(Ks.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Gr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new k,1/0);if(e){const i=this.boundingSphere.center;if(Ks.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)tv.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(ir.addVectors(Ks.min,tv.min),Ks.expandByPoint(ir),ir.addVectors(Ks.max,tv.max),Ks.expandByPoint(ir)):(Ks.expandByPoint(tv.min),Ks.expandByPoint(tv.max));Ks.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ir.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ir));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)ir.fromBufferAttribute(a,l),c&&(Gp.fromBufferAttribute(e,l),ir.add(Gp)),r=Math.max(r,i.distanceToSquared(ir))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,r=t.normal,s=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Wn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],c=[];for(let O=0;O<i.count;O++)a[O]=new k,c[O]=new k;const l=new k,u=new k,d=new k,h=new ce,f=new ce,p=new ce,g=new k,m=new k;function _(O,C,w){l.fromBufferAttribute(i,O),u.fromBufferAttribute(i,C),d.fromBufferAttribute(i,w),h.fromBufferAttribute(s,O),f.fromBufferAttribute(s,C),p.fromBufferAttribute(s,w),u.sub(l),d.sub(l),f.sub(h),p.sub(h);const U=1/(f.x*p.y-p.x*f.y);isFinite(U)&&(g.copy(u).multiplyScalar(p.y).addScaledVector(d,-f.y).multiplyScalar(U),m.copy(d).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(U),a[O].add(g),a[C].add(g),a[w].add(g),c[O].add(m),c[C].add(m),c[w].add(m))}let y=this.groups;0===y.length&&(y=[{start:0,count:e.count}]);for(let O=0,C=y.length;O<C;++O){const w=y[O],U=w.start;for(let G=U,Y=U+w.count;G<Y;G+=3)_(e.getX(G+0),e.getX(G+1),e.getX(G+2))}const v=new k,b=new k,M=new k,S=new k;function x(O){M.fromBufferAttribute(r,O),S.copy(M);const C=a[O];v.copy(C),v.sub(M.multiplyScalar(M.dot(C))).normalize(),b.crossVectors(S,C);const U=b.dot(c[O])<0?-1:1;o.setXYZW(O,v.x,v.y,v.z,U)}for(let O=0,C=y.length;O<C;++O){const w=y[O],U=w.start;for(let G=U,Y=U+w.count;G<Y;G+=3)x(e.getX(G+0)),x(e.getX(G+1)),x(e.getX(G+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Wn(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new k,s=new k,o=new k,a=new k,c=new k,l=new k,u=new k,d=new k;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),g=e.getX(h+1),m=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,m),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),c.fromBufferAttribute(i,g),l.fromBufferAttribute(i,m),a.add(u),c.add(u),l.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(g,c.x,c.y,c.z),i.setXYZ(m,l.x,l.y,l.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ir.fromBufferAttribute(e,t),ir.normalize(),e.setXYZ(t,ir.x,ir.y,ir.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,d=a.normalized,h=new l.constructor(c.length*u);let f=0,p=0;for(let g=0,m=c.length;g<m;g++){f=a.isInterleavedBufferAttribute?c[g]*a.data.stride+a.offset:c[g]*u;for(let _=0;_<u;_++)h[p++]=l[f++]}return new Wn(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ht,i=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],i);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,d=l.length;u<d;u++){const f=e(l[u],i);c.push(f)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let d=0,h=l.length;d<h;d++)u.push(l[d].toJSON(e.data));u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],d=s[l];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const oQ=new lt,Pd=new Fp,dC=new Gr,aQ=new k,jp=new k,$p=new k,Wp=new k,CF=new k,hC=new k,fC=new ce,pC=new ce,mC=new ce,cQ=new k,lQ=new k,uQ=new k,gC=new k,_C=new k;class rr extends Hi{constructor(e=new Ht,t=new bo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){hC.set(0,0,0);for(let c=0,l=s.length;c<l;c++){const u=a[c];0!==u&&(CF.fromBufferAttribute(s[c],e),hC.addScaledVector(o?CF:CF.sub(t),u))}t.add(hC)}return t}raycast(e,t){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),dC.copy(i.boundingSphere),dC.applyMatrix4(s),Pd.copy(e.ray).recast(e.near),(!1!==dC.containsPoint(Pd.origin)||!(null===Pd.intersectSphere(dC,aQ)||Pd.origin.distanceToSquared(aQ)>(e.far-e.near)**2))&&(oQ.copy(s).invert(),Pd.copy(e.ray).applyMatrix4(oQ),(null===i.boundingBox||!1!==Pd.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,Pd)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,f=s.drawRange;if(null!==a)if(Array.isArray(o))for(let p=0,g=h.length;p<g;p++){const m=h[p],_=o[m.materialIndex];for(let b=Math.max(m.start,f.start),M=Math.min(a.count,Math.min(m.start+m.count,f.start+f.count));b<M;b+=3)r=yC(this,_,e,i,l,u,d,a.getX(b),a.getX(b+1),a.getX(b+2)),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,f.start),_=Math.min(a.count,f.start+f.count);m<_;m+=3)r=yC(this,o,e,i,l,u,d,a.getX(m),a.getX(m+1),a.getX(m+2)),r&&(r.faceIndex=Math.floor(m/3),t.push(r));else if(void 0!==c)if(Array.isArray(o))for(let p=0,g=h.length;p<g;p++){const m=h[p],_=o[m.materialIndex];for(let b=Math.max(m.start,f.start),M=Math.min(c.count,Math.min(m.start+m.count,f.start+f.count));b<M;b+=3)r=yC(this,_,e,i,l,u,d,b,b+1,b+2),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,f.start),_=Math.min(c.count,f.start+f.count);m<_;m+=3)r=yC(this,o,e,i,l,u,d,m,m+1,m+2),r&&(r.faceIndex=Math.floor(m/3),t.push(r))}}function yC(n,e,t,i,r,s,o,a,c,l){n.getVertexPosition(a,jp),n.getVertexPosition(c,$p),n.getVertexPosition(l,Wp);const u=function oNe(n,e,t,i,r,s,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,0===e.side,a),null===c)return null;_C.copy(a),_C.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(_C);return l<t.near||l>t.far?null:{distance:l,point:_C.clone(),object:n}}(n,e,t,i,jp,$p,Wp,gC);if(u){r&&(fC.fromBufferAttribute(r,a),pC.fromBufferAttribute(r,c),mC.fromBufferAttribute(r,l),u.uv=vo.getInterpolation(gC,jp,$p,Wp,fC,pC,mC,new ce)),s&&(fC.fromBufferAttribute(s,a),pC.fromBufferAttribute(s,c),mC.fromBufferAttribute(s,l),u.uv1=vo.getInterpolation(gC,jp,$p,Wp,fC,pC,mC,new ce)),o&&(cQ.fromBufferAttribute(o,a),lQ.fromBufferAttribute(o,c),uQ.fromBufferAttribute(o,l),u.normal=vo.getInterpolation(gC,jp,$p,Wp,cQ,lQ,uQ,new k),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:c,c:l,normal:new k,materialIndex:0};vo.getNormal(jp,$p,Wp,d.normal),u.face=d}return u}class qp extends Ht{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],d=[];let h=0,f=0;function p(g,m,_,y,v,b,M,S,x,O,C){const w=b/x,U=M/O,q=b/2,G=M/2,Y=S/2,ae=x+1,B=O+1;let X=0,H=0;const de=new k;for(let Ce=0;Ce<B;Ce++){const Me=Ce*U-G;for(let st=0;st<ae;st++)de[g]=(st*w-q)*y,de[m]=Me*v,de[_]=Y,l.push(de.x,de.y,de.z),de[g]=0,de[m]=0,de[_]=S>0?1:-1,u.push(de.x,de.y,de.z),d.push(st/x),d.push(1-Ce/O),X+=1}for(let Ce=0;Ce<O;Ce++)for(let Me=0;Me<x;Me++){const ft=h+Me+ae*(Ce+1),J=h+(Me+1)+ae*(Ce+1),ve=h+(Me+1)+ae*Ce;c.push(h+Me+ae*Ce,ft,ve),c.push(ft,J,ve),H+=6}a.addGroup(f,H,C),f+=H,h+=X}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Qe(l,3)),this.setAttribute("normal",new Qe(u,3)),this.setAttribute("uv",new Qe(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Kp(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function cs(n){const e={};for(let t=0;t<n.length;t++){const i=Kp(n[t]);for(const r in i)e[r]=i[r]}return e}function dQ(n){const e=n.getRenderTarget();return null===e?n.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:an.workingColorSpace}const cNe={clone:Kp,merge:cs};class Vc extends Wo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Kp(e.uniforms),this.uniformsGroups=function aNe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class xF extends Hi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new lt,this.projectionMatrix=new lt,this.projectionMatrixInverse=new lt,this.coordinateSystem=Pc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Xl=new k,hQ=new ce,fQ=new ce;class sr extends xF{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ip*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ad*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ip*Math.atan(Math.tan(.5*Ad*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Xl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Xl.x,Xl.y).multiplyScalar(-e/Xl.z),Xl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Xl.x,Xl.y).multiplyScalar(-e/Xl.z)}getViewSize(e,t){return this.getViewBounds(e,hQ,fQ),t.subVectors(fQ,hQ)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ad*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class dNe extends Hi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new sr(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new sr(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new sr(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new sr(-90,1,e,t);a.layers=this.layers,this.add(a);const c=new sr(-90,1,e,t);c.layers=this.layers,this.add(c);const l=new sr(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,c]=t;for(const l of t)this.remove(l);if(e===Pc)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,l,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,l),i.texture.generateMipmaps=g,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class vC extends yo{constructor(e,t,i,r,s,o,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:zl,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class hNe extends Id{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new vC([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:wi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new qp(5,5,5),s=new Vc({name:"CubemapFromEquirect",uniforms:Kp(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new rr(r,s),a=t.minFilter;return t.minFilter===Ho&&(t.minFilter=wi),new dNe(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const TF=new k,fNe=new k,pNe=new Bt;class Yl{constructor(e=new k(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=TF.subVectors(i,t).cross(fNe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(TF),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||pNe.getNormalMatrix(e),r=this.coplanarPoint(TF).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Od=new Gr,bC=new k;class wC{constructor(e=new Yl,t=new Yl,i=new Yl,r=new Yl,s=new Yl,o=new Yl){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Pc){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],c=r[3],l=r[4],u=r[5],d=r[6],h=r[7],f=r[8],p=r[9],g=r[10],m=r[11],_=r[12],y=r[13],v=r[14],b=r[15];if(i[0].setComponents(c-s,h-l,m-f,b-_).normalize(),i[1].setComponents(c+s,h+l,m+f,b+_).normalize(),i[2].setComponents(c+o,h+u,m+p,b+y).normalize(),i[3].setComponents(c-o,h-u,m-p,b-y).normalize(),i[4].setComponents(c-a,h-d,m-g,b-v).normalize(),t===Pc)i[5].setComponents(c+a,h+d,m+g,b+v).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,d,g,v).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Od.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Od.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Od)}intersectsSprite(e){return Od.center.set(0,0,0),Od.radius=.7071067811865476,Od.applyMatrix4(e.matrixWorld),this.intersectsSphere(Od)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(bC.x=r.normal.x>0?e.max.x:e.min.x,bC.y=r.normal.y>0?e.max.y:e.min.y,bC.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(bC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function pQ(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function mNe(n){const e=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))},update:function o(a,c){if(a.isGLBufferAttribute){const u=e.get(a);return void((!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);if(void 0===l)e.set(a,function t(a,c){const l=a.array,u=a.usage,d=l.byteLength,h=n.createBuffer();let f;if(n.bindBuffer(c,h),n.bufferData(c,l,u),a.onUploadCallback(),l instanceof Float32Array)f=n.FLOAT;else if(l instanceof Uint16Array)f=a.isFloat16BufferAttribute?n.HALF_FLOAT:n.UNSIGNED_SHORT;else if(l instanceof Int16Array)f=n.SHORT;else if(l instanceof Uint32Array)f=n.UNSIGNED_INT;else if(l instanceof Int32Array)f=n.INT;else if(l instanceof Int8Array)f=n.BYTE;else if(l instanceof Uint8Array)f=n.UNSIGNED_BYTE;else{if(!(l instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);f=n.UNSIGNED_BYTE}return{buffer:h,type:f,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:d}}(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function i(a,c,l){const u=c.array,d=c._updateRange,h=c.updateRanges;if(n.bindBuffer(l,a),-1===d.count&&0===h.length&&n.bufferSubData(l,0,u),0!==h.length){for(let f=0,p=h.length;f<p;f++){const g=h[f];n.bufferSubData(l,g.start*u.BYTES_PER_ELEMENT,u,g.start,g.count)}c.clearUpdateRanges()}-1!==d.count&&(n.bufferSubData(l,d.offset*u.BYTES_PER_ELEMENT,u,d.offset,d.count),d.count=-1),c.onUploadCallback()})(l.buffer,a,c),l.version=a.version}}}}class nv extends Ht{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,d=e/a,h=t/c,f=[],p=[],g=[],m=[];for(let _=0;_<u;_++){const y=_*h-o;for(let v=0;v<l;v++)p.push(v*d-s,-y,0),g.push(0,0,1),m.push(v/a),m.push(1-_/c)}for(let _=0;_<c;_++)for(let y=0;y<a;y++){const b=y+l*(_+1),M=y+1+l*(_+1),S=y+1+l*_;f.push(y+l*_,b,S),f.push(b,M,S)}this.setIndex(f),this.setAttribute("position",new Qe(p,3)),this.setAttribute("normal",new Qe(g,3)),this.setAttribute("uv",new Qe(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nv(e.width,e.height,e.widthSegments,e.heightSegments)}}const Vt={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Be={common:{diffuse:{value:new Le(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Bt}},envmap:{envMap:{value:null},envMapRotation:{value:new Bt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Bt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Bt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Bt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Bt},normalScale:{value:new ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Bt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Bt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Bt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Bt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Le(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Le(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0},uvTransform:{value:new Bt}},sprite:{diffuse:{value:new Le(16777215)},opacity:{value:1},center:{value:new ce(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}}},Ra={basic:{uniforms:cs([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.fog]),vertexShader:Vt.meshbasic_vert,fragmentShader:Vt.meshbasic_frag},lambert:{uniforms:cs([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new Le(0)}}]),vertexShader:Vt.meshlambert_vert,fragmentShader:Vt.meshlambert_frag},phong:{uniforms:cs([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new Le(0)},specular:{value:new Le(1118481)},shininess:{value:30}}]),vertexShader:Vt.meshphong_vert,fragmentShader:Vt.meshphong_frag},standard:{uniforms:cs([Be.common,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.roughnessmap,Be.metalnessmap,Be.fog,Be.lights,{emissive:{value:new Le(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Vt.meshphysical_vert,fragmentShader:Vt.meshphysical_frag},toon:{uniforms:cs([Be.common,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.gradientmap,Be.fog,Be.lights,{emissive:{value:new Le(0)}}]),vertexShader:Vt.meshtoon_vert,fragmentShader:Vt.meshtoon_frag},matcap:{uniforms:cs([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,{matcap:{value:null}}]),vertexShader:Vt.meshmatcap_vert,fragmentShader:Vt.meshmatcap_frag},points:{uniforms:cs([Be.points,Be.fog]),vertexShader:Vt.points_vert,fragmentShader:Vt.points_frag},dashed:{uniforms:cs([Be.common,Be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Vt.linedashed_vert,fragmentShader:Vt.linedashed_frag},depth:{uniforms:cs([Be.common,Be.displacementmap]),vertexShader:Vt.depth_vert,fragmentShader:Vt.depth_frag},normal:{uniforms:cs([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,{opacity:{value:1}}]),vertexShader:Vt.meshnormal_vert,fragmentShader:Vt.meshnormal_frag},sprite:{uniforms:cs([Be.sprite,Be.fog]),vertexShader:Vt.sprite_vert,fragmentShader:Vt.sprite_frag},background:{uniforms:{uvTransform:{value:new Bt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Vt.background_vert,fragmentShader:Vt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Bt}},vertexShader:Vt.backgroundCube_vert,fragmentShader:Vt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Vt.cube_vert,fragmentShader:Vt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Vt.equirect_vert,fragmentShader:Vt.equirect_frag},distanceRGBA:{uniforms:cs([Be.common,Be.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Vt.distanceRGBA_vert,fragmentShader:Vt.distanceRGBA_frag},shadow:{uniforms:cs([Be.lights,Be.fog,{color:{value:new Le(0)},opacity:{value:1}}]),vertexShader:Vt.shadow_vert,fragmentShader:Vt.shadow_frag}};Ra.physical={uniforms:cs([Ra.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Bt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Bt},clearcoatNormalScale:{value:new ce(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Bt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Bt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Bt},sheen:{value:0},sheenColor:{value:new Le(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Bt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Bt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Bt},transmissionSamplerSize:{value:new ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Bt},attenuationDistance:{value:0},attenuationColor:{value:new Le(0)},specularColor:{value:new Le(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Bt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Bt},anisotropyVector:{value:new ce},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Bt}}]),vertexShader:Vt.meshphysical_vert,fragmentShader:Vt.meshphysical_frag};const EC={r:0,b:0,g:0},Nd=new kc,mLe=new lt;function gLe(n,e,t,i,r,s,o){const a=new Le(0);let l,u,c=!0===s?0:1,d=null,h=0,f=null;function p(y){let v=!0===y.isScene?y.background:null;return v&&v.isTexture&&(v=(y.backgroundBlurriness>0?t:e).get(v)),v}function _(y,v){y.getRGB(EC,dQ(n)),i.buffers.color.setClear(EC.r,EC.g,EC.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(y,v=1){a.set(y),c=v,_(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(y){c=y,_(a,c)},render:function g(y){let v=!1;const b=p(y);null===b?_(a,c):b&&b.isColor&&(_(b,1),v=!0);const M=n.xr.getEnvironmentBlendMode();"additive"===M?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===M&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||v)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))},addToRenderList:function m(y,v){const b=p(v);b&&(b.isCubeTexture||b.mapping===Hy)?(void 0===u&&(u=new rr(new qp(1,1,1),new Vc({name:"BackgroundCubeMaterial",uniforms:Kp(Ra.backgroundCube.uniforms),vertexShader:Ra.backgroundCube.vertexShader,fragmentShader:Ra.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(M,S,x){this.matrixWorld.copyPosition(x.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),Nd.copy(v.backgroundRotation),Nd.x*=-1,Nd.y*=-1,Nd.z*=-1,b.isCubeTexture&&!1===b.isRenderTargetTexture&&(Nd.y*=-1,Nd.z*=-1),u.material.uniforms.envMap.value=b,u.material.uniforms.flipEnvMap.value=b.isCubeTexture&&!1===b.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(mLe.makeRotationFromEuler(Nd)),u.material.toneMapped=an.getTransfer(b.colorSpace)!==Vn,(d!==b||h!==b.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=b,h=b.version,f=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):b&&b.isTexture&&(void 0===l&&(l=new rr(new nv(2,2),new Vc({name:"BackgroundMaterial",uniforms:Kp(Ra.background.uniforms),vertexShader:Ra.background.vertexShader,fragmentShader:Ra.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=b,l.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,l.material.toneMapped=an.getTransfer(b.colorSpace)!==Vn,!0===b.matrixAutoUpdate&&b.updateMatrix(),l.material.uniforms.uvTransform.value.copy(b.matrix),(d!==b||h!==b.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,d=b,h=b.version,f=n.toneMapping),l.layers.enableAll(),y.unshift(l,l.geometry,l.material,0,0,null))}}}function _Le(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null);let s=r,o=!1;function l(w){return n.bindVertexArray(w)}function u(w){return n.deleteVertexArray(w)}function h(w){const U=[],q=[],G=[];for(let Y=0;Y<t;Y++)U[Y]=0,q[Y]=0,G[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:q,attributeDivisors:G,object:w,attributes:{},index:null}}function g(){const w=s.newAttributes;for(let U=0,q=w.length;U<q;U++)w[U]=0}function m(w){_(w,0)}function _(w,U){const G=s.enabledAttributes,Y=s.attributeDivisors;s.newAttributes[w]=1,0===G[w]&&(n.enableVertexAttribArray(w),G[w]=1),Y[w]!==U&&(n.vertexAttribDivisor(w,U),Y[w]=U)}function y(){const w=s.newAttributes,U=s.enabledAttributes;for(let q=0,G=U.length;q<G;q++)U[q]!==w[q]&&(n.disableVertexAttribArray(q),U[q]=0)}function v(w,U,q,G,Y,ae,B){!0===B?n.vertexAttribIPointer(w,U,q,Y,ae):n.vertexAttribPointer(w,U,q,G,Y,ae)}function O(){C(),o=!0,s!==r&&(s=r,l(s.object))}function C(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(w,U,q,G,Y){let ae=!1;const B=function d(w,U,q){const G=!0===q.wireframe;let Y=i[w.id];void 0===Y&&(Y={},i[w.id]=Y);let ae=Y[U.id];void 0===ae&&(ae={},Y[U.id]=ae);let B=ae[G];return void 0===B&&(B=h(function c(){return n.createVertexArray()}()),ae[G]=B),B}(G,q,U);s!==B&&(s=B,l(s.object)),ae=function f(w,U,q,G){const Y=s.attributes,ae=U.attributes;let B=0;const X=q.getAttributes();for(const H in X)if(X[H].location>=0){const Ce=Y[H];let Me=ae[H];if(void 0===Me&&("instanceMatrix"===H&&w.instanceMatrix&&(Me=w.instanceMatrix),"instanceColor"===H&&w.instanceColor&&(Me=w.instanceColor)),void 0===Ce||Ce.attribute!==Me||Me&&Ce.data!==Me.data)return!0;B++}return s.attributesNum!==B||s.index!==G}(w,G,q,Y),ae&&function p(w,U,q,G){const Y={},ae=U.attributes;let B=0;const X=q.getAttributes();for(const H in X)if(X[H].location>=0){let Ce=ae[H];void 0===Ce&&("instanceMatrix"===H&&w.instanceMatrix&&(Ce=w.instanceMatrix),"instanceColor"===H&&w.instanceColor&&(Ce=w.instanceColor));const Me={};Me.attribute=Ce,Ce&&Ce.data&&(Me.data=Ce.data),Y[H]=Me,B++}s.attributes=Y,s.attributesNum=B,s.index=G}(w,G,q,Y),null!==Y&&e.update(Y,n.ELEMENT_ARRAY_BUFFER),(ae||o)&&(o=!1,function b(w,U,q,G){g();const Y=G.attributes,ae=q.getAttributes(),B=U.defaultAttributeValues;for(const X in ae){const H=ae[X];if(H.location>=0){let de=Y[X];if(void 0===de&&("instanceMatrix"===X&&w.instanceMatrix&&(de=w.instanceMatrix),"instanceColor"===X&&w.instanceColor&&(de=w.instanceColor)),void 0!==de){const Ce=de.normalized,Me=de.itemSize,st=e.get(de);if(void 0===st)continue;const ft=st.buffer,J=st.type,ve=st.bytesPerElement,Re=J===n.INT||J===n.UNSIGNED_INT||de.gpuType===E2;if(de.isInterleavedBufferAttribute){const be=de.data,Ke=be.stride,Je=de.offset;if(be.isInstancedInterleavedBuffer){for(let Xe=0;Xe<H.locationSize;Xe++)_(H.location+Xe,be.meshPerAttribute);!0!==w.isInstancedMesh&&void 0===G._maxInstanceCount&&(G._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let Xe=0;Xe<H.locationSize;Xe++)m(H.location+Xe);n.bindBuffer(n.ARRAY_BUFFER,ft);for(let Xe=0;Xe<H.locationSize;Xe++)v(H.location+Xe,Me/H.locationSize,J,Ce,Ke*ve,(Je+Me/H.locationSize*Xe)*ve,Re)}else{if(de.isInstancedBufferAttribute){for(let be=0;be<H.locationSize;be++)_(H.location+be,de.meshPerAttribute);!0!==w.isInstancedMesh&&void 0===G._maxInstanceCount&&(G._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let be=0;be<H.locationSize;be++)m(H.location+be);n.bindBuffer(n.ARRAY_BUFFER,ft);for(let be=0;be<H.locationSize;be++)v(H.location+be,Me/H.locationSize,J,Ce,Me*ve,Me/H.locationSize*be*ve,Re)}}else if(void 0!==B){const Ce=B[X];if(void 0!==Ce)switch(Ce.length){case 2:n.vertexAttrib2fv(H.location,Ce);break;case 3:n.vertexAttrib3fv(H.location,Ce);break;case 4:n.vertexAttrib4fv(H.location,Ce);break;default:n.vertexAttrib1fv(H.location,Ce)}}}}y()}(w,U,q,G),null!==Y&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Y).buffer))},reset:O,resetDefaultState:C,dispose:function M(){O();for(const w in i){const U=i[w];for(const q in U){const G=U[q];for(const Y in G)u(G[Y].object),delete G[Y];delete U[q]}delete i[w]}},releaseStatesOfGeometry:function S(w){if(void 0===i[w.id])return;const U=i[w.id];for(const q in U){const G=U[q];for(const Y in G)u(G[Y].object),delete G[Y];delete U[q]}delete i[w.id]},releaseStatesOfProgram:function x(w){for(const U in i){const q=i[U];if(void 0===q[w.id])continue;const G=q[w.id];for(const Y in G)u(G[Y].object),delete G[Y];delete q[w.id]}},initAttributes:g,enableAttribute:m,disableUnusedAttributes:y}}function yLe(n,e,t){let i;function o(l,u,d){0!==d&&(n.drawArraysInstanced(i,l,u,d),t.update(u,i,d))}this.setMode=function r(l){i=l},this.render=function s(l,u){n.drawArrays(i,l,u),t.update(u,i,1)},this.renderInstances=o,this.renderMultiDraw=function a(l,u,d){if(0===d)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,l,0,u,0,d);let f=0;for(let p=0;p<d;p++)f+=u[p];t.update(f,i,1)},this.renderMultiDrawInstances=function c(l,u,d,h){if(0===d)return;const f=e.get("WEBGL_multi_draw");if(null===f)for(let p=0;p<l.length;p++)o(l[p],u[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(i,l,0,u,0,h,0,d);let p=0;for(let g=0;g<d;g++)p+=u[g];for(let g=0;g<h.length;g++)t.update(p,i,h[g])}}}function vLe(n,e,t,i){let r;function c(S){if("highp"===S){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";S="mediump"}return"mediump"===S&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=void 0!==t.precision?t.precision:"highp";const u=c(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const d=!0===t.logarithmicDepthBuffer,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const S=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:c,textureFormatReadable:function o(S){return!(S!==Ts&&i.convert(S)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(S){const x=S===Wy&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(S!==Rc&&i.convert(S)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&S!==$s&&!x)},precision:l,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:f,maxTextureSize:n.getParameter(n.MAX_TEXTURE_SIZE),maxCubemapSize:n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:n.getParameter(n.MAX_VERTEX_ATTRIBS),maxVertexUniforms:n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:n.getParameter(n.MAX_VARYING_VECTORS),maxFragmentUniforms:n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:f>0,maxSamples:n.getParameter(n.MAX_SAMPLES)}}function bLe(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Yl,a=new Bt,c={value:null,needsUpdate:!1};function u(d,h,f,p){const g=null!==d?d.length:0;let m=null;if(0!==g){if(m=c.value,!0!==p||null===m){const _=f+4*g,y=h.matrixWorldInverse;a.getNormalMatrix(y),(null===m||m.length<_)&&(m=new Float32Array(_));for(let v=0,b=f;v!==g;++v,b+=4)o.copy(d[v]).applyMatrix4(y,a),o.normal.toArray(m,b),m[b+3]=o.constant}c.value=m,c.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,m}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=0!==d.length||h||0!==i||r;return r=h,i=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){const p=d.clippingPlanes,g=d.clipIntersection,m=d.clipShadows,_=n.get(d);if(!r||null===p||0===p.length||s&&!m)s?u(null):function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const y=s?0:i,v=4*y;let b=_.clippingState||null;c.value=b,b=u(p,h,v,f);for(let M=0;M!==v;++M)b[M]=t[M];_.clippingState=b,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=y}}}function wLe(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=zl:304===a&&(o.mapping=Cd),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new hNe(c.height);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class SC extends xF{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const mQ=[.125,.215,.35,.446,.526,.582],MF=new SC,gQ=new Le;let AF=null,IF=0,DF=0,RF=!1;const Ld=(1+Math.sqrt(5))/2,Qp=1/Ld,_Q=[new k(-Ld,Qp,0),new k(Ld,Qp,0),new k(-Qp,0,Ld),new k(Qp,0,Ld),new k(0,Ld,-Qp),new k(0,Ld,Qp),new k(-1,1,-1),new k(1,1,-1),new k(-1,1,1),new k(1,1,1)];class yQ{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){AF=this._renderer.getRenderTarget(),IF=this._renderer.getActiveCubeFace(),DF=this._renderer.getActiveMipmapLevel(),RF=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=wQ(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=bQ(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(AF,IF,DF),this._renderer.xr.enabled=RF,e.scissorTest=!1,CC(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===zl||e.mapping===Cd?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),AF=this._renderer.getRenderTarget(),IF=this._renderer.getActiveCubeFace(),DF=this._renderer.getActiveMipmapLevel(),RF=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:wi,minFilter:wi,generateMipmaps:!1,type:Wy,format:Ts,colorSpace:Sr,depthBuffer:!1},r=vQ(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=vQ(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function ELe(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+mQ.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-4?c=mQ[o-n+4-1]:0===o&&(c=0),i.push(c);const l=1/(a-2),u=-l,d=1+l,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,g=3,m=2,_=1,y=new Float32Array(g*p*f),v=new Float32Array(m*p*f),b=new Float32Array(_*p*f);for(let S=0;S<f;S++){const x=S%3*2/3-1,O=S>2?0:-1;y.set([x,O,0,x+2/3,O,0,x+2/3,O+1,0,x,O,0,x+2/3,O+1,0,x,O+1,0],g*p*S),v.set(h,m*p*S),b.set([S,S,S,S,S,S],_*p*S)}const M=new Ht;M.setAttribute("position",new Wn(y,g)),M.setAttribute("uv",new Wn(v,m)),M.setAttribute("faceIndex",new Wn(b,_)),e.push(M),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function SLe(n,e,t){const i=new Float32Array(20),r=new k(0,1,0);return new Vc({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new rr(this._lodPlanes[0],e);this._renderer.compile(t,MF)}_sceneToCubeUV(e,t,i,r){const a=new sr(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(gQ),u.toneMapping=Vl,u.autoClear=!1;const f=new bo({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new rr(new qp,f);let g=!1;const m=e.background;m?m.isColor&&(f.color.copy(m),e.background=null,g=!0):(f.color.copy(gQ),g=!0);for(let _=0;_<6;_++){const y=_%3;0===y?(a.up.set(0,c[_],0),a.lookAt(l[_],0,0)):1===y?(a.up.set(0,0,c[_]),a.lookAt(0,l[_],0)):(a.up.set(0,c[_],0),a.lookAt(0,0,l[_]));const v=this._cubeSize;CC(r,y*v,_>2?v:0,v,v),u.setRenderTarget(r),g&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=m}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===zl||e.mapping===Cd;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=wQ()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=bQ());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new rr(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;CC(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,MF)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(e,s-1,s,o,_Q[(r-s-1)%_Q.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new rr(this._lodPlanes[r],l),h=l.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,g=s/p,m=isFinite(s)?1+Math.floor(3*g):20;m>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const _=[];let y=0;for(let x=0;x<20;++x){const O=x/g,C=Math.exp(-O*O/2);_.push(C),0===x?y+=C:x<m&&(y+=2*C)}for(let x=0;x<_.length;x++)_[x]=_[x]/y;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=_,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:v}=this;h.dTheta.value=p,h.mipInt.value=v-i;const b=this._sizeLods[r];CC(t,3*b*(r>v-4?r-v+4:0),4*(this._cubeSize-b),3*b,2*b),c.setRenderTarget(t),c.render(d,MF)}}function vQ(n,e,t){const i=new Id(n,e,t);return i.texture.mapping=Hy,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function CC(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function bQ(){return new Vc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function wQ(){return new Vc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function CLe(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=c===zl||c===Cd;if(l||u){let d=e.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==d?d.texture.pmremVersion:0))return null===t&&(t=new yQ(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(void 0!==d)return d.texture;{const f=a.image;return l&&f&&f.height>0||u&&f&&function r(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(f)?(null===t&&(t=new yQ(n)),d=l?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function xLe(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return null===r&&oF("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function TLe(n,e,t,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);for(const p in h.morphAttributes){const g=h.morphAttributes[p];for(let m=0,_=g.length;m<_;m++)e.remove(g[m])}h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function l(d){const h=[],f=d.index,p=d.attributes.position;let g=0;if(null!==f){const y=f.array;g=f.version;for(let v=0,b=y.length;v<b;v+=3){const M=y[v+0],S=y[v+1],x=y[v+2];h.push(M,S,S,x,x,M)}}else{if(void 0===p)return;g=p.version;for(let v=0,b=p.array.length/3-1;v<b;v+=3){const M=v+0,S=v+1,x=v+2;h.push(M,S,S,x,x,M)}}const m=new(GZ(h)?sQ:rQ)(h,1);m.version=g;const _=s.get(d);_&&e.remove(_),s.set(d,m)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function c(d){const h=d.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER);const f=d.morphAttributes;for(const p in f){const g=f[p];for(let m=0,_=g.length;m<_;m++)e.update(g[m],n.ARRAY_BUFFER)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&l(d)}else l(d);return s.get(d)}}}function MLe(n,e,t){let i,s,o;function l(h,f,p){0!==p&&(n.drawElementsInstanced(i,f,s,h*o,p),t.update(f,i,p))}this.setMode=function r(h){i=h},this.setIndex=function a(h){s=h.type,o=h.bytesPerElement},this.render=function c(h,f){n.drawElements(i,f,s,h*o),t.update(f,i,1)},this.renderInstances=l,this.renderMultiDraw=function u(h,f,p){if(0===p)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,s,h,0,p);let m=0;for(let _=0;_<p;_++)m+=f[_];t.update(m,i,1)},this.renderMultiDrawInstances=function d(h,f,p,g){if(0===p)return;const m=e.get("WEBGL_multi_draw");if(null===m)for(let _=0;_<h.length;_++)l(h[_]/o,f[_],g[_]);else{m.multiDrawElementsInstancedWEBGL(i,f,0,s,h,0,g,0,p);let _=0;for(let y=0;y<p;y++)_+=f[y];for(let y=0;y<g.length;y++)t.update(_,i,g[y])}}}function ALe(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function ILe(n,e,t){const i=new WeakMap,r=new xn;return{update:function s(o,a,c){const l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=void 0!==u?u.length:0;let h=i.get(a);if(void 0===h||h.count!==d){let C=function(){x.dispose(),i.delete(a),a.removeEventListener("dispose",C)};void 0!==h&&h.texture.dispose();const f=void 0!==a.morphAttributes.position,p=void 0!==a.morphAttributes.normal,g=void 0!==a.morphAttributes.color,m=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],y=a.morphAttributes.color||[];let v=0;!0===f&&(v=1),!0===p&&(v=2),!0===g&&(v=3);let b=a.attributes.position.count*v,M=1;b>e.maxTextureSize&&(M=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const S=new Float32Array(b*M*4*d),x=new lF(S,b,M,d);x.type=$s,x.needsUpdate=!0;const O=4*v;for(let w=0;w<d;w++){const U=m[w],q=_[w],G=y[w],Y=b*M*4*w;for(let ae=0;ae<U.count;ae++){const B=ae*O;!0===f&&(r.fromBufferAttribute(U,ae),S[Y+B+0]=r.x,S[Y+B+1]=r.y,S[Y+B+2]=r.z,S[Y+B+3]=0),!0===p&&(r.fromBufferAttribute(q,ae),S[Y+B+4]=r.x,S[Y+B+5]=r.y,S[Y+B+6]=r.z,S[Y+B+7]=0),!0===g&&(r.fromBufferAttribute(G,ae),S[Y+B+8]=r.x,S[Y+B+9]=r.y,S[Y+B+10]=r.z,S[Y+B+11]=4===G.itemSize?r.w:1)}}h={count:d,texture:x,size:new ce(b,M)},i.set(a,h),a.addEventListener("dispose",C)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let f=0;for(let g=0;g<l.length;g++)f+=l[g];const p=a.morphTargetsRelative?1:1-f;c.getUniforms().setValue(n,"morphTargetBaseInfluence",p),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}}}function DLe(n,e,t,i){let r=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=i.render.frame,d=e.get(c,c.geometry);if(r.get(d)!==l&&(e.update(d),r.set(d,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),r.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),null!==c.instanceColor&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){const h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return d},dispose:function o(){r=new WeakMap}}}class EQ extends yo{constructor(e,t,i,r,s,o,a,c,l,u=Cp){if(u!==Cp&&u!==xp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Cp&&(i=Hl),void 0===i&&u===xp&&(i=Sp),super(null,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:nr,this.minFilter=void 0!==c?c:nr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const SQ=new yo,CQ=new EQ(1,1),xQ=new lF,TQ=new qZ,MQ=new vC,AQ=[],IQ=[],DQ=new Float32Array(16),RQ=new Float32Array(9),PQ=new Float32Array(4);function Jp(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=AQ[r];if(void 0===s&&(s=new Float32Array(r),AQ[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Gi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ji(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function xC(n,e){let t=IQ[e];void 0===t&&(t=new Int32Array(e),IQ[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function RLe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function PLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gi(t,e))return;n.uniform2fv(this.addr,e),ji(t,e)}}function OLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Gi(t,e))return;n.uniform3fv(this.addr,e),ji(t,e)}}function NLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gi(t,e))return;n.uniform4fv(this.addr,e),ji(t,e)}}function kLe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Gi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ji(t,e)}else{if(Gi(t,i))return;PQ.set(i),n.uniformMatrix2fv(this.addr,!1,PQ),ji(t,i)}}function LLe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Gi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ji(t,e)}else{if(Gi(t,i))return;RQ.set(i),n.uniformMatrix3fv(this.addr,!1,RQ),ji(t,i)}}function FLe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Gi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ji(t,e)}else{if(Gi(t,i))return;DQ.set(i),n.uniformMatrix4fv(this.addr,!1,DQ),ji(t,i)}}function ULe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function BLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gi(t,e))return;n.uniform2iv(this.addr,e),ji(t,e)}}function VLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Gi(t,e))return;n.uniform3iv(this.addr,e),ji(t,e)}}function zLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gi(t,e))return;n.uniform4iv(this.addr,e),ji(t,e)}}function HLe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function GLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gi(t,e))return;n.uniform2uiv(this.addr,e),ji(t,e)}}function jLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Gi(t,e))return;n.uniform3uiv(this.addr,e),ji(t,e)}}function $Le(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gi(t,e))return;n.uniform4uiv(this.addr,e),ji(t,e)}}function WLe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();let s;i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),this.type===n.SAMPLER_2D_SHADOW?(CQ.compareFunction=515,s=CQ):s=SQ,t.setTexture2D(e||s,r)}function qLe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||TQ,r)}function KLe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||MQ,r)}function XLe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||xQ,r)}function ZLe(n,e){n.uniform1fv(this.addr,e)}function QLe(n,e){const t=Jp(e,this.size,2);n.uniform2fv(this.addr,t)}function JLe(n,e){const t=Jp(e,this.size,3);n.uniform3fv(this.addr,t)}function e2e(n,e){const t=Jp(e,this.size,4);n.uniform4fv(this.addr,t)}function t2e(n,e){const t=Jp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function n2e(n,e){const t=Jp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function i2e(n,e){const t=Jp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function r2e(n,e){n.uniform1iv(this.addr,e)}function s2e(n,e){n.uniform2iv(this.addr,e)}function o2e(n,e){n.uniform3iv(this.addr,e)}function a2e(n,e){n.uniform4iv(this.addr,e)}function c2e(n,e){n.uniform1uiv(this.addr,e)}function l2e(n,e){n.uniform2uiv(this.addr,e)}function u2e(n,e){n.uniform3uiv(this.addr,e)}function d2e(n,e){n.uniform4uiv(this.addr,e)}function h2e(n,e,t){const i=this.cache,r=e.length,s=xC(t,r);Gi(i,s)||(n.uniform1iv(this.addr,s),ji(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||SQ,s[o])}function f2e(n,e,t){const i=this.cache,r=e.length,s=xC(t,r);Gi(i,s)||(n.uniform1iv(this.addr,s),ji(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||TQ,s[o])}function p2e(n,e,t){const i=this.cache,r=e.length,s=xC(t,r);Gi(i,s)||(n.uniform1iv(this.addr,s),ji(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||MQ,s[o])}function m2e(n,e,t){const i=this.cache,r=e.length,s=xC(t,r);Gi(i,s)||(n.uniform1iv(this.addr,s),ji(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||xQ,s[o])}class _2e{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function YLe(n){switch(n){case 5126:return RLe;case 35664:return PLe;case 35665:return OLe;case 35666:return NLe;case 35674:return kLe;case 35675:return LLe;case 35676:return FLe;case 5124:case 35670:return ULe;case 35667:case 35671:return BLe;case 35668:case 35672:return VLe;case 35669:case 35673:return zLe;case 5125:return HLe;case 36294:return GLe;case 36295:return jLe;case 36296:return $Le;case 35678:case 36198:case 36298:case 36306:case 35682:return WLe;case 35679:case 36299:case 36307:return qLe;case 35680:case 36300:case 36308:case 36293:return KLe;case 36289:case 36303:case 36311:case 36292:return XLe}}(t.type)}}class y2e{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function g2e(n){switch(n){case 5126:return ZLe;case 35664:return QLe;case 35665:return JLe;case 35666:return e2e;case 35674:return t2e;case 35675:return n2e;case 35676:return i2e;case 5124:case 35670:return r2e;case 35667:case 35671:return s2e;case 35668:case 35672:return o2e;case 35669:case 35673:return a2e;case 5125:return c2e;case 36294:return l2e;case 36295:return u2e;case 36296:return d2e;case 35678:case 36198:case 36298:case 36306:case 35682:return h2e;case 35679:case 36299:case 36307:return f2e;case 35680:case 36300:case 36308:case 36293:return p2e;case 36289:case 36303:case 36311:case 36292:return m2e}}(t.type)}}class v2e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const OF=/(\w+)(\])?(\[|\.)?/g;function OQ(n,e){n.seq.push(e),n.map[e.id]=e}function b2e(n,e,t){const i=n.name,r=i.length;for(OF.lastIndex=0;;){const s=OF.exec(i);let a=s[1];const l=s[3];if("]"===s[2]&&(a|=0),void 0===l||"["===l&&OF.lastIndex+2===r){OQ(t,void 0===l?new _2e(a,n,e):new y2e(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new v2e(a),OQ(t,d)),t=d}}}class TC{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);b2e(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function NQ(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const w2e=37297;let E2e=0;function kQ(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function S2e(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function x2e(n,e){const t=function C2e(n){const e=an.getPrimaries(an.workingColorSpace),t=an.getPrimaries(n);let i;switch(e===t?i="":e===QS&&t===ZS?i="LinearDisplayP3ToLinearSRGB":e===ZS&&t===QS&&(i="LinearSRGBToLinearDisplayP3"),n){case Sr:case XS:return[i,"LinearTransferOETF"];case Vr:case iF:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function T2e(n,e){let t;switch(e){case rOe:t="Linear";break;case sOe:t="Reinhard";break;case oOe:t="OptimizedCineon";break;case aOe:t="ACESFilmic";break;case lOe:t="AgX";break;case uOe:t="Neutral";break;case cOe:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function iv(n){return""!==n}function LQ(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function FQ(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const D2e=/^[ \t]*#include +<([\w\d./]+)>/gm;function NF(n){return n.replace(D2e,P2e)}const R2e=new Map;function P2e(n,e){let t=Vt[e];if(void 0===t){const i=R2e.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=Vt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return NF(t)}const O2e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function UQ(n){return n.replace(O2e,N2e)}function N2e(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function BQ(n){let e=`precision ${n.precision} float;\n\tprecision ${n.precision} int;\n\tprecision ${n.precision} sampler2D;\n\tprecision ${n.precision} samplerCube;\n\tprecision ${n.precision} sampler3D;\n\tprecision ${n.precision} sampler2DArray;\n\tprecision ${n.precision} sampler2DShadow;\n\tprecision ${n.precision} samplerCubeShadow;\n\tprecision ${n.precision} sampler2DArrayShadow;\n\tprecision ${n.precision} isampler2D;\n\tprecision ${n.precision} isampler3D;\n\tprecision ${n.precision} isamplerCube;\n\tprecision ${n.precision} isampler2DArray;\n\tprecision ${n.precision} usampler2D;\n\tprecision ${n.precision} usampler3D;\n\tprecision ${n.precision} usamplerCube;\n\tprecision ${n.precision} usampler2DArray;\n\t`;return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function V2e(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function k2e(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===EZ?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===DPe?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ic&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function L2e(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case zl:case Cd:e="ENVMAP_TYPE_CUBE";break;case Hy:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function F2e(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===Cd&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function U2e(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case BS:e="ENVMAP_BLENDING_MULTIPLY";break;case nOe:e="ENVMAP_BLENDING_MIX";break;case iOe:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function B2e(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=function M2e(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(iv).join("\n")}(t),p=function A2e(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),g=r.createProgram();let m,_,y=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(iv).join("\n"),m.length>0&&(m+="\n"),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(iv).join("\n"),_.length>0&&(_+="\n")):(m=[BQ(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(iv).join("\n"),_=[BQ(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Vl?"#define TONE_MAPPING":"",t.toneMapping!==Vl?Vt.tonemapping_pars_fragment:"",t.toneMapping!==Vl?T2e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Vt.colorspace_pars_fragment,x2e("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(iv).join("\n")),o=NF(o),o=LQ(o,t),o=FQ(o,t),a=NF(a),a=LQ(a,t),a=FQ(a,t),o=UQ(o),a=UQ(a),!0!==t.isRawShaderMaterial&&(y="#version 300 es\n",m=[f,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,_=["#define varying in",t.glslVersion===VZ?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===VZ?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const b=y+_+a,M=NQ(r,r.VERTEX_SHADER,y+m+o),S=NQ(r,r.FRAGMENT_SHADER,b);function x(U){if(n.debug.checkShaderErrors){const q=r.getProgramInfoLog(g).trim(),G=r.getShaderInfoLog(M).trim(),Y=r.getShaderInfoLog(S).trim();let ae=!0,B=!0;if(!1===r.getProgramParameter(g,r.LINK_STATUS))if(ae=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,g,M,S);else{const X=kQ(r,M,"vertex"),H=kQ(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+U.name+"\nMaterial Type: "+U.type+"\n\nProgram Info Log: "+q+"\n"+X+"\n"+H)}else""!==q?console.warn("THREE.WebGLProgram: Program Info Log:",q):(""===G||""===Y)&&(B=!1);B&&(U.diagnostics={runnable:ae,programLog:q,vertexShader:{log:G,prefix:m},fragmentShader:{log:Y,prefix:_}})}r.deleteShader(M),r.deleteShader(S),O=new TC(r,g),C=function I2e(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,g)}let O,C;r.attachShader(g,M),r.attachShader(g,S),void 0!==t.index0AttributeName?r.bindAttribLocation(g,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),this.getUniforms=function(){return void 0===O&&x(this),O},this.getAttributes=function(){return void 0===C&&x(this),C};let w=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===w&&(w=r.getProgramParameter(g,w2e)),w},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=E2e++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=M,this.fragmentShader=S,this}let z2e=0;class H2e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new G2e(e),t.set(e,i)),i}}class G2e{constructor(e){this.id=z2e++,this.code=e,this.usedTimes=0}}function j2e(n,e,t,i,r,s,o){const a=new gF,c=new H2e,l=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(C){return l.add(C),0===C?"uv":`uv${C}`}return{getParameters:function m(C,w,U,q,G){const Y=q.fog,ae=G.geometry,X=(C.isMeshStandardMaterial?t:e).get(C.envMap||(C.isMeshStandardMaterial?q.environment:null)),H=X&&X.mapping===Hy?X.image.height:null,de=p[C.type];null!==C.precision&&(f=r.getMaxPrecision(C.precision),f!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",f,"instead."));const Ce=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,Me=void 0!==Ce?Ce.length:0;let ft,J,ve,Re,st=0;if(void 0!==ae.morphAttributes.position&&(st=1),void 0!==ae.morphAttributes.normal&&(st=2),void 0!==ae.morphAttributes.color&&(st=3),de){const sn=Ra[de];ft=sn.vertexShader,J=sn.fragmentShader}else ft=C.vertexShader,J=C.fragmentShader,c.update(C),ve=c.getVertexShaderID(C),Re=c.getFragmentShaderID(C);const be=n.getRenderTarget(),Ke=!0===G.isInstancedMesh,Je=!0===G.isBatchedMesh,Xe=!!C.map,L=!!X,Te=!!C.aoMap,we=!!C.lightMap,Fe=!!C.bumpMap,ue=!!C.normalMap,ht=!!C.displacementMap,Ve=!!C.emissiveMap,We=!!C.metalnessMap,F=!!C.roughnessMap,T=C.anisotropy>0,ne=C.clearcoat>0,ge=C.iridescence>0,pe=C.sheen>0,at=C.transmission>0,Ne=T&&!!C.anisotropyMap,je=ne&&!!C.clearcoatMap,It=ne&&!!C.clearcoatNormalMap,xe=ne&&!!C.clearcoatRoughnessMap,He=ge&&!!C.iridescenceMap,Xt=ge&&!!C.iridescenceThicknessMap,bt=pe&&!!C.sheenColorMap,qe=pe&&!!C.sheenRoughnessMap,Et=!!C.specularMap,Dt=!!C.specularColorMap,qn=!!C.specularIntensityMap,E=at&&!!C.transmissionMap,Q=at&&!!C.thicknessMap,oe=!!C.alphaMap,St=!!C.extensions;let Si=Vl;C.toneMapped&&(null===be||!0===be.isXRRenderTarget)&&(Si=n.toneMapping);const $i={shaderID:de,shaderType:C.type,shaderName:C.name,vertexShader:ft,fragmentShader:J,defines:C.defines,customVertexShaderID:ve,customFragmentShaderID:Re,isRawShaderMaterial:!0===C.isRawShaderMaterial,glslVersion:C.glslVersion,precision:f,batching:Je,batchingColor:Je&&null!==G._colorsTexture,instancing:Ke,instancingColor:Ke&&null!==G.instanceColor,instancingMorph:Ke&&null!==G.morphTexture,supportsVertexTextures:h,outputColorSpace:null===be?n.outputColorSpace:!0===be.isXRRenderTarget?be.texture.colorSpace:Sr,alphaToCoverage:!!C.alphaToCoverage,map:Xe,matcap:!!C.matcap,envMap:L,envMapMode:L&&X.mapping,envMapCubeUVHeight:H,aoMap:Te,lightMap:we,bumpMap:Fe,normalMap:ue,displacementMap:h&&ht,emissiveMap:Ve,normalMapObjectSpace:ue&&1===C.normalMapType,normalMapTangentSpace:ue&&0===C.normalMapType,metalnessMap:We,roughnessMap:F,anisotropy:T,anisotropyMap:Ne,clearcoat:ne,clearcoatMap:je,clearcoatNormalMap:It,clearcoatRoughnessMap:xe,dispersion:C.dispersion>0,iridescence:ge,iridescenceMap:He,iridescenceThicknessMap:Xt,sheen:pe,sheenColorMap:bt,sheenRoughnessMap:qe,specularMap:Et,specularColorMap:Dt,specularIntensityMap:qn,transmission:at,transmissionMap:E,thicknessMap:Q,gradientMap:!!C.gradientMap,opaque:!1===C.transparent&&1===C.blending&&!1===C.alphaToCoverage,alphaMap:oe,alphaTest:C.alphaTest>0,alphaHash:!!C.alphaHash,combine:C.combine,mapUv:Xe&&g(C.map.channel),aoMapUv:Te&&g(C.aoMap.channel),lightMapUv:we&&g(C.lightMap.channel),bumpMapUv:Fe&&g(C.bumpMap.channel),normalMapUv:ue&&g(C.normalMap.channel),displacementMapUv:ht&&g(C.displacementMap.channel),emissiveMapUv:Ve&&g(C.emissiveMap.channel),metalnessMapUv:We&&g(C.metalnessMap.channel),roughnessMapUv:F&&g(C.roughnessMap.channel),anisotropyMapUv:Ne&&g(C.anisotropyMap.channel),clearcoatMapUv:je&&g(C.clearcoatMap.channel),clearcoatNormalMapUv:It&&g(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:xe&&g(C.clearcoatRoughnessMap.channel),iridescenceMapUv:He&&g(C.iridescenceMap.channel),iridescenceThicknessMapUv:Xt&&g(C.iridescenceThicknessMap.channel),sheenColorMapUv:bt&&g(C.sheenColorMap.channel),sheenRoughnessMapUv:qe&&g(C.sheenRoughnessMap.channel),specularMapUv:Et&&g(C.specularMap.channel),specularColorMapUv:Dt&&g(C.specularColorMap.channel),specularIntensityMapUv:qn&&g(C.specularIntensityMap.channel),transmissionMapUv:E&&g(C.transmissionMap.channel),thicknessMapUv:Q&&g(C.thicknessMap.channel),alphaMapUv:oe&&g(C.alphaMap.channel),vertexTangents:!!ae.attributes.tangent&&(ue||T),vertexColors:C.vertexColors,vertexAlphas:!0===C.vertexColors&&!!ae.attributes.color&&4===ae.attributes.color.itemSize,pointsUvs:!0===G.isPoints&&!!ae.attributes.uv&&(Xe||oe),fog:!!Y,useFog:!0===C.fog,fogExp2:!!Y&&Y.isFogExp2,flatShading:!0===C.flatShading,sizeAttenuation:!0===C.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===G.isSkinnedMesh,morphTargets:void 0!==ae.morphAttributes.position,morphNormals:void 0!==ae.morphAttributes.normal,morphColors:void 0!==ae.morphAttributes.color,morphTargetsCount:Me,morphTextureStride:st,numDirLights:w.directional.length,numPointLights:w.point.length,numSpotLights:w.spot.length,numSpotLightMaps:w.spotLightMap.length,numRectAreaLights:w.rectArea.length,numHemiLights:w.hemi.length,numDirLightShadows:w.directionalShadowMap.length,numPointLightShadows:w.pointShadowMap.length,numSpotLightShadows:w.spotShadowMap.length,numSpotLightShadowsWithMaps:w.numSpotLightShadowsWithMaps,numLightProbes:w.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:Si,decodeVideoTexture:Xe&&!0===C.map.isVideoTexture&&an.getTransfer(C.map.colorSpace)===Vn,premultipliedAlpha:C.premultipliedAlpha,doubleSided:2===C.side,flipSided:1===C.side,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:St&&!0===C.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(St&&!0===C.extensions.multiDraw||Je)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return $i.vertexUv1s=l.has(1),$i.vertexUv2s=l.has(2),$i.vertexUv3s=l.has(3),l.clear(),$i},getProgramCacheKey:function _(C){const w=[];if(C.shaderID?w.push(C.shaderID):(w.push(C.customVertexShaderID),w.push(C.customFragmentShaderID)),void 0!==C.defines)for(const U in C.defines)w.push(U),w.push(C.defines[U]);return!1===C.isRawShaderMaterial&&(function y(C,w){C.push(w.precision),C.push(w.outputColorSpace),C.push(w.envMapMode),C.push(w.envMapCubeUVHeight),C.push(w.mapUv),C.push(w.alphaMapUv),C.push(w.lightMapUv),C.push(w.aoMapUv),C.push(w.bumpMapUv),C.push(w.normalMapUv),C.push(w.displacementMapUv),C.push(w.emissiveMapUv),C.push(w.metalnessMapUv),C.push(w.roughnessMapUv),C.push(w.anisotropyMapUv),C.push(w.clearcoatMapUv),C.push(w.clearcoatNormalMapUv),C.push(w.clearcoatRoughnessMapUv),C.push(w.iridescenceMapUv),C.push(w.iridescenceThicknessMapUv),C.push(w.sheenColorMapUv),C.push(w.sheenRoughnessMapUv),C.push(w.specularMapUv),C.push(w.specularColorMapUv),C.push(w.specularIntensityMapUv),C.push(w.transmissionMapUv),C.push(w.thicknessMapUv),C.push(w.combine),C.push(w.fogExp2),C.push(w.sizeAttenuation),C.push(w.morphTargetsCount),C.push(w.morphAttributeCount),C.push(w.numDirLights),C.push(w.numPointLights),C.push(w.numSpotLights),C.push(w.numSpotLightMaps),C.push(w.numHemiLights),C.push(w.numRectAreaLights),C.push(w.numDirLightShadows),C.push(w.numPointLightShadows),C.push(w.numSpotLightShadows),C.push(w.numSpotLightShadowsWithMaps),C.push(w.numLightProbes),C.push(w.shadowMapType),C.push(w.toneMapping),C.push(w.numClippingPlanes),C.push(w.numClipIntersection),C.push(w.depthPacking)}(w,C),function v(C,w){a.disableAll(),w.supportsVertexTextures&&a.enable(0),w.instancing&&a.enable(1),w.instancingColor&&a.enable(2),w.instancingMorph&&a.enable(3),w.matcap&&a.enable(4),w.envMap&&a.enable(5),w.normalMapObjectSpace&&a.enable(6),w.normalMapTangentSpace&&a.enable(7),w.clearcoat&&a.enable(8),w.iridescence&&a.enable(9),w.alphaTest&&a.enable(10),w.vertexColors&&a.enable(11),w.vertexAlphas&&a.enable(12),w.vertexUv1s&&a.enable(13),w.vertexUv2s&&a.enable(14),w.vertexUv3s&&a.enable(15),w.vertexTangents&&a.enable(16),w.anisotropy&&a.enable(17),w.alphaHash&&a.enable(18),w.batching&&a.enable(19),w.dispersion&&a.enable(20),w.batchingColor&&a.enable(21),C.push(a.mask),a.disableAll(),w.fog&&a.enable(0),w.useFog&&a.enable(1),w.flatShading&&a.enable(2),w.logarithmicDepthBuffer&&a.enable(3),w.skinning&&a.enable(4),w.morphTargets&&a.enable(5),w.morphNormals&&a.enable(6),w.morphColors&&a.enable(7),w.premultipliedAlpha&&a.enable(8),w.shadowMapEnabled&&a.enable(9),w.doubleSided&&a.enable(10),w.flipSided&&a.enable(11),w.useDepthPacking&&a.enable(12),w.dithering&&a.enable(13),w.transmission&&a.enable(14),w.sheen&&a.enable(15),w.opaque&&a.enable(16),w.pointsUvs&&a.enable(17),w.decodeVideoTexture&&a.enable(18),w.alphaToCoverage&&a.enable(19),C.push(a.mask)}(w,C),w.push(n.outputColorSpace)),w.push(C.customProgramCacheKey),w.join()},getUniforms:function b(C){const w=p[C.type];let U;return U=w?cNe.clone(Ra[w].uniforms):C.uniforms,U},acquireProgram:function M(C,w){let U;for(let q=0,G=u.length;q<G;q++){const Y=u[q];if(Y.cacheKey===w){U=Y,++U.usedTimes;break}}return void 0===U&&(U=new V2e(n,w,C,s),u.push(U)),U},releaseProgram:function S(C){if(0==--C.usedTimes){const w=u.indexOf(C);u[w]=u[u.length-1],u.pop(),C.destroy()}},releaseShaderCache:function x(C){c.remove(C)},programs:u,dispose:function O(){c.dispose()}}}function $2e(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function W2e(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function VQ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function zQ(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,h,f,p,g,m){let _=n[e];return void 0===_?(_={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:g,group:m},n[e]=_):(_.id=d.id,_.object=d,_.geometry=h,_.material=f,_.groupOrder=p,_.renderOrder=d.renderOrder,_.z=g,_.group=m),e++,_}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,h,f,p,g,m){const _=o(d,h,f,p,g,m);f.transmission>0?i.push(_):!0===f.transparent?r.push(_):t.push(_)},unshift:function c(d,h,f,p,g,m){const _=o(d,h,f,p,g,m);f.transmission>0?i.unshift(_):!0===f.transparent?r.unshift(_):t.unshift(_)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function l(d,h){t.length>1&&t.sort(d||W2e),i.length>1&&i.sort(h||VQ),r.length>1&&r.sort(h||VQ)}}}function q2e(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new zQ,n.set(i,[o])):r>=s.length?(o=new zQ,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function K2e(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new k,color:new Le};break;case"SpotLight":t={position:new k,direction:new k,color:new Le,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new k,color:new Le,distance:0,decay:0};break;case"HemisphereLight":t={direction:new k,skyColor:new Le,groundColor:new Le};break;case"RectAreaLight":t={color:new Le,position:new k,halfWidth:new k,halfHeight:new k}}return n[e.id]=t,t}}}let Y2e=0;function Z2e(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Q2e(n){const e=new K2e,t=function X2e(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ce};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ce,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new k);const r=new k,s=new lt,o=new lt;return{setup:function a(l){let u=0,d=0,h=0;for(let C=0;C<9;C++)i.probe[C].set(0,0,0);let f=0,p=0,g=0,m=0,_=0,y=0,v=0,b=0,M=0,S=0,x=0;l.sort(Z2e);for(let C=0,w=l.length;C<w;C++){const U=l[C],q=U.color,G=U.intensity,Y=U.distance,ae=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)u+=q.r*G,d+=q.g*G,h+=q.b*G;else if(U.isLightProbe){for(let B=0;B<9;B++)i.probe[B].addScaledVector(U.sh.coefficients[B],G);x++}else if(U.isDirectionalLight){const B=e.get(U);if(B.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const X=U.shadow,H=t.get(U);H.shadowIntensity=X.intensity,H.shadowBias=X.bias,H.shadowNormalBias=X.normalBias,H.shadowRadius=X.radius,H.shadowMapSize=X.mapSize,i.directionalShadow[f]=H,i.directionalShadowMap[f]=ae,i.directionalShadowMatrix[f]=U.shadow.matrix,y++}i.directional[f]=B,f++}else if(U.isSpotLight){const B=e.get(U);B.position.setFromMatrixPosition(U.matrixWorld),B.color.copy(q).multiplyScalar(G),B.distance=Y,B.coneCos=Math.cos(U.angle),B.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),B.decay=U.decay,i.spot[g]=B;const X=U.shadow;if(U.map&&(i.spotLightMap[M]=U.map,M++,X.updateMatrices(U),U.castShadow&&S++),i.spotLightMatrix[g]=X.matrix,U.castShadow){const H=t.get(U);H.shadowIntensity=X.intensity,H.shadowBias=X.bias,H.shadowNormalBias=X.normalBias,H.shadowRadius=X.radius,H.shadowMapSize=X.mapSize,i.spotShadow[g]=H,i.spotShadowMap[g]=ae,b++}g++}else if(U.isRectAreaLight){const B=e.get(U);B.color.copy(q).multiplyScalar(G),B.halfWidth.set(.5*U.width,0,0),B.halfHeight.set(0,.5*U.height,0),i.rectArea[m]=B,m++}else if(U.isPointLight){const B=e.get(U);if(B.color.copy(U.color).multiplyScalar(U.intensity),B.distance=U.distance,B.decay=U.decay,U.castShadow){const X=U.shadow,H=t.get(U);H.shadowIntensity=X.intensity,H.shadowBias=X.bias,H.shadowNormalBias=X.normalBias,H.shadowRadius=X.radius,H.shadowMapSize=X.mapSize,H.shadowCameraNear=X.camera.near,H.shadowCameraFar=X.camera.far,i.pointShadow[p]=H,i.pointShadowMap[p]=ae,i.pointShadowMatrix[p]=U.shadow.matrix,v++}i.point[p]=B,p++}else if(U.isHemisphereLight){const B=e.get(U);B.skyColor.copy(U.color).multiplyScalar(G),B.groundColor.copy(U.groundColor).multiplyScalar(G),i.hemi[_]=B,_++}}m>0&&(!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=Be.LTC_FLOAT_1,i.rectAreaLTC2=Be.LTC_FLOAT_2):(i.rectAreaLTC1=Be.LTC_HALF_1,i.rectAreaLTC2=Be.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;const O=i.hash;(O.directionalLength!==f||O.pointLength!==p||O.spotLength!==g||O.rectAreaLength!==m||O.hemiLength!==_||O.numDirectionalShadows!==y||O.numPointShadows!==v||O.numSpotShadows!==b||O.numSpotMaps!==M||O.numLightProbes!==x)&&(i.directional.length=f,i.spot.length=g,i.rectArea.length=m,i.point.length=p,i.hemi.length=_,i.directionalShadow.length=y,i.directionalShadowMap.length=y,i.pointShadow.length=v,i.pointShadowMap.length=v,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=y,i.pointShadowMatrix.length=v,i.spotLightMatrix.length=b+M-S,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=S,i.numLightProbes=x,O.directionalLength=f,O.pointLength=p,O.spotLength=g,O.rectAreaLength=m,O.hemiLength=_,O.numDirectionalShadows=y,O.numPointShadows=v,O.numSpotShadows=b,O.numSpotMaps=M,O.numLightProbes=x,i.version=Y2e++)},setupView:function c(l,u){let d=0,h=0,f=0,p=0,g=0;const m=u.matrixWorldInverse;for(let _=0,y=l.length;_<y;_++){const v=l[_];if(v.isDirectionalLight){const b=i.directional[d];b.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(m),d++}else if(v.isSpotLight){const b=i.spot[f];b.position.setFromMatrixPosition(v.matrixWorld),b.position.applyMatrix4(m),b.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(m),f++}else if(v.isRectAreaLight){const b=i.rectArea[p];b.position.setFromMatrixPosition(v.matrixWorld),b.position.applyMatrix4(m),o.identity(),s.copy(v.matrixWorld),s.premultiply(m),o.extractRotation(s),b.halfWidth.set(.5*v.width,0,0),b.halfHeight.set(0,.5*v.height,0),b.halfWidth.applyMatrix4(o),b.halfHeight.applyMatrix4(o),p++}else if(v.isPointLight){const b=i.point[h];b.position.setFromMatrixPosition(v.matrixWorld),b.position.applyMatrix4(m),h++}else if(v.isHemisphereLight){const b=i.hemi[g];b.direction.setFromMatrixPosition(v.matrixWorld),b.direction.transformDirection(m),g++}}},state:i}}function HQ(n){const e=new Q2e(n),t=[],i=[],l={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function r(u){l.camera=u,t.length=0,i.length=0},state:l,setupLights:function a(){e.setup(t)},setupLightsView:function c(u){e.setupView(t,u)},pushLight:function s(u){t.push(u)},pushShadow:function o(u){i.push(u)}}}function J2e(n){let e=new WeakMap;return{get:function t(r,s=0){const o=e.get(r);let a;return void 0===o?(a=new HQ(n),e.set(r,[a])):s>=o.length?(a=new HQ(n),o.push(a)):a=o[s],a},dispose:function i(){e=new WeakMap}}}class GQ extends Wo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class jQ extends Wo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function nFe(n,e,t){let i=new wC;const r=new ce,s=new ce,o=new xn,a=new GQ({depthPacking:3201}),c=new jQ,l={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new Vc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ce},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new Ht;p.setAttribute("position",new Wn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new rr(p,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=EZ;let _=this.type;function y(S,x){const O=e.update(g);h.defines.VSM_SAMPLES!==S.blurSamples&&(h.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===S.mapPass&&(S.mapPass=new Id(r.x,r.y)),h.uniforms.shadow_pass.value=S.map.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(x,null,O,h,g,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(x,null,O,f,g,null)}function v(S,x,O,C){let w=null;const U=!0===O.isPointLight?S.customDistanceMaterial:S.customDepthMaterial;if(void 0!==U)w=U;else if(w=!0===O.isPointLight?c:a,n.localClippingEnabled&&!0===x.clipShadows&&Array.isArray(x.clippingPlanes)&&0!==x.clippingPlanes.length||x.displacementMap&&0!==x.displacementScale||x.alphaMap&&x.alphaTest>0||x.map&&x.alphaTest>0){const q=w.uuid,G=x.uuid;let Y=l[q];void 0===Y&&(Y={},l[q]=Y);let ae=Y[G];void 0===ae&&(ae=w.clone(),Y[G]=ae,x.addEventListener("dispose",M)),w=ae}return w.visible=x.visible,w.wireframe=x.wireframe,w.side=C===Ic?null!==x.shadowSide?x.shadowSide:x.side:null!==x.shadowSide?x.shadowSide:d[x.side],w.alphaMap=x.alphaMap,w.alphaTest=x.alphaTest,w.map=x.map,w.clipShadows=x.clipShadows,w.clippingPlanes=x.clippingPlanes,w.clipIntersection=x.clipIntersection,w.displacementMap=x.displacementMap,w.displacementScale=x.displacementScale,w.displacementBias=x.displacementBias,w.wireframeLinewidth=x.wireframeLinewidth,w.linewidth=x.linewidth,!0===O.isPointLight&&!0===w.isMeshDistanceMaterial&&(n.properties.get(w).light=O),w}function b(S,x,O,C,w){if(!1===S.visible)return;if(S.layers.test(x.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&w===Ic)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(O.matrixWorldInverse,S.matrixWorld);const G=e.update(S),Y=S.material;if(Array.isArray(Y)){const ae=G.groups;for(let B=0,X=ae.length;B<X;B++){const H=ae[B],de=Y[H.materialIndex];if(de&&de.visible){const Ce=v(S,de,C,w);S.onBeforeShadow(n,S,x,O,G,Ce,H),n.renderBufferDirect(O,null,G,Ce,S,H),S.onAfterShadow(n,S,x,O,G,Ce,H)}}}else if(Y.visible){const ae=v(S,Y,C,w);S.onBeforeShadow(n,S,x,O,G,ae,null),n.renderBufferDirect(O,null,G,ae,S,null),S.onAfterShadow(n,S,x,O,G,ae,null)}}const q=S.children;for(let G=0,Y=q.length;G<Y;G++)b(q[G],x,O,C,w)}function M(S){S.target.removeEventListener("dispose",M);for(const O in l){const C=l[O],w=S.target.uuid;w in C&&(C[w].dispose(),delete C[w])}}this.render=function(S,x,O){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===S.length)return;const C=n.getRenderTarget(),w=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),q=n.state;q.setBlending(0),q.buffers.color.setClear(1,1,1,1),q.buffers.depth.setTest(!0),q.setScissorTest(!1);const G=_!==Ic&&this.type===Ic,Y=_===Ic&&this.type!==Ic;for(let ae=0,B=S.length;ae<B;ae++){const X=S[ae],H=X.shadow;if(void 0===H){console.warn("THREE.WebGLShadowMap:",X,"has no shadow.");continue}if(!1===H.autoUpdate&&!1===H.needsUpdate)continue;r.copy(H.mapSize);const de=H.getFrameExtents();if(r.multiply(de),s.copy(H.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/de.x),r.x=s.x*de.x,H.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/de.y),r.y=s.y*de.y,H.mapSize.y=s.y)),null===H.map||!0===G||!0===Y){const Me=this.type!==Ic?{minFilter:nr,magFilter:nr}:{};null!==H.map&&H.map.dispose(),H.map=new Id(r.x,r.y,Me),H.map.texture.name=X.name+".shadowMap",H.camera.updateProjectionMatrix()}n.setRenderTarget(H.map),n.clear();const Ce=H.getViewportCount();for(let Me=0;Me<Ce;Me++){const st=H.getViewport(Me);o.set(s.x*st.x,s.y*st.y,s.x*st.z,s.y*st.w),q.viewport(o),H.updateMatrices(X,Me),i=H.getFrustum(),b(x,O,H.camera,X,this.type)}!0!==H.isPointLightShadow&&this.type===Ic&&y(H,O),H.needsUpdate=!1}_=this.type,m.needsUpdate=!1,n.setRenderTarget(C,w,U)}}function iFe(n){const r=new function e(){let E=!1;const Q=new xn;let te=null;const oe=new xn(0,0,0,0);return{setMask:function(Ee){te!==Ee&&!E&&(n.colorMask(Ee,Ee,Ee,Ee),te=Ee)},setLocked:function(Ee){E=Ee},setClear:function(Ee,ct,St,Si,$i){!0===$i&&(Ee*=Si,ct*=Si,St*=Si),Q.set(Ee,ct,St,Si),!1===oe.equals(Q)&&(n.clearColor(Ee,ct,St,Si),oe.copy(Q))},reset:function(){E=!1,te=null,oe.set(-1,0,0,0)}}},s=new function t(){let E=!1,Q=null,te=null,oe=null;return{setTest:function(Ee){Ee?Re(n.DEPTH_TEST):be(n.DEPTH_TEST)},setMask:function(Ee){Q!==Ee&&!E&&(n.depthMask(Ee),Q=Ee)},setFunc:function(Ee){if(te!==Ee){switch(Ee){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}te=Ee}},setLocked:function(Ee){E=Ee},setClear:function(Ee){oe!==Ee&&(n.clearDepth(Ee),oe=Ee)},reset:function(){E=!1,Q=null,te=null,oe=null}}},o=new function i(){let E=!1,Q=null,te=null,oe=null,Ee=null,ct=null,St=null,Si=null,$i=null;return{setTest:function(sn){E||(sn?Re(n.STENCIL_TEST):be(n.STENCIL_TEST))},setMask:function(sn){Q!==sn&&!E&&(n.stencilMask(sn),Q=sn)},setFunc:function(sn,Wi,Ni){(te!==sn||oe!==Wi||Ee!==Ni)&&(n.stencilFunc(sn,Wi,Ni),te=sn,oe=Wi,Ee=Ni)},setOp:function(sn,Wi,Ni){(ct!==sn||St!==Wi||Si!==Ni)&&(n.stencilOp(sn,Wi,Ni),ct=sn,St=Wi,Si=Ni)},setLocked:function(sn){E=sn},setClear:function(sn){$i!==sn&&(n.clearStencil(sn),$i=sn)},reset:function(){E=!1,Q=null,te=null,oe=null,Ee=null,ct=null,St=null,Si=null,$i=null}}},a=new WeakMap,c=new WeakMap;let l={},u={},d=new WeakMap,h=[],f=null,p=!1,g=null,m=null,_=null,y=null,v=null,b=null,M=null,S=new Le(0,0,0),x=0,O=!1,C=null,w=null,U=null,q=null,G=null;const Y=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ae=!1,B=0;const X=n.getParameter(n.VERSION);-1!==X.indexOf("WebGL")?(B=parseFloat(/^WebGL (\d)/.exec(X)[1]),ae=B>=1):-1!==X.indexOf("OpenGL ES")&&(B=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),ae=B>=2);let H=null,de={};const Ce=n.getParameter(n.SCISSOR_BOX),Me=n.getParameter(n.VIEWPORT),st=(new xn).fromArray(Ce),ft=(new xn).fromArray(Me);function J(E,Q,te,oe){const Ee=new Uint8Array(4),ct=n.createTexture();n.bindTexture(E,ct),n.texParameteri(E,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(E,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let St=0;St<te;St++)E===n.TEXTURE_3D||E===n.TEXTURE_2D_ARRAY?n.texImage3D(Q,0,n.RGBA,1,1,oe,0,n.RGBA,n.UNSIGNED_BYTE,Ee):n.texImage2D(Q+St,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ee);return ct}const ve={};function Re(E){!0!==l[E]&&(n.enable(E),l[E]=!0)}function be(E){!1!==l[E]&&(n.disable(E),l[E]=!1)}ve[n.TEXTURE_2D]=J(n.TEXTURE_2D,n.TEXTURE_2D,1),ve[n.TEXTURE_CUBE_MAP]=J(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ve[n.TEXTURE_2D_ARRAY]=J(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ve[n.TEXTURE_3D]=J(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Re(n.DEPTH_TEST),s.setFunc(3),Fe(!1),ue(1),Re(n.CULL_FACE),Te(0);const Nt={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};Nt[103]=n.MIN,Nt[104]=n.MAX;const L={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA,211:n.CONSTANT_COLOR,212:n.ONE_MINUS_CONSTANT_COLOR,213:n.CONSTANT_ALPHA,214:n.ONE_MINUS_CONSTANT_ALPHA};function Te(E,Q,te,oe,Ee,ct,St,Si,$i,sn){if(0!==E){if(!1===p&&(Re(n.BLEND),p=!0),5===E)Ee=Ee||Q,ct=ct||te,St=St||oe,(Q!==m||Ee!==v)&&(n.blendEquationSeparate(Nt[Q],Nt[Ee]),m=Q,v=Ee),(te!==_||oe!==y||ct!==b||St!==M)&&(n.blendFuncSeparate(L[te],L[oe],L[ct],L[St]),_=te,y=oe,b=ct,M=St),(!1===Si.equals(S)||$i!==x)&&(n.blendColor(Si.r,Si.g,Si.b,$i),S.copy(Si),x=$i),g=E,O=!1;else if(E!==g||sn!==O){if((100!==m||100!==v)&&(n.blendEquation(n.FUNC_ADD),m=100,v=100),sn)switch(E){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",E)}else switch(E){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",E)}_=null,y=null,b=null,M=null,S.set(0,0,0),x=0,g=E,O=sn}}else!0===p&&(be(n.BLEND),p=!1)}function Fe(E){C!==E&&(n.frontFace(E?n.CW:n.CCW),C=E)}function ue(E){0!==E?(Re(n.CULL_FACE),E!==w&&n.cullFace(1===E?n.BACK:2===E?n.FRONT:n.FRONT_AND_BACK)):be(n.CULL_FACE),w=E}function Ve(E,Q,te){E?(Re(n.POLYGON_OFFSET_FILL),(q!==Q||G!==te)&&(n.polygonOffset(Q,te),q=Q,G=te)):be(n.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:s,stencil:o},enable:Re,disable:be,bindFramebuffer:function Ke(E,Q){return u[E]!==Q&&(n.bindFramebuffer(E,Q),u[E]=Q,E===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=Q),E===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=Q),!0)},drawBuffers:function Je(E,Q){let te=h,oe=!1;if(E){te=d.get(Q),void 0===te&&(te=[],d.set(Q,te));const Ee=E.textures;if(te.length!==Ee.length||te[0]!==n.COLOR_ATTACHMENT0){for(let ct=0,St=Ee.length;ct<St;ct++)te[ct]=n.COLOR_ATTACHMENT0+ct;te.length=Ee.length,oe=!0}}else te[0]!==n.BACK&&(te[0]=n.BACK,oe=!0);oe&&n.drawBuffers(te)},useProgram:function Xe(E){return f!==E&&(n.useProgram(E),f=E,!0)},setBlending:Te,setMaterial:function we(E,Q){2===E.side?be(n.CULL_FACE):Re(n.CULL_FACE);let te=1===E.side;Q&&(te=!te),Fe(te),1===E.blending&&!1===E.transparent?Te(0):Te(E.blending,E.blendEquation,E.blendSrc,E.blendDst,E.blendEquationAlpha,E.blendSrcAlpha,E.blendDstAlpha,E.blendColor,E.blendAlpha,E.premultipliedAlpha),s.setFunc(E.depthFunc),s.setTest(E.depthTest),s.setMask(E.depthWrite),r.setMask(E.colorWrite);const oe=E.stencilWrite;o.setTest(oe),oe&&(o.setMask(E.stencilWriteMask),o.setFunc(E.stencilFunc,E.stencilRef,E.stencilFuncMask),o.setOp(E.stencilFail,E.stencilZFail,E.stencilZPass)),Ve(E.polygonOffset,E.polygonOffsetFactor,E.polygonOffsetUnits),!0===E.alphaToCoverage?Re(n.SAMPLE_ALPHA_TO_COVERAGE):be(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Fe,setCullFace:ue,setLineWidth:function ht(E){E!==U&&(ae&&n.lineWidth(E),U=E)},setPolygonOffset:Ve,setScissorTest:function We(E){E?Re(n.SCISSOR_TEST):be(n.SCISSOR_TEST)},activeTexture:function F(E){void 0===E&&(E=n.TEXTURE0+Y-1),H!==E&&(n.activeTexture(E),H=E)},bindTexture:function T(E,Q,te){void 0===te&&(te=null===H?n.TEXTURE0+Y-1:H);let oe=de[te];void 0===oe&&(oe={type:void 0,texture:void 0},de[te]=oe),(oe.type!==E||oe.texture!==Q)&&(H!==te&&(n.activeTexture(te),H=te),n.bindTexture(E,Q||ve[E]),oe.type=E,oe.texture=Q)},unbindTexture:function ne(){const E=de[H];void 0!==E&&void 0!==E.type&&(n.bindTexture(E.type,null),E.type=void 0,E.texture=void 0)},compressedTexImage2D:function _e(){try{n.compressedTexImage2D.apply(n,arguments)}catch(E){console.error("THREE.WebGLState:",E)}},compressedTexImage3D:function ge(){try{n.compressedTexImage3D.apply(n,arguments)}catch(E){console.error("THREE.WebGLState:",E)}},texImage2D:function He(){try{n.texImage2D.apply(n,arguments)}catch(E){console.error("THREE.WebGLState:",E)}},texImage3D:function Xt(){try{n.texImage3D.apply(n,arguments)}catch(E){console.error("THREE.WebGLState:",E)}},updateUBOMapping:function Et(E,Q){let te=c.get(Q);void 0===te&&(te=new WeakMap,c.set(Q,te));let oe=te.get(E);void 0===oe&&(oe=n.getUniformBlockIndex(Q,E.name),te.set(E,oe))},uniformBlockBinding:function Dt(E,Q){const oe=c.get(Q).get(E);a.get(Q)!==oe&&(n.uniformBlockBinding(Q,oe,E.__bindingPointIndex),a.set(Q,oe))},texStorage2D:function It(){try{n.texStorage2D.apply(n,arguments)}catch(E){console.error("THREE.WebGLState:",E)}},texStorage3D:function xe(){try{n.texStorage3D.apply(n,arguments)}catch(E){console.error("THREE.WebGLState:",E)}},texSubImage2D:function pe(){try{n.texSubImage2D.apply(n,arguments)}catch(E){console.error("THREE.WebGLState:",E)}},texSubImage3D:function at(){try{n.texSubImage3D.apply(n,arguments)}catch(E){console.error("THREE.WebGLState:",E)}},compressedTexSubImage2D:function Ne(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(E){console.error("THREE.WebGLState:",E)}},compressedTexSubImage3D:function je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(E){console.error("THREE.WebGLState:",E)}},scissor:function bt(E){!1===st.equals(E)&&(n.scissor(E.x,E.y,E.z,E.w),st.copy(E))},viewport:function qe(E){!1===ft.equals(E)&&(n.viewport(E.x,E.y,E.z,E.w),ft.copy(E))},reset:function qn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),l={},H=null,de={},u={},d=new WeakMap,h=[],f=null,p=!1,g=null,m=null,_=null,y=null,v=null,b=null,M=null,S=new Le(0,0,0),x=0,O=!1,C=null,w=null,U=null,q=null,G=null,st.set(0,0,n.canvas.width,n.canvas.height),ft.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}}}function kF(n,e,t,i){const r=function aFe(n){switch(n){case Rc:case MZ:return{byteLength:1,components:1};case $y:case AZ:case Wy:return{byteLength:2,components:1};case S2:case C2:return{byteLength:2,components:4};case Hl:case E2:case $s:return{byteLength:4,components:1};case IZ:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}(i);switch(t){case DZ:case PZ:return n*e;case OZ:return n*e*2;case x2:case HS:return n*e/r.components*r.byteLength;case NZ:case T2:return n*e*2/r.components*r.byteLength;case RZ:return n*e*3/r.components*r.byteLength;case Ts:case M2:return n*e*4/r.components*r.byteLength;case GS:case jS:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case $S:case WS:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case I2:case R2:return Math.max(n,16)*Math.max(e,8)/4;case A2:case D2:return Math.max(n,8)*Math.max(e,8)/2;case P2:case O2:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case N2:case k2:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case L2:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case F2:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case U2:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case B2:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case V2:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case z2:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case H2:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case G2:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case j2:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case $2:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case W2:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case q2:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case K2:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case qS:case X2:case Y2:return Math.ceil(n/4)*Math.ceil(e/4)*16;case kZ:case Z2:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Q2:case J2:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function cFe(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),l=new ce,u=new WeakMap;let d;const h=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function p(F,T){return f?new OffscreenCanvas(F,T):Yy("canvas")}function g(F,T,ne){let _e=1;const ge=We(F);if((ge.width>ne||ge.height>ne)&&(_e=ne/Math.max(ge.width,ge.height)),_e<1){if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap||typeof VideoFrame<"u"&&F instanceof VideoFrame){const pe=Math.floor(_e*ge.width),at=Math.floor(_e*ge.height);void 0===d&&(d=p(pe,at));const Ne=T?p(pe,at):d;return Ne.width=pe,Ne.height=at,Ne.getContext("2d").drawImage(F,0,0,pe,at),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ge.width+"x"+ge.height+") to ("+pe+"x"+at+")."),Ne}return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ge.width+"x"+ge.height+")."),F}return F}function m(F){return F.generateMipmaps&&F.minFilter!==nr&&F.minFilter!==wi}function _(F){n.generateMipmap(F)}function y(F,T,ne,_e,ge=!1){if(null!==F){if(void 0!==n[F])return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let pe=T;if(T===n.RED&&(ne===n.FLOAT&&(pe=n.R32F),ne===n.HALF_FLOAT&&(pe=n.R16F),ne===n.UNSIGNED_BYTE&&(pe=n.R8)),T===n.RED_INTEGER&&(ne===n.UNSIGNED_BYTE&&(pe=n.R8UI),ne===n.UNSIGNED_SHORT&&(pe=n.R16UI),ne===n.UNSIGNED_INT&&(pe=n.R32UI),ne===n.BYTE&&(pe=n.R8I),ne===n.SHORT&&(pe=n.R16I),ne===n.INT&&(pe=n.R32I)),T===n.RG&&(ne===n.FLOAT&&(pe=n.RG32F),ne===n.HALF_FLOAT&&(pe=n.RG16F),ne===n.UNSIGNED_BYTE&&(pe=n.RG8)),T===n.RG_INTEGER&&(ne===n.UNSIGNED_BYTE&&(pe=n.RG8UI),ne===n.UNSIGNED_SHORT&&(pe=n.RG16UI),ne===n.UNSIGNED_INT&&(pe=n.RG32UI),ne===n.BYTE&&(pe=n.RG8I),ne===n.SHORT&&(pe=n.RG16I),ne===n.INT&&(pe=n.RG32I)),T===n.RGB&&ne===n.UNSIGNED_INT_5_9_9_9_REV&&(pe=n.RGB9_E5),T===n.RGBA){const at=ge?YS:an.getTransfer(_e);ne===n.FLOAT&&(pe=n.RGBA32F),ne===n.HALF_FLOAT&&(pe=n.RGBA16F),ne===n.UNSIGNED_BYTE&&(pe=at===Vn?n.SRGB8_ALPHA8:n.RGBA8),ne===n.UNSIGNED_SHORT_4_4_4_4&&(pe=n.RGBA4),ne===n.UNSIGNED_SHORT_5_5_5_1&&(pe=n.RGB5_A1)}return(pe===n.R16F||pe===n.R32F||pe===n.RG16F||pe===n.RG32F||pe===n.RGBA16F||pe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),pe}function v(F,T){let ne;return F?null===T||T===Hl||T===Sp?ne=n.DEPTH24_STENCIL8:T===$s?ne=n.DEPTH32F_STENCIL8:T===$y&&(ne=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===T||T===Hl||T===Sp?ne=n.DEPTH_COMPONENT24:T===$s?ne=n.DEPTH_COMPONENT32F:T===$y&&(ne=n.DEPTH_COMPONENT16),ne}function b(F,T){return!0===m(F)||F.isFramebufferTexture&&F.minFilter!==nr&&F.minFilter!==wi?Math.log2(Math.max(T.width,T.height))+1:void 0!==F.mipmaps&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?T.mipmaps.length:1}function M(F){const T=F.target;T.removeEventListener("dispose",M),function x(F){const T=i.get(F);if(void 0===T.__webglInit)return;const ne=F.source,_e=h.get(ne);if(_e){const ge=_e[T.__cacheKey];ge.usedTimes--,0===ge.usedTimes&&O(F),0===Object.keys(_e).length&&h.delete(ne)}i.remove(F)}(T),T.isVideoTexture&&u.delete(T)}function S(F){const T=F.target;T.removeEventListener("dispose",S),function C(F){const T=i.get(F);if(F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++){if(Array.isArray(T.__webglFramebuffer[_e]))for(let ge=0;ge<T.__webglFramebuffer[_e].length;ge++)n.deleteFramebuffer(T.__webglFramebuffer[_e][ge]);else n.deleteFramebuffer(T.__webglFramebuffer[_e]);T.__webglDepthbuffer&&n.deleteRenderbuffer(T.__webglDepthbuffer[_e])}else{if(Array.isArray(T.__webglFramebuffer))for(let _e=0;_e<T.__webglFramebuffer.length;_e++)n.deleteFramebuffer(T.__webglFramebuffer[_e]);else n.deleteFramebuffer(T.__webglFramebuffer);if(T.__webglDepthbuffer&&n.deleteRenderbuffer(T.__webglDepthbuffer),T.__webglMultisampledFramebuffer&&n.deleteFramebuffer(T.__webglMultisampledFramebuffer),T.__webglColorRenderbuffer)for(let _e=0;_e<T.__webglColorRenderbuffer.length;_e++)T.__webglColorRenderbuffer[_e]&&n.deleteRenderbuffer(T.__webglColorRenderbuffer[_e]);T.__webglDepthRenderbuffer&&n.deleteRenderbuffer(T.__webglDepthRenderbuffer)}const ne=F.textures;for(let _e=0,ge=ne.length;_e<ge;_e++){const pe=i.get(ne[_e]);pe.__webglTexture&&(n.deleteTexture(pe.__webglTexture),o.memory.textures--),i.remove(ne[_e])}i.remove(F)}(T)}function O(F){const T=i.get(F);n.deleteTexture(T.__webglTexture),delete h.get(F.source)[T.__cacheKey],o.memory.textures--}let w=0;function Y(F,T){const ne=i.get(F);if(F.isVideoTexture&&function ht(F){const T=o.render.frame;u.get(F)!==T&&(u.set(F,T),F.update())}(F),!1===F.isRenderTargetTexture&&F.version>0&&ne.__version!==F.version){const _e=F.image;if(null===_e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==_e.complete)return void ft(ne,F,T);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,ne.__webglTexture,n.TEXTURE0+T)}const H={[xd]:n.REPEAT,[_o]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},de={[nr]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,[Ep]:n.NEAREST_MIPMAP_LINEAR,[wi]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[Ho]:n.LINEAR_MIPMAP_LINEAR},Ce={512:n.NEVER,519:n.ALWAYS,513:n.LESS,515:n.LEQUAL,514:n.EQUAL,518:n.GEQUAL,516:n.GREATER,517:n.NOTEQUAL};function Me(F,T){if(T.type===$s&&!1===e.has("OES_texture_float_linear")&&(T.magFilter===wi||1007===T.magFilter||T.magFilter===Ep||T.magFilter===Ho||T.minFilter===wi||1007===T.minFilter||T.minFilter===Ep||T.minFilter===Ho)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(F,n.TEXTURE_WRAP_S,H[T.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,H[T.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,H[T.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,de[T.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,de[T.minFilter]),T.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,Ce[T.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(T.magFilter===nr||T.minFilter!==Ep&&T.minFilter!==Ho||T.type===$s&&!1===e.has("OES_texture_float_linear"))return;if(T.anisotropy>1||i.get(T).__currentAnisotropy){const ne=e.get("EXT_texture_filter_anisotropic");n.texParameterf(F,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(T.anisotropy,r.getMaxAnisotropy())),i.get(T).__currentAnisotropy=T.anisotropy}}}function st(F,T){let ne=!1;void 0===F.__webglInit&&(F.__webglInit=!0,T.addEventListener("dispose",M));const _e=T.source;let ge=h.get(_e);void 0===ge&&(ge={},h.set(_e,ge));const pe=function G(F){const T=[];return T.push(F.wrapS),T.push(F.wrapT),T.push(F.wrapR||0),T.push(F.magFilter),T.push(F.minFilter),T.push(F.anisotropy),T.push(F.internalFormat),T.push(F.format),T.push(F.type),T.push(F.generateMipmaps),T.push(F.premultiplyAlpha),T.push(F.flipY),T.push(F.unpackAlignment),T.push(F.colorSpace),T.join()}(T);if(pe!==F.__cacheKey){void 0===ge[pe]&&(ge[pe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),ge[pe].usedTimes++;const at=ge[F.__cacheKey];void 0!==at&&(ge[F.__cacheKey].usedTimes--,0===at.usedTimes&&O(T)),F.__cacheKey=pe,F.__webglTexture=ge[pe].texture}return ne}function ft(F,T,ne){let _e=n.TEXTURE_2D;(T.isDataArrayTexture||T.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),T.isData3DTexture&&(_e=n.TEXTURE_3D);const ge=st(F,T),pe=T.source;t.bindTexture(_e,F.__webglTexture,n.TEXTURE0+ne);const at=i.get(pe);if(pe.version!==at.__version||!0===ge){t.activeTexture(n.TEXTURE0+ne);const Ne=an.getPrimaries(an.workingColorSpace),je=""===T.colorSpace?null:an.getPrimaries(T.colorSpace),It=""===T.colorSpace||Ne===je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,T.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,T.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,It);let xe=g(T.image,!1,r.maxTextureSize);xe=Ve(T,xe);const He=s.convert(T.format,T.colorSpace),Xt=s.convert(T.type);let qe,bt=y(T.internalFormat,He,Xt,T.colorSpace,T.isVideoTexture);Me(_e,T);const Et=T.mipmaps,Dt=!0!==T.isVideoTexture,qn=void 0===at.__version||!0===ge,E=pe.dataReady,Q=b(T,xe);if(T.isDepthTexture)bt=v(T.format===xp,T.type),qn&&(Dt?t.texStorage2D(n.TEXTURE_2D,1,bt,xe.width,xe.height):t.texImage2D(n.TEXTURE_2D,0,bt,xe.width,xe.height,0,He,Xt,null));else if(T.isDataTexture)if(Et.length>0){Dt&&qn&&t.texStorage2D(n.TEXTURE_2D,Q,bt,Et[0].width,Et[0].height);for(let te=0,oe=Et.length;te<oe;te++)qe=Et[te],Dt?E&&t.texSubImage2D(n.TEXTURE_2D,te,0,0,qe.width,qe.height,He,Xt,qe.data):t.texImage2D(n.TEXTURE_2D,te,bt,qe.width,qe.height,0,He,Xt,qe.data);T.generateMipmaps=!1}else Dt?(qn&&t.texStorage2D(n.TEXTURE_2D,Q,bt,xe.width,xe.height),E&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,xe.width,xe.height,He,Xt,xe.data)):t.texImage2D(n.TEXTURE_2D,0,bt,xe.width,xe.height,0,He,Xt,xe.data);else if(T.isCompressedTexture)if(T.isCompressedArrayTexture){Dt&&qn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Q,bt,Et[0].width,Et[0].height,xe.depth);for(let te=0,oe=Et.length;te<oe;te++)if(qe=Et[te],T.format!==Ts)if(null!==He)if(Dt){if(E)if(T.layerUpdates.size>0){const Ee=kF(qe.width,qe.height,T.format,T.type);for(const ct of T.layerUpdates){const St=qe.data.subarray(ct*Ee/qe.data.BYTES_PER_ELEMENT,(ct+1)*Ee/qe.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,te,0,0,ct,qe.width,qe.height,1,He,St,0,0)}T.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,te,0,0,0,qe.width,qe.height,xe.depth,He,qe.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,te,bt,qe.width,qe.height,xe.depth,0,qe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Dt?E&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,te,0,0,0,qe.width,qe.height,xe.depth,He,Xt,qe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,te,bt,qe.width,qe.height,xe.depth,0,He,Xt,qe.data)}else{Dt&&qn&&t.texStorage2D(n.TEXTURE_2D,Q,bt,Et[0].width,Et[0].height);for(let te=0,oe=Et.length;te<oe;te++)qe=Et[te],T.format!==Ts?null!==He?Dt?E&&t.compressedTexSubImage2D(n.TEXTURE_2D,te,0,0,qe.width,qe.height,He,qe.data):t.compressedTexImage2D(n.TEXTURE_2D,te,bt,qe.width,qe.height,0,qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Dt?E&&t.texSubImage2D(n.TEXTURE_2D,te,0,0,qe.width,qe.height,He,Xt,qe.data):t.texImage2D(n.TEXTURE_2D,te,bt,qe.width,qe.height,0,He,Xt,qe.data)}else if(T.isDataArrayTexture)if(Dt){if(qn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Q,bt,xe.width,xe.height,xe.depth),E)if(T.layerUpdates.size>0){const te=kF(xe.width,xe.height,T.format,T.type);for(const oe of T.layerUpdates){const Ee=xe.data.subarray(oe*te/xe.data.BYTES_PER_ELEMENT,(oe+1)*te/xe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,oe,xe.width,xe.height,1,He,Xt,Ee)}T.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,xe.width,xe.height,xe.depth,He,Xt,xe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,bt,xe.width,xe.height,xe.depth,0,He,Xt,xe.data);else if(T.isData3DTexture)Dt?(qn&&t.texStorage3D(n.TEXTURE_3D,Q,bt,xe.width,xe.height,xe.depth),E&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,xe.width,xe.height,xe.depth,He,Xt,xe.data)):t.texImage3D(n.TEXTURE_3D,0,bt,xe.width,xe.height,xe.depth,0,He,Xt,xe.data);else if(T.isFramebufferTexture){if(qn)if(Dt)t.texStorage2D(n.TEXTURE_2D,Q,bt,xe.width,xe.height);else{let te=xe.width,oe=xe.height;for(let Ee=0;Ee<Q;Ee++)t.texImage2D(n.TEXTURE_2D,Ee,bt,te,oe,0,He,Xt,null),te>>=1,oe>>=1}}else if(Et.length>0){if(Dt&&qn){const te=We(Et[0]);t.texStorage2D(n.TEXTURE_2D,Q,bt,te.width,te.height)}for(let te=0,oe=Et.length;te<oe;te++)qe=Et[te],Dt?E&&t.texSubImage2D(n.TEXTURE_2D,te,0,0,He,Xt,qe):t.texImage2D(n.TEXTURE_2D,te,bt,He,Xt,qe);T.generateMipmaps=!1}else if(Dt){if(qn){const te=We(xe);t.texStorage2D(n.TEXTURE_2D,Q,bt,te.width,te.height)}E&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,He,Xt,xe)}else t.texImage2D(n.TEXTURE_2D,0,bt,He,Xt,xe);m(T)&&_(_e),at.__version=pe.version,T.onUpdate&&T.onUpdate(T)}F.__version=T.version}function ve(F,T,ne,_e,ge,pe){const at=s.convert(ne.format,ne.colorSpace),Ne=s.convert(ne.type),je=y(ne.internalFormat,at,Ne,ne.colorSpace);if(!i.get(T).__hasExternalTextures){const xe=Math.max(1,T.width>>pe),He=Math.max(1,T.height>>pe);ge===n.TEXTURE_3D||ge===n.TEXTURE_2D_ARRAY?t.texImage3D(ge,pe,je,xe,He,T.depth,0,at,Ne,null):t.texImage2D(ge,pe,je,xe,He,0,at,Ne,null)}t.bindFramebuffer(n.FRAMEBUFFER,F),ue(T)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,ge,i.get(ne).__webglTexture,0,Fe(T)):(ge===n.TEXTURE_2D||ge>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ge<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,ge,i.get(ne).__webglTexture,pe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Re(F,T,ne){if(n.bindRenderbuffer(n.RENDERBUFFER,F),T.depthBuffer){const _e=T.depthTexture,pe=v(T.stencilBuffer,_e&&_e.isDepthTexture?_e.type:null),at=T.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ne=Fe(T);ue(T)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ne,pe,T.width,T.height):ne?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ne,pe,T.width,T.height):n.renderbufferStorage(n.RENDERBUFFER,pe,T.width,T.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,at,n.RENDERBUFFER,F)}else{const _e=T.textures;for(let ge=0;ge<_e.length;ge++){const pe=_e[ge],at=s.convert(pe.format,pe.colorSpace),Ne=s.convert(pe.type),je=y(pe.internalFormat,at,Ne,pe.colorSpace),It=Fe(T);ne&&!1===ue(T)?n.renderbufferStorageMultisample(n.RENDERBUFFER,It,je,T.width,T.height):ue(T)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,It,je,T.width,T.height):n.renderbufferStorage(n.RENDERBUFFER,je,T.width,T.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ke(F){const T=i.get(F),ne=!0===F.isWebGLCubeRenderTarget;if(F.depthTexture&&!T.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");!function be(F,T){if(T&&T.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,F),!T.depthTexture||!T.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(T.depthTexture).__webglTexture||T.depthTexture.image.width!==T.width||T.depthTexture.image.height!==T.height)&&(T.depthTexture.image.width=T.width,T.depthTexture.image.height=T.height,T.depthTexture.needsUpdate=!0),Y(T.depthTexture,0);const _e=i.get(T.depthTexture).__webglTexture,ge=Fe(T);if(T.depthTexture.format===Cp)ue(T)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0,ge):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0);else{if(T.depthTexture.format!==xp)throw new Error("Unknown depthTexture format");ue(T)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0,ge):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0)}}(T.__webglFramebuffer,F)}else if(ne){T.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)t.bindFramebuffer(n.FRAMEBUFFER,T.__webglFramebuffer[_e]),T.__webglDepthbuffer[_e]=n.createRenderbuffer(),Re(T.__webglDepthbuffer[_e],F,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,T.__webglFramebuffer),T.__webglDepthbuffer=n.createRenderbuffer(),Re(T.__webglDepthbuffer,F,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}const L=[],Te=[];function Fe(F){return Math.min(r.maxSamples,F.samples)}function ue(F){const T=i.get(F);return F.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==T.__useRenderToTexture}function Ve(F,T){const ne=F.colorSpace,_e=F.format,ge=F.type;return!0===F.isCompressedTexture||!0===F.isVideoTexture||ne!==Sr&&""!==ne&&(an.getTransfer(ne)===Vn?(_e!==Ts||ge!==Rc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),T}function We(F){return typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement?(l.width=F.naturalWidth||F.width,l.height=F.naturalHeight||F.height):typeof VideoFrame<"u"&&F instanceof VideoFrame?(l.width=F.displayWidth,l.height=F.displayHeight):(l.width=F.width,l.height=F.height),l}this.allocateTextureUnit=function q(){const F=w;return F>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+r.maxTextures),w+=1,F},this.resetTextureUnits=function U(){w=0},this.setTexture2D=Y,this.setTexture2DArray=function ae(F,T){const ne=i.get(F);F.version>0&&ne.__version!==F.version?ft(ne,F,T):t.bindTexture(n.TEXTURE_2D_ARRAY,ne.__webglTexture,n.TEXTURE0+T)},this.setTexture3D=function B(F,T){const ne=i.get(F);F.version>0&&ne.__version!==F.version?ft(ne,F,T):t.bindTexture(n.TEXTURE_3D,ne.__webglTexture,n.TEXTURE0+T)},this.setTextureCube=function X(F,T){const ne=i.get(F);F.version>0&&ne.__version!==F.version?function J(F,T,ne){if(6!==T.image.length)return;const _e=st(F,T),ge=T.source;t.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+ne);const pe=i.get(ge);if(ge.version!==pe.__version||!0===_e){t.activeTexture(n.TEXTURE0+ne);const at=an.getPrimaries(an.workingColorSpace),Ne=""===T.colorSpace?null:an.getPrimaries(T.colorSpace),je=""===T.colorSpace||at===Ne?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,T.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,T.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,je);const It=T.isCompressedTexture||T.image[0].isCompressedTexture,xe=T.image[0]&&T.image[0].isDataTexture,He=[];for(let oe=0;oe<6;oe++)He[oe]=It||xe?xe?T.image[oe].image:T.image[oe]:g(T.image[oe],!0,r.maxCubemapSize),He[oe]=Ve(T,He[oe]);const Xt=He[0],bt=s.convert(T.format,T.colorSpace),qe=s.convert(T.type),Et=y(T.internalFormat,bt,qe,T.colorSpace),Dt=!0!==T.isVideoTexture,qn=void 0===pe.__version||!0===_e,E=ge.dataReady;let te,Q=b(T,Xt);if(Me(n.TEXTURE_CUBE_MAP,T),It){Dt&&qn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Q,Et,Xt.width,Xt.height);for(let oe=0;oe<6;oe++){te=He[oe].mipmaps;for(let Ee=0;Ee<te.length;Ee++){const ct=te[Ee];T.format!==Ts?null!==bt?Dt?E&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ee,0,0,ct.width,ct.height,bt,ct.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ee,Et,ct.width,ct.height,0,ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Dt?E&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ee,0,0,ct.width,ct.height,bt,qe,ct.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ee,Et,ct.width,ct.height,0,bt,qe,ct.data)}}}else{if(te=T.mipmaps,Dt&&qn){te.length>0&&Q++;const oe=We(He[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Q,Et,oe.width,oe.height)}for(let oe=0;oe<6;oe++)if(xe){Dt?E&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,0,0,He[oe].width,He[oe].height,bt,qe,He[oe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,Et,He[oe].width,He[oe].height,0,bt,qe,He[oe].data);for(let Ee=0;Ee<te.length;Ee++){const St=te[Ee].image[oe].image;Dt?E&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ee+1,0,0,St.width,St.height,bt,qe,St.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ee+1,Et,St.width,St.height,0,bt,qe,St.data)}}else{Dt?E&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,0,0,bt,qe,He[oe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,Et,bt,qe,He[oe]);for(let Ee=0;Ee<te.length;Ee++){const ct=te[Ee];Dt?E&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ee+1,0,0,bt,qe,ct.image[oe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ee+1,Et,bt,qe,ct.image[oe])}}}m(T)&&_(n.TEXTURE_CUBE_MAP),pe.__version=ge.version,T.onUpdate&&T.onUpdate(T)}F.__version=T.version}(ne,F,T):t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+T)},this.rebindTextures=function Je(F,T,ne){const _e=i.get(F);void 0!==T&&ve(_e.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==ne&&Ke(F)},this.setupRenderTarget=function Xe(F){const T=F.texture,ne=i.get(F),_e=i.get(T);F.addEventListener("dispose",S);const ge=F.textures,pe=!0===F.isWebGLCubeRenderTarget,at=ge.length>1;if(at||(void 0===_e.__webglTexture&&(_e.__webglTexture=n.createTexture()),_e.__version=T.version,o.memory.textures++),pe){ne.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)if(T.mipmaps&&T.mipmaps.length>0){ne.__webglFramebuffer[Ne]=[];for(let je=0;je<T.mipmaps.length;je++)ne.__webglFramebuffer[Ne][je]=n.createFramebuffer()}else ne.__webglFramebuffer[Ne]=n.createFramebuffer()}else{if(T.mipmaps&&T.mipmaps.length>0){ne.__webglFramebuffer=[];for(let Ne=0;Ne<T.mipmaps.length;Ne++)ne.__webglFramebuffer[Ne]=n.createFramebuffer()}else ne.__webglFramebuffer=n.createFramebuffer();if(at)for(let Ne=0,je=ge.length;Ne<je;Ne++){const It=i.get(ge[Ne]);void 0===It.__webglTexture&&(It.__webglTexture=n.createTexture(),o.memory.textures++)}if(F.samples>0&&!1===ue(F)){ne.__webglMultisampledFramebuffer=n.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let Ne=0;Ne<ge.length;Ne++){const je=ge[Ne];ne.__webglColorRenderbuffer[Ne]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ne.__webglColorRenderbuffer[Ne]);const It=s.convert(je.format,je.colorSpace),xe=s.convert(je.type),He=y(je.internalFormat,It,xe,je.colorSpace,!0===F.isXRRenderTarget),Xt=Fe(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,Xt,He,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ne,n.RENDERBUFFER,ne.__webglColorRenderbuffer[Ne])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(ne.__webglDepthRenderbuffer=n.createRenderbuffer(),Re(ne.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(pe){t.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),Me(n.TEXTURE_CUBE_MAP,T);for(let Ne=0;Ne<6;Ne++)if(T.mipmaps&&T.mipmaps.length>0)for(let je=0;je<T.mipmaps.length;je++)ve(ne.__webglFramebuffer[Ne][je],F,T,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,je);else ve(ne.__webglFramebuffer[Ne],F,T,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0);m(T)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(at){for(let Ne=0,je=ge.length;Ne<je;Ne++){const It=ge[Ne],xe=i.get(It);t.bindTexture(n.TEXTURE_2D,xe.__webglTexture),Me(n.TEXTURE_2D,It),ve(ne.__webglFramebuffer,F,It,n.COLOR_ATTACHMENT0+Ne,n.TEXTURE_2D,0),m(It)&&_(n.TEXTURE_2D)}t.unbindTexture()}else{let Ne=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(Ne=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ne,_e.__webglTexture),Me(Ne,T),T.mipmaps&&T.mipmaps.length>0)for(let je=0;je<T.mipmaps.length;je++)ve(ne.__webglFramebuffer[je],F,T,n.COLOR_ATTACHMENT0,Ne,je);else ve(ne.__webglFramebuffer,F,T,n.COLOR_ATTACHMENT0,Ne,0);m(T)&&_(Ne),t.unbindTexture()}F.depthBuffer&&Ke(F)},this.updateRenderTargetMipmap=function Nt(F){const T=F.textures;for(let ne=0,_e=T.length;ne<_e;ne++){const ge=T[ne];if(m(ge)){const pe=F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,at=i.get(ge).__webglTexture;t.bindTexture(pe,at),_(pe),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function we(F){if(F.samples>0)if(!1===ue(F)){const T=F.textures,ne=F.width,_e=F.height;let ge=n.COLOR_BUFFER_BIT;const pe=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,at=i.get(F),Ne=T.length>1;if(Ne)for(let je=0;je<T.length;je++)t.bindFramebuffer(n.FRAMEBUFFER,at.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,at.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,at.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,at.__webglFramebuffer);for(let je=0;je<T.length;je++){if(F.resolveDepthBuffer&&(F.depthBuffer&&(ge|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&F.resolveStencilBuffer&&(ge|=n.STENCIL_BUFFER_BIT)),Ne){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,at.__webglColorRenderbuffer[je]);const It=i.get(T[je]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,It,0)}n.blitFramebuffer(0,0,ne,_e,0,0,ne,_e,ge,n.NEAREST),!0===c&&(L.length=0,Te.length=0,L.push(n.COLOR_ATTACHMENT0+je),F.depthBuffer&&!1===F.resolveDepthBuffer&&(L.push(pe),Te.push(pe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Te)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,L))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ne)for(let je=0;je<T.length;je++){t.bindFramebuffer(n.FRAMEBUFFER,at.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.RENDERBUFFER,at.__webglColorRenderbuffer[je]);const It=i.get(T[je]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,at.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.TEXTURE_2D,It,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,at.__webglMultisampledFramebuffer)}else F.depthBuffer&&!1===F.resolveDepthBuffer&&c&&n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Ke,this.setupFrameBufferTexture=ve,this.useMultisampledRTT=ue}function lFe(n,e){return{convert:function t(i,r=""){let s;const o=an.getTransfer(r);if(i===Rc)return n.UNSIGNED_BYTE;if(i===S2)return n.UNSIGNED_SHORT_4_4_4_4;if(i===C2)return n.UNSIGNED_SHORT_5_5_5_1;if(i===IZ)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===MZ)return n.BYTE;if(i===AZ)return n.SHORT;if(i===$y)return n.UNSIGNED_SHORT;if(i===E2)return n.INT;if(i===Hl)return n.UNSIGNED_INT;if(i===$s)return n.FLOAT;if(i===Wy)return n.HALF_FLOAT;if(i===DZ)return n.ALPHA;if(i===RZ)return n.RGB;if(i===Ts)return n.RGBA;if(i===PZ)return n.LUMINANCE;if(i===OZ)return n.LUMINANCE_ALPHA;if(i===Cp)return n.DEPTH_COMPONENT;if(i===xp)return n.DEPTH_STENCIL;if(i===x2)return n.RED;if(i===HS)return n.RED_INTEGER;if(i===NZ)return n.RG;if(i===T2)return n.RG_INTEGER;if(i===M2)return n.RGBA_INTEGER;if(i===GS||i===jS||i===$S||i===WS)if(o===Vn){if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(i===GS)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===jS)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===$S)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===WS)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(i===GS)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===jS)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===$S)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===WS)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===A2||i===I2||i===D2||i===R2){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(i===A2)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===I2)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===D2)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===R2)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===P2||i===O2||i===N2){if(s=e.get("WEBGL_compressed_texture_etc"),null===s)return null;if(i===P2||i===O2)return o===Vn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===N2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(i===k2||i===L2||i===F2||i===U2||i===B2||i===V2||i===z2||i===H2||i===G2||i===j2||i===$2||i===W2||i===q2||i===K2){if(s=e.get("WEBGL_compressed_texture_astc"),null===s)return null;if(i===k2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===L2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===F2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===U2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===B2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===V2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===z2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===H2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===G2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===j2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===$2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===W2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===q2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===K2)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===qS||i===X2||i===Y2){if(s=e.get("EXT_texture_compression_bptc"),null===s)return null;if(i===qS)return o===Vn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===X2)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Y2)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(i===kZ||i===Z2||i===Q2||i===J2){if(s=e.get("EXT_texture_compression_rgtc"),null===s)return null;if(i===qS)return s.COMPRESSED_RED_RGTC1_EXT;if(i===Z2)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Q2)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===J2)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===Sp?n.UNSIGNED_INT_24_8:void 0!==n[i]?n[i]:null}}}class uFe extends sr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Zl extends Hi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const dFe={type:"move"};class LF{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Zl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Zl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Zl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const g of e.hand.values()){const m=t.getJointPose(g,i),_=this._getHandJoint(l,g);null!==m&&(_.matrix.fromArray(m.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=m.radius),_.visible=null!==m}const h=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),f=.02,p=.005;l.inputState.pinching&&h>f+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=f-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(dFe)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new Zl;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class pFe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const r=new yo;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,i=new Vc({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new rr(new nv(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class mFe extends Md{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,d=null,h=null,f=null,p=null;const g=new pFe,m=t.getContextAttributes();let _=null,y=null;const v=[],b=[],M=new ce;let S=null;const x=new sr;x.layers.enable(1),x.viewport=new xn;const O=new sr;O.layers.enable(2),O.viewport=new xn;const C=[x,O],w=new uFe;w.layers.enable(1),w.layers.enable(2);let U=null,q=null;function G(J){const ve=b.indexOf(J.inputSource);if(-1===ve)return;const Re=v[ve];void 0!==Re&&(Re.update(J.inputSource,J.frame,l||o),Re.dispatchEvent({type:J.type,data:J.inputSource}))}function Y(){r.removeEventListener("select",G),r.removeEventListener("selectstart",G),r.removeEventListener("selectend",G),r.removeEventListener("squeeze",G),r.removeEventListener("squeezestart",G),r.removeEventListener("squeezeend",G),r.removeEventListener("end",Y),r.removeEventListener("inputsourceschange",ae);for(let J=0;J<v.length;J++){const ve=b[J];null!==ve&&(b[J]=null,v[J].disconnect(ve))}U=null,q=null,g.reset(),e.setRenderTarget(_),f=null,h=null,d=null,r=null,y=null,ft.stop(),i.isPresenting=!1,e.setPixelRatio(S),e.setSize(M.width,M.height,!1),i.dispatchEvent({type:"sessionend"})}function ae(J){for(let ve=0;ve<J.removed.length;ve++){const Re=J.removed[ve],be=b.indexOf(Re);be>=0&&(b[be]=null,v[be].disconnect(Re))}for(let ve=0;ve<J.added.length;ve++){const Re=J.added[ve];let be=b.indexOf(Re);if(-1===be){for(let Je=0;Je<v.length;Je++){if(Je>=b.length){b.push(Re),be=Je;break}if(null===b[Je]){b[Je]=Re,be=Je;break}}if(-1===be)break}const Ke=v[be];Ke&&Ke.connect(Re)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let ve=v[J];return void 0===ve&&(ve=new LF,v[J]=ve),ve.getTargetRaySpace()},this.getControllerGrip=function(J){let ve=v[J];return void 0===ve&&(ve=new LF,v[J]=ve),ve.getGripSpace()},this.getHand=function(J){let ve=v[J];return void 0===ve&&(ve=new LF,v[J]=ve),ve.getHandSpace()},this.setFramebufferScaleFactor=function(J){s=J,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){a=J,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(J){l=J},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(){var J=N(function*(ve){if(r=ve,null!==r){if(_=e.getRenderTarget(),r.addEventListener("select",G),r.addEventListener("selectstart",G),r.addEventListener("selectend",G),r.addEventListener("squeeze",G),r.addEventListener("squeezestart",G),r.addEventListener("squeezeend",G),r.addEventListener("end",Y),r.addEventListener("inputsourceschange",ae),!0!==m.xrCompatible&&(yield t.makeXRCompatible()),S=e.getPixelRatio(),e.getSize(M),void 0===r.renderState.layers)f=new XRWebGLLayer(r,t,{antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),y=new Id(f.framebufferWidth,f.framebufferHeight,{format:Ts,type:Rc,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil});else{let Re=null,be=null,Ke=null;m.depth&&(Ke=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Re=m.stencil?xp:Cp,be=m.stencil?Sp:Hl);const Je={colorFormat:t.RGBA8,depthFormat:Ke,scaleFactor:s};d=new XRWebGLBinding(r,t),h=d.createProjectionLayer(Je),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),y=new Id(h.textureWidth,h.textureHeight,{format:Ts,type:Rc,depthTexture:new EQ(h.textureWidth,h.textureHeight,be,void 0,void 0,void 0,void 0,void 0,void 0,Re),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}y.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=yield r.requestReferenceSpace(a),ft.setContext(r),ft.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(ve){return J.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};const B=new k,X=new k;function de(J,ve){null===ve?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(ve.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(null===r)return;null!==g.texture&&(J.near=g.depthNear,J.far=g.depthFar),w.near=O.near=x.near=J.near,w.far=O.far=x.far=J.far,(U!==w.near||q!==w.far)&&(r.updateRenderState({depthNear:w.near,depthFar:w.far}),U=w.near,q=w.far,x.near=U,x.far=q,O.near=U,O.far=q,x.updateProjectionMatrix(),O.updateProjectionMatrix(),J.updateProjectionMatrix());const ve=J.parent,Re=w.cameras;de(w,ve);for(let be=0;be<Re.length;be++)de(Re[be],ve);2===Re.length?function H(J,ve,Re){B.setFromMatrixPosition(ve.matrixWorld),X.setFromMatrixPosition(Re.matrixWorld);const be=B.distanceTo(X),Ke=ve.projectionMatrix.elements,Je=Re.projectionMatrix.elements,Xe=Ke[14]/(Ke[10]-1),Nt=Ke[14]/(Ke[10]+1),L=(Ke[9]+1)/Ke[5],Te=(Ke[9]-1)/Ke[5],we=(Ke[8]-1)/Ke[0],Fe=(Je[8]+1)/Je[0],ue=Xe*we,ht=Xe*Fe,Ve=be/(-we+Fe),We=Ve*-we;ve.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(We),J.translateZ(Ve),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert();const F=Xe+Ve,T=Nt+Ve;J.projectionMatrix.makePerspective(ue-We,ht+(be-We),L*Nt/T*F,Te*Nt/T*F,F,T),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}(w,x,O):w.projectionMatrix.copy(x.projectionMatrix),function Ce(J,ve,Re){null===Re?J.matrix.copy(ve.matrixWorld):(J.matrix.copy(Re.matrixWorld),J.matrix.invert(),J.matrix.multiply(ve.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(ve.projectionMatrix),J.projectionMatrixInverse.copy(ve.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=2*Ip*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}(J,w,ve)},this.getCamera=function(){return w},this.getFoveation=function(){if(null!==h||null!==f)return c},this.setFoveation=function(J){c=J,null!==h&&(h.fixedFoveation=J),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=J)},this.hasDepthSensing=function(){return null!==g.texture},this.getDepthSensingMesh=function(){return g.getMesh(w)};let Me=null;const ft=new pQ;ft.setAnimationLoop(function st(J,ve){if(u=ve.getViewerPose(l||o),p=ve,null!==u){const Re=u.views;null!==f&&(e.setRenderTargetFramebuffer(y,f.framebuffer),e.setRenderTarget(y));let be=!1;Re.length!==w.cameras.length&&(w.cameras.length=0,be=!0);for(let Je=0;Je<Re.length;Je++){const Xe=Re[Je];let Nt=null;if(null!==f)Nt=f.getViewport(Xe);else{const Te=d.getViewSubImage(h,Xe);Nt=Te.viewport,0===Je&&(e.setRenderTargetTextures(y,Te.colorTexture,h.ignoreDepthValues?void 0:Te.depthStencilTexture),e.setRenderTarget(y))}let L=C[Je];void 0===L&&(L=new sr,L.layers.enable(Je),L.viewport=new xn,C[Je]=L),L.matrix.fromArray(Xe.transform.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale),L.projectionMatrix.fromArray(Xe.projectionMatrix),L.projectionMatrixInverse.copy(L.projectionMatrix).invert(),L.viewport.set(Nt.x,Nt.y,Nt.width,Nt.height),0===Je&&(w.matrix.copy(L.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),!0===be&&w.cameras.push(L)}const Ke=r.enabledFeatures;if(Ke&&Ke.includes("depth-sensing")){const Je=d.getDepthInformation(Re[0]);Je&&Je.isValid&&Je.texture&&g.init(e,Je,r.renderState)}}for(let Re=0;Re<v.length;Re++){const be=b[Re],Ke=v[Re];null!==be&&void 0!==Ke&&Ke.update(be,ve,l||o)}Me&&Me(J,ve),ve.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ve}),p=null}),this.setAnimationLoop=function(J){Me=J},this.dispose=function(){}}}const Fd=new kc,gFe=new lt;function _Fe(n,e){function t(m,_){!0===m.matrixAutoUpdate&&m.updateMatrix(),_.value.copy(m.matrix)}function s(m,_){m.opacity.value=_.opacity,_.color&&m.diffuse.value.copy(_.color),_.emissive&&m.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(m.map.value=_.map,t(_.map,m.mapTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,t(_.alphaMap,m.alphaMapTransform)),_.bumpMap&&(m.bumpMap.value=_.bumpMap,t(_.bumpMap,m.bumpMapTransform),m.bumpScale.value=_.bumpScale,1===_.side&&(m.bumpScale.value*=-1)),_.normalMap&&(m.normalMap.value=_.normalMap,t(_.normalMap,m.normalMapTransform),m.normalScale.value.copy(_.normalScale),1===_.side&&m.normalScale.value.negate()),_.displacementMap&&(m.displacementMap.value=_.displacementMap,t(_.displacementMap,m.displacementMapTransform),m.displacementScale.value=_.displacementScale,m.displacementBias.value=_.displacementBias),_.emissiveMap&&(m.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,m.emissiveMapTransform)),_.specularMap&&(m.specularMap.value=_.specularMap,t(_.specularMap,m.specularMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest);const y=e.get(_),v=y.envMap,b=y.envMapRotation;v&&(m.envMap.value=v,Fd.copy(b),Fd.x*=-1,Fd.y*=-1,Fd.z*=-1,v.isCubeTexture&&!1===v.isRenderTargetTexture&&(Fd.y*=-1,Fd.z*=-1),m.envMapRotation.value.setFromMatrix4(gFe.makeRotationFromEuler(Fd)),m.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,m.reflectivity.value=_.reflectivity,m.ior.value=_.ior,m.refractionRatio.value=_.refractionRatio),_.lightMap&&(m.lightMap.value=_.lightMap,m.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,m.lightMapTransform)),_.aoMap&&(m.aoMap.value=_.aoMap,m.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,m.aoMapTransform))}return{refreshFogUniforms:function i(m,_){_.color.getRGB(m.fogColor.value,dQ(n)),_.isFog?(m.fogNear.value=_.near,m.fogFar.value=_.far):_.isFogExp2&&(m.fogDensity.value=_.density)},refreshMaterialUniforms:function r(m,_,y,v,b){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(m,_):_.isMeshToonMaterial?(s(m,_),function d(m,_){_.gradientMap&&(m.gradientMap.value=_.gradientMap)}(m,_)):_.isMeshPhongMaterial?(s(m,_),function u(m,_){m.specular.value.copy(_.specular),m.shininess.value=Math.max(_.shininess,1e-4)}(m,_)):_.isMeshStandardMaterial?(s(m,_),function h(m,_){m.metalness.value=_.metalness,_.metalnessMap&&(m.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,m.metalnessMapTransform)),m.roughness.value=_.roughness,_.roughnessMap&&(m.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,m.roughnessMapTransform)),_.envMap&&(m.envMapIntensity.value=_.envMapIntensity)}(m,_),_.isMeshPhysicalMaterial&&function f(m,_,y){m.ior.value=_.ior,_.sheen>0&&(m.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),m.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(m.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,m.sheenColorMapTransform)),_.sheenRoughnessMap&&(m.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,m.sheenRoughnessMapTransform))),_.clearcoat>0&&(m.clearcoat.value=_.clearcoat,m.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(m.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,m.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(m.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),1===_.side&&m.clearcoatNormalScale.value.negate())),_.dispersion>0&&(m.dispersion.value=_.dispersion),_.iridescence>0&&(m.iridescence.value=_.iridescence,m.iridescenceIOR.value=_.iridescenceIOR,m.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(m.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,m.iridescenceMapTransform)),_.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),_.transmission>0&&(m.transmission.value=_.transmission,m.transmissionSamplerMap.value=y.texture,m.transmissionSamplerSize.value.set(y.width,y.height),_.transmissionMap&&(m.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,m.transmissionMapTransform)),m.thickness.value=_.thickness,_.thicknessMap&&(m.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=_.attenuationDistance,m.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(m.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(m.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=_.specularIntensity,m.specularColor.value.copy(_.specularColor),_.specularColorMap&&(m.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,m.specularColorMapTransform)),_.specularIntensityMap&&(m.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,m.specularIntensityMapTransform))}(m,_,b)):_.isMeshMatcapMaterial?(s(m,_),function p(m,_){_.matcap&&(m.matcap.value=_.matcap)}(m,_)):_.isMeshDepthMaterial?s(m,_):_.isMeshDistanceMaterial?(s(m,_),function g(m,_){const y=e.get(_).light;m.referencePosition.value.setFromMatrixPosition(y.matrixWorld),m.nearDistance.value=y.shadow.camera.near,m.farDistance.value=y.shadow.camera.far}(m,_)):_.isMeshNormalMaterial?s(m,_):_.isLineBasicMaterial?(function o(m,_){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,_.map&&(m.map.value=_.map,t(_.map,m.mapTransform))}(m,_),_.isLineDashedMaterial&&function a(m,_){m.dashSize.value=_.dashSize,m.totalSize.value=_.dashSize+_.gapSize,m.scale.value=_.scale}(m,_)):_.isPointsMaterial?function c(m,_,y,v){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,m.size.value=_.size*y,m.scale.value=.5*v,_.map&&(m.map.value=_.map,t(_.map,m.uvTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,t(_.alphaMap,m.alphaMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest)}(m,_,y,v):_.isSpriteMaterial?function l(m,_){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,m.rotation.value=_.rotation,_.map&&(m.map.value=_.map,t(_.map,m.mapTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,t(_.alphaMap,m.alphaMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest)}(m,_):_.isShadowMaterial?(m.color.value.copy(_.color),m.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}}}function yFe(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function f(y,v,b,M){const S=y.value,x=v+"_"+b;if(void 0===M[x])return M[x]="number"==typeof S||"boolean"==typeof S?S:S.clone(),!0;{const O=M[x];if("number"==typeof S||"boolean"==typeof S){if(O!==S)return M[x]=S,!0}else if(!1===O.equals(S))return O.copy(S),!0}return!1}function g(y){const v={boundary:0,storage:0};return"number"==typeof y||"boolean"==typeof y?(v.boundary=4,v.storage=4):y.isVector2?(v.boundary=8,v.storage=8):y.isVector3||y.isColor?(v.boundary=16,v.storage=12):y.isVector4?(v.boundary=16,v.storage=16):y.isMatrix3?(v.boundary=48,v.storage=48):y.isMatrix4?(v.boundary=64,v.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),v}function m(y){const v=y.target;v.removeEventListener("dispose",m);const b=o.indexOf(v.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(r[v.id]),delete r[v.id],delete s[v.id]}return{bind:function c(y,v){i.uniformBlockBinding(y,v.program)},update:function l(y,v){let b=r[y.id];void 0===b&&(function p(y){const v=y.uniforms;let b=0;for(let x=0,O=v.length;x<O;x++){const C=Array.isArray(v[x])?v[x]:[v[x]];for(let w=0,U=C.length;w<U;w++){const q=C[w],G=Array.isArray(q.value)?q.value:[q.value];for(let Y=0,ae=G.length;Y<ae;Y++){const X=g(G[Y]),H=b%16;0!==H&&16-H<X.boundary&&(b+=16-H),q.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),q.__offset=b,b+=X.storage}}}const S=b%16;S>0&&(b+=16-S),y.__size=b,y.__cache={}}(y),b=function u(y){const v=function d(){for(let y=0;y<a;y++)if(-1===o.indexOf(y))return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();y.__bindingPointIndex=v;const b=n.createBuffer(),M=y.__size,S=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,M,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,b),b}(y),r[y.id]=b,y.addEventListener("dispose",m)),i.updateUBOMapping(y,v.program);const S=e.render.frame;s[y.id]!==S&&(function h(y){const b=y.uniforms,M=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[y.id]);for(let S=0,x=b.length;S<x;S++){const O=Array.isArray(b[S])?b[S]:[b[S]];for(let C=0,w=O.length;C<w;C++){const U=O[C];if(!0===f(U,S,C,M)){const q=U.__offset,G=Array.isArray(U.value)?U.value:[U.value];let Y=0;for(let ae=0;ae<G.length;ae++){const B=G[ae],X=g(B);"number"==typeof B||"boolean"==typeof B?(U.__data[0]=B,n.bufferSubData(n.UNIFORM_BUFFER,q+Y,U.__data)):B.isMatrix3?(U.__data[0]=B.elements[0],U.__data[1]=B.elements[1],U.__data[2]=B.elements[2],U.__data[3]=0,U.__data[4]=B.elements[3],U.__data[5]=B.elements[4],U.__data[6]=B.elements[5],U.__data[7]=0,U.__data[8]=B.elements[6],U.__data[9]=B.elements[7],U.__data[10]=B.elements[8],U.__data[11]=0):(B.toArray(U.__data,Y),Y+=X.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,q,U.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(y),s[y.id]=S)},dispose:function _(){for(const y in r)n.deleteBuffer(r[y]);o=[],r={},s={}}}}class vFe{constructor(e={}){const{canvas:t=GOe(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==i){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=o;const f=new Uint32Array(4),p=new Int32Array(4);let g=null,m=null;const _=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Vr,this.toneMapping=Vl,this.toneMappingExposure=1;const v=this;let b=!1,M=0,S=0,x=null,O=-1,C=null;const w=new xn,U=new xn;let q=null;const G=new Le(0);let Y=0,ae=t.width,B=t.height,X=1,H=null,de=null;const Ce=new xn(0,0,ae,B),Me=new xn(0,0,ae,B);let st=!1;const ft=new wC;let J=!1,ve=!1;const Re=new lt,be=new k,Ke=new xn,Je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Xe=!1;function Nt(){return null===x?X:1}let we,Fe,ue,ht,Ve,We,F,T,ne,_e,ge,pe,at,Ne,je,It,xe,He,Xt,bt,qe,Et,Dt,qn,L=i;function Te(R,V){return t.getContext(R,V)}try{const R={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r166"),t.addEventListener("webglcontextlost",te,!1),t.addEventListener("webglcontextrestored",oe,!1),t.addEventListener("webglcontextcreationerror",Ee,!1),null===L){const V="webgl2";if(L=Te(V,R),null===L)throw Te(V)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(R){throw console.error("THREE.WebGLRenderer: "+R.message),R}function E(){we=new xLe(L),we.init(),Et=new lFe(L,we),Fe=new vLe(L,we,e,Et),ue=new iFe(L),ht=new ALe(L),Ve=new $2e,We=new cFe(L,we,ue,Ve,Fe,Et,ht),F=new wLe(v),T=new CLe(v),ne=new mNe(L),Dt=new _Le(L,ne),_e=new TLe(L,ne,ht,Dt),ge=new DLe(L,_e,ne,ht),Xt=new ILe(L,Fe,We),It=new bLe(Ve),pe=new j2e(v,F,T,we,Fe,Dt,It),at=new _Fe(v,Ve),Ne=new q2e,je=new J2e(we),He=new gLe(v,F,T,ue,ge,h,c),xe=new nFe(v,ge,Fe),qn=new yFe(L,ht,Fe,ue),bt=new yLe(L,we,ht),qe=new MLe(L,we,ht),ht.programs=pe.programs,v.capabilities=Fe,v.extensions=we,v.properties=Ve,v.renderLists=Ne,v.shadowMap=xe,v.state=ue,v.info=ht}E();const Q=new mFe(v,L);function te(R){R.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function oe(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const R=ht.autoReset,V=xe.enabled,ie=xe.autoUpdate,re=xe.needsUpdate,W=xe.type;E(),ht.autoReset=R,xe.enabled=V,xe.autoUpdate=ie,xe.needsUpdate=re,xe.type=W}function Ee(R){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",R.statusMessage)}function ct(R){const V=R.target;V.removeEventListener("dispose",ct),function St(R){(function Si(R){const V=Ve.get(R).programs;void 0!==V&&(V.forEach(function(ie){pe.releaseProgram(ie)}),R.isShaderMaterial&&pe.releaseShaderCache(R))})(R),Ve.remove(R)}(V)}function $i(R,V,ie){!0===R.transparent&&2===R.side&&!1===R.forceSinglePass?(R.side=1,R.needsUpdate=!0,kx(R,V,ie),R.side=0,R.needsUpdate=!0,kx(R,V,ie),R.side=2):kx(R,V,ie)}this.xr=Q,this.getContext=function(){return L},this.getContextAttributes=function(){return L.getContextAttributes()},this.forceContextLoss=function(){const R=we.get("WEBGL_lose_context");R&&R.loseContext()},this.forceContextRestore=function(){const R=we.get("WEBGL_lose_context");R&&R.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(R){void 0!==R&&(X=R,this.setSize(ae,B,!1))},this.getSize=function(R){return R.set(ae,B)},this.setSize=function(R,V,ie=!0){Q.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ae=R,B=V,t.width=Math.floor(R*X),t.height=Math.floor(V*X),!0===ie&&(t.style.width=R+"px",t.style.height=V+"px"),this.setViewport(0,0,R,V))},this.getDrawingBufferSize=function(R){return R.set(ae*X,B*X).floor()},this.setDrawingBufferSize=function(R,V,ie){ae=R,B=V,X=ie,t.width=Math.floor(R*ie),t.height=Math.floor(V*ie),this.setViewport(0,0,R,V)},this.getCurrentViewport=function(R){return R.copy(w)},this.getViewport=function(R){return R.copy(Ce)},this.setViewport=function(R,V,ie,re){R.isVector4?Ce.set(R.x,R.y,R.z,R.w):Ce.set(R,V,ie,re),ue.viewport(w.copy(Ce).multiplyScalar(X).round())},this.getScissor=function(R){return R.copy(Me)},this.setScissor=function(R,V,ie,re){R.isVector4?Me.set(R.x,R.y,R.z,R.w):Me.set(R,V,ie,re),ue.scissor(U.copy(Me).multiplyScalar(X).round())},this.getScissorTest=function(){return st},this.setScissorTest=function(R){ue.setScissorTest(st=R)},this.setOpaqueSort=function(R){H=R},this.setTransparentSort=function(R){de=R},this.getClearColor=function(R){return R.copy(He.getClearColor())},this.setClearColor=function(){He.setClearColor.apply(He,arguments)},this.getClearAlpha=function(){return He.getClearAlpha()},this.setClearAlpha=function(){He.setClearAlpha.apply(He,arguments)},this.clear=function(R=!0,V=!0,ie=!0){let re=0;if(R){let W=!1;if(null!==x){const Ae=x.texture.format;W=Ae===M2||Ae===T2||Ae===HS}if(W){const Ae=x.texture.type,Ge=Ae===Rc||Ae===Hl||Ae===$y||Ae===Sp||Ae===S2||Ae===C2,et=He.getClearColor(),tt=He.getClearAlpha(),mt=et.r,Ct=et.g,gt=et.b;Ge?(f[0]=mt,f[1]=Ct,f[2]=gt,f[3]=tt,L.clearBufferuiv(L.COLOR,0,f)):(p[0]=mt,p[1]=Ct,p[2]=gt,p[3]=tt,L.clearBufferiv(L.COLOR,0,p))}else re|=L.COLOR_BUFFER_BIT}V&&(re|=L.DEPTH_BUFFER_BIT),ie&&(re|=L.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),L.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",te,!1),t.removeEventListener("webglcontextrestored",oe,!1),t.removeEventListener("webglcontextcreationerror",Ee,!1),Ne.dispose(),je.dispose(),Ve.dispose(),F.dispose(),T.dispose(),ge.dispose(),Dt.dispose(),qn.dispose(),pe.dispose(),Q.dispose(),Q.removeEventListener("sessionstart",Ni),Q.removeEventListener("sessionend",ou),Tr.stop()},this.renderBufferDirect=function(R,V,ie,re,W,Ae){null===V&&(V=Je);const Ge=W.isMesh&&W.matrixWorld.determinant()<0,et=function p5e(R,V,ie,re,W){!0!==V.isScene&&(V=Je),We.resetTextureUnits();const Ae=V.fog,et=null===x?v.outputColorSpace:!0===x.isXRRenderTarget?x.texture.colorSpace:Sr,tt=(re.isMeshStandardMaterial?T:F).get(re.envMap||(re.isMeshStandardMaterial?V.environment:null)),mt=!0===re.vertexColors&&!!ie.attributes.color&&4===ie.attributes.color.itemSize,Ct=!!ie.attributes.tangent&&(!!re.normalMap||re.anisotropy>0),gt=!!ie.morphAttributes.position,fn=!!ie.morphAttributes.normal,zn=!!ie.morphAttributes.color;let li=Vl;re.toneMapped&&(null===x||!0===x.isXRRenderTarget)&&(li=v.toneMapping);const Qs=ie.morphAttributes.position||ie.morphAttributes.normal||ie.morphAttributes.color,gn=void 0!==Qs?Qs.length:0,ut=Ve.get(re),Mr=m.state.lights;!0!==J||!0!==ve&&R===C||It.setState(re,R,R===C&&re.id===O);let _n=!1;re.version===ut.__version?(ut.needsLights&&ut.lightsStateVersion!==Mr.state.version||ut.outputColorSpace!==et||W.isBatchedMesh&&!1===ut.batching||!W.isBatchedMesh&&!0===ut.batching||W.isBatchedMesh&&!0===ut.batchingColor&&null===W.colorTexture||W.isBatchedMesh&&!1===ut.batchingColor&&null!==W.colorTexture||W.isInstancedMesh&&!1===ut.instancing||!W.isInstancedMesh&&!0===ut.instancing||W.isSkinnedMesh&&!1===ut.skinning||!W.isSkinnedMesh&&!0===ut.skinning||W.isInstancedMesh&&!0===ut.instancingColor&&null===W.instanceColor||W.isInstancedMesh&&!1===ut.instancingColor&&null!==W.instanceColor||W.isInstancedMesh&&!0===ut.instancingMorph&&null===W.morphTexture||W.isInstancedMesh&&!1===ut.instancingMorph&&null!==W.morphTexture||ut.envMap!==tt||!0===re.fog&&ut.fog!==Ae||void 0!==ut.numClippingPlanes&&(ut.numClippingPlanes!==It.numPlanes||ut.numIntersection!==It.numIntersection)||ut.vertexAlphas!==mt||ut.vertexTangents!==Ct||ut.morphTargets!==gt||ut.morphNormals!==fn||ut.morphColors!==zn||ut.toneMapping!==li||ut.morphTargetsCount!==gn)&&(_n=!0):(_n=!0,ut.__version=re.version);let Yo=ut.currentProgram;!0===_n&&(Yo=kx(re,V,W));let _m=!1,Js=!1,RB=!1;const ki=Yo.getUniforms(),au=ut.uniforms;if(ue.useProgram(Yo.program)&&(_m=!0,Js=!0,RB=!0),re.id!==O&&(O=re.id,Js=!0),_m||C!==R){ki.setValue(L,"projectionMatrix",R.projectionMatrix),ki.setValue(L,"viewMatrix",R.matrixWorldInverse);const Co=ki.map.cameraPosition;void 0!==Co&&Co.setValue(L,be.setFromMatrixPosition(R.matrixWorld)),Fe.logarithmicDepthBuffer&&ki.setValue(L,"logDepthBufFC",2/(Math.log(R.far+1)/Math.LN2)),(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial)&&ki.setValue(L,"isOrthographic",!0===R.isOrthographicCamera),C!==R&&(C=R,Js=!0,RB=!0)}if(W.isSkinnedMesh){ki.setOptional(L,W,"bindMatrix"),ki.setOptional(L,W,"bindMatrixInverse");const Co=W.skeleton;Co&&(null===Co.boneTexture&&Co.computeBoneTexture(),ki.setValue(L,"boneTexture",Co.boneTexture,We))}W.isBatchedMesh&&(ki.setOptional(L,W,"batchingTexture"),ki.setValue(L,"batchingTexture",W._matricesTexture,We),ki.setOptional(L,W,"batchingIdTexture"),ki.setValue(L,"batchingIdTexture",W._indirectTexture,We),ki.setOptional(L,W,"batchingColorTexture"),null!==W._colorsTexture&&ki.setValue(L,"batchingColorTexture",W._colorsTexture,We));const PB=ie.morphAttributes;if((void 0!==PB.position||void 0!==PB.normal||void 0!==PB.color)&&Xt.update(W,ie,Yo),(Js||ut.receiveShadow!==W.receiveShadow)&&(ut.receiveShadow=W.receiveShadow,ki.setValue(L,"receiveShadow",W.receiveShadow)),re.isMeshGouraudMaterial&&null!==re.envMap&&(au.envMap.value=tt,au.flipEnvMap.value=tt.isCubeTexture&&!1===tt.isRenderTargetTexture?-1:1),re.isMeshStandardMaterial&&null===re.envMap&&null!==V.environment&&(au.envMapIntensity.value=V.environmentIntensity),Js&&(ki.setValue(L,"toneMappingExposure",v.toneMappingExposure),ut.needsLights&&function m5e(R,V){R.ambientLightColor.needsUpdate=V,R.lightProbe.needsUpdate=V,R.directionalLights.needsUpdate=V,R.directionalLightShadows.needsUpdate=V,R.pointLights.needsUpdate=V,R.pointLightShadows.needsUpdate=V,R.spotLights.needsUpdate=V,R.spotLightShadows.needsUpdate=V,R.rectAreaLights.needsUpdate=V,R.hemisphereLights.needsUpdate=V}(au,RB),Ae&&!0===re.fog&&at.refreshFogUniforms(au,Ae),at.refreshMaterialUniforms(au,re,X,B,m.state.transmissionRenderTarget[R.id]),TC.upload(L,dne(ut),au,We)),re.isShaderMaterial&&!0===re.uniformsNeedUpdate&&(TC.upload(L,dne(ut),au,We),re.uniformsNeedUpdate=!1),re.isSpriteMaterial&&ki.setValue(L,"center",W.center),ki.setValue(L,"modelViewMatrix",W.modelViewMatrix),ki.setValue(L,"normalMatrix",W.normalMatrix),ki.setValue(L,"modelMatrix",W.matrixWorld),re.isShaderMaterial||re.isRawShaderMaterial){const Co=re.uniformsGroups;for(let OB=0,_5e=Co.length;OB<_5e;OB++){const fne=Co[OB];qn.update(fne,Yo),qn.bind(fne,Yo)}}return Yo}(R,V,ie,re,W);ue.setMaterial(re,Ge);let tt=ie.index,mt=1;if(!0===re.wireframe){if(tt=_e.getWireframeAttribute(ie),void 0===tt)return;mt=2}const Ct=ie.drawRange,gt=ie.attributes.position;let fn=Ct.start*mt,zn=(Ct.start+Ct.count)*mt;null!==Ae&&(fn=Math.max(fn,Ae.start*mt),zn=Math.min(zn,(Ae.start+Ae.count)*mt)),null!==tt?(fn=Math.max(fn,0),zn=Math.min(zn,tt.count)):null!=gt&&(fn=Math.max(fn,0),zn=Math.min(zn,gt.count));const li=zn-fn;if(li<0||li===1/0)return;Dt.setup(W,re,et,ie,tt);let Qs,gn=bt;if(null!==tt&&(Qs=ne.get(tt),gn=qe,gn.setIndex(Qs)),W.isMesh)!0===re.wireframe?(ue.setLineWidth(re.wireframeLinewidth*Nt()),gn.setMode(L.LINES)):gn.setMode(L.TRIANGLES);else if(W.isLine){let ut=re.linewidth;void 0===ut&&(ut=1),ue.setLineWidth(ut*Nt()),gn.setMode(W.isLineSegments?L.LINES:W.isLineLoop?L.LINE_LOOP:L.LINE_STRIP)}else W.isPoints?gn.setMode(L.POINTS):W.isSprite&&gn.setMode(L.TRIANGLES);if(W.isBatchedMesh)if(null!==W._multiDrawInstances)gn.renderMultiDrawInstances(W._multiDrawStarts,W._multiDrawCounts,W._multiDrawCount,W._multiDrawInstances);else if(we.get("WEBGL_multi_draw"))gn.renderMultiDraw(W._multiDrawStarts,W._multiDrawCounts,W._multiDrawCount);else{const ut=W._multiDrawStarts,Mr=W._multiDrawCounts,_n=W._multiDrawCount,Yo=tt?ne.get(tt).bytesPerElement:1,_m=Ve.get(re).currentProgram.getUniforms();for(let Js=0;Js<_n;Js++)_m.setValue(L,"_gl_DrawID",Js),gn.render(ut[Js]/Yo,Mr[Js])}else if(W.isInstancedMesh)gn.renderInstances(fn,li,W.count);else if(ie.isInstancedBufferGeometry){const Mr=Math.min(ie.instanceCount,void 0!==ie._maxInstanceCount?ie._maxInstanceCount:1/0);gn.renderInstances(fn,li,Mr)}else gn.render(fn,li)},this.compile=function(R,V,ie=null){null===ie&&(ie=R),m=je.get(ie),m.init(V),y.push(m),ie.traverseVisible(function(W){W.isLight&&W.layers.test(V.layers)&&(m.pushLight(W),W.castShadow&&m.pushShadow(W))}),R!==ie&&R.traverseVisible(function(W){W.isLight&&W.layers.test(V.layers)&&(m.pushLight(W),W.castShadow&&m.pushShadow(W))}),m.setupLights();const re=new Set;return R.traverse(function(W){const Ae=W.material;if(Ae)if(Array.isArray(Ae))for(let Ge=0;Ge<Ae.length;Ge++){const et=Ae[Ge];$i(et,ie,W),re.add(et)}else $i(Ae,ie,W),re.add(Ae)}),y.pop(),m=null,re},this.compileAsync=function(R,V,ie=null){const re=this.compile(R,V,ie);return new Promise(W=>{function Ae(){re.forEach(function(Ge){Ve.get(Ge).currentProgram.isReady()&&re.delete(Ge)}),0!==re.size?setTimeout(Ae,10):W(R)}null!==we.get("KHR_parallel_shader_compile")?Ae():setTimeout(Ae,10)})};let sn=null;function Ni(){Tr.stop()}function ou(){Tr.start()}const Tr=new pQ;function Wc(R,V,ie,re){if(!1===R.visible)return;if(R.layers.test(V.layers))if(R.isGroup)ie=R.renderOrder;else if(R.isLOD)!0===R.autoUpdate&&R.update(V);else if(R.isLight)m.pushLight(R),R.castShadow&&m.pushShadow(R);else if(R.isSprite){if(!R.frustumCulled||ft.intersectsSprite(R)){re&&Ke.setFromMatrixPosition(R.matrixWorld).applyMatrix4(Re);const Ge=ge.update(R),et=R.material;et.visible&&g.push(R,Ge,et,ie,Ke.z,null)}}else if((R.isMesh||R.isLine||R.isPoints)&&(!R.frustumCulled||ft.intersectsObject(R))){const Ge=ge.update(R),et=R.material;if(re&&(void 0!==R.boundingSphere?(null===R.boundingSphere&&R.computeBoundingSphere(),Ke.copy(R.boundingSphere.center)):(null===Ge.boundingSphere&&Ge.computeBoundingSphere(),Ke.copy(Ge.boundingSphere.center)),Ke.applyMatrix4(R.matrixWorld).applyMatrix4(Re)),Array.isArray(et)){const tt=Ge.groups;for(let mt=0,Ct=tt.length;mt<Ct;mt++){const gt=tt[mt],fn=et[gt.materialIndex];fn&&fn.visible&&g.push(R,Ge,fn,ie,Ke.z,gt)}}else et.visible&&g.push(R,Ge,et,ie,Ke.z,null)}const Ae=R.children;for(let Ge=0,et=Ae.length;Ge<et;Ge++)Wc(Ae[Ge],V,ie,re)}function nh(R,V,ie,re){const W=R.opaque,Ae=R.transmissive,Ge=R.transparent;m.setupLightsView(ie),!0===J&&It.setGlobalState(v.clippingPlanes,ie),re&&ue.viewport(w.copy(re)),W.length>0&&Nx(W,V,ie),Ae.length>0&&Nx(Ae,V,ie),Ge.length>0&&Nx(Ge,V,ie),ue.buffers.depth.setTest(!0),ue.buffers.depth.setMask(!0),ue.buffers.color.setMask(!0),ue.setPolygonOffset(!1)}function Rv(R,V,ie,re){if(null!==(!0===ie.isScene?ie.overrideMaterial:null))return;void 0===m.state.transmissionRenderTarget[re.id]&&(m.state.transmissionRenderTarget[re.id]=new Id(1,1,{generateMipmaps:!0,type:we.has("EXT_color_buffer_half_float")||we.has("EXT_color_buffer_float")?Wy:Rc,minFilter:Ho,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:an.workingColorSpace}));const Ae=m.state.transmissionRenderTarget[re.id],Ge=re.viewport||w;Ae.setSize(Ge.z,Ge.w);const et=v.getRenderTarget();v.setRenderTarget(Ae),v.getClearColor(G),Y=v.getClearAlpha(),Y<1&&v.setClearColor(16777215,.5),Xe?He.render(ie):v.clear();const tt=v.toneMapping;v.toneMapping=Vl;const mt=re.viewport;if(void 0!==re.viewport&&(re.viewport=void 0),m.setupLightsView(re),!0===J&&It.setGlobalState(v.clippingPlanes,re),Nx(R,ie,re),We.updateMultisampleRenderTarget(Ae),We.updateRenderTargetMipmap(Ae),!1===we.has("WEBGL_multisampled_render_to_texture")){let Ct=!1;for(let gt=0,fn=V.length;gt<fn;gt++){const zn=V[gt],li=zn.object,Qs=zn.geometry,gn=zn.material,ut=zn.group;if(2===gn.side&&li.layers.test(re.layers)){const Mr=gn.side;gn.side=1,gn.needsUpdate=!0,une(li,ie,re,Qs,gn,ut),gn.side=Mr,gn.needsUpdate=!0,Ct=!0}}!0===Ct&&(We.updateMultisampleRenderTarget(Ae),We.updateRenderTargetMipmap(Ae))}v.setRenderTarget(et),v.setClearColor(G,Y),void 0!==mt&&(re.viewport=mt),v.toneMapping=tt}function Nx(R,V,ie){const re=!0===V.isScene?V.overrideMaterial:null;for(let W=0,Ae=R.length;W<Ae;W++){const Ge=R[W],et=Ge.object,tt=Ge.geometry,mt=null===re?Ge.material:re,Ct=Ge.group;et.layers.test(ie.layers)&&une(et,V,ie,tt,mt,Ct)}}function une(R,V,ie,re,W,Ae){R.onBeforeRender(v,V,ie,re,W,Ae),R.modelViewMatrix.multiplyMatrices(ie.matrixWorldInverse,R.matrixWorld),R.normalMatrix.getNormalMatrix(R.modelViewMatrix),!0===W.transparent&&2===W.side&&!1===W.forceSinglePass?(W.side=1,W.needsUpdate=!0,v.renderBufferDirect(ie,V,re,W,R,Ae),W.side=0,W.needsUpdate=!0,v.renderBufferDirect(ie,V,re,W,R,Ae),W.side=2):v.renderBufferDirect(ie,V,re,W,R,Ae),R.onAfterRender(v,V,ie,re,W,Ae)}function kx(R,V,ie){!0!==V.isScene&&(V=Je);const re=Ve.get(R),W=m.state.lights,Ge=W.state.version,et=pe.getParameters(R,W.state,m.state.shadowsArray,V,ie),tt=pe.getProgramCacheKey(et);let mt=re.programs;re.environment=R.isMeshStandardMaterial?V.environment:null,re.fog=V.fog,re.envMap=(R.isMeshStandardMaterial?T:F).get(R.envMap||re.environment),re.envMapRotation=null!==re.environment&&null===R.envMap?V.environmentRotation:R.envMapRotation,void 0===mt&&(R.addEventListener("dispose",ct),mt=new Map,re.programs=mt);let Ct=mt.get(tt);if(void 0!==Ct){if(re.currentProgram===Ct&&re.lightsStateVersion===Ge)return hne(R,et),Ct}else et.uniforms=pe.getUniforms(R),R.onBeforeCompile(et,v),Ct=pe.acquireProgram(et,tt),mt.set(tt,Ct),re.uniforms=et.uniforms;const gt=re.uniforms;return(!R.isShaderMaterial&&!R.isRawShaderMaterial||!0===R.clipping)&&(gt.clippingPlanes=It.uniform),hne(R,et),re.needsLights=function g5e(R){return R.isMeshLambertMaterial||R.isMeshToonMaterial||R.isMeshPhongMaterial||R.isMeshStandardMaterial||R.isShadowMaterial||R.isShaderMaterial&&!0===R.lights}(R),re.lightsStateVersion=Ge,re.needsLights&&(gt.ambientLightColor.value=W.state.ambient,gt.lightProbe.value=W.state.probe,gt.directionalLights.value=W.state.directional,gt.directionalLightShadows.value=W.state.directionalShadow,gt.spotLights.value=W.state.spot,gt.spotLightShadows.value=W.state.spotShadow,gt.rectAreaLights.value=W.state.rectArea,gt.ltc_1.value=W.state.rectAreaLTC1,gt.ltc_2.value=W.state.rectAreaLTC2,gt.pointLights.value=W.state.point,gt.pointLightShadows.value=W.state.pointShadow,gt.hemisphereLights.value=W.state.hemi,gt.directionalShadowMap.value=W.state.directionalShadowMap,gt.directionalShadowMatrix.value=W.state.directionalShadowMatrix,gt.spotShadowMap.value=W.state.spotShadowMap,gt.spotLightMatrix.value=W.state.spotLightMatrix,gt.spotLightMap.value=W.state.spotLightMap,gt.pointShadowMap.value=W.state.pointShadowMap,gt.pointShadowMatrix.value=W.state.pointShadowMatrix),re.currentProgram=Ct,re.uniformsList=null,Ct}function dne(R){if(null===R.uniformsList){const V=R.currentProgram.getUniforms();R.uniformsList=TC.seqWithValue(V.seq,R.uniforms)}return R.uniformsList}function hne(R,V){const ie=Ve.get(R);ie.outputColorSpace=V.outputColorSpace,ie.batching=V.batching,ie.batchingColor=V.batchingColor,ie.instancing=V.instancing,ie.instancingColor=V.instancingColor,ie.instancingMorph=V.instancingMorph,ie.skinning=V.skinning,ie.morphTargets=V.morphTargets,ie.morphNormals=V.morphNormals,ie.morphColors=V.morphColors,ie.morphTargetsCount=V.morphTargetsCount,ie.numClippingPlanes=V.numClippingPlanes,ie.numIntersection=V.numClipIntersection,ie.vertexAlphas=V.vertexAlphas,ie.vertexTangents=V.vertexTangents,ie.toneMapping=V.toneMapping}Tr.setAnimationLoop(function Wi(R){sn&&sn(R)}),typeof self<"u"&&Tr.setContext(self),this.setAnimationLoop=function(R){sn=R,Q.setAnimationLoop(R),null===R?Tr.stop():Tr.start()},Q.addEventListener("sessionstart",Ni),Q.addEventListener("sessionend",ou),this.render=function(R,V){if(void 0!==V&&!0!==V.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;if(!0===R.matrixWorldAutoUpdate&&R.updateMatrixWorld(),null===V.parent&&!0===V.matrixWorldAutoUpdate&&V.updateMatrixWorld(),!0===Q.enabled&&!0===Q.isPresenting&&(!0===Q.cameraAutoUpdate&&Q.updateCamera(V),V=Q.getCamera()),!0===R.isScene&&R.onBeforeRender(v,R,V,x),m=je.get(R,y.length),m.init(V),y.push(m),Re.multiplyMatrices(V.projectionMatrix,V.matrixWorldInverse),ft.setFromProjectionMatrix(Re),ve=this.localClippingEnabled,J=It.init(this.clippingPlanes,ve),g=Ne.get(R,_.length),g.init(),_.push(g),!0===Q.enabled&&!0===Q.isPresenting){const Ae=v.xr.getDepthSensingMesh();null!==Ae&&Wc(Ae,V,-1/0,v.sortObjects)}Wc(R,V,0,v.sortObjects),g.finish(),!0===v.sortObjects&&g.sort(H,de),Xe=!1===Q.enabled||!1===Q.isPresenting||!1===Q.hasDepthSensing(),Xe&&He.addToRenderList(g,R),this.info.render.frame++,!0===J&&It.beginShadows(),xe.render(m.state.shadowsArray,R,V),!0===J&&It.endShadows(),!0===this.info.autoReset&&this.info.reset();const re=g.opaque,W=g.transmissive;if(m.setupLights(),V.isArrayCamera){const Ae=V.cameras;if(W.length>0)for(let Ge=0,et=Ae.length;Ge<et;Ge++)Rv(re,W,R,Ae[Ge]);Xe&&He.render(R);for(let Ge=0,et=Ae.length;Ge<et;Ge++){const tt=Ae[Ge];nh(g,R,tt,tt.viewport)}}else W.length>0&&Rv(re,W,R,V),Xe&&He.render(R),nh(g,R,V);null!==x&&(We.updateMultisampleRenderTarget(x),We.updateRenderTargetMipmap(x)),!0===R.isScene&&R.onAfterRender(v,R,V),Dt.resetDefaultState(),O=-1,C=null,y.pop(),y.length>0?(m=y[y.length-1],!0===J&&It.setGlobalState(v.clippingPlanes,m.state.camera)):m=null,_.pop(),g=_.length>0?_[_.length-1]:null},this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(R,V,ie){Ve.get(R.texture).__webglTexture=V,Ve.get(R.depthTexture).__webglTexture=ie;const re=Ve.get(R);re.__hasExternalTextures=!0,re.__autoAllocateDepthBuffer=void 0===ie,re.__autoAllocateDepthBuffer||!0===we.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),re.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(R,V){const ie=Ve.get(R);ie.__webglFramebuffer=V,ie.__useDefaultFramebuffer=void 0===V},this.setRenderTarget=function(R,V=0,ie=0){x=R,M=V,S=ie;let re=!0,W=null,Ae=!1,Ge=!1;if(R){const tt=Ve.get(R);void 0!==tt.__useDefaultFramebuffer?(ue.bindFramebuffer(L.FRAMEBUFFER,null),re=!1):void 0===tt.__webglFramebuffer?We.setupRenderTarget(R):tt.__hasExternalTextures&&We.rebindTextures(R,Ve.get(R.texture).__webglTexture,Ve.get(R.depthTexture).__webglTexture);const mt=R.texture;(mt.isData3DTexture||mt.isDataArrayTexture||mt.isCompressedArrayTexture)&&(Ge=!0);const Ct=Ve.get(R).__webglFramebuffer;R.isWebGLCubeRenderTarget?(W=Array.isArray(Ct[V])?Ct[V][ie]:Ct[V],Ae=!0):W=R.samples>0&&!1===We.useMultisampledRTT(R)?Ve.get(R).__webglMultisampledFramebuffer:Array.isArray(Ct)?Ct[ie]:Ct,w.copy(R.viewport),U.copy(R.scissor),q=R.scissorTest}else w.copy(Ce).multiplyScalar(X).floor(),U.copy(Me).multiplyScalar(X).floor(),q=st;if(ue.bindFramebuffer(L.FRAMEBUFFER,W)&&re&&ue.drawBuffers(R,W),ue.viewport(w),ue.scissor(U),ue.setScissorTest(q),Ae){const tt=Ve.get(R.texture);L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_CUBE_MAP_POSITIVE_X+V,tt.__webglTexture,ie)}else if(Ge){const tt=Ve.get(R.texture);L.framebufferTextureLayer(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,tt.__webglTexture,ie||0,V||0)}O=-1},this.readRenderTargetPixels=function(R,V,ie,re,W,Ae,Ge){if(!R||!R.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let et=Ve.get(R).__webglFramebuffer;if(R.isWebGLCubeRenderTarget&&void 0!==Ge&&(et=et[Ge]),et){ue.bindFramebuffer(L.FRAMEBUFFER,et);try{const tt=R.texture,mt=tt.format,Ct=tt.type;if(!Fe.textureFormatReadable(mt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Fe.textureTypeReadable(Ct))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");V>=0&&V<=R.width-re&&ie>=0&&ie<=R.height-W&&L.readPixels(V,ie,re,W,Et.convert(mt),Et.convert(Ct),Ae)}finally{const tt=null!==x?Ve.get(x).__webglFramebuffer:null;ue.bindFramebuffer(L.FRAMEBUFFER,tt)}}},this.readRenderTargetPixelsAsync=function(){var R=N(function*(V,ie,re,W,Ae,Ge,et){if(!V||!V.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let tt=Ve.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&void 0!==et&&(tt=tt[et]),tt){ue.bindFramebuffer(L.FRAMEBUFFER,tt);try{const mt=V.texture,Ct=mt.format,gt=mt.type;if(!Fe.textureFormatReadable(Ct))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Fe.textureTypeReadable(gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ie>=0&&ie<=V.width-W&&re>=0&&re<=V.height-Ae){const fn=L.createBuffer();L.bindBuffer(L.PIXEL_PACK_BUFFER,fn),L.bufferData(L.PIXEL_PACK_BUFFER,Ge.byteLength,L.STREAM_READ),L.readPixels(ie,re,W,Ae,Et.convert(Ct),Et.convert(gt),0),L.flush();const zn=L.fenceSync(L.SYNC_GPU_COMMANDS_COMPLETE,0);yield function jOe(n,e,t){return new Promise(function(i,r){setTimeout(function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}},t)})}(L,zn,4);try{L.bindBuffer(L.PIXEL_PACK_BUFFER,fn),L.getBufferSubData(L.PIXEL_PACK_BUFFER,0,Ge)}finally{L.deleteBuffer(fn),L.deleteSync(zn)}return Ge}}finally{const mt=null!==x?Ve.get(x).__webglFramebuffer:null;ue.bindFramebuffer(L.FRAMEBUFFER,mt)}}});return function(V,ie,re,W,Ae,Ge,et){return R.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(R,V=null,ie=0){!0!==R.isTexture&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),V=arguments[0]||null,R=arguments[1]);const re=Math.pow(2,-ie),W=Math.floor(R.image.width*re),Ae=Math.floor(R.image.height*re),Ge=null!==V?V.x:0,et=null!==V?V.y:0;We.setTexture2D(R,0),L.copyTexSubImage2D(L.TEXTURE_2D,ie,0,0,Ge,et,W,Ae),ue.unbindTexture()},this.copyTextureToTexture=function(R,V,ie=null,re=null,W=0){let Ae,Ge,et,tt,mt,Ct;!0!==R.isTexture&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),re=arguments[0]||null,R=arguments[1],V=arguments[2],W=arguments[3]||0,ie=null),null!==ie?(Ae=ie.max.x-ie.min.x,Ge=ie.max.y-ie.min.y,et=ie.min.x,tt=ie.min.y):(Ae=R.image.width,Ge=R.image.height,et=0,tt=0),null!==re?(mt=re.x,Ct=re.y):(mt=0,Ct=0);const gt=Et.convert(V.format),fn=Et.convert(V.type);We.setTexture2D(V,0),L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,V.flipY),L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),L.pixelStorei(L.UNPACK_ALIGNMENT,V.unpackAlignment);const zn=L.getParameter(L.UNPACK_ROW_LENGTH),li=L.getParameter(L.UNPACK_IMAGE_HEIGHT),Qs=L.getParameter(L.UNPACK_SKIP_PIXELS),gn=L.getParameter(L.UNPACK_SKIP_ROWS),ut=L.getParameter(L.UNPACK_SKIP_IMAGES),Mr=R.isCompressedTexture?R.mipmaps[W]:R.image;L.pixelStorei(L.UNPACK_ROW_LENGTH,Mr.width),L.pixelStorei(L.UNPACK_IMAGE_HEIGHT,Mr.height),L.pixelStorei(L.UNPACK_SKIP_PIXELS,et),L.pixelStorei(L.UNPACK_SKIP_ROWS,tt),R.isDataTexture?L.texSubImage2D(L.TEXTURE_2D,W,mt,Ct,Ae,Ge,gt,fn,Mr.data):R.isCompressedTexture?L.compressedTexSubImage2D(L.TEXTURE_2D,W,mt,Ct,Mr.width,Mr.height,gt,Mr.data):L.texSubImage2D(L.TEXTURE_2D,W,mt,Ct,Ae,Ge,gt,fn,Mr),L.pixelStorei(L.UNPACK_ROW_LENGTH,zn),L.pixelStorei(L.UNPACK_IMAGE_HEIGHT,li),L.pixelStorei(L.UNPACK_SKIP_PIXELS,Qs),L.pixelStorei(L.UNPACK_SKIP_ROWS,gn),L.pixelStorei(L.UNPACK_SKIP_IMAGES,ut),0===W&&V.generateMipmaps&&L.generateMipmap(L.TEXTURE_2D),ue.unbindTexture()},this.copyTextureToTexture3D=function(R,V,ie=null,re=null,W=0){let Ae,Ge,et,tt,mt,Ct,gt,fn,zn;!0!==R.isTexture&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ie=arguments[0]||null,re=arguments[1]||null,R=arguments[2],V=arguments[3],W=arguments[4]||0);const li=R.isCompressedTexture?R.mipmaps[W]:R.image;null!==ie?(Ae=ie.max.x-ie.min.x,Ge=ie.max.y-ie.min.y,et=ie.max.z-ie.min.z,tt=ie.min.x,mt=ie.min.y,Ct=ie.min.z):(Ae=li.width,Ge=li.height,et=li.depth,tt=0,mt=0,Ct=0),null!==re?(gt=re.x,fn=re.y,zn=re.z):(gt=0,fn=0,zn=0);const Qs=Et.convert(V.format),gn=Et.convert(V.type);let ut;if(V.isData3DTexture)We.setTexture3D(V,0),ut=L.TEXTURE_3D;else{if(!V.isDataArrayTexture&&!V.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");We.setTexture2DArray(V,0),ut=L.TEXTURE_2D_ARRAY}L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,V.flipY),L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),L.pixelStorei(L.UNPACK_ALIGNMENT,V.unpackAlignment);const Mr=L.getParameter(L.UNPACK_ROW_LENGTH),_n=L.getParameter(L.UNPACK_IMAGE_HEIGHT),Yo=L.getParameter(L.UNPACK_SKIP_PIXELS),_m=L.getParameter(L.UNPACK_SKIP_ROWS),Js=L.getParameter(L.UNPACK_SKIP_IMAGES);L.pixelStorei(L.UNPACK_ROW_LENGTH,li.width),L.pixelStorei(L.UNPACK_IMAGE_HEIGHT,li.height),L.pixelStorei(L.UNPACK_SKIP_PIXELS,tt),L.pixelStorei(L.UNPACK_SKIP_ROWS,mt),L.pixelStorei(L.UNPACK_SKIP_IMAGES,Ct),R.isDataTexture||R.isData3DTexture?L.texSubImage3D(ut,W,gt,fn,zn,Ae,Ge,et,Qs,gn,li.data):V.isCompressedArrayTexture?L.compressedTexSubImage3D(ut,W,gt,fn,zn,Ae,Ge,et,Qs,li.data):L.texSubImage3D(ut,W,gt,fn,zn,Ae,Ge,et,Qs,gn,li),L.pixelStorei(L.UNPACK_ROW_LENGTH,Mr),L.pixelStorei(L.UNPACK_IMAGE_HEIGHT,_n),L.pixelStorei(L.UNPACK_SKIP_PIXELS,Yo),L.pixelStorei(L.UNPACK_SKIP_ROWS,_m),L.pixelStorei(L.UNPACK_SKIP_IMAGES,Js),0===W&&V.generateMipmaps&&L.generateMipmap(ut),ue.unbindTexture()},this.initRenderTarget=function(R){void 0===Ve.get(R).__webglFramebuffer&&We.setupRenderTarget(R)},this.initTexture=function(R){R.isCubeTexture?We.setTextureCube(R,0):R.isData3DTexture?We.setTexture3D(R,0):R.isDataArrayTexture||R.isCompressedArrayTexture?We.setTexture2DArray(R,0):We.setTexture2D(R,0),ue.unbindTexture()},this.resetState=function(){M=0,S=0,x=null,ue.reset(),Dt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Pc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===iF?"display-p3":"srgb",t.unpackColorSpace=an.workingColorSpace===XS?"display-p3":"srgb"}}class $Q extends Hi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new kc,this.environmentIntensity=1,this.environmentRotation=new kc,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class BF{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ws()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return oF("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ws()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ws()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ls=new k;class Ud{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ls.fromBufferAttribute(this,t),ls.applyMatrix4(e),this.setXYZ(t,ls.x,ls.y,ls.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ls.fromBufferAttribute(this,t),ls.applyNormalMatrix(e),this.setXYZ(t,ls.x,ls.y,ls.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ls.fromBufferAttribute(this,t),ls.transformDirection(e),this.setXYZ(t,ls.x,ls.y,ls.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=as(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ut(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Ut(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ut(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ut(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ut(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=as(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=as(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=as(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=as(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ut(t,this.array),i=Ut(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ut(t,this.array),i=Ut(i,this.array),r=Ut(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ut(t,this.array),i=Ut(i,this.array),r=Ut(r,this.array),s=Ut(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Wn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ud(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const ZQ=new k,QQ=new xn,JQ=new xn,EFe=new k,eJ=new lt,RC=new k,zF=new Gr,tJ=new lt,HF=new Fp;class nJ extends rr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=TZ,this.bindMatrix=new lt,this.bindMatrixInverse=new lt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Hr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,RC),this.boundingBox.expandByPoint(RC)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Gr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,RC),this.boundingSphere.expandByPoint(RC)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),zF.copy(this.boundingSphere),zF.applyMatrix4(r),!1!==e.ray.intersectsSphere(zF)&&(tJ.copy(r).invert(),HF.copy(e.ray).applyMatrix4(tJ),(null===this.boundingBox||!1!==HF.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,HF)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new xn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===TZ?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;QQ.fromBufferAttribute(r.attributes.skinIndex,e),JQ.fromBufferAttribute(r.attributes.skinWeight,e),ZQ.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=JQ.getComponent(s);if(0!==o){const a=QQ.getComponent(s);eJ.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(EFe.copy(ZQ).applyMatrix4(eJ),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class GF extends Hi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class zc extends yo{constructor(e=null,t=1,i=1,r,s,o,a,c,l=nr,u=nr,d,h){super(null,o,a,c,l,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const iJ=new lt,SFe=new lt;class PC{constructor(e=[],t=[]){this.uuid=Ws(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new lt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new lt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)iJ.multiplyMatrices(e[s]?e[s].matrixWorld:SFe,t[s]),iJ.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new PC(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new zc(t,e,e,Ts,$s);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new GF),this.bones.push(o),this.boneInverses.push((new lt).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class rm extends Wn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const sm=new lt,rJ=new lt,OC=[],sJ=new Hr,CFe=new lt,av=new rr,cv=new Gr;class oJ extends rr{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new rm(new Float32Array(16*i),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,CFe)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Hr),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,sm),sJ.copy(e.boundingBox).applyMatrix4(sm),this.boundingBox.union(sJ)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Gr),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,sm),cv.copy(e.boundingSphere).applyMatrix4(sm),this.boundingSphere.union(cv)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=e*(i.length+1)+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(av.geometry=this.geometry,av.material=this.material,void 0!==av.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),cv.copy(this.boundingSphere),cv.applyMatrix4(i),!1!==e.ray.intersectsSphere(cv)))for(let s=0;s<r;s++){this.getMatrixAt(s,sm),rJ.multiplyMatrices(i,sm),av.matrixWorld=rJ,av.raycast(e,OC);for(let o=0,a=OC.length;o<a;o++){const c=OC[o];c.instanceId=s,c.object=this,t.push(c)}OC.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new rm(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;null===this.morphTexture&&(this.morphTexture=new zc(new Float32Array(r*this.count),r,this.count,x2,$s));const s=this.morphTexture.source.data.data;let o=0;for(let l=0;l<i.length;l++)o+=i[l];const c=r*e;s[c]=this.geometry.morphTargetsRelative?1:1-o,s.set(i,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}class As extends Wo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Le(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const LC=new k,FC=new k,lJ=new lt,uv=new Fp,UC=new Gr,qF=new k,uJ=new k;class Vd extends Hi{constructor(e=new Ht,t=new As){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)LC.fromBufferAttribute(t,r-1),FC.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=LC.distanceTo(FC);e.setAttribute("lineDistance",new Qe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),UC.copy(i.boundingSphere),UC.applyMatrix4(r),UC.radius+=s,!1===e.ray.intersectsSphere(UC))return;lJ.copy(r).invert(),uv.copy(e.ray).applyMatrix4(lJ);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,u=i.index,h=i.attributes.position;if(null!==u){const f=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let g=f,m=p-1;g<m;g+=l){const _=u.getX(g),y=u.getX(g+1),v=BC(this,e,uv,c,_,y);v&&t.push(v)}if(this.isLineLoop){const g=u.getX(p-1),m=u.getX(f),_=BC(this,e,uv,c,g,m);_&&t.push(_)}}else{const f=Math.max(0,o.start),p=Math.min(h.count,o.start+o.count);for(let g=f,m=p-1;g<m;g+=l){const _=BC(this,e,uv,c,g,g+1);_&&t.push(_)}if(this.isLineLoop){const g=BC(this,e,uv,c,p-1,f);g&&t.push(g)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function BC(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(LC.fromBufferAttribute(o,r),FC.fromBufferAttribute(o,s),t.distanceSqToSegment(LC,FC,qF,uJ)>i)return;qF.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(qF);return c<e.near||c>e.far?void 0:{distance:c,point:uJ.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}const dJ=new k,hJ=new k;class KF extends Vd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)dJ.fromBufferAttribute(t,r),hJ.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+dJ.distanceTo(hJ);e.setAttribute("lineDistance",new Qe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class fJ extends Vd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class XF extends Wo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Le(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const pJ=new lt,YF=new Fp,VC=new Gr,zC=new k;class mJ extends Hi{constructor(e=new Ht,t=new XF){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),VC.copy(i.boundingSphere),VC.applyMatrix4(r),VC.radius+=s,!1===e.ray.intersectsSphere(VC))return;pJ.copy(r).invert(),YF.copy(e.ray).applyMatrix4(pJ);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,d=i.attributes.position;if(null!==l)for(let p=Math.max(0,o.start),g=Math.min(l.count,o.start+o.count);p<g;p++){const m=l.getX(p);zC.fromBufferAttribute(d,m),gJ(zC,m,c,r,e,t,this)}else for(let p=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);p<g;p++)zC.fromBufferAttribute(d,p),gJ(zC,p,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function gJ(n,e,t,i,r,s,o){const a=YF.distanceSqToPoint(n);if(a<t){const c=new k;YF.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class ex extends Wo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Le(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new kc,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qo extends ex{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ce(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ai(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Le(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Le(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Le(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function Gd(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function PJ(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function _U(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function yU(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class _v{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CUe extends _v{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),g=p*p,m=g*p,_=-h*m+2*h*g-h*p,y=(1+h)*m+(-1.5-2*h)*g+(-.5+h)*p+1,v=(-1-f)*m+(1.5+f)*g+.5*p,b=f*m-f*g;for(let M=0;M!==a;++M)s[M]=_*o[u+M]+y*o[l+M]+v*o[c+M]+b*o[d+M];return s}}class OJ extends _v{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[l+h]*d+o[c+h]*u;return s}}class xUe extends _v{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Oa{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Gd(t,this.TimeBufferType),this.values=Gd(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Gd(e.times,Array),values:Gd(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new xUe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new OJ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CUe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case qy:t=this.InterpolantFactoryMethodDiscrete;break;case Ky:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qy;case this.InterpolantFactoryMethodLinear:return Ky;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&function RJ(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(r)c=!0;else{const d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){const g=t[d+p];if(g!==t[h+p]||g!==t[f+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Oa.prototype.TimeBufferType=Float32Array,Oa.prototype.ValueBufferType=Float32Array,Oa.prototype.DefaultInterpolation=Ky;class cm extends Oa{constructor(e,t,i){super(e,t,i)}}cm.prototype.ValueTypeName="bool",cm.prototype.ValueBufferType=Array,cm.prototype.DefaultInterpolation=qy,cm.prototype.InterpolantFactoryMethodLinear=void 0,cm.prototype.InterpolantFactoryMethodSmooth=void 0;class NJ extends Oa{}NJ.prototype.ValueTypeName="color";class lm extends Oa{}lm.prototype.ValueTypeName="number";class TUe extends _v{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)Cr.slerpFlat(s,0,o,l-a,o,l,c);return s}}class um extends Oa{InterpolantFactoryMethodLinear(e){return new TUe(this.times,this.values,this.getValueSize(),e)}}um.prototype.ValueTypeName="quaternion",um.prototype.InterpolantFactoryMethodSmooth=void 0;class dm extends Oa{constructor(e,t,i){super(e,t,i)}}dm.prototype.ValueTypeName="string",dm.prototype.ValueBufferType=Array,dm.prototype.DefaultInterpolation=qy,dm.prototype.InterpolantFactoryMethodLinear=void 0,dm.prototype.InterpolantFactoryMethodSmooth=void 0;class hm extends Oa{}hm.prototype.ValueTypeName="vector";class yv{constructor(e="",t=-1,i=[],r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ws(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(AUe(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Oa.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=PJ(c);c=_U(c,1,u),l=_U(l,1,u),!r&&0===c[0]&&(c.push(s),l.push(l[0])),o.push(new lm(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(l)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,p,g){if(0!==f.length){const m=[],_=[];yU(f,m,_,p),0!==m.length&&g.push(new d(h,m,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let d=0;d<l.length;d++){const h=l[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let g=0;g<h[p].morphTargets.length;g++)f[h[p].morphTargets[g]]=-1;for(const g in f){const m=[],_=[];for(let y=0;y!==h[p].morphTargets.length;++y){const v=h[p];m.push(v.time),_.push(v.morphTarget===g?1:0)}r.push(new lm(".morphTargetInfluence["+g+"]",m,_))}c=f.length*o}else{const f=".bones["+t[d].name+"]";i(hm,f+".position",h,"pos",r),i(um,f+".quaternion",h,"rot",r),i(hm,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function AUe(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function MUe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lm;case"vector":case"vector2":case"vector3":case"vector4":return hm;case"color":return NJ;case"quaternion":return um;case"bool":case"boolean":return cm;case"string":return dm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];yU(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Jl={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class kJ{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){const d=l.indexOf(u);return-1!==d&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=l.length;d<h;d+=2){const f=l[d],p=l[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const IUe=new kJ;let vv=(()=>{class n{constructor(t){this.manager=void 0!==t?t:IUe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise(function(s,o){r.load(t,s,i,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();const Gc={};class DUe extends Error{constructor(e,t){super(e),this.response=t}}class Na extends vv{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Jl.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Gc[e])return void Gc[e].push({onLoad:t,onProgress:i,onError:r});Gc[e]=[],Gc[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=Gc[e],d=l.body.getReader(),h=l.headers.get("X-File-Size")||l.headers.get("Content-Length"),f=h?parseInt(h):0,p=0!==f;let g=0;const m=new ReadableStream({start(_){!function y(){d.read().then(({done:v,value:b})=>{if(v)_.close();else{g+=b.byteLength;const M=new ProgressEvent("progress",{lengthComputable:p,loaded:g,total:f});for(let S=0,x=u.length;S<x;S++){const O=u[S];O.onProgress&&O.onProgress(M)}_.enqueue(b),y()}},v=>{_.error(v)})}()}});return new Response(m)}throw new DUe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return l.json();default:if(void 0===a)return l.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return l.arrayBuffer().then(p=>f.decode(p))}}}).then(l=>{Jl.add(e,l);const u=Gc[e];delete Gc[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(l)}}).catch(l=>{const u=Gc[e];if(void 0===u)throw this.manager.itemError(e),l;delete Gc[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class tx extends vv{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Jl.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Yy("img");function c(){u(),Jl.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class RUe extends vv{constructor(e){super(e)}load(e,t,i,r){const s=new yo,o=new tx(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class nx extends Hi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Le(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const vU=new lt,LJ=new k,FJ=new k;class bU{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ce(512,512),this.map=null,this.mapPass=null,this.matrix=new lt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wC,this._frameExtents=new ce(1,1),this._viewportCount=1,this._viewports=[new xn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;LJ.setFromMatrixPosition(e.matrixWorld),t.position.copy(LJ),FJ.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(FJ),t.updateMatrixWorld(),vU.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vU),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(vU)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class OUe extends bU{constructor(){super(new sr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Ip*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class UJ extends nx{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hi.DEFAULT_UP),this.updateMatrix(),this.target=new Hi,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new OUe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const BJ=new lt,bv=new k,wU=new k;class NUe extends bU{constructor(){super(new sr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ce(4,2),this._viewportCount=6,this._viewports=[new xn(2,1,1,1),new xn(0,1,1,1),new xn(3,1,1,1),new xn(1,1,1,1),new xn(3,0,1,1),new xn(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),bv.setFromMatrixPosition(e.matrixWorld),i.position.copy(bv),wU.copy(i.position),wU.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(wU),i.updateMatrixWorld(),r.makeTranslation(-bv.x,-bv.y,-bv.z),BJ.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(BJ)}}class fm extends nx{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new NUe}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class kUe extends bU{constructor(){super(new SC(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class EU extends nx{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hi.DEFAULT_UP),this.updateMatrix(),this.target=new Hi,this.shadow=new kUe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class VJ extends nx{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class jd{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class HUe extends vv{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Jl.get(e);if(void 0!==o)return s.manager.itemStart(e),o.then?void o.then(l=>{t&&t(l),s.manager.itemEnd(e)}).catch(l=>{r&&r(l)}):(setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const c=fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){return Jl.add(e,l),t&&t(l),s.manager.itemEnd(e),l}).catch(function(l){r&&r(l),Jl.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Jl.add(e,c),s.manager.itemStart(e)}}const CU="\\[\\]\\.:\\/",qUe=new RegExp("["+CU+"]","g"),xU="[^"+CU+"]",KUe="[^"+CU.replace("\\.","")+"]",JUe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",xU)+/(WCOD+)?/.source.replace("WCOD",KUe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",xU)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",xU)+"$"),eBe=["material","materials","bones","map"];class tBe{constructor(e,t,i){const r=i||kn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let kn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(qUe,"")}static parseTrackName(t){const i=JUe.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==eBe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=tBe,n})();kn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},kn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},kn.prototype.GetterByBindingType=[kn.prototype._getValue_direct,kn.prototype._getValue_array,kn.prototype._getValue_arrayElement,kn.prototype._getValue_toArray],kn.prototype.SetterByBindingTypeAndVersioning=[[kn.prototype._setValue_direct,kn.prototype._setValue_direct_setNeedsUpdate,kn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_array,kn.prototype._setValue_array_setNeedsUpdate,kn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_arrayElement,kn.prototype._setValue_arrayElement_setNeedsUpdate,kn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_fromArray,kn.prototype._setValue_fromArray_setNeedsUpdate,kn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class QJ{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ai(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}function lee(n,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(2===e||1===e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"166"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="166");class oBe extends vv{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new dBe(t)}),this.register(function(t){return new hBe(t)}),this.register(function(t){return new wBe(t)}),this.register(function(t){return new EBe(t)}),this.register(function(t){return new SBe(t)}),this.register(function(t){return new pBe(t)}),this.register(function(t){return new mBe(t)}),this.register(function(t){return new gBe(t)}),this.register(function(t){return new _Be(t)}),this.register(function(t){return new uBe(t)}),this.register(function(t){return new yBe(t)}),this.register(function(t){return new fBe(t)}),this.register(function(t){return new bBe(t)}),this.register(function(t){return new vBe(t)}),this.register(function(t){return new cBe(t)}),this.register(function(t){return new CBe(t)}),this.register(function(t){return new xBe(t)})}load(e,t,i,r){const s=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const l=jd.extractUrlBase(e);o=jd.resolveURL(l,this.path)}else o=jd.extractUrlBase(e);this.manager.itemStart(e);const a=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new Na(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={},c=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===uee){try{o[Wt.KHR_BINARY_GLTF]=new TBe(e)}catch(d){return void(r&&r(d))}s=JSON.parse(o[Wt.KHR_BINARY_GLTF].content)}else s=JSON.parse(c.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new BBe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(d){case Wt.KHR_MATERIALS_UNLIT:o[d]=new lBe;break;case Wt.KHR_DRACO_MESH_COMPRESSION:o[d]=new MBe(s,this.dracoLoader);break;case Wt.KHR_TEXTURE_TRANSFORM:o[d]=new ABe;break;case Wt.KHR_MESH_QUANTIZATION:o[d]=new IBe;break;default:h.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function aBe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Wt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class cBe{constructor(e){this.parser=e,this.name=Wt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const u=new Le(16777215);void 0!==c.color&&u.setRGB(c.color[0],c.color[1],c.color[2],Sr);const d=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new EU(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new fm(u),l.distance=d;break;case"spot":l=new UJ(u),l.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,jc(l,c),void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class lBe{constructor(){this.name=Wt.KHR_MATERIALS_UNLIT}getMaterialType(){return bo}extendParams(e,t,i){const r=[];e.color=new Le(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Sr),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Vr))}return Promise.all(r)}}class uBe{constructor(e){this.parser=e,this.name=Wt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class dBe{constructor(e){this.parser=e,this.name=Wt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ce(a,a)}return Promise.all(s)}}class hBe{constructor(e){this.parser=e,this.name=Wt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qo:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=void 0!==s.dispersion?s.dispersion:0,Promise.resolve()}}class fBe{constructor(e){this.parser=e,this.name=Wt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class pBe{constructor(e){this.parser=e,this.name=Wt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Le(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Sr)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Vr)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class mBe{constructor(e){this.parser=e,this.name=Wt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class gBe{constructor(e){this.parser=e,this.name=Wt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new Le).setRGB(a[0],a[1],a[2],Sr),Promise.all(s)}}class _Be{constructor(e){this.parser=e,this.name=Wt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qo:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class yBe{constructor(e){this.parser=e,this.name=Wt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new Le).setRGB(a[0],a[1],a[2],Sr),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Vr)),Promise.all(s)}}class vBe{constructor(e){this.parser=e,this.name=Wt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class bBe{constructor(e){this.parser=e,this.name=Wt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class wBe{constructor(e){this.parser=e,this.name=Wt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class EBe{constructor(e){this.parser=e,this.name=Wt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class SBe{constructor(e){this.parser=e,this.name=Wt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class CBe{constructor(e){this.name=Wt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,d=r.byteStride,h=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(f),u,d,h,r.mode,r.filter),f})})}return null}}class xBe{constructor(e){this.name=Wt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const l of r.primitives)if(l.mode!==Eo.TRIANGLES&&l.mode!==Eo.TRIANGLE_STRIP&&l.mode!==Eo.TRIANGLE_FAN&&void 0!==l.mode)return null;const o=i.extensions[this.name].attributes,a=[],c={};for(const l in o)a.push(this.parser.getDependency("accessor",o[l]).then(u=>(c[l]=u,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const u=l.pop(),d=u.isGroup?u.children:[u],h=l[0].count,f=[];for(const p of d){const g=new lt,m=new k,_=new Cr,y=new k(1,1,1),v=new oJ(p.geometry,p.material,h);for(let b=0;b<h;b++)c.TRANSLATION&&m.fromBufferAttribute(c.TRANSLATION,b),c.ROTATION&&_.fromBufferAttribute(c.ROTATION,b),c.SCALE&&y.fromBufferAttribute(c.SCALE,b),v.setMatrixAt(b,g.compose(m,_,y));for(const b in c)if("_COLOR_0"===b){const M=c[b];v.instanceColor=new rm(M.array,M.itemSize,M.normalized)}else"TRANSLATION"!==b&&"ROTATION"!==b&&"SCALE"!==b&&p.geometry.setAttribute(b,c[b]);Hi.prototype.copy.call(v,p),this.parser.assignFinalMaterial(v),f.push(v)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}}const uee="glTF";class TBe{constructor(e){this.name=Wt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==uee)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const c=s.getUint32(o,!0);if(o+=4,1313821514===c){const l=new Uint8Array(e,12+o,a);this.content=i.decode(l)}else if(5130562===c){const l=12+o;this.body=e.slice(l,l+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class MBe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Wt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(const u in o){const d=RU[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=RU[u]||u.toLowerCase();if(void 0!==o[u]){const h=i.accessors[e.attributes[u]];l[d]=pm[h.componentType].name,c[d]=!0===h.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d,h){r.decodeDracoFile(u,function(f){for(const p in f.attributes){const m=c[p];void 0!==m&&(f.attributes[p].normalized=m)}d(f)},a,l,Sr,h)})})}}class ABe{constructor(){this.name=Wt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class IBe{constructor(){this.name=Wt.KHR_MESH_QUANTIZATION}}class hee extends _v{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=2*a,l=3*a,u=r-t,d=(i-t)/u,h=d*d,f=h*d,p=e*l,g=p-l,m=-2*f+3*h,_=f-h,y=1-m,v=_-h+d;for(let b=0;b!==a;b++)s[b]=y*o[g+b+a]+v*(o[g+b+c]*u)+m*o[p+b+a]+_*(o[p+b]*u);return s}}const DBe=new Cr;class RBe extends hee{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return DBe.fromArray(s).normalize().toArray(s),s}}const Eo={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},pm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},fee={9728:nr,9729:wi,9984:1004,9985:1007,9986:Ep,9987:Ho},pee={33071:_o,33648:1002,10497:xd},DU={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},RU={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},tu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},PBe={CUBICSPLINE:void 0,LINEAR:Ky,STEP:qy};function OBe(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new ex({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function Yd(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function jc(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function kBe(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function LBe(n){let e;const t=n.extensions&&n.extensions[Wt.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+OU(t.attributes):n.indices+":"+OU(n.attributes)+":"+n.mode,void 0!==n.targets)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+OU(n.targets[i]);return e}function OU(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function NU(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const UBe=new lt;class BBe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new aBe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;i=!0===/^((?!chrome|android).)*safari/i.test(a);const c=a.match(/Version\/(\d+)/);r=i&&c?parseInt(c[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}this.textureLoader=typeof createImageBitmap>"u"||i&&r<17||s&&o<98?new RUe(this.options.manager):new HUe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Na(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Yd(s,a,r),jc(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(const c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const c=this.associations.get(o);null!=c&&this.associations.set(a,c);for(const[l,u]of o.children.entries())s(u,a.children[l])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Wt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(jd.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=DU[r.type],c=!0===r.normalized,l=new(0,pm[r.componentType])(r.count*o);return Promise.resolve(new Wn(l,o,c))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=DU[r.type],l=pm[r.componentType],u=l.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let g,m;if(f&&f!==u*c){const _=Math.floor(h/f),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let v=t.cache.get(y);v||(g=new l(a,_*f,r.count*f/u),v=new BF(g,f/u),t.cache.add(y,v)),m=new Ud(v,c,h%f/u,p)}else g=null===a?new l(r.count*c):new l(a,h,r.count*c),m=new Wn(g,c,p);if(void 0!==r.sparse){const b=r.sparse.values.byteOffset||0,M=new(0,pm[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*DU.SCALAR),S=new l(o[2],b,r.sparse.count*c);null!==a&&(m=new Wn(m.array.slice(),m.itemSize,m.normalized));for(let x=0,O=M.length;x<O;x++){const C=M[x];if(m.setX(C,S[x*c]),c>=2&&m.setY(C,S[x*c+1]),c>=3&&m.setZ(C,S[x*c+2]),c>=4&&m.setW(C,S[x*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=this.options.manager.getHandler(o.uri);null!==c&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",""===u.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=fee[h.magFilter]||wi,u.minFilter=fee[h.minFilter]||Ho,u.wrapS=pee[h.wrapS]||xd,u.wrapT=pee[h.wrapT]||xd,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=this.getDependency("bufferView",o.bufferView).then(function(d){l=!0;const h=new Blob([d],{type:o.mimeType});return c=a.createObjectURL(h),c});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(d){return new Promise(function(h,f){let p=h;!0===t.isImageBitmapLoader&&(p=function(g){const m=new yo(g);m.needsUpdate=!0,h(m)}),t.load(jd.resolveURL(d,s.path),p,void 0,f)})}).then(function(d){return!0===l&&a.revokeObjectURL(c),jc(d,o),d.userData.mimeType=o.mimeType||function FBe(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((o=o.clone()).channel=i.texCoord),s.extensions[Wt.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[Wt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[Wt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return void 0!==r&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new XF,Wo.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new As,Wo.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(a,c)),i=c}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return ex}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},l=[];if((s.extensions||{})[Wt.KHR_MATERIALS_UNLIT]){const d=r[Wt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),l.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Le(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Sr),a.opacity=h[3]}void 0!==d.baseColorTexture&&l.push(t.assignTexture(a,"map",d.baseColorTexture,Vr)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==bo&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ce(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(void 0!==s.occlusionTexture&&o!==bo&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==bo){const d=s.emissiveFactor;a.emissive=(new Le).setRGB(d[0],d[1],d[2],Sr)}return void 0!==s.emissiveTexture&&o!==bo&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Vr)),Promise.all(l).then(function(){const d=new o(a);return s.name&&(d.name=s.name),jc(d,s),t.associations.set(d,{materials:e}),s.extensions&&Yd(r,d,s),d})}createUniqueName(e){const t=kn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Wt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return mee(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=LBe(l),d=r[u];if(d)o.push(d.promise);else{let h;h=l.extensions&&l.extensions[Wt.KHR_DRACO_MESH_COMPRESSION]?s(l):mee(new Ht,l,t),r[u]={primitive:l,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){const u=void 0===o[c].material?OBe(this.cache):this.getDependency("material",o[c].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],d=[];for(let f=0,p=u.length;f<p;f++){const g=u[f],m=o[f];let _;const y=l[f];if(m.mode===Eo.TRIANGLES||m.mode===Eo.TRIANGLE_STRIP||m.mode===Eo.TRIANGLE_FAN||void 0===m.mode)_=!0===s.isSkinnedMesh?new nJ(g,y):new rr(g,y),!0===_.isSkinnedMesh&&_.normalizeSkinWeights(),m.mode===Eo.TRIANGLE_STRIP?_.geometry=lee(_.geometry,1):m.mode===Eo.TRIANGLE_FAN&&(_.geometry=lee(_.geometry,2));else if(m.mode===Eo.LINES)_=new KF(g,y);else if(m.mode===Eo.LINE_STRIP)_=new Vd(g,y);else if(m.mode===Eo.LINE_LOOP)_=new fJ(g,y);else{if(m.mode!==Eo.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);_=new mJ(g,y)}Object.keys(_.geometry.morphAttributes).length>0&&kBe(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),jc(_,s),m.extensions&&Yd(r,_,m),t.assignFinalMaterial(_),d.push(_)}for(let f=0,p=d.length;f<p;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(1===d.length)return s.extensions&&Yd(r,d[0],s),d[0];const h=new Zl;s.extensions&&Yd(r,h,s),t.associations.set(h,{meshes:e});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new sr(HZ_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new SC(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),jc(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],c=[];for(let l=0,u=o.length;l<u;l++){const d=o[l];if(d){a.push(d);const h=new lt;null!==s&&h.fromArray(s.array,16*l),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new PC(a,c)})}loadAnimation(e){const i=this,r=this.json.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],c=[],l=[],u=[];for(let d=0,h=r.channels.length;d<h;d++){const f=r.channels[d],p=r.samplers[f.sampler],g=f.target,_=void 0!==r.parameters?r.parameters[p.input]:p.input,y=void 0!==r.parameters?r.parameters[p.output]:p.output;void 0!==g.node&&(o.push(this.getDependency("node",g.node)),a.push(this.getDependency("accessor",_)),c.push(this.getDependency("accessor",y)),l.push(p),u.push(g))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(u)]).then(function(d){const h=d[0],f=d[1],p=d[2],g=d[3],m=d[4],_=[];for(let y=0,v=h.length;y<v;y++){const b=h[y],M=f[y],S=p[y],x=g[y],O=m[y];if(void 0===b)continue;b.updateMatrix&&b.updateMatrix();const C=i._createAnimationTracks(b,M,S,x,O);if(C)for(let w=0;w<C.length;w++)_.push(C[w])}return new yv(s,void 0,_)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const i=this,r=this.json.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let l=0,u=a.length;l<u;l++)o.push(i.getDependency("node",a[l]));const c=void 0===r.skin?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),c]).then(function(l){const u=l[0],d=l[1],h=l[2];null!==h&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(h,UBe)});for(let f=0,p=d.length;f<p;f++)u.add(d[f]);return u})}_loadNodeShallow(e){const i=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let u;if(u=!0===s.isBone?new GF:l.length>1?new Zl:1===l.length?l[0]:new Hi,u!==l[0])for(let d=0,h=l.length;d<h;d++)u.add(l[d]);if(s.name&&(u.userData.name=s.name,u.name=o),jc(u,s),s.extensions&&Yd(i,u,s),void 0!==s.matrix){const d=new lt;d.fromArray(s.matrix),u.applyMatrix4(d)}else void 0!==s.translation&&u.position.fromArray(s.translation),void 0!==s.rotation&&u.quaternion.fromArray(s.rotation),void 0!==s.scale&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Zl;i.name&&(s.name=r.createUniqueName(i.name)),jc(s,i),i.extensions&&Yd(t,s,i);const o=i.nodes||[],a=[];for(let c=0,l=o.length;c<l;c++)a.push(r.getDependency("node",o[c]));return Promise.all(a).then(function(c){for(let u=0,d=c.length;u<d;u++)s.add(c[u]);return r.associations=(u=>{const d=new Map;for(const[h,f]of r.associations)(h instanceof Wo||h instanceof yo)&&d.set(h,f);return u.traverse(h=>{const f=r.associations.get(h);null!=f&&d.set(h,f)}),d})(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,c=[];let l;switch(tu[s.path]===tu.weights?e.traverse(function(h){h.morphTargetInfluences&&c.push(h.name?h.name:h.uuid)}):c.push(a),tu[s.path]){case tu.weights:l=lm;break;case tu.rotation:l=um;break;case tu.position:case tu.scale:l=hm;break;default:l=1===i.itemSize?lm:hm}const u=void 0!==r.interpolation?PBe[r.interpolation]:Ky,d=this._getArrayFromAccessor(i);for(let h=0,f=c.length;h<f;h++){const p=new l(c[h]+"."+tu[s.path],t.array,d,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=NU(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){return new(this instanceof um?RBe:hee)(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function mee(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in i){const a=RU[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return an.workingColorSpace!==Sr&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${an.workingColorSpace}" not supported.`),jc(n,e),function VBe(n,e,t){const i=e.attributes,r=new Hr;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new k(c[0],c[1],c[2]),new k(l[0],l[1],l[2])),a.normalized){const u=NU(pm[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new k,c=new k;for(let l=0,u=s.length;l<u;l++){const d=s[l];if(void 0!==d.POSITION){const h=t.json.accessors[d.POSITION],f=h.min,p=h.max;if(void 0!==f&&void 0!==p){if(c.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const g=NU(pm[h.componentType]);c.multiplyScalar(g)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Gr;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function NBe(n,e,t){let i=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){const d=e[l];if(void 0!==d.POSITION&&(i=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const d=e[l];if(i){const h=void 0!==d.POSITION?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(r){const h=void 0!==d.NORMAL?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=void 0!==d.COLOR_0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;c.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const d=l[1],h=l[2];return i&&(n.morphAttributes.position=l[0]),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}const gee={type:"change"},kU={type:"start"},_ee={type:"end"},ux=new Fp,yee=new Yl,zBe=Math.cos(70*HZ_DEG2RAD);class HBe extends Md{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new k,this.cursor=new k,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(E){E.addEventListener("keydown",je),this._domElementKeyEvents=E},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",je),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(gee),i.update(),s=r.NONE},this.update=function(){const E=new k,Q=(new Cr).setFromUnitVectors(e.up,new k(0,1,0)),te=Q.clone().invert(),oe=new k,Ee=new Cr,ct=new k,St=2*Math.PI;return function($i=null){const sn=i.object.position;E.copy(sn).sub(i.target),E.applyQuaternion(Q),a.setFromVector3(E),i.autoRotate&&s===r.NONE&&q(function w(E){return null!==E?2*Math.PI/60*i.autoRotateSpeed*E:2*Math.PI/60/60*i.autoRotateSpeed}($i)),i.enableDamping?(a.theta+=c.theta*i.dampingFactor,a.phi+=c.phi*i.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let Wi=i.minAzimuthAngle,Ni=i.maxAzimuthAngle;isFinite(Wi)&&isFinite(Ni)&&(Wi<-Math.PI?Wi+=St:Wi>Math.PI&&(Wi-=St),Ni<-Math.PI?Ni+=St:Ni>Math.PI&&(Ni-=St),a.theta=Wi<=Ni?Math.max(Wi,Math.min(Ni,a.theta)):a.theta>(Wi+Ni)/2?Math.max(Wi,a.theta):Math.min(Ni,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),i.target.sub(i.cursor),i.target.clampLength(i.minTargetRadius,i.maxTargetRadius),i.target.add(i.cursor);let ou=!1;if(i.zoomToCursor&&S||i.object.isOrthographicCamera)a.radius=Ce(a.radius);else{const Tr=a.radius;a.radius=Ce(a.radius*l),ou=Tr!=a.radius}if(E.setFromSpherical(a),E.applyQuaternion(te),sn.copy(i.target).add(E),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),u.set(0,0,0)),i.zoomToCursor&&S){let Tr=null;if(i.object.isPerspectiveCamera){const Wc=E.length();Tr=Ce(Wc*l);const nh=Wc-Tr;i.object.position.addScaledVector(b,nh),i.object.updateMatrixWorld(),ou=!!nh}else if(i.object.isOrthographicCamera){const Wc=new k(M.x,M.y,0);Wc.unproject(i.object);const nh=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/l)),i.object.updateProjectionMatrix(),ou=nh!==i.object.zoom;const Rv=new k(M.x,M.y,0);Rv.unproject(i.object),i.object.position.sub(Rv).add(Wc),i.object.updateMatrixWorld(),Tr=E.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;null!==Tr&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Tr).add(i.object.position):(ux.origin.copy(i.object.position),ux.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(ux.direction))<zBe?e.lookAt(i.target):(yee.setFromNormalAndCoplanarPoint(i.object.up,i.target),ux.intersectPlane(yee,i.target))))}else if(i.object.isOrthographicCamera){const Tr=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/l)),Tr!==i.object.zoom&&(i.object.updateProjectionMatrix(),ou=!0)}return l=1,S=!1,!!(ou||oe.distanceToSquared(i.object.position)>o||8*(1-Ee.dot(i.object.quaternion))>o||ct.distanceToSquared(i.target)>o)&&(i.dispatchEvent(gee),oe.copy(i.object.position),Ee.copy(i.object.quaternion),ct.copy(i.target),!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",He),i.domElement.removeEventListener("pointerdown",We),i.domElement.removeEventListener("pointercancel",T),i.domElement.removeEventListener("wheel",ge),i.domElement.removeEventListener("pointermove",F),i.domElement.removeEventListener("pointerup",T),i.domElement.getRootNode().removeEventListener("keydown",at,{capture:!0}),null!==i._domElementKeyEvents&&(i._domElementKeyEvents.removeEventListener("keydown",je),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new QJ,c=new QJ;let l=1;const u=new k,d=new ce,h=new ce,f=new ce,p=new ce,g=new ce,m=new ce,_=new ce,y=new ce,v=new ce,b=new k,M=new ce;let S=!1;const x=[],O={};let C=!1;function U(E){const Q=Math.abs(.01*E);return Math.pow(.95,i.zoomSpeed*Q)}function q(E){c.theta-=E}function G(E){c.phi-=E}const Y=function(){const E=new k;return function(te,oe){E.setFromMatrixColumn(oe,0),E.multiplyScalar(-te),u.add(E)}}(),ae=function(){const E=new k;return function(te,oe){!0===i.screenSpacePanning?E.setFromMatrixColumn(oe,1):(E.setFromMatrixColumn(oe,0),E.crossVectors(i.object.up,E)),E.multiplyScalar(te),u.add(E)}}(),B=function(){const E=new k;return function(te,oe){const Ee=i.domElement;if(i.object.isPerspectiveCamera){E.copy(i.object.position).sub(i.target);let St=E.length();St*=Math.tan(i.object.fov/2*Math.PI/180),Y(2*te*St/Ee.clientHeight,i.object.matrix),ae(2*oe*St/Ee.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(Y(te*(i.object.right-i.object.left)/i.object.zoom/Ee.clientWidth,i.object.matrix),ae(oe*(i.object.top-i.object.bottom)/i.object.zoom/Ee.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function X(E){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?l/=E:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function H(E){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?l*=E:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function de(E,Q){if(!i.zoomToCursor)return;S=!0;const te=i.domElement.getBoundingClientRect(),Ee=Q-te.top,St=te.height;M.x=(E-te.left)/te.width*2-1,M.y=-Ee/St*2+1,b.set(M.x,M.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ce(E){return Math.max(i.minDistance,Math.min(i.maxDistance,E))}function Me(E){d.set(E.clientX,E.clientY)}function ft(E){p.set(E.clientX,E.clientY)}function Je(E){if(1===x.length)d.set(E.pageX,E.pageY);else{const Q=Dt(E);d.set(.5*(E.pageX+Q.x),.5*(E.pageY+Q.y))}}function Xe(E){if(1===x.length)p.set(E.pageX,E.pageY);else{const Q=Dt(E);p.set(.5*(E.pageX+Q.x),.5*(E.pageY+Q.y))}}function Nt(E){const Q=Dt(E),te=E.pageX-Q.x,oe=E.pageY-Q.y,Ee=Math.sqrt(te*te+oe*oe);_.set(0,Ee)}function we(E){if(1==x.length)h.set(E.pageX,E.pageY);else{const te=Dt(E);h.set(.5*(E.pageX+te.x),.5*(E.pageY+te.y))}f.subVectors(h,d).multiplyScalar(i.rotateSpeed);const Q=i.domElement;q(2*Math.PI*f.x/Q.clientHeight),G(2*Math.PI*f.y/Q.clientHeight),d.copy(h)}function Fe(E){if(1===x.length)g.set(E.pageX,E.pageY);else{const Q=Dt(E);g.set(.5*(E.pageX+Q.x),.5*(E.pageY+Q.y))}m.subVectors(g,p).multiplyScalar(i.panSpeed),B(m.x,m.y),p.copy(g)}function ue(E){const Q=Dt(E),te=E.pageX-Q.x,oe=E.pageY-Q.y,Ee=Math.sqrt(te*te+oe*oe);y.set(0,Ee),v.set(0,Math.pow(y.y/_.y,i.zoomSpeed)),X(v.y),_.copy(y),de(.5*(E.pageX+Q.x),.5*(E.pageY+Q.y))}function We(E){!1!==i.enabled&&(0===x.length&&(i.domElement.setPointerCapture(E.pointerId),i.domElement.addEventListener("pointermove",F),i.domElement.addEventListener("pointerup",T)),!function qe(E){for(let Q=0;Q<x.length;Q++)if(x[Q]==E.pointerId)return!0;return!1}(E)&&(function Xt(E){x.push(E.pointerId)}(E),"touch"===E.pointerType?It(E):function ne(E){let Q;switch(E.button){case 0:Q=i.mouseButtons.LEFT;break;case 1:Q=i.mouseButtons.MIDDLE;break;case 2:Q=i.mouseButtons.RIGHT;break;default:Q=-1}switch(Q){case 1:if(!1===i.enableZoom)return;(function st(E){de(E.clientX,E.clientX),_.set(E.clientX,E.clientY)})(E),s=r.DOLLY;break;case 0:if(E.ctrlKey||E.metaKey||E.shiftKey){if(!1===i.enablePan)return;ft(E),s=r.PAN}else{if(!1===i.enableRotate)return;Me(E),s=r.ROTATE}break;case 2:if(E.ctrlKey||E.metaKey||E.shiftKey){if(!1===i.enableRotate)return;Me(E),s=r.ROTATE}else{if(!1===i.enablePan)return;ft(E),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(kU)}(E)))}function F(E){!1!==i.enabled&&("touch"===E.pointerType?function xe(E){switch(Et(E),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;we(E),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;Fe(E),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function ht(E){i.enableZoom&&ue(E),i.enablePan&&Fe(E)})(E),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Ve(E){i.enableZoom&&ue(E),i.enableRotate&&we(E)})(E),i.update();break;default:s=r.NONE}}(E):function _e(E){switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function J(E){h.set(E.clientX,E.clientY),f.subVectors(h,d).multiplyScalar(i.rotateSpeed);const Q=i.domElement;q(2*Math.PI*f.x/Q.clientHeight),G(2*Math.PI*f.y/Q.clientHeight),d.copy(h),i.update()}(E);break;case r.DOLLY:if(!1===i.enableZoom)return;!function ve(E){y.set(E.clientX,E.clientY),v.subVectors(y,_),v.y>0?X(U(v.y)):v.y<0&&H(U(v.y)),_.copy(y),i.update()}(E);break;case r.PAN:if(!1===i.enablePan)return;!function Re(E){g.set(E.clientX,E.clientY),m.subVectors(g,p).multiplyScalar(i.panSpeed),B(m.x,m.y),p.copy(g),i.update()}(E)}}(E))}function T(E){switch(function bt(E){delete O[E.pointerId];for(let Q=0;Q<x.length;Q++)if(x[Q]==E.pointerId)return void x.splice(Q,1)}(E),x.length){case 0:i.domElement.releasePointerCapture(E.pointerId),i.domElement.removeEventListener("pointermove",F),i.domElement.removeEventListener("pointerup",T),i.dispatchEvent(_ee),s=r.NONE;break;case 1:const Q=x[0],te=O[Q];It({pointerId:Q,pageX:te.x,pageY:te.y})}}function ge(E){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(E.preventDefault(),i.dispatchEvent(kU),function be(E){de(E.clientX,E.clientY),E.deltaY<0?H(U(E.deltaY)):E.deltaY>0&&X(U(E.deltaY)),i.update()}(function pe(E){const te={clientX:E.clientX,clientY:E.clientY,deltaY:E.deltaY};switch(E.deltaMode){case 1:te.deltaY*=16;break;case 2:te.deltaY*=100}return E.ctrlKey&&!C&&(te.deltaY*=10),te}(E)),i.dispatchEvent(_ee))}function at(E){"Control"===E.key&&(C=!0,i.domElement.getRootNode().addEventListener("keyup",Ne,{passive:!0,capture:!0}))}function Ne(E){"Control"===E.key&&(C=!1,i.domElement.getRootNode().removeEventListener("keyup",Ne,{passive:!0,capture:!0}))}function je(E){!1===i.enabled||!1===i.enablePan||function Ke(E){let Q=!1;switch(E.code){case i.keys.UP:E.ctrlKey||E.metaKey||E.shiftKey?G(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(0,i.keyPanSpeed),Q=!0;break;case i.keys.BOTTOM:E.ctrlKey||E.metaKey||E.shiftKey?G(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(0,-i.keyPanSpeed),Q=!0;break;case i.keys.LEFT:E.ctrlKey||E.metaKey||E.shiftKey?q(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(i.keyPanSpeed,0),Q=!0;break;case i.keys.RIGHT:E.ctrlKey||E.metaKey||E.shiftKey?q(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(-i.keyPanSpeed,0),Q=!0}Q&&(E.preventDefault(),i.update())}(E)}function It(E){switch(Et(E),x.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;Je(E),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;Xe(E),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function L(E){i.enableZoom&&Nt(E),i.enablePan&&Xe(E)})(E),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Te(E){i.enableZoom&&Nt(E),i.enableRotate&&Je(E)})(E),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(kU)}function He(E){!1!==i.enabled&&E.preventDefault()}function Et(E){let Q=O[E.pointerId];void 0===Q&&(Q=new ce,O[E.pointerId]=Q),Q.set(E.pageX,E.pageY)}function Dt(E){return O[E.pointerId===x[0]?x[1]:x[0]]}i.domElement.addEventListener("contextmenu",He),i.domElement.addEventListener("pointerdown",We),i.domElement.addEventListener("pointercancel",T),i.domElement.addEventListener("wheel",ge,{passive:!1}),i.domElement.getRootNode().addEventListener("keydown",at,{passive:!0,capture:!0}),this.update()}}const mm=new k,vee=new lt,bee=new lt,wee=new k,Eee=new k;class GBe{constructor(e={}){const t=this;let i,r,s,o;const a={objects:new WeakMap},c=void 0!==e.element?e.element:document.createElement("div");function l(p){p.isCSS2DObject&&(p.element.style.display="none");for(let g=0,m=p.children.length;g<m;g++)l(p.children[g])}function u(p,g,m){if(!1!==p.visible){if(p.isCSS2DObject){mm.setFromMatrixPosition(p.matrixWorld),mm.applyMatrix4(bee);const _=mm.z>=-1&&mm.z<=1&&!0===p.layers.test(m.layers),y=p.element;y.style.display=!0===_?"":"none",!0===_&&(p.onBeforeRender(t,g,m),y.style.transform="translate("+-100*p.center.x+"%,"+-100*p.center.y+"%)translate("+(mm.x*s+s)+"px,"+(-mm.y*o+o)+"px)",y.parentNode!==c&&c.appendChild(y),p.onAfterRender(t,g,m));const v={distanceToCameraSquared:d(m,p)};a.objects.set(p,v)}for(let _=0,y=p.children.length;_<y;_++)u(p.children[_],g,m)}else l(p)}function d(p,g){return wee.setFromMatrixPosition(p.matrixWorld),Eee.setFromMatrixPosition(g.matrixWorld),wee.distanceToSquared(Eee)}c.style.overflow="hidden",this.domElement=c,this.getSize=function(){return{width:i,height:r}},this.render=function(p,g){!0===p.matrixWorldAutoUpdate&&p.updateMatrixWorld(),null===g.parent&&!0===g.matrixWorldAutoUpdate&&g.updateMatrixWorld(),vee.copy(g.matrixWorldInverse),bee.multiplyMatrices(g.projectionMatrix,vee),u(p,p,g),function f(p){const g=function h(p){const g=[];return p.traverseVisible(function(m){m.isCSS2DObject&&g.push(m)}),g}(p).sort(function(_,y){return _.renderOrder!==y.renderOrder?y.renderOrder-_.renderOrder:a.objects.get(_).distanceToCameraSquared-a.objects.get(y).distanceToCameraSquared}),m=g.length;for(let _=0,y=g.length;_<y;_++)g[_].element.style.zIndex=m-_}(p)},this.setSize=function(p,g){i=p,r=g,s=i/2,o=r/2,c.style.width=p+"px",c.style.height=g+"px"}}}const jBe=["canvas"];let $Be=(()=>{class n{constructor(t){this.logger=t,this.fieldOfView=1,this.nearClippingPane=1,this.farClippingPane=1e3,this.gltfLoader=new oBe,this.models=["assets/models/animated-man/scene.gltf","assets/models/scifi-girl/scene-transformed.gltf","assets/models/black-halter-dress/scene.gltf","assets/models/sarah/scene.gltf","assets/models/sassy-pullover-girl/scene.gltf"],this.ASSET_PATH=this.models[2],this.SCENE_COLOR=13948120}ngAfterViewInit(){this.creatScene(),this.startRenderingLoop(),this.createControls()}get canvas(){return this.canvasRef.nativeElement}getAspectRatio(){return this.canvas.clientWidth/this.canvas.clientHeight}creatScene(){this.scene=new $Q,this.scene.background=new Le(this.SCENE_COLOR),this.gltfLoader.load(this.ASSET_PATH,i=>{this.model=i.scene.children[0],this.logger.debug(this.model),(new Hr).setFromObject(this.model).getCenter(this.model.position),this.model.position.multiplyScalar(-1),this.scene?.add(this.model)});let t=this.getAspectRatio();this.camera=new sr(this.fieldOfView,t,this.nearClippingPane,this.farClippingPane),this.camera.position.x=100,this.camera.position.y=100,this.camera.position.z=100,this.ambientLight=new VJ(16777215,1),this.scene.add(this.ambientLight),this.directionalLight=new EU(16777215,10),this.directionalLight.position.set(0,1,0),this.directionalLight.castShadow=!1,this.scene.add(this.directionalLight),this.light1=new fm(16777215,10),this.light1.position.set(0,200,400),this.scene.add(this.light1),this.light2=new fm(16777215,10),this.light2.position.set(500,100,0),this.scene.add(this.light2),this.light3=new fm(16777215,10),this.light3.position.set(0,100,-500),this.scene.add(this.light3),this.light4=new fm(16777215,10),this.light4.position.set(-500,300,500),this.scene.add(this.light4)}createControls(){const t=new GBe;t.setSize(this.canvas.clientWidth,this.canvas.clientHeight),t.domElement.style.position="absolute",t.domElement.style.top=`${this.canvas.offsetTop}px`,t.domElement.style.left=`${this.canvas.offsetLeft}px`,document.body.appendChild(t.domElement),this.controls=new HBe(this.camera,t.domElement),this.controls.autoRotate=!1,this.controls.enableZoom=!0,this.controls.enablePan=!1,this.controls.update()}animateModel(){this.model&&(this.model.rotation.z+=.005)}startRenderingLoop(){this.renderer=new vFe({canvas:this.canvas,antialias:!0}),this.renderer.setPixelRatio(devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight);let t=this;!function i(){t.renderer?.render(t.scene,t.camera),t.animateModel(),requestAnimationFrame(i)}()}static#e=this.\u0275fac=function(i){return new(i||n)(j(oi))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-model-viewer"]],viewQuery:function(i,r){if(1&i&&ua(jBe,5),2&i){let s;ao(s=co())&&(r.canvasRef=s.first)}},inputs:{fieldOfView:"fieldOfView",nearClippingPane:["nearClipping","nearClippingPane"],farClippingPane:["farClipping","farClippingPane"]},decls:3,vars:0,consts:[[1,"canvas-container","col-container",2,"background-color","rgba(0, 0, 0, 0.1)"],["id","canvas",2,"height","100%","width","100%"],["canvas",""]],template:function(i,r){1&i&&(I(0,"div",0),$(1,"canvas",1,2),D())},styles:[".canvas-container[_ngcontent-%COMP%]{margin-bottom:6rem}.col-container[_ngcontent-%COMP%]{border-radius:16px;border-color:#efefef;border-width:4px;height:70vh;width:80%}"]})}return n})();function WBe(n,e){if(1&n){const t=jn();I(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),$(4,"hr"),D(),I(5,"h1",8),P(6,"CREATE YOUR MANNEQUIN"),D(),I(7,"div",7),$(8,"hr"),D()()(),I(9,"div",9)(10,"div",10),$(11,"app-model-viewer"),D(),I(12,"div",10)(13,"div",11)(14,"h1",12),P(15," Find your "),I(16,"span"),P(17,"Perfect Size"),D(),P(18," with Try-On! "),D(),$(19,"br")(20,"br")(21,"br"),I(22,"div")(23,"h1"),P(24,"CREATING YOUR MANNEQUIN IS SIMPLE"),D(),$(25,"br")(26,"br"),I(27,"p"),P(28,"Take the guesswork out of online shopping. You can"),$(29,"br"),P(30,"now virtually try-on clothes before clicking that"),$(31,"br"),P(32,"purchase button."),$(33,"br")(34,"br"),P(35," Simply create your mannequin and get started. "),D()(),$(36,"br")(37,"br")(38,"br")(39,"br"),I(40,"div")(41,"button",13),it("click",function(){return ln(t),un(ot().createMannequin())}),P(42,"CREATE MANNEQUIN"),D()()()()()()}}function qBe(n,e){if(1&n){const t=jn();I(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),$(4,"hr"),D(),I(5,"h1",8),P(6,"MANAGE YOUR MANNEQUIN"),D(),I(7,"div",7),$(8,"hr"),D()()(),I(9,"div",9)(10,"div",10)(11,"div",14),$(12,"canvas",15,16),D()(),I(14,"div",10)(15,"div",11)(16,"div")(17,"p",17),P(18,"You can now shop with ease knowning how items you pick will actually fit."),D()(),$(19,"br")(20,"br")(21,"br"),I(22,"h1",12)(23,"b"),P(24,"Great!"),D(),P(25," You have "),$(26,"br"),P(27," successfully created "),$(28,"br"),P(29," your mannequin. "),D(),$(30,"br")(31,"br")(32,"br")(33,"br"),I(34,"div")(35,"button",18),P(36,"ADD ITEMS FROM SHOP"),D(),$(37,"br"),I(38,"button",19),it("click",function(){return ln(t),un(ot().createMannequin())}),P(39,"EDIT MANNEQUIN"),D()()()()()()}if(2&n){const t=ot();le(35),Xn("routerLink","/",t.routes.SHOP,"")}}function KBe(n,e){if(1&n){const t=jn();I(0,"div",28)(1,"label",29),P(2),I(3,"sup",30),P(4,"\u24d8"),D()(),I(5,"app-range",31),it("onValueChanged",function(r){const o=ln(t).index;return un(ot(2).updateMeasurement(r,o))}),D(),I(6,"div",32),P(7),nl(8,"uppercase"),D()()}if(2&n){const t=e.$implicit;le(2),pi("",t.name," "),le(3),Pe("min",t.min)("max",t.max)("step",1)("sliderColor","#EFEFEF")("thumbColor","#CF0A2C")("defaultValue",t.value),le(2),rA("",t.value," ",yg(8,9,t.unit),"")}}function XBe(n,e){if(1&n){const t=jn();I(0,"div",20)(1,"div",21)(2,"h1",22),P(3,"Measurements"),D(),$(4,"div",23),D(),$(5,"br"),kt(6,KBe,9,11,"div",24),I(7,"div",25)(8,"button",26),it("click",function(){return ln(t),un(ot().saveMeasurements())}),P(9,"SAVE"),D(),I(10,"button",27),it("click",function(){return ln(t),un(ot().discardMeasurements())}),P(11,"DISCARD"),D()()()}if(2&n){const t=ot();le(6),Pe("ngForOf",t.listOfMeasurements)}}const Ev="preLoginMeasurements";var ka=function(n){return n[n.CREATE=0]="CREATE",n[n.MEASUREMENTS=1]="MEASUREMENTS",n[n.MANAGE=2]="MANAGE",n}(ka||{});let YBe=(()=>{class n{constructor(t,i,r,s,o,a){this.toastr=t,this.spinner=i,this.logger=r,this.mannequinRepo=s,this.storage=o,this.router=a,this.displaySection=ka.CREATE,this.listOfMeasurements=[],this.loadingMessage="",this.routes=rt,this.hasMeasurements=!1,this.changeDetected=!1}ngOnInit(){var t=this;return N(function*(){t.loadingMessage="Loading Data",t.spinner.show();try{const i=yield t.mannequinRepo.getMeasurementsConfig();t.listOfMeasurements=i.map(r=>({name:r.name,description:r.description,min:r.min,max:r.max,unit:r.unit,value:0}))}catch(i){return t.logger.error(`Error getting measurement config from Firestore: ${i}`),t.spinner.hide(),void t.toastr.error(js.DEFAULT_ERROR_MESSAGE)}try{const i=yield t.mannequinRepo.getUserMeasurements();if(0!=i.length){const r=yield t.storage.fetch(Ev);if(r)yield t.storage.delete(Ev),t.listOfMeasurements=r,t.displaySection=ka.MEASUREMENTS,t.changeDetected=!0;else{const s=new Map(i.map(o=>[o.name,{value:o.value,unit:o.unit}]));t.listOfMeasurements=t.listOfMeasurements.map(o=>(o.value=s.get(o.name)?.value??0,o)),t.displaySection=ka.MANAGE}t.hasMeasurements=!0}else{const r=yield t.storage.fetch(Ev);null!=r?(yield t.storage.delete(Ev),t.listOfMeasurements=r,t.displaySection=ka.MEASUREMENTS,t.hasMeasurements=!0,t.changeDetected=!0):(t.listOfMeasurements=t.listOfMeasurements.map(s=>(s.value=0,s)),t.displaySection=ka.MEASUREMENTS)}t.spinner.hide()}catch(i){if(t.spinner.hide(),i instanceof Error)switch(i.message){case bi.USER_MUST_SIGN_IN.toString():case bi.DATABASE_ERROR.toString():}else t.logger.error(`An unknown error happened: ${i}`),t.toastr.error(js.DEFAULT_ERROR_MESSAGE)}})()}updateMeasurement(t,i){this.listOfMeasurements[i].value=Number(t),this.changeDetected=!0}createMannequin(){var t=this;return N(function*(){if(t.changeDetected)try{const i=yield t.mannequinRepo.getUserMeasurements(),r=new Map(i.map(s=>[s.name,{value:s.value,unit:s.unit}]));t.listOfMeasurements=t.listOfMeasurements.map(s=>(s.value=r.get(s.name)?.value??0,s))}catch(i){t.logger.error(`An unknown error happened: ${i}`),t.toastr.error(js.DEFAULT_ERROR_MESSAGE)}t.displaySection=ka.MEASUREMENTS})()}saveMeasurements(){var t=this;return N(function*(){t.loadingMessage="Uploading Data",t.spinner.show();try{const i=t.listOfMeasurements.map(r=>({name:r.name,value:r.value,unit:r.unit}));yield t.mannequinRepo.saveMeasurements(i),t.spinner.hide(),t.toastr.success("Data Submitted Successfuly!"),(yield t.storage.fetch(js.SELECTED_ITEM))?t.router.navigate([rt.SHOP]):t.displaySection=ka.MANAGE,t.changeDetected=!1}catch(i){if(i instanceof Error)switch(i.message){case bi.USER_MUST_SIGN_IN.toString():yield t.storage.store(t.listOfMeasurements,Ev),t.router.navigate([rt.LOGIN,{callbackUrl:rt.FITTING_ROOM}]);break;case bi.DATABASE_ERROR.toString():default:t.logger.error(`Error submitting data ${i}`),t.toastr.error(js.DEFAULT_ERROR_MESSAGE)}else t.logger.error(`Error submitting data ${i}`),t.toastr.error(js.DEFAULT_ERROR_MESSAGE)}})()}discardMeasurements(){this.displaySection=this.hasMeasurements?ka.MANAGE:ka.CREATE}static#e=this.\u0275fac=function(i){return new(i||n)(j(wd),j(p2),j(oi),j(vZ),j(dp),j(Mi))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-fitting-room"]],decls:7,vars:4,consts:[[1,"fixed-top"],[3,"ngIf"],["bdColor","rgba(51,51,51,0.3)","size","large","color","#CF0A2C","type","ball-circus"],[2,"font-size","16px","color","#190101","font-family","'Montserrat', serif"],[2,"overflow-x","hidden"],[1,"header"],[2,"display","flex","justify-content","center","align-items","center"],[1,"mb-5",2,"width","24%"],[1,"mb-5","ms-5","me-5","text-center",2,"display","inline"],[1,"row"],[1,"col-md","center-col"],[1,"col-container","text-center",2,"display","flex","flex-direction","column"],[2,"font-family","'Garet', serif","font-weight","400","color","#190101","scale","1.125"],["type","button",1,"btn","btn-lg",3,"click"],[1,"canvas-container","col-container",2,"background-color","rgba(0, 0, 0, 0.1)"],["id","canvas",2,"height","100%","width","100%"],["canvas",""],[2,"font-size","20px"],["type","button",1,"btn","btn-lg",3,"routerLink"],["type","button",1,"btn","btn-lg",2,"background","transparent","color","#190101","box-shadow","none","border","2px solid #190101","padding","0.5em 3.4em 0.5em 3.4em",3,"click"],[2,"width","100wv","height","100vh"],[1,"container","header"],[2,"font-weight","300","font-size","1.5em"],[2,"width","4em","border-bottom","4px solid #CF0A2C"],["class","container","style","display: flex; align-items: center; justify-content: space-between; padding: 2em 1em 2em;",4,"ngFor","ngForOf"],[2,"display","flex","align-items","center","flex-direction","column","margin-top","3rem"],["type","button",1,"btn","btn-lg",2,"margin","0","scale","1","font-size","0.875em","background-color","#190101","padding","0.5em 4em 0.5em 4em",3,"click"],["type","button",1,"btn","btn-lg",2,"margin-top","2rem","scale","1","font-size","0.875em","background-color","transparent","color","#190101","box-shadow","none",3,"click"],[1,"container",2,"display","flex","align-items","center","justify-content","space-between","padding","2em 1em 2em"],["for","m.name",2,"width","10.8125em"],[2,"font-weight","bold"],["id","m.name",2,"width","50%",3,"min","max","step","sliderColor","thumbColor","defaultValue","onValueChanged"],[2,"font-family","'Montserrat', serif","color","#190101","font-weight","300","margin-left","3em"]],template:function(i,r){1&i&&($(0,"app-header",0),kt(1,WBe,43,0,"ng-template",1),kt(2,qBe,40,1,"ng-template",1),kt(3,XBe,12,1,"ng-template",1),I(4,"ngx-spinner",2)(5,"p",3),P(6),D()()),2&i&&(le(1),Pe("ngIf",0==r.displaySection),le(1),Pe("ngIf",2==r.displaySection),le(1),Pe("ngIf",1==r.displaySection),le(3),ys(r.loadingMessage))},dependencies:[Tg,Oo,Aa,bZ,$Be,Us,CPe,cj],styles:[".container-fluid[_ngcontent-%COMP%]{padding:0}.row[_ngcontent-%COMP%]{width:100vw;padding:0;margin:0}h1[_ngcontent-%COMP%]{font-family:Montserrat,serif;font-weight:700;color:#190101}h1[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#cf0a2c;font-family:Montserrat,serif;font-weight:700}label[_ngcontent-%COMP%]{font-family:Montserrat,serif;font-weight:300;color:#190101}p[_ngcontent-%COMP%]{font-family:Garet,serif;font-size:24px;color:#190101;padding:0;margin:0}button[_ngcontent-%COMP%]{font-family:Montserrat,serif;font-weight:500;color:#fff;background-color:#cf0a2c;margin-bottom:2rem}hr[_ngcontent-%COMP%]{border-top:4px solid;border-color:#dbd4d4}.center-col[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}@media only screen and (min-width: 0px){.header[_ngcontent-%COMP%]{padding-top:5rem}}@media only screen and (min-width: 414px){.header[_ngcontent-%COMP%]{padding-top:8rem}}@media only screen and (min-width: 768px){.header[_ngcontent-%COMP%]{padding-top:10rem}h1[_ngcontent-%COMP%]{font-size:24px}}"]})}return n})();const See="fit-finder-vars";let QBe=(()=>{class n{constructor(t,i,r){this.storage=t,this.logger=i,this.authRepo=r,this.firestore=Ie(fd)}getFitFinderVars(){var t=this;return N(function*(){if(!t.authRepo.isLoggedIn)throw Error(bi.USER_MUST_SIGN_IN.toString());try{let i;if(i=yield t.storage.fetch(See),null!=i)return i;const r=Ma(t.firestore,"envVars","fitFinderVars"),s=yield wS(r);if(null!=s.data())return i=s.data(),yield t.storage.store(i,See),i;throw t.logger.error("Fit finder environment variables not found"),Error(bi.NOT_FOUND.toString())}catch(i){throw t.logger.error(`Error fetching fit finder environment variables: ${i}`),Error(bi.DATABASE_ERROR.toString())}})()}static#e=this.\u0275fac=function(i){return new(i||n)(z(dp),z(oi),z(pd))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Zd=function(n){return n.HIP="HIP",n.WAIST="WAIST",n.INSEAM="INSEAM",n.BUST="CHEST",n.SHOULDER="SHOULDER WIDTH",n.LENGTH="LENGTH",n}(Zd||{});let JBe=(()=>{class n{constructor(t,i,r){this.logger=t,this.envConfig=i,this.http=r}getSizeRecommendation(t,i,r){var s=this;return N(function*(){try{const c=yield s.envConfig.getFitFinderVars();let l=new ho;l=l.set("Content-Type","application/json"),l=l.set("Authorization",`Basic ${c.auth}`);const u=new Map(t.map(d=>[d.name,d.value]));var o=s.http.post(c.url,{garment:r,hip:u.get(Zd.HIP),waist:u.get(Zd.WAIST),inseam:u.get(Zd.INSEAM),bust:u.get(Zd.BUST),shoulder:u.get(Zd.SHOULDER),length:u.get(Zd.LENGTH),type:i.toString()},{headers:l}),a=yield function ZBe(n,e){const t="object"==typeof e;return new Promise((i,r)=>{let o,s=!1;n.subscribe({next:a=>{o=a,s=!0},error:r,complete:()=>{s?i(o):t?i(e.defaultValue):r(new Rg)}})})}(o);return s.logger.debug("The api was called successfully"),a.productLabel??"No Size"}catch(c){throw s.logger.error(`Error sending request to backend: ${c}`),c}})()}static#e=this.\u0275fac=function(i){return new(i||n)(z(oi),z(QBe),z(Vj))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e3e=(()=>{class n{constructor(t,i,r,s){this.mannequinRepo=t,this.authRepo=i,this.fitFinderApi=r,this.logger=s}getSizeRecommendation(t,i){var r=this;return N(function*(){if(!r.authRepo.isLoggedIn)throw Error(bi.USER_MUST_SIGN_IN.toString());try{r.logger.debug(`getSizeRecommendation: Fetching user measurements for ${t}`);const s=yield r.mannequinRepo.getUserMeasurements();if(0==s.length)throw Error(bi.DATABASE_ERROR.toString());return r.fitFinderApi.getSizeRecommendation(s,i,t)}catch(s){throw s instanceof Error&&s.message==bi.DATABASE_ERROR.toString()?r.logger.debug("getSizeRecommendation: Could not get user measurements"):r.logger.debug("getSizeRecommendation: Could not get size recommendation"),s}})()}static#e=this.\u0275fac=function(i){return new(i||n)(z(vZ),z(pd),z(JBe),z(oi))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LU=(()=>{class n{constructor(t){this.logger=t,this.modals=[]}add(t){if(!t.id||this.modals.find(i=>i.id===t.id))throw this.logger.debug(`These are the modals = ${this.modals.at(0)?.id}`),Error(bi.DUPLICATES_NOT_ALLOWED.toString());this.modals.push(t)}remove(t){this.modals=this.modals.filter(i=>i!==t)}open(t){const i=this.modals.find(r=>r.id===t);if(!i)throw Error(bi.NOT_FOUND.toString());i.open()}close(){this.modals.find(i=>i.isOpen)?.close()}static#e=this.\u0275fac=function(i){return new(i||n)(z(oi))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const t3e=function(n){return{"wide-dimensions":n}},n3e=["*"];let Cee=(()=>{class n{constructor(t,i,r){this.logger=t,this.modalService=i,this.el=r,this.wideMode=!1,this.isOpen=!1,this.element=r.nativeElement}ngOnInit(){this.modalService.add(this),document.body.appendChild(this.element),this.element.addEventListener("click",t=>{"app-modal"===t.target.className&&this.close()})}ngOnDestroy(){this.logger.debug(`Destroying modal = ${this.id}`),this.modalService.remove(this),this.element.remove()}open(){this.element.style.display="block",document.body.classList.add("app-modal-open"),this.isOpen=!0}close(){this.element.style.display="none",document.body.classList.remove("app-modal-open"),this.isOpen=!1}static#e=this.\u0275fac=function(i){return new(i||n)(j(oi),j(LU),j(fi))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-modal"]],inputs:{id:"id",wideMode:"wideMode"},ngContentSelectors:n3e,decls:3,vars:3,consts:[[1,"app-modal",3,"ngClass"],[1,"app-modal-body"]],template:function(i,r){1&i&&(Zb(),I(0,"div",0)(1,"div",1),Qb(2),D()()),2&i&&Pe("ngClass",a0(1,t3e,r.wideMode))},dependencies:[Jh],styles:["app-modal{display:none}app-modal .app-modal{position:fixed;inset:0;z-index:10000;background-color:#ffffffbf;padding:10px;overflow:auto;justify-content:center;align-items:center;display:flex}app-modal .app-modal-body{padding:40px;background:#fff;border-radius:8px;border-style:solid;border-color:#000;border-width:1px}@media only screen and (min-width: 0px){app-modal .app-modal-body{width:80%}}@media only screen and (min-width: 768px){app-modal .app-modal-body{width:60%}}@media only screen and (min-width: 991px){app-modal .app-modal-body{width:50%}}@media only screen and (min-width: 1024px){app-modal .app-modal-body{width:40%}}@media only screen and (min-width: 991px){app-modal .wide-dimensions .app-modal-body{width:70%}}@media only screen and (min-width: 1024px){app-modal .wide-dimensions .app-modal-body{width:65%}}app-modal body.app-modal-open{overflow:hidden}\n"],encapsulation:2})}return n})(),i3e=(()=>{class n{constructor(){this.name="",this.manufacturer="",this.price=0,this.currencyCode="",this.displayImageUrl="",this.index=0,this.onSelect=new qt}ngOnInit(){}itemClicked(t){this.onSelect.emit(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-item-tile"]],inputs:{name:"name",manufacturer:"manufacturer",price:"price",currencyCode:"currencyCode",displayImageUrl:"displayImageUrl",index:"index"},outputs:{onSelect:"onSelect"},decls:12,vars:9,consts:[[1,"pb-2","img-fluid",3,"src","alt"],[1,"text-center","pb-4"],[1,"btn",3,"click"]],template:function(i,r){1&i&&($(0,"img",0),I(1,"div",1)(2,"h6"),P(3),D(),I(4,"p"),P(5),D(),I(6,"p")(7,"b"),P(8),nl(9,"currency"),D()(),I(10,"button",2),it("click",function(){return r.itemClicked(r.index)}),P(11,"SHOP"),D()()),2&i&&(_s("src",r.displayImageUrl,Wa),_s("alt",r.name),le(3),ys(r.name),le(2),ys(r.manufacturer),le(3),ys(c0(9,5,r.price,r.currencyCode,"symbol-narrow")))},dependencies:[R0],styles:["h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{font-family:Montserrat,serif;color:#190101}p[_ngcontent-%COMP%]{font-family:Garet,serif;color:#190101}button[_ngcontent-%COMP%]{margin-top:1rem;font-family:Montserrat,serif;font-weight:600;color:#fff;background-color:#cf0a2c}"]})}return n})();const Sv={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Sv;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new ar(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Sv;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Sv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class s3e extends Sw{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class r3e extends Ew{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Sv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Sv.cancelAnimationFrame(t),e._scheduled=void 0)}});let FU,a3e=1;const dx={};function xee(n){return n in dx&&(delete dx[n],!0)}const c3e={setImmediate(n){const e=a3e++;return dx[e]=!0,FU||(FU=Promise.resolve()),FU.then(()=>xee(e)&&n()),e},clearImmediate(n){xee(n)}},{setImmediate:l3e,clearImmediate:u3e}=c3e,hx={setImmediate(...n){const{delegate:e}=hx;return(e?.setImmediate||l3e)(...n)},clearImmediate(n){const{delegate:e}=hx;return(e?.clearImmediate||u3e)(n)},delegate:void 0};new class h3e extends Sw{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class d3e extends Ew{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=hx.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(hx.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function Tee(n,e=Cw){return function p3e(n){return Hn((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(Mn(t,l=>{i=!0,r=l,s||cr(n(l)).subscribe(s=Mn(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>GL(n,e))}const m3e=new Se("cdk-dir-doc",{providedIn:"root",factory:function g3e(){return Ie(rn)}}),_3e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let v3e=(()=>{class n{constructor(t){this.value="ltr",this.change=new qt,t&&(this.value=function y3e(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?_3e.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(z(m3e,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UU=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({})}return n})(),w3e=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Gt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new yn(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(Tee(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ye()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Ti(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=function D1e(n){return n instanceof fi?n.nativeElement:n}(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>zo(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(z(pt),z(md),z(rn,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mee=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Gt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Tee(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(z(md),z(pt),z(rn,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Aee=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({})}return n})(),Iee=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({imports:[UU,Aee,UU,Aee]})}return n})();class BU{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class fx extends BU{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class Dee extends BU{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class S3e extends BU{constructor(e){super(),this.element=e instanceof fi?e.nativeElement:e}}class Ree{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof fx?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Dee?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof S3e?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class C3e extends Ree{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Tn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Pee=(()=>{class n extends Ree{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new qt,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(j(qa),j(oo),j(rn))};static#t=this.\u0275dir=dt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[mn]})}return n})(),VU=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({})}return n})();const Oee=N1e();class x3e{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Pi(-this._previousScrollPosition.left),e.style.top=Pi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Oee&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Oee&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class T3e{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Ti(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Nee{enable(){}disable(){}attach(){}}function zU(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function kee(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class M3e{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();zU(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let A3e=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Nee,this.close=o=>new T3e(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new x3e(this._viewportRuler,this._document),this.reposition=o=>new M3e(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(i){return new(i||n)(z(w3e),z(Mee),z(pt),z(rn))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class HU{constructor(e){if(this.scrollStrategy=new Nee,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class I3e{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Lee=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(z(rn))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),D3e=(()=>{class n extends Lee{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(z(rn),z(pt,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),R3e=(()=>{class n extends Lee{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=QX(s)},this._clickListener=s=>{const o=QX(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const u=c[l];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(z(rn),z(md),z(pt,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fee=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||JX()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),JX()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(z(rn),z(md))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class P3e{constructor(e,t,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Gt,this._attachments=new Gt,this._detachments=new Gt,this._locationChanges=ar.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new Gt,this._outsidePointerEvents=new Gt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Pr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Pi(this._config.width),e.height=Pi(this._config.height),e.minWidth=Pi(this._config.minWidth),e.minHeight=Pi(this._config.minHeight),e.maxWidth=Pi(this._config.maxWidth),e.maxHeight=Pi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=CS(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(rc(r3(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Uee="cdk-overlay-connected-position-bounding-box",O3e=/([A-Za-z%]+)$/;class N3e{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Gt,this._resizeSubscription=ar.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(Uee),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(u,l,i)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const l of s){const u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Qd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Uee),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=Vee(t);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,0-o,o+s.width-i.width),g=this._subtractOverflows(s.height,h,f),m=p*g;return{visibleArea:m,isCompletelyWithinViewport:s.width*s.height===m,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=Bee(this._overlayRef.getConfig().minHeight),a=Bee(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=Vee(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,d=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new I3e(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Pi(i.height),r.top=Pi(i.top),r.bottom=Pi(i.bottom),r.width=Pi(i.width),r.left=Pi(i.left),r.right=Pi(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Pi(s)),o&&(r.maxWidth=Pi(o))}this._lastBoundingBoxSize=i,Qd(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Qd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Qd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Qd(i,this._getExactOverlayY(t,e,u)),Qd(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Pi(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Pi(o.maxWidth):s&&(i.maxWidth="")),Qd(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Pi(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Pi(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:kee(e,i),isOriginOutsideView:zU(e,i),isOverlayClipped:kee(t,i),isOverlayOutsideView:zU(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&CS(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof fi)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Qd(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Bee(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(O3e);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Vee(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const zee="cdk-global-overlay-wrapper";class k3e{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(zee),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",p="",g="";c?g="flex-start":"center"===u?(g="center",h?p=d:f=d):h?"left"===u||"end"===u?(g="flex-end",f=d):("right"===u||"start"===u)&&(g="flex-start",p=d):"left"===u||"start"===u?(g="flex-start",f=d):("right"===u||"end"===u)&&(g="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":p,t.justifyContent=g,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(zee),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Hee=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new k3e}flexibleConnectedTo(t){return new N3e(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(z(Mee),z(rn),z(md),z(Fee))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),L3e=0,px=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,d,h,f){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=l,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new HU(t);return o.direction=o.direction||this._directionality.value,new P3e(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+L3e++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(da)),new C3e(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(z(A3e),z(Fee),z(qa),z(Hee),z(D3e),z(Tn),z(pt),z(rn),z(v3e),z(b0),z(R3e),z(mM,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const B3e={provide:new Se("cdk-connected-overlay-scroll-strategy"),deps:[px],useFactory:function U3e(n){return()=>n.scrollStrategies.reposition()}};let mx=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({providers:[px,B3e],imports:[UU,VU,Iee,Iee]})}return n})();function V3e(n,e){if(1&n){const t=jn();I(0,"div",2),it("@fade.done",function(r){return ln(t),un(ot().onAnimationEnd(r))}),D()}if(2&n){const t=ot();Pe("@fade",t.animationState)("@.disabled",!t.animation)("innerHTML",t.title,Wm)}}function z3e(n,e){if(1&n){const t=jn();I(0,"div",3),it("@fade.done",function(r){return ln(t),un(ot().onAnimationEnd(r))}),P(1),D()}if(2&n){const t=ot();Pe("@fade",t.animationState)("@.disabled",!t.animation),le(1),pi(" ",t.title,"\n")}}let H3e=(()=>{class n{_cdRef;title;html;animation;tooltip=!0;_hidden=new Gt;animationState="hidden";constructor(t){this._cdRef=t}markForCheck(){this._cdRef.markForCheck()}onAnimationEnd(t){"hidden"===t.toState&&this._hidden.next()}static \u0275fac=function(i){return new(i||n)(j(Su))};static \u0275cmp=cn({type:n,selectors:[["mdb-tooltip"]],hostVars:2,hostBindings:function(i,r){2&i&&bu("tooltip",r.tooltip)},inputs:{title:"title",html:"html",animation:"animation"},decls:2,vars:2,consts:[["class","tooltip-inner",3,"innerHTML",4,"ngIf"],["class","tooltip-inner",4,"ngIf"],[1,"tooltip-inner",3,"innerHTML"],[1,"tooltip-inner"]],template:function(i,r){1&i&&(kt(0,V3e,1,3,"div",0),kt(1,z3e,2,3,"div",1)),2&i&&(Pe("ngIf",r.html),le(1),Pe("ngIf",!r.html))},dependencies:[Oo],encapsulation:2,data:{animation:[u2("fade",[_p("visible",Ia({opacity:1})),_p("hidden",Ia({opacity:0})),yp("visible => hidden",gp("150ms linear")),yp(":enter",gp("150ms linear"))])]},changeDetection:0})}return n})(),G3e=(()=>{class n{_overlay;_overlayPositionBuilder;_elementRef;mdbTooltip="";tooltipDisabled=!1;placement="top";html=!1;animation=!0;trigger="hover focus";delayShow=0;delayHide=0;offset=0;tooltipShow=new qt;tooltipShown=new qt;tooltipHide=new qt;tooltipHidden=new qt;_overlayRef;_tooltipRef;_open=!1;_showTimeout=0;_hideTimeout=0;_destroy$=new Gt;constructor(t,i,r){this._overlay=t,this._overlayPositionBuilder=i,this._elementRef=r}ngOnInit(){this.tooltipDisabled||""===this.mdbTooltip||this._bindTriggerEvents()}ngOnDestroy(){(this._open||this._showTimeout)&&this.hide(),this._destroy$.next(),this._destroy$.complete()}_bindTriggerEvents(){this.trigger.split(" ").forEach(i=>{if("click"===i)zo(this._elementRef.nativeElement,i).pipe(rc(this._destroy$)).subscribe(()=>this.toggle());else if("manual"!==i){const s="hover"===i?"mouseleave":"focusout";zo(this._elementRef.nativeElement,"hover"===i?"mouseenter":"focusin").pipe(rc(this._destroy$)).subscribe(()=>this.show()),zo(this._elementRef.nativeElement,s).pipe(rc(this._destroy$)).subscribe(()=>this.hide())}})}_createOverlayConfig(){const t=this._overlayPositionBuilder.flexibleConnectedTo(this._elementRef).withPositions(this._getPosition());return new HU({hasBackdrop:!1,scrollStrategy:this._overlay.scrollStrategies.reposition(),positionStrategy:t})}_createOverlay(){this._overlayRef=this._overlay.create(this._createOverlayConfig())}_getPosition(){let t;const i={originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-this.offset},r={originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:this.offset},s={originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:this.offset},o={originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:-this.offset};switch(this.placement){case"top":t=[i,r];break;case"bottom":t=[r,i];break;case"left":t=[o,s];break;case"right":t=[s,o]}return t}show(){(this._hideTimeout||this._open)&&(this._overlayRef.detach(),clearTimeout(this._hideTimeout),this._hideTimeout=null),this._createOverlay(),this._showTimeout=setTimeout(()=>{const t=new fx(H3e);this.tooltipShow.emit(this),this._open=!0,this._tooltipRef=this._overlayRef.attach(t),this._tooltipRef.instance.title=this.mdbTooltip,this._tooltipRef.instance.html=this.html,this._tooltipRef.instance.animation=this.animation,this._tooltipRef.instance.animationState="visible",this._tooltipRef.instance.markForCheck(),this.tooltipShown.emit(this)},this.delayShow)}hide(){this._showTimeout&&(clearTimeout(this._showTimeout),this._showTimeout=null,this._hideTimeout=setTimeout(()=>{this.tooltipHide.emit(this),this._tooltipRef?(this._tooltipRef.instance._hidden.pipe(cl()).subscribe(()=>{this._overlayRef.detach(),this._open=!1,this.tooltipHidden.emit(this)}),this._tooltipRef.instance.animationState="hidden",this._tooltipRef.instance.markForCheck()):(this._overlayRef.detach(),this._open=!1,this.tooltipHidden.emit(this))},this.delayHide))}toggle(){this._open?this.hide():this.show()}static \u0275fac=function(i){return new(i||n)(j(px),j(Hee),j(fi))};static \u0275dir=dt({type:n,selectors:[["","mdbTooltip",""]],inputs:{mdbTooltip:"mdbTooltip",tooltipDisabled:"tooltipDisabled",placement:"placement",html:"html",animation:"animation",trigger:"trigger",delayShow:"delayShow",delayHide:"delayHide",offset:"offset"},outputs:{tooltipShow:"tooltipShow",tooltipShown:"tooltipShown",tooltipHide:"tooltipHide",tooltipHidden:"tooltipHidden"},exportAs:["mdbTooltip"]})}return n})(),j3e=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({imports:[Rr,mx]})}return n})();const $3e=["*"];let W3e=(()=>{class n{constructor(){this.toolTipContent="<em>Tooltip</em> <u>applied</u> with <b>wrapper</b>"}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-tooltip"]],inputs:{toolTipContent:"toolTipContent"},ngContentSelectors:$3e,decls:2,vars:2,consts:[["tabindex","0",1,"d-inline-block","tooltip-wrapper",3,"mdbTooltip","html"]],template:function(i,r){1&i&&(Zb(),I(0,"div",0),Qb(1),D()),2&i&&(_s("mdbTooltip",r.toolTipContent),Pe("html",!0))},dependencies:[G3e],styles:[".tooltip-wrapper[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();function q3e(n,e){1&n&&$(0,"img",19),2&n&&_s("src",ot().selectedItem.mainImage,Wa)}function K3e(n,e){if(1&n){const t=jn();I(0,"div",20)(1,"h5"),P(2,"FIND YOUR "),I(3,"span",21),P(4,"PERFECT SIZE"),D(),P(5," WITH TRY-ON"),D(),I(6,"p"),P(7,"We calculate your perfect size and fit based on your precise body measurements."),D(),I(8,"h5"),P(9,"MEASUREMENTS"),D(),I(10,"div",22)(11,"div",4)(12,"div",23)(13,"p"),P(14,"Your height and weight:"),D()(),I(15,"div",24)(16,"b",25),P(17,"Metric"),D()()(),I(18,"div",4)(19,"div",26)(20,"p"),P(21,"HEIGHT"),I(22,"b")(23,"sup"),P(24," \u24d8"),D()()()(),I(25,"div",27)(26,"app-range",28),it("onValueChanged",function(r){return ln(t),un(ot().heightChange(r))}),D()(),I(27,"div",24),P(28),D()(),I(29,"div",4)(30,"div",26)(31,"p"),P(32,"WEIGHT"),I(33,"b")(34,"sup"),P(35," \u24d8"),D()()()(),I(36,"div",27)(37,"app-range",28),it("onValueChanged",function(r){return ln(t),un(ot().weightChange(r))}),D()(),I(38,"div",24),P(39),D()()(),$(40,"br"),I(41,"h5"),P(42,"PREFERENCE:"),D(),I(43,"p"),P(44,"How do you want it to fit you?"),D(),I(45,"div",29),$(46,"app-range",30)(47,"app-range",31)(48,"app-range",31)(49,"app-range",32),D()()}if(2&n){const t=ot();le(26),Pe("min",0)("max",30),le(2),pi("",t.height," CM"),le(9),Pe("min",0)("max",155),le(2),pi("",t.weight," KG"),le(7),Pe("min",0)("max",2)("step",1)("sliderColor","transparent")("thumbColor","#CF0A2C"),le(1),Pe("min",0)("max",2)("step",1)("defaultValue",0)("enabled",!1)("sliderColor","transparent")("thumbColor","#DDD8D3"),le(1),Pe("min",0)("max",2)("step",1)("defaultValue",1)("enabled",!1)("sliderColor","transparent")("thumbColor","#DDD8D3"),le(1),Pe("min",0)("max",2)("step",1)("defaultValue",2)("enabled",!1)("sliderColor","#DDD8D3")("thumbColor","#2AA048")}}function X3e(n,e){if(1&n&&(I(0,"div",33)(1,"div")(2,"h5"),P(3,"YOUR SIZE RECOMMENDATION"),D(),I(4,"h5")(5,"span",21),P(6),D()(),I(7,"p"),P(8,"This size recommendation is based on the brands' size chart."),D()()()),2&n){const t=ot();le(6),ys(t.productLabel)}}function Y3e(n,e){if(1&n){const t=jn();I(0,"div",34)(1,"div")(2,"a",35),it("click",function(){return ln(t),un(ot().startOver())}),P(3,"START OVER"),D()(),$(4,"div",36),I(5,"div")(6,"button",37),it("click",function(){return ln(t),un(ot().addSize())}),P(7),D()()()}if(2&n){const t=ot();le(7),pi('ADD SIZE "',t.productLabel,'"')}}function Z3e(n,e){if(1&n){const t=jn();I(0,"div",34),$(1,"div",36),I(2,"div")(3,"button",38),it("click",function(){return ln(t),un(ot().getRecommendedSize())}),P(4,"FIND MY SIZE"),D()()()}}function Q3e(n,e){if(1&n){const t=jn();I(0,"app-item-tile",41),it("onSelect",function(r){return ln(t),un(ot(2).clickItem(r))}),D()}if(2&n){const t=e.$implicit,i=e.index;Pe("name",t.name)("manufacturer",t.manufacturer)("price",t.price.value)("currencyCode",t.price.currencyCode)("displayImageUrl",t.mainImage)("index",i)}}function J3e(n,e){if(1&n&&(I(0,"div",39),kt(1,Q3e,1,6,"app-item-tile",40),D()),2&n){const t=e.$implicit;le(1),Pe("ngForOf",t)}}function eVe(n,e){if(1&n&&$(0,"img",42)(1,"img",43)(2,"img",44),2&n){const t=ot();_s("src",t.selectedItem.auxiliaryImages[0],Wa),le(1),_s("src",t.selectedItem.auxiliaryImages[1],Wa),le(1),_s("src",t.selectedItem.auxiliaryImages[2],Wa)}}function tVe(n,e){1&n&&$(0,"img",45),2&n&&_s("src",ot().selectedItem.mainImage,Wa)}function nVe(n,e){1&n&&$(0,"i",63)}function iVe(n,e){if(1&n){const t=jn();I(0,"div",46)(1,"h3"),P(2),D(),I(3,"h5"),P(4,"DESCRIPTION"),D(),I(5,"p"),P(6),D(),I(7,"h5"),P(8),nl(9,"currency"),D(),I(10,"h5",47),P(11),D(),I(12,"div",48)(13,"div",49)(14,"div",50),P(15,"\u0336"),D(),I(16,"div"),P(17,"1"),D(),I(18,"div"),P(19,"+"),D()(),I(20,"button",51),P(21),kt(22,nVe,1,0,"i",52),D()(),I(23,"div",53)(24,"div"),$(25,"img",54),D(),I(26,"div",55)(27,"app-tooltip",56)(28,"a",57),it("click",function(){return ln(t),un(ot().getRecommendedSize())}),I(29,"u",17),P(30,"Find your size and fit"),D(),I(31,"u",17),P(32),D()()()()(),I(33,"div",58)(34,"button",59),P(35,"ADD TO CART"),D(),I(36,"button",60),P(37,"ADD TO FITTING ROOM"),D()(),I(38,"div",61)(39,"button",62),P(40,"Remove from fitting room"),D()()()}if(2&n){const t=ot();le(2),ys(t.selectedItem.name),le(4),ys(t.selectedItem.description),le(2),pi("PRICE: ",c0(9,9,t.selectedItem.price.value,t.selectedItem.price.currencyCode,"symbol-narrow"),""),le(3),pi("COLOUR: ",t.selectedItem.color,""),le(10),pi("SIZE ",t.hasSize?t.productLabel:"N/A"," \xa0\xa0"),le(1),Pe("ngIf",!0),le(7),Pe("hidden",t.hasSize),le(2),Pe("hidden",!t.hasSize),le(1),pi("Your size recommendation is ",t.productLabel,"")}}let rVe=(()=>{class n{constructor(t,i,r,s,o,a,c,l){this.router=t,this.spinner=i,this.toastr=r,this.logger=s,this.shopping=o,this.fitFinder=a,this.storage=c,this.modalService=l,this.screenHeight=0,this.screenWidth=0,this.selectView=!1,this.displayAuxilaryImages=!0,this.displayModalImage=!0,this.height=150,this.weight=45,this.productLabel="",this.displaySizeRecommendation=!1,this.hasSize=!1,this.shoppingCollection=[],this.displayLists=[],this.onResize(null)}ngOnInit(){var t=this;return N(function*(){try{t.spinner.show(),t.shoppingCollection=yield t.shopping.getCollection();const o=Math.ceil(t.shoppingCollection.length/4);var i=t.shoppingCollection.map(c=>Object.assign({},c));i.reverse();for(var r=0;r<o;r++){t.displayLists.push(new Array);for(var s=0;0!=i.length&&4!=s;)t.displayLists[r].push(i.pop()),s++}t.logger.debug(`Fetched ${t.shoppingCollection.length} items from the shopping service`),t.spinner.hide();const a=yield t.storage.fetch(js.SELECTED_ITEM);a&&(yield t.storage.delete(js.SELECTED_ITEM),t.selectedItem=a,t.selectView=!0,t.getRecommendedSize())}catch(o){t.logger.error(`Error fetching shopping collection from service: ${JSON.stringify(o)}`),t.toastr.error(js.DEFAULT_ERROR_MESSAGE),t.spinner.hide()}})()}onResize(t){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth,this.displayAuxilaryImages=!(this.screenWidth<992),this.displayModalImage=!(this.screenHeight<1071)}clickItem(t){this.logger.debug(`Item: ${t} was selected`),this.selectedItem=this.shoppingCollection[t],this.logger.debug(`The item is: ${this.selectedItem?.name}`),this.selectView=!0,this.hasSize=!1}unClickItem(){this.hasSize=!1,this.selectView=!1,this.selectedItem=void 0}weightChange(t){this.weight=45+Number(t)}heightChange(t){this.height=150+Number(t)}getRecommendedSize(){var t=this;return N(function*(){try{null!=t.selectedItem&&(t.spinner.show(),t.productLabel=yield t.fitFinder.getSizeRecommendation(t.selectedItem.id,t.selectedItem.type),t.logger.debug(`Fetched recommended product label: ${t.productLabel}`),t.displaySizeRecommendation=!0,t.hasSize=!0,t.spinner.hide())}catch(i){if(t.spinner.hide(),i instanceof Error)switch(i.message.toString()){case bi.USER_MUST_SIGN_IN.toString():yield t.storage.store(t.selectedItem,js.SELECTED_ITEM),t.router.navigate([rt.LOGIN,{callbackUrl:rt.SHOP}]);break;case bi.DATABASE_ERROR.toString():yield t.storage.store(t.selectedItem,js.SELECTED_ITEM),t.router.navigate([rt.FITTING_ROOM,{callbackUrl:rt.SHOP}]);break;default:t.logger.error(`An unknown error occurred: ${i}`),t.toastr.error(js.DEFAULT_ERROR_MESSAGE),t.displaySizeRecommendation=!1}else t.logger.error(`An unknown error occurred: ${i}`),t.toastr.error(js.DEFAULT_ERROR_MESSAGE),t.displaySizeRecommendation=!1}})()}closeSizeRecModal(){this.displaySizeRecommendation=!1,this.modalService.close()}addSize(){this.closeSizeRecModal()}startOver(){this.closeSizeRecModal(),this.productLabel="",this.hasSize=!1}static#e=this.\u0275fac=function(i){return new(i||n)(j(Mi),j(p2),j(wd),j(oi),j(rY),j(e3e),j(dp),j(LU))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-shop"]],hostBindings:function(i,r){1&i&&it("resize",function(o){return r.onResize(o)},0,NM)},decls:35,vars:20,consts:[[1,"fixed-top"],["id","modal-5",3,"wideMode"],[2,"text-align","right"],["type","button",1,"btn-close",2,"color","#190101","scale","1.5","opacity","1","margin-left","1em",3,"click"],[1,"row"],[1,"col-md-4"],[3,"ngIf"],[1,"container","mb-5",3,"hidden"],[1,"text-center","pb-5"],["class","row","style","display: flex; flex-direction: row; justify-content: center;",4,"ngFor","ngForOf"],[1,"text-center","pb-5",2,"display","flex","flex-direction","row","justify-content","space-evenly","align-items","end"],[1,"back-arrow"],[1,"fas","fa-arrow-left",2,"color","#190101","scale","1.5","opacity","1",3,"click"],[2,"flex","80%"],[2,"margin","0"],[1,"row","selectedItemPictures"],[1,"col-md-6"],[3,"hidden"],[1,"d-flex","flex-column","auxilaryImages"],["alt","item-image",1,"img-fluid",3,"src"],[1,"col-md-8"],[2,"color","#CF0A2C"],[1,"container","measurements"],[1,"col-md-9"],[1,"col-md-3"],[2,"color","black"],[1,"col-md-2"],[1,"col-md-7"],[3,"min","max","onValueChanged"],[2,"position","relative"],[2,"position","absolute","width","100%","z-index","100",3,"min","max","step","sliderColor","thumbColor"],[2,"position","absolute","width","100%","z-index","0",3,"min","max","step","defaultValue","enabled","sliderColor","thumbColor"],[2,"z-index","0",3,"min","max","step","defaultValue","enabled","sliderColor","thumbColor"],[1,"col-md-8","text-center",2,"display","flex","justify-content","center","align-items","center"],[1,"modal-bottom-buttons"],[1,"start-over-btn",3,"click"],[2,"flex","1"],[1,"btn","add-size-btn",3,"click"],[1,"btn","find-size-btn",3,"click"],[1,"row",2,"display","flex","flex-direction","row","justify-content","center"],["class","col-md-3",3,"name","manufacturer","price","currencyCode","displayImageUrl","index","onSelect",4,"ngFor","ngForOf"],[1,"col-md-3",3,"name","manufacturer","price","currencyCode","displayImageUrl","index","onSelect"],["alt","slider-1",1,"slide-image",3,"src"],["alt","slider-2",1,"slide-image",3,"src"],["alt","slider-3",1,"slide-image",3,"src"],["alt","item-image",1,"img-fluid","main-image",3,"src"],[1,"selectedItemDetails"],[1,"item-color"],[1,"quantity-size-box"],[1,"quantity-controls"],[2,"padding-bottom","8px"],[1,"btn","size"],["class","fas fa-caret-down fa-1x",4,"ngIf"],[1,"size-and-fit-disp"],["src","/live/assets/icons/tryon-icon-b.png","alt","tryon_icon",1,"tryon-icon-b"],[1,"ms-3",2,"padding-top","0.1em"],["toolTipContent","<h5>FIND YOUR <b>PERFECT SIZE</b> WITH TRY-ON</h5><br>Take the guesswork out of online shopping. You<br> can now virtually try-on clothes before clicking<br> that purchase button.<br><br>Find your size across all brand and products."],[3,"click"],[1,"cart-fitting-buttons"],["mdbTooltip","Tootip on bottom",1,"btn","cart"],[1,"btn","ft-room"],[1,"ft-room-remove"],[1,"btn","btn-tertiary"],[1,"fas","fa-caret-down","fa-1x"]],template:function(i,r){if(1&i&&($(0,"app-header",0),I(1,"app-modal",1)(2,"div",2)(3,"u"),P(4,"Privacy"),D(),I(5,"button",3),it("click",function(){return r.closeSizeRecModal()}),D()(),$(6,"br"),I(7,"div",4)(8,"div",5),kt(9,q3e,1,1,"ng-template",6),D(),kt(10,K3e,50,32,"ng-template",6),kt(11,X3e,9,1,"ng-template",6),kt(12,Y3e,8,1,"ng-template",6),kt(13,Z3e,5,0,"ng-template",6),D()(),I(14,"div",7)(15,"h1",8),P(16,"Shop Collection"),D(),kt(17,J3e,2,1,"div",9),D(),I(18,"div",7)(19,"div",10)(20,"div",11)(21,"i",12),it("click",function(){return r.unClickItem()}),D()(),I(22,"div",13)(23,"h1",14),P(24),D()()(),I(25,"div",15)(26,"div",16)(27,"div",4)(28,"div",17)(29,"div",18),kt(30,eVe,3,3,"ng-template",6),D()(),I(31,"div"),kt(32,tVe,1,1,"ng-template",6),D()()(),I(33,"div",16),kt(34,iVe,41,13,"ng-template",6),D()()()),2&i){let s;le(1),Pe("wideMode",!0),le(8),Pe("ngIf",r.selectedItem&&r.displayModalImage),le(1),Pe("ngIf",0==r.displaySizeRecommendation),le(1),Pe("ngIf",1==r.displaySizeRecommendation),le(1),Pe("ngIf",1==r.displaySizeRecommendation),le(1),Pe("ngIf",0==r.displaySizeRecommendation),le(1),Pe("hidden",r.selectView),le(3),Pe("ngForOf",r.displayLists),le(1),Pe("hidden",!r.selectView),le(6),pi("Shop ",null!==(s=null==r.selectedItem||null==r.selectedItem.category?null:r.selectedItem.category.toString())&&void 0!==s?s:"",""),le(4),sA("col-md-",r.displayAuxilaryImages?4:1,""),Pe("hidden",!r.displayAuxilaryImages),le(2),Pe("ngIf",r.selectedItem),le(1),sA("col-md-",r.displayAuxilaryImages?8:12,""),le(1),Pe("ngIf",r.selectedItem),le(2),Pe("ngIf",r.selectedItem)}},dependencies:[Tg,Oo,Aa,Cee,i3e,W3e,bZ,R0],styles:["h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%] > b[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{font-family:Montserrat,serif;color:#190101}h1[_ngcontent-%COMP%]{font-size:48px}p[_ngcontent-%COMP%]{font-family:Garet,serif;color:#190101}h6[_ngcontent-%COMP%]{padding-bottom:.5rem}div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-top:1rem;font-family:Montserrat,serif;font-weight:600;color:#fff;background-color:#cf0a2c}div.col-md-3.d-flex.flex-column[_ngcontent-%COMP%]{align-items:center;position:relative}.tryon-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:36px}.back-arrow[_ngcontent-%COMP%]{flex:20%;cursor:pointer}@media only screen and (min-width: 0px){h1[_ngcontent-%COMP%]{padding-top:5rem;font-size:32px}div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:2rem}.tryon-icon[_ngcontent-%COMP%]{width:64px}.back-arrow[_ngcontent-%COMP%]{margin-bottom:2px}}@media only screen and (min-width: 414px){h1[_ngcontent-%COMP%]{padding-top:8rem;font-size:40px}.back-arrow[_ngcontent-%COMP%]{margin-bottom:8px}}@media only screen and (min-width: 768px){h1[_ngcontent-%COMP%]{padding-top:10rem;font-size:48px}div.col-md-3[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:0}.tryon-icon[_ngcontent-%COMP%]{width:36px}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}@media only screen and (min-width: 0px){.selectedItemDetails[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-top:1em;padding-bottom:.2em}.selectedItemDetails[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding-bottom:.1rem}.selectedItemDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:.8em 0}.quantity-size-box[_ngcontent-%COMP%], .item-color[_ngcontent-%COMP%], .size-and-fit-disp[_ngcontent-%COMP%], .cart-fitting-buttons[_ngcontent-%COMP%], .ft-room-remove[_ngcontent-%COMP%]{padding-top:.8em}.slide-image[_ngcontent-%COMP%]{height:0;max-width:0}.cart-fitting-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:.8em;padding:.8em}.cart-fitting-buttons[_ngcontent-%COMP%] > button.ft-room[_ngcontent-%COMP%]{margin-left:1rem}.quantity-controls[_ngcontent-%COMP%]{border-width:1px;font-size:1.1em;font-weight:500;margin-right:1rem}.quantity-size-box[_ngcontent-%COMP%]{margin-bottom:1rem}.quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{padding-left:1rem;padding-right:.5rem;font-size:.8em;margin-left:0rem}.size-and-fit-disp[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.8rem;font-weight:300;font-size:.9em}div.col-md-6[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-top:.5rem}.selectedItemDetails[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-weight:600}.selectedItemDetails[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{font-weight:600}.selectedItemDetails[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:1.1em}.tryon-icon-b[_ngcontent-%COMP%]{width:20px}div.ft-room-remove[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:1em;font-weight:300;margin-top:1px}}@media only screen and (min-width: 768px){.selectedItemPictures[_ngcontent-%COMP%]{padding-top:0;padding-right:1rem}.selectedItemDetails[_ngcontent-%COMP%]{padding-left:2rem}.selectedItemDetails[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-top:0}.auxilaryImages[_ngcontent-%COMP%]{height:61vh}.main-image[_ngcontent-%COMP%]{height:61vh;max-width:100%}.cart-fitting-buttons[_ngcontent-%COMP%] > button.ft-room[_ngcontent-%COMP%]{margin-left:.1rem}.quantity-controls[_ngcontent-%COMP%]{border-width:1px;font-size:1.1em;font-weight:500;margin-right:.1em}.quantity-size-box[_ngcontent-%COMP%]{margin-bottom:1rem}.quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{padding-left:1rem;padding-right:.5rem;font-size:.9em;margin-left:.1rem}.size-and-fit-disp[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.8rem;font-weight:300;font-size:.9em}div.col-md-6[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-top:.5rem}.selectedItemDetails[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-weight:600}.selectedItemDetails[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{font-weight:600}.selectedItemDetails[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:1.1em}.tryon-icon-b[_ngcontent-%COMP%]{width:20px}div.ft-room-remove[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:1em;font-weight:300;margin-top:1px}}@media only screen and (min-width: 992px){.slide-image[_ngcontent-%COMP%]{height:19.2vh;max-width:100%}.quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{margin-left:.5rem}.cart-fitting-buttons[_ngcontent-%COMP%] > button.ft-room[_ngcontent-%COMP%]{margin-left:.5rem}}@media only screen and (min-width: 1200px){.selectedItemPictures[_ngcontent-%COMP%]{padding-right:3rem}.selectedItemDetails[_ngcontent-%COMP%]{padding-left:3rem}.selectedItemDetails[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-bottom:.3em}.selectedItemDetails[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding-bottom:.2rem}.selectedItemDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:1em 0}.quantity-size-box[_ngcontent-%COMP%], .item-color[_ngcontent-%COMP%], .size-and-fit-disp[_ngcontent-%COMP%], .cart-fitting-buttons[_ngcontent-%COMP%], .ft-room-remove[_ngcontent-%COMP%]{padding-top:1em}.slide-image[_ngcontent-%COMP%]{max-width:80%}.cart-fitting-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:1em}.cart-fitting-buttons[_ngcontent-%COMP%] > button.ft-room[_ngcontent-%COMP%]{margin-left:1em}.quantity-controls[_ngcontent-%COMP%]{border-width:1px}.quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{padding-left:2rem;padding-right:1rem;font-size:1.2em;margin-left:1em}.size-and-fit-disp[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.1em}.selectedItemDetails[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:1.3em}.tryon-icon-b[_ngcontent-%COMP%]{width:28px}div.ft-room-remove[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:1.3em;margin-top:10px}}@media only screen and (min-width: 1400px){.cart-fitting-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:1.2em}.quantity-controls[_ngcontent-%COMP%]{font-size:1.3em}.quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{padding-left:3rem}}.auxilaryImages[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;justify-content:space-between}.quantity-size-box[_ngcontent-%COMP%]{display:flex;align-items:center}.quantity-controls[_ngcontent-%COMP%]{width:100px;display:flex;flex-direction:row;height:40px;justify-content:space-evenly;align-items:center;border:solid;border-color:#000}.tryon-icon[_ngcontent-%COMP%]{background:url(/live/assets/icons/tryon_icon.png)}.size-and-fit-disp[_ngcontent-%COMP%]{color:#190101;display:flex;flex-direction:row}.cart-fitting-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{font-family:Montserrat,serif;font-weight:600;color:#fff}.cart-fitting-buttons[_ngcontent-%COMP%] > button.cart[_ngcontent-%COMP%]{background-color:#cf0a2c}.cart-fitting-buttons[_ngcontent-%COMP%] > button.ft-room[_ngcontent-%COMP%], .quantity-size-box[_ngcontent-%COMP%] > button.size[_ngcontent-%COMP%]{background-color:#190101}div.ft-room-remove[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{text-transform:unset!important;font-family:Montserrat,serif;color:#dc4c64}div.measurements[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-2[_ngcontent-%COMP%], div.col-md-9[_ngcontent-%COMP%]{padding-left:0;margin-top:4px}div.measurements[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div.col-md-3[_ngcontent-%COMP%]{margin-top:4px}.find-size-btn[_ngcontent-%COMP%]{background-color:#cf0a2c;color:#fff;scale:1.4;float:right;padding-left:32px;padding-right:32px}.add-size-btn[_ngcontent-%COMP%]{background-color:#cf0a2c;color:#fff;scale:1.4;padding-left:32px;padding-right:32px}.start-over-btn[_ngcontent-%COMP%]{font-weight:700;padding-left:32px;padding-right:32px;color:#000;text-decoration:underline;text-decoration-thickness:2px;cursor:pointer}.modal-bottom-buttons[_ngcontent-%COMP%]{display:flex;margin:64px 64px 0 0}"]})}return n})();function sVe(n,e){if(1&n){const t=jn();I(0,"div",1),$(1,"app-header"),I(2,"app-modal",2)(3,"h1",3),P(4,"Quick question..."),D(),I(5,"h5",4),P(6,"Are you signing up as a user or an e-commerce store?"),D(),I(7,"div",5)(8,"button",6),it("click",function(){ln(t);const r=ot();return r.modalService.close(),un(r.registerUser())}),P(9,"User"),D(),I(10,"button",7),it("click",function(){ln(t);const r=ot();return r.modalService.close(),un(r.registerClient())}),P(11,"Store"),D()()(),I(12,"div",8)(13,"div",9),$(14,"h6",10),I(15,"h1",11),P(16,"Try On"),D(),$(17,"button",12),D(),$(18,"div",13),I(19,"div",14)(20,"input",15),it("click",function(){return ln(t),un(ot().requestLogin())}),D(),I(21,"input",16),it("click",function(){return ln(t),un(ot().modalService.open("modal-4"))}),D()(),I(22,"div",17)(23,"div",18),$(24,"hr"),D(),I(25,"h6",19),P(26,"WITH"),D(),I(27,"div",18),$(28,"hr"),D()(),I(29,"div",20)(30,"div",21),$(31,"i",22),D(),I(32,"div",23),$(33,"i",24),D()(),$(34,"div",25),D()()}if(2&n){const t=ot();le(17),Xn("routerLink","/",t.routes.HOME,"")}}function oVe(n,e){if(1&n){const t=jn();I(0,"div",1),$(1,"app-header"),I(2,"div",8)(3,"div",9)(4,"h6",26)(5,"u"),P(6,"Sign Up"),D()(),I(7,"h1",11),P(8,"Try-On"),D(),I(9,"button",27),it("click",function(){return ln(t),un(ot().requestLanding())}),D()(),I(10,"div",28)(11,"h5",29),P(12,"LOG IN"),D(),I(13,"form",30)(14,"div",31),$(15,"input",32,33),D(),I(17,"div",31),$(18,"input",34,35),D()()(),I(20,"div",36)(21,"div",37)(22,"input",38),it("click",function(){ln(t);const r=so(16),s=so(19);return un(ot().login(r.value,s.value))}),D()(),I(23,"div",39)(24,"span",40),P(25,"Forgot your password?"),D()()(),$(26,"div",41),D()()}if(2&n){const t=ot();le(4),Xn("routerLink","/",t.routes.REGISTER_USER,""),le(20),Xn("routerLink","/",t.routes.FORGOT_PASSWORD,"")}}let aVe=(()=>{class n{constructor(t,i,r,s,o,a){this.modalService=t,this.authRepo=i,this.logger=r,this.toastr=s,this.router=o,this.route=a,this.alertMessage="",this.showAlert=!1,this.showLoginForm=!1,this.routes=rt,this.callback=""}ngOnInit(){this.callback=this.route.snapshot.paramMap.get("callbackUrl")}login(t,i){var r=this;return N(function*(){const s=document.getElementById("login-form");s&&s.reset();try{yield r.authRepo.logIn(t,i),r.toastr.success("Logged in successfully"),r.checkFittingRoomCallback()?r.router.navigate([rt.FITTING_ROOM]):r.checkShoppingCallback()?r.router.navigate([rt.SHOP]):r.router.navigate([rt.HOME])}catch(o){r.logger.error(`Login error = ${o}`),r.toastr.error("Invalid username or password")}})()}requestLogin(){this.showLoginForm=!0}requestLanding(){this.showLoginForm=!1}registerClient(){this.checkFittingRoomCallback()||this.checkShoppingCallback()?this.router.navigate([rt.REGISTER_CLIENT,{callbackUrl:this.callback}]):this.router.navigate([rt.REGISTER_CLIENT])}registerUser(){this.checkFittingRoomCallback()||this.checkShoppingCallback()?this.router.navigate([rt.REGISTER_USER,{callbackUrl:this.callback}]):this.router.navigate([rt.REGISTER_USER])}checkFittingRoomCallback(){return null!=this.callback&&this.callback==rt.FITTING_ROOM}checkShoppingCallback(){return null!=this.callback&&this.callback==rt.SHOP}static#e=this.\u0275fac=function(i){return new(i||n)(j(LU),j(pd),j(oi),j(wd),j(Mi),j(oc))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-login"]],decls:2,vars:2,consts:[["class","container",4,"ngIf"],[1,"container"],["id","modal-4"],[1,"pb-4"],[1,"pb-5"],[2,"justify-content","center","display","flex"],[1,"btn","btn-primary","me-1","btn-lg","text-white",2,"background-color","#CF0A2C",3,"click"],[1,"btn","btn-secondary","ms-1","btn-lg","text-black",2,"background-color","white",3,"click"],[1,"d-flex","flex-column","login-area","mt-2"],[1,"d-flex","flex-row"],[1,"mt-2"],[1,"site"],["type","button",1,"btn-close",3,"routerLink"],[1,"row","landing-spacer"],[1,"row","mb-5",2,"justify-content","center","display","flex","align-items","center","flex-direction","column"],["type","button","value","LOG IN",1,"btn","btnPrimary","btn-lg","text-white","mb-4","landing-buttons",2,"background-color","#CF0A2C",3,"click"],["type","button","value","SIGN UP",1,"btn","btnPrimary","btn-lg","mb-2","landing-buttons",2,"background-color","white","color","#190101",3,"click"],[1,"row","mt-1","mb-2",2,"justify-content","center","display","flex","flex-direction","row"],[1,"hr-cont"],[1,"text-center","hr-text"],[1,"row","mt-4","mb-5",2,"justify-content","center","display","flex","flex-direction","row"],[1,"circle",2,"background-color","#4267B2"],[1,"fab","fa-3x","fa-facebook-f","text-white"],[1,"circle",2,"background-color","#DB4437"],[1,"fab","fa-3x","fa-google","text-white"],[2,"width","80%","height","20vh"],[1,"redirect","mt-2","cursor-pointer",3,"routerLink"],["type","button",1,"btn-close",3,"click"],[1,"text-center","row",2,"display","flex","justify-content","center"],[1,"mt-3","mb-4","login-text"],["id","login-form"],[1,"formGroup","mb-3"],["type","text","placeholder","Username:","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password:","required","",1,"formControl"],["userPassword",""],[1,"text-center","row","button-container"],[1,"formGroup"],["type","button","value","Log In",1,"btn","btnPrimary","btn-lg","text-white","ps-5","pe-5","mb-2",3,"click"],[1,"forgotPassword","mb-5"],[3,"routerLink"],[2,"width","80%","height","10vh"]],template:function(i,r){1&i&&(kt(0,sVe,35,1,"div",0),kt(1,oVe,27,2,"div",0)),2&i&&(Pe("ngIf",!r.showLoginForm),le(1),Pe("ngIf",r.showLoginForm))},dependencies:[Oo,Aa,Cee,Us,mp,hp,pp],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.landing-buttons[_ngcontent-%COMP%]{font-family:Montserrat,serif;font-size:24px;font-weight:700}.hr-cont[_ngcontent-%COMP%]{width:15%;color:#190101;padding:0}.circle[_ngcontent-%COMP%]{padding:0;margin:0 6px;width:70px;height:70px;border-radius:35px;justify-content:center;display:flex;align-items:center;cursor:pointer}hr[_ngcontent-%COMP%]{border-top:1.5px solid #190101;opacity:unset}.hr-text[_ngcontent-%COMP%]{width:10%;margin:0;color:#000;padding-top:.5em}@media only screen and (min-width: 0px){.landing-buttons[_ngcontent-%COMP%]{width:80%}.hr-cont[_ngcontent-%COMP%]{width:0}.hr-text[_ngcontent-%COMP%]{width:100%}}@media only screen and (min-width: 768px){.landing-buttons[_ngcontent-%COMP%]{width:60%}.hr-cont[_ngcontent-%COMP%]{width:15%}.hr-text[_ngcontent-%COMP%]{width:10%}}@media only screen and (min-width: 991px){.landing-buttons[_ngcontent-%COMP%]{width:50%}}@media only screen and (min-width: 1024px){.landing-buttons[_ngcontent-%COMP%]{width:40%}}.login-area[_ngcontent-%COMP%]{min-height:100vh;background-color:#f4f4f4;width:100%}div.d-flex.flex-row[_ngcontent-%COMP%] > button.btn-close[_ngcontent-%COMP%]{color:#190101;scale:1.5;opacity:1}h1[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:Quicksand,sans-serif;font-weight:800;color:#190101}h6[_ngcontent-%COMP%]{font-family:Garet,serif;font-weight:100;color:#cf0a2c}input.formControl[_ngcontent-%COMP%]{border-radius:8px;border-width:0;border-color:#f4f4f4;background-color:#fff;padding:1rem}[_ngcontent-%COMP%]::placeholder{color:#190101;opacity:1}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#190101}.button-container[_ngcontent-%COMP%]{margin-top:8rem}.forgotPassword[_ngcontent-%COMP%]{color:#cf0a2c}div.formGroup[_ngcontent-%COMP%] > input.btn[_ngcontent-%COMP%]{background-color:#cf0a2c;box-shadow:none;border-radius:4px;text-align:center;font-family:Montserrat,serif}@media only screen and (min-width: 0px){input.formControl[_ngcontent-%COMP%]{width:90%}app-alert-warning[_ngcontent-%COMP%]{width:90%}.spacer[_ngcontent-%COMP%]{height:11vh}.landing-spacer[_ngcontent-%COMP%]{height:6vh}.login-area[_ngcontent-%COMP%]{border-top-left-radius:44px;border-top-right-radius:44px;padding:1rem 1rem 0}div.d-flex.flex-row[_ngcontent-%COMP%]{justify-content:space-between}.site[_ngcontent-%COMP%]{visibility:hidden}.login-text[_ngcontent-%COMP%]{margin-left:0}}@media only screen and (min-width: 375px){input.formControl[_ngcontent-%COMP%]{width:80%}app-alert-warning[_ngcontent-%COMP%]{width:80%}.spacer[_ngcontent-%COMP%]{height:15vh}.landing-spacer[_ngcontent-%COMP%]{height:9vh}.login-area[_ngcontent-%COMP%]{border-top-left-radius:66px;border-top-right-radius:66px;padding:1rem 3rem 0 2rem}.site[_ngcontent-%COMP%]{visibility:visible}.login-text[_ngcontent-%COMP%]{margin-left:15px}}@media only screen and (min-width: 576px){input.formControl[_ngcontent-%COMP%]{width:60%}app-alert-warning[_ngcontent-%COMP%]{width:60%}.login-area[_ngcontent-%COMP%]{border-top-left-radius:88px;border-top-right-radius:88px;padding:2rem 4rem 0}.site[_ngcontent-%COMP%]{visibility:visible}.login-text[_ngcontent-%COMP%]{margin-left:15px}}@media only screen and (min-width: 766px){input.formControl[_ngcontent-%COMP%]{width:40%}app-alert-warning[_ngcontent-%COMP%]{width:40%}.spacer[_ngcontent-%COMP%]{height:17vh}.landing-spacer[_ngcontent-%COMP%]{height:13vh}}@media only screen and (min-width: 991px){input.formControl[_ngcontent-%COMP%]{width:30%}app-alert-warning[_ngcontent-%COMP%]{width:30%}.spacer[_ngcontent-%COMP%]{height:20vh}.landing-spacer[_ngcontent-%COMP%]{height:15vh}}@media only screen and (min-height: 1024px){.spacer[_ngcontent-%COMP%]{height:15vh}.landing-spacer[_ngcontent-%COMP%]{height:9vh}}"]})}return n})(),cVe=(()=>{class n{constructor(t,i,r,s,o){this.authRepo=t,this.logger=i,this.toastr=r,this.route=s,this.router=o,this.routes=rt,this.callback=""}ngOnInit(){this.callback=this.route.snapshot.paramMap.get("callbackUrl")}signUp(t,i,r){var s=this;return N(function*(){try{yield s.authRepo.signUp(t,i,r),s.toastr.success("Registered successfully!"),s.checkFittingRoomCallback()?s.router.navigate([rt.FITTING_ROOM]):s.checkShoppingCallback()?s.router.navigate([rt.SHOP]):s.router.navigate([rt.HOME])}catch(o){s.logger.error(`Sign Up Error = ${o}`),s.toastr.error("Invalid sign up details")}})()}loginUser(){this.checkFittingRoomCallback()||this.checkShoppingCallback()?this.router.navigate([rt.LOGIN,{callbackUrl:this.callback}]):this.router.navigate([rt.LOGIN])}checkShoppingCallback(){return null!=this.callback&&this.callback==rt.SHOP}checkFittingRoomCallback(){return null!=this.callback&&this.callback==rt.FITTING_ROOM}static#e=this.\u0275fac=function(i){return new(i||n)(j(pd),j(oi),j(wd),j(oc),j(Mi))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-user-signup"]],decls:29,vars:1,consts:[[1,"container"],[1,"d-flex","flex-column","signup-area","mt-2"],[1,"d-flex","flex-row"],[1,"redirect","mt-2","cursor-pointer",3,"click"],[1,"site"],["type","button",1,"btn-close",3,"click"],[1,"text-center","row",2,"display","flex","justify-content","center"],[1,"mt-3","mb-4","login-text"],["id","user-signup-form"],[1,"formGroup","mb-3"],["type","text","placeholder","Name:","required","",1,"formControl"],["userName",""],["type","text","placeholder","Email:","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password:","required","",1,"formControl"],["userPassword",""],[1,"text-center","row","button-container"],[1,"formGroup"],["type","button","value","SIGN UP",1,"btn","btnPrimary","btn-lg","text-white","ps-5","pe-5","mb-2",3,"click"],[1,"forgotPassword","mb-5"],[3,"routerLink"]],template:function(i,r){if(1&i){const s=jn();I(0,"div",0),$(1,"app-header"),I(2,"div",1)(3,"div",2)(4,"h6",3),it("click",function(){return r.loginUser()}),I(5,"u"),P(6,"Log in"),D()(),I(7,"h1",4),P(8,"Try-On"),D(),I(9,"button",5),it("click",function(){return r.loginUser()}),D()(),I(10,"div",6)(11,"h5",7),P(12,"SIGN UP"),D(),I(13,"form",8)(14,"div",9),$(15,"input",10,11),D(),I(17,"div",9),$(18,"input",12,13),D(),I(20,"div",9),$(21,"input",14,15),D()()(),I(23,"div",16)(24,"div",17)(25,"input",18),it("click",function(){ln(s);const a=so(16),c=so(19),l=so(22);return un(r.signUp(a.value,c.value,l.value))}),D()(),I(26,"div",19)(27,"span",20),P(28,"Forgot your password?"),D()()()()()}2&i&&(le(27),Xn("routerLink","/",r.routes.FORGOT_PASSWORD,""))},dependencies:[Aa,Us,mp,hp,pp],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.signup-area[_ngcontent-%COMP%]{background-color:#f4f4f4;min-height:100vh;width:100%}div.d-flex.flex-row[_ngcontent-%COMP%] > button.btn-close[_ngcontent-%COMP%]{color:#190101;scale:1.5;opacity:1}h1[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:Quicksand,sans-serif;font-weight:800;color:#190101}h6[_ngcontent-%COMP%]{font-family:Garet,serif;font-weight:100;color:#cf0a2c}input.formControl[_ngcontent-%COMP%]{border-radius:8px;border-width:0;border-color:#f4f4f4;background-color:#fff;padding:1rem}[_ngcontent-%COMP%]::placeholder{color:#190101;opacity:1}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#190101}.button-container[_ngcontent-%COMP%]{margin-top:4rem}.forgotPassword[_ngcontent-%COMP%]{color:#cf0a2c}div.formGroup[_ngcontent-%COMP%] > input.btn[_ngcontent-%COMP%]{background-color:#cf0a2c;box-shadow:none;border-radius:4px;text-align:center;font-family:Montserrat,serif}@media only screen and (min-width: 0px){input.formControl[_ngcontent-%COMP%]{width:90%}app-alert-warning[_ngcontent-%COMP%]{width:90%}.spacer[_ngcontent-%COMP%]{height:11vh}.signup-area[_ngcontent-%COMP%]{border-top-left-radius:44px;border-top-right-radius:44px;padding:1rem 1rem 0}div.d-flex.flex-row[_ngcontent-%COMP%]{justify-content:space-between}.site[_ngcontent-%COMP%]{visibility:hidden}.login-text[_ngcontent-%COMP%]{margin-left:0}}@media only screen and (min-width: 375px){input.formControl[_ngcontent-%COMP%]{width:80%}app-alert-warning[_ngcontent-%COMP%]{width:80%}.spacer[_ngcontent-%COMP%]{height:15vh}.signup-area[_ngcontent-%COMP%]{border-top-left-radius:66px;border-top-right-radius:66px;padding:1rem 3rem 0 2rem}.site[_ngcontent-%COMP%]{visibility:visible}.login-text[_ngcontent-%COMP%]{margin-left:15px}}@media only screen and (min-width: 576px){input.formControl[_ngcontent-%COMP%]{width:60%}app-alert-warning[_ngcontent-%COMP%]{width:60%}.spacer[_ngcontent-%COMP%]{height:15vh}.signup-area[_ngcontent-%COMP%]{border-top-left-radius:88px;border-top-right-radius:88px;padding:2rem 4rem 0}.site[_ngcontent-%COMP%]{visibility:visible}.login-text[_ngcontent-%COMP%]{margin-left:15px}}@media only screen and (min-width: 766px){input.formControl[_ngcontent-%COMP%]{width:40%}app-alert-warning[_ngcontent-%COMP%]{width:40%}.spacer[_ngcontent-%COMP%]{height:17vh}}@media only screen and (min-width: 991px){input.formControl[_ngcontent-%COMP%]{width:30%}app-alert-warning[_ngcontent-%COMP%]{width:30%}.spacer[_ngcontent-%COMP%]{height:20vh}}@media only screen and (min-height: 1024px){.spacer[_ngcontent-%COMP%]{height:15vh}}"]})}return n})(),lVe=(()=>{class n{constructor(t,i,r,s,o){this.authRepo=t,this.logger=i,this.toastr=r,this.route=s,this.router=o,this.routes=rt,this.callback=""}ngOnInit(){this.callback=this.route.snapshot.paramMap.get("callbackUrl")}clientSignUp(t,i,r,s){var o=this;return N(function*(){try{yield o.authRepo.clientSignUp(t,i,r,s),o.toastr.success("Registered successfully!"),o.checkFittingRoomCallback()?o.router.navigate([rt.FITTING_ROOM]):o.checkShoppingCallback()?o.router.navigate([rt.SHOP]):o.router.navigate([rt.HOME])}catch(a){o.logger.error(`Sign Up Error = ${a}`),o.toastr.error("Invalid sign up details")}})()}loginUser(){this.checkShoppingCallback()||this.checkFittingRoomCallback()?this.router.navigate([rt.LOGIN,{callbackUrl:this.callback}]):this.router.navigate([rt.LOGIN])}checkShoppingCallback(){return null!=this.callback&&this.callback==rt.SHOP}checkFittingRoomCallback(){return null!=this.callback&&this.callback==rt.FITTING_ROOM}static#e=this.\u0275fac=function(i){return new(i||n)(j(pd),j(oi),j(wd),j(oc),j(Mi))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-company-signup"]],decls:32,vars:1,consts:[[1,"container"],[1,"d-flex","flex-column","signup-area","mt-2"],[1,"d-flex","flex-row"],[1,"redirect","mt-2","cursor-pointer",3,"click"],[1,"site"],["type","button",1,"btn-close",3,"click"],[1,"text-center","row",2,"display","flex","justify-content","center"],[1,"mt-3","mb-4","login-text"],["id","company-registration-form"],[1,"formGroup","mb-3"],["type","text","placeholder","Company name:","required","",1,"formControl"],["companyName",""],["type","text","placeholder","Work email:","required","",1,"formControl"],["workEmail",""],["type","number","oninput","if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);","maxlength","15","placeholder","Phone number:","required","",1,"formControl"],["phoneNumber",""],["type","password","placeholder","Password:","required","",1,"formControl"],["password",""],[1,"text-center","row","button-container"],[1,"formGroup"],["type","button","value","REGISTER",1,"btn","btnPrimary","btn-lg","text-white","ps-5","pe-5","mb-2",3,"click"],[1,"forgotPassword","mb-5"],[3,"routerLink"]],template:function(i,r){if(1&i){const s=jn();I(0,"div",0),$(1,"app-header"),I(2,"div",1)(3,"div",2)(4,"h6",3),it("click",function(){return r.loginUser()}),I(5,"u"),P(6,"Log in"),D()(),I(7,"h1",4),P(8,"Try-On"),D(),I(9,"button",5),it("click",function(){return r.loginUser()}),D()(),I(10,"div",6)(11,"h5",7),P(12,"REGISTER"),D(),I(13,"form",8)(14,"div",9),$(15,"input",10,11),D(),I(17,"div",9),$(18,"input",12,13),D(),I(20,"div",9),$(21,"input",14,15),D(),I(23,"div",9),$(24,"input",16,17),D()()(),I(26,"div",18)(27,"div",19)(28,"input",20),it("click",function(){ln(s);const a=so(16),c=so(19),l=so(22),u=so(25);return un(r.clientSignUp(a.value,c.value,l.value,u.value))}),D()(),I(29,"div",21)(30,"span",22),P(31,"Forgot your password?"),D()()()()()}2&i&&(le(30),Xn("routerLink","/",r.routes.FORGOT_PASSWORD,""))},dependencies:[Aa,Us,mp,hp,pp],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.signup-area[_ngcontent-%COMP%]{background-color:#f4f4f4;width:100%;min-height:100vh}div.d-flex.flex-row[_ngcontent-%COMP%] > button.btn-close[_ngcontent-%COMP%]{color:#190101;scale:1.5;opacity:1}h1[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:Quicksand,sans-serif;font-weight:800;color:#190101}h6[_ngcontent-%COMP%]{font-family:Garet,serif;font-weight:100;color:#cf0a2c}input.formControl[_ngcontent-%COMP%]{border-radius:8px;border-width:0;border-color:#f4f4f4;background-color:#fff;padding:1rem}[_ngcontent-%COMP%]::placeholder{color:#190101;opacity:1}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#190101}.button-container[_ngcontent-%COMP%]{margin-top:4rem}.forgotPassword[_ngcontent-%COMP%]{color:#cf0a2c}div.formGroup[_ngcontent-%COMP%] > input.btn[_ngcontent-%COMP%]{background-color:#cf0a2c;box-shadow:none;border-radius:4px;text-align:center;font-family:Montserrat,serif}@media only screen and (min-width: 0px){input.formControl[_ngcontent-%COMP%]{width:90%}app-alert-warning[_ngcontent-%COMP%]{width:90%}.signup-area[_ngcontent-%COMP%]{height:89%;border-top-left-radius:44px;border-top-right-radius:44px;padding:1rem 1rem 0}div.d-flex.flex-row[_ngcontent-%COMP%]{justify-content:space-between}.site[_ngcontent-%COMP%]{visibility:hidden}.login-text[_ngcontent-%COMP%]{margin-left:0}}@media only screen and (min-width: 375px){input.formControl[_ngcontent-%COMP%]{width:80%}app-alert-warning[_ngcontent-%COMP%]{width:80%}.signup-area[_ngcontent-%COMP%]{border-top-left-radius:66px;border-top-right-radius:66px;padding:1rem 3rem 0 2rem}.site[_ngcontent-%COMP%]{visibility:visible}.login-text[_ngcontent-%COMP%]{margin-left:15px}}@media only screen and (min-width: 576px){input.formControl[_ngcontent-%COMP%]{width:60%}app-alert-warning[_ngcontent-%COMP%]{width:60%}.signup-area[_ngcontent-%COMP%]{border-top-left-radius:88px;border-top-right-radius:88px;padding:2rem 4rem 0}.site[_ngcontent-%COMP%]{visibility:visible}.login-text[_ngcontent-%COMP%]{margin-left:15px}}@media only screen and (min-width: 766px){input.formControl[_ngcontent-%COMP%]{width:40%}app-alert-warning[_ngcontent-%COMP%]{width:40%}}@media only screen and (min-width: 991px){input.formControl[_ngcontent-%COMP%]{width:30%}app-alert-warning[_ngcontent-%COMP%]{width:30%}}@media only screen and (min-height: 1024px){.signup-area[_ngcontent-%COMP%]{height:85%}}"]})}return n})(),uVe=(()=>{class n{constructor(t,i,r){this.contactApi=t,this.formBuilder=i,this.logger=r,this.alertMessage="",this.showSuccess=!1,this.showWarning=!1,this.name=new Gs("",[go.required]),this.email=new Gs("",[go.required,go.email,go.pattern("[A-Za-z0-9._%-]+@[A-Za-z0-9._%-]+\\.[a-z]{2,3}")]),this.subject=new Gs("",go.required),this.message=new Gs("",go.required),this.contactForm=i.group({name:this.name,email:this.email,subject:this.subject,message:this.message})}ngOnDestroy(){this.name=null,this.email=null,this.subject=null,this.message=null}sendMessage(t){var i=this;return N(function*(){if(i.contactForm.invalid)new Map([["name",i.name],["email",i.email],["subject",i.subject],["message",i.message]]).forEach((s,o,a)=>{if(s?.invalid)return i.alertMessage=`Please enter a valid ${o}`,i.showWarning=!0,void setTimeout(()=>i.showWarning=!1,2e3)});else try{yield i.contactApi.sendContactMessage({name:t.name,email:t.email,subject:t.subject,message:t.message}),i.contactForm.reset(),i.alertMessage="Successfully Submitted!",i.showSuccess=!0,setTimeout(()=>i.showSuccess=!1,4e3)}catch(r){i.logger.error(`Send Message Error = ${r}`),i.alertMessage="Error Submitting! Please try again later.",i.showWarning=!0,setTimeout(()=>i.showWarning=!1,4e3)}})()}static#e=this.\u0275fac=function(i){return new(i||n)(j(uZ),j(lZ),j(oi))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-contact"]],decls:54,vars:5,consts:[[1,"container-fluid"],[1,"fixed-top"],[1,"container-fluid",2,"margin-top","8rem"],[1,"row","d-flex","contact-area","mt-2","ms-1",2,"padding-top","4rem"],[1,"col-md"],[1,"mb-3"],[1,"mb-5"],[1,"contact-list"],[1,"row","mb-4",2,"display","flex"],[2,"flex","1"],[1,"fas","fa-location-dot","text-center","list-icon"],[2,"flex","10"],[1,"fas","fa-envelope","list-icon"],[1,"fas","fa-phone","list-icon"],[1,"text-center","row","mb-3","form-container",3,"formGroup","ngSubmit"],[3,"message","show"],[1,"row",2,"margin","0"],[1,"formGroup","mb-3","col-md",2,"padding","0","margin","0"],["type","text","onkeydown","return /[a-z ]/i.test(event.key)","placeholder","Name:","required","","formControlName","name",1,"formControl",2,"width","100%"],["name",""],[1,"formGroup","mb-3","col-md","email-input"],["type","email","placeholder","Email:","required","","formControlName","email",1,"formControl",2,"width","100%"],["email",""],[1,"formGroup","mb-3"],["type","text","placeholder","Subject:","required","","formControlName","subject",1,"formControl",2,"width","100%"],["subject",""],["placeholder","Message:","rows","5","required","","formControlName","message",1,"formControl",2,"width","100%"],["message",""],[1,"formGroup"],["type","submit","value","SEND MESSAGE",1,"btn","btnPrimary","btn-lg","text-white","mb-2"]],template:function(i,r){1&i&&(I(0,"div",0),$(1,"app-header",1),I(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),P(6,"CONTACT"),D(),I(7,"h1",6),P(8,"Get in touch"),D(),I(9,"div",7)(10,"div",8)(11,"div",9),$(12,"i",10),D(),I(13,"div",11)(14,"h5"),P(15,"LOCATION"),D(),I(16,"p"),P(17,"Rustenburg, North West, South Africa, 0300"),D()()(),I(18,"div",8)(19,"div",9),$(20,"i",12),D(),I(21,"div",11)(22,"h5"),P(23,"EMAIL"),D(),I(24,"p"),P(25,"info@try-on.co.za"),D()()(),I(26,"div",8)(27,"div",9),$(28,"i",13),D(),I(29,"div",11)(30,"h5"),P(31,"CELL"),D(),I(32,"p"),P(33,"+27 63 410 5509"),D()()()()(),I(34,"div",4)(35,"form",14),it("ngSubmit",function(){return r.sendMessage(r.contactForm.value)}),$(36,"app-alert-success",15)(37,"app-alert-warning",15),I(38,"div",16)(39,"div",17),$(40,"input",18,19),D(),I(42,"div",20),$(43,"input",21,22),D()(),I(45,"div",23),$(46,"input",24,25),D(),I(48,"div",23),$(49,"textarea",26,27),P(51,", "),D(),I(52,"div",28),$(53,"input",29),D()()()()()()),2&i&&(le(35),Pe("formGroup",r.contactForm),le(1),Pe("message",r.alertMessage)("show",r.showSuccess),le(1),Pe("message",r.alertMessage)("show",r.showWarning))},dependencies:[Aa,dZ,hZ,mp,Ry,XL,hp,By,Uy,LS],styles:[".contact-area[_ngcontent-%COMP%]{min-height:100vh;background-color:#f4f4f4;width:100%}h5[_ngcontent-%COMP%]{color:#190101;font-family:Quicksand,sans-serif}div.col-md[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{color:#cf0a2c}h1[_ngcontent-%COMP%]{color:#190101;font-family:Montserrat,sans-serif;font-size:80px;font-weight:500}p[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:1.1em}.list-icon[_ngcontent-%COMP%]{color:#fff;font-size:32px;width:56px;height:56px;padding:.8rem;border-radius:100%;background-color:#cf0a2c}.formControl[_ngcontent-%COMP%]{border-radius:2px;border-style:solid;border-width:1px;border-color:#cf0a2c;background-color:#fff;padding:1rem}input.btn[_ngcontent-%COMP%]{background-color:#cf0a2c;font-size:16px;font-weight:700;padding-right:1em;padding-left:1em}@media only screen and (min-width: 0px){.contact-area[_ngcontent-%COMP%]{border-top-left-radius:44px;border-top-right-radius:44px;padding:1rem 1rem 0}.email-input[_ngcontent-%COMP%]{margin:0;padding:0}.form-container[_ngcontent-%COMP%]{margin-top:1rem}}@media only screen and (min-width: 375px){.contact-area[_ngcontent-%COMP%]{border-top-left-radius:66px;border-top-right-radius:66px;padding:1rem 3rem 0 2rem}}@media only screen and (min-width: 576px){.contact-area[_ngcontent-%COMP%]{border-top-left-radius:88px;border-top-right-radius:88px;padding:4rem 3rem 0}}@media only screen and (min-width: 768px){.email-input[_ngcontent-%COMP%]{padding:0 0 0 12px}.form-container[_ngcontent-%COMP%]{margin-top:9rem}}"]})}return n})(),dVe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-partners"]],decls:68,vars:0,consts:[[1,"fixed-top"],[1,"container-fluid"],[1,"row"],[1,"stats-container","mb-5",2,"margin-top","8rem"],[1,"stat-bubble"],[1,"text-center"],[1,"slider"],[1,"slide-track"],[1,"slide"],["src","/live/assets/images/partners/mr-price-logo.png","height","80","alt",""],["src","/live/assets/images/partners/woolworths-logo.png","height","150","alt",""],["src","/live/assets/images/partners/superbalist-logo.png","height","40","width","400","alt",""],["src","/live/assets/images/partners/the-local-edit-logo.png","height","130","alt",""],["src","/live/assets/images/partners/takealot-logo.png","height","60","alt",""]],template:function(i,r){1&i&&($(0,"app-header",0),I(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),P(6,"X6"),D(),I(7,"p",5),P(8,"MORE USER"),$(9,"br"),P(10,"ENGAGEMENT IN"),$(11,"br"),P(12,"YOUR ONLINE SHOP"),D()(),I(13,"div",4)(14,"h1",5),P(15,"-30%"),D(),I(16,"p",5),P(17,"REDUCED PRODUCT"),$(18,"br"),P(19,"RETURN RATE FROM"),$(20,"br"),P(21,"FIRST-TIME"),$(22,"br"),P(23,"SHOPPERS"),D()(),I(24,"div",4)(25,"h1",5),P(26,"105"),D(),I(27,"p",5),P(28,"ON-BOARDED"),$(29,"br"),P(30,"CLIENTS/ONLINE"),$(31,"br"),P(32,"STORES"),D()(),I(33,"div",4)(34,"h1",5),P(35,"986"),D(),I(36,"p",5),P(37,"ONLINE USERS"),$(38,"br"),P(39,"CREATED THEIR"),$(40,"br"),P(41,"PHOTO-REALISTIC"),$(42,"br"),P(43,"AVATARS"),D()(),I(44,"div",4)(45,"h1",5),P(46,"1505"),D(),I(47,"p",5),P(48,"CLOTHING TREID ON"),$(49,"br"),P(50,"IN THE VIRTUAL"),$(51,"br"),P(52,"FITTING ROOM"),D()()()(),I(53,"div",2)(54,"h1",5),P(55,"Trusted by"),D(),I(56,"div",6)(57,"div",7)(58,"div",8),$(59,"img",9),D(),I(60,"div",8),$(61,"img",10),D(),I(62,"div",8),$(63,"img",11),D(),I(64,"div",8),$(65,"img",12),D(),I(66,"div",8),$(67,"img",13),D()()()()())},dependencies:[Aa],styles:["h1[_ngcontent-%COMP%]{color:#190101;font-family:Montserrat,sans-serif;font-size:80px;font-weight:500}@media only screen and (min-width: 0px){.stats-container[_ngcontent-%COMP%]{background-color:#cf0a2c;padding-top:2rem;padding-bottom:2rem;display:flex;flex-wrap:wrap;flex-direction:row;align-items:center;justify-content:center}.stat-bubble[_ngcontent-%COMP%]{background-color:#f4f4f4;height:14em;width:14em;border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center}.stat-bubble[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:600;font-size:48px}}@media only screen and (min-width: 1148px){.stats-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}}.slider[_ngcontent-%COMP%]{padding:3em 2em}.slide-track[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;flex-direction:row;align-items:center;justify-content:center;gap:3em}"]})}return n})();const hVe=[{path:"",redirectTo:`/${rt.HOME}`,pathMatch:"full"},{path:rt.HOME,component:jRe,pathMatch:"full"},{path:rt.ABOUT_US,component:WRe},{path:rt.FEATURES,component:iY},{path:rt.FITTING_ROOM,component:YBe},{path:rt.SHOP,component:rVe},{path:rt.PARTNERS,component:dVe},{path:rt.LOGIN,component:aVe},{path:rt.REGISTER_USER,component:cVe},{path:rt.REGISTER_CLIENT,component:lVe},{path:rt.CONTACT_US,component:uVe},{path:"**",redirectTo:`/${rt.HOME}`,pathMatch:"full"}];let fVe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({imports:[YI.forRoot(hVe,{scrollPositionRestoration:"enabled"}),YI]})}return n})(),pVe=(()=>{class n{constructor(){this.title="tryon"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){1&i&&$(0,"router-outlet")},dependencies:[VI]})}return n})();new Se("MdbAccordionItemBodyDirective"),new Se("MdbAccordionItemHeaderDirective");let _Ve=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({imports:[Rr,XX]})}return n})(),bVe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({imports:[Rr]})}return n})();const wVe={provide:Hs,useExisting:bn(()=>SVe),multi:!0};class EVe{element;checked}let SVe=(()=>{class n{get checked(){return this._checked}set checked(t){this._checked=Iy(t)}_checked=!1;get value(){return this._value}set value(t){this._value=t}_value=null;get disabled(){return this._disabled}set disabled(t){this._disabled=Iy(t)}_disabled=!1;checkboxChange=new qt;get isDisabled(){return this._disabled}get isChecked(){return this._checked}onCheckboxClick(){this.toggle()}onBlur(){this.onTouched()}constructor(){}get changeEvent(){const t=new EVe;return t.element=this,t.checked=this.checked,t}toggle(){this.disabled||(this._checked=!this._checked,this.onChange(this.checked),this.onCheckboxChange())}onCheckboxChange(){this.checkboxChange.emit(this.changeEvent)}onChange=t=>{};onTouched=()=>{};writeValue(t){this.value=t,this.checked=!!t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}static ngAcceptInputType_checked;static ngAcceptInputType_disabled;static \u0275fac=function(i){return new(i||n)};static \u0275dir=dt({type:n,selectors:[["","mdbCheckbox",""]],hostVars:2,hostBindings:function(i,r){1&i&&it("click",function(){return r.onCheckboxClick()})("blur",function(){return r.onBlur()}),2&i&&t0("disabled",r.isDisabled)("checked",r.isChecked)},inputs:{checked:"checked",value:"value",disabled:"disabled"},outputs:{checkboxChange:"checkboxChange"},features:[An([wVe])]})}return n})(),CVe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({imports:[Rr,Vy]})}return n})(),xVe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({imports:[Rr,mx]})}return n})(),TVe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({imports:[Rr,Vy]})}return n})(),NVe=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function LVe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function kVe(n){try{return n.frameElement}catch{return null}}(function jVe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===Kee(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=Kee(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function HVe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function GVe(n){return!function UVe(n){return function VVe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function FVe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function BVe(n){return function zVe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||qee(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(z(md))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qee(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function Kee(n){if(!qee(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class $Ve{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Pr(1)).subscribe(e)}}class WVe extends $Ve{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._enabled?this._focusTrapManager.register(this):this._focusTrapManager.deregister(this)}constructor(e,t,i,r,s,o,a){super(e,t,i,r,a.defer),this._focusTrapManager=s,this._inertStrategy=o,this._focusTrapManager.register(this)}destroy(){this._focusTrapManager.deregister(this),super.destroy()}_enable(){this._inertStrategy.preventFocus(this),this.toggleAnchors(!0)}_disable(){this._inertStrategy.allowFocus(this),this.toggleAnchors(!1)}}const qVe=new Se("FOCUS_TRAP_INERT_STRATEGY");class KVe{constructor(){this._listener=null}preventFocus(e){this._listener&&e._document.removeEventListener("focus",this._listener,!0),this._listener=t=>this._trapFocus(e,t),e._ngZone.runOutsideAngular(()=>{e._document.addEventListener("focus",this._listener,!0)})}allowFocus(e){this._listener&&(e._document.removeEventListener("focus",this._listener,!0),this._listener=null)}_trapFocus(e,t){const i=t.target,r=e._element;i&&!r.contains(i)&&!i.closest?.("div.cdk-overlay-pane")&&setTimeout(()=>{e.enabled&&!r.contains(e._document.activeElement)&&e.focusFirstTabbableElement()})}}let XVe=(()=>{class n{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(r=>r!==t);let i=this._focusTrapStack;i.length&&i[i.length-1]._disable(),i.push(t),t._enable()}deregister(t){t._disable();const i=this._focusTrapStack,r=i.indexOf(t);-1!==r&&(i.splice(r,1),i.length&&i[i.length-1]._enable())}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YVe=(()=>{class n{constructor(t,i,r,s,o){this._checker=t,this._ngZone=i,this._focusTrapManager=r,this._document=s,this._inertStrategy=o||new KVe}create(t,i={defer:!1}){let r;return r="boolean"==typeof i?{defer:i}:i,new WVe(t,this._checker,this._ngZone,this._document,this._focusTrapManager,this._inertStrategy,r)}static#e=this.\u0275fac=function(i){return new(i||n)(z(NVe),z(pt),z(XVe),z(rn),z(qVe,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const QVe=["dialog"],JVe=["content"];function eze(n,e){}const tze=function(n){return{"rounded-0":n}};class nze{animation=!0;backdrop=!0;ignoreBackdropClick=!1;keyboard=!0;modalClass="";containerClass="";viewContainerRef;data=null;nonInvasive=!1}class Xee{_overlayRef;_container;constructor(e,t){this._overlayRef=e,this._container=t}component;onClose$=new Gt;onClose=this.onClose$.asObservable();close(e){this._container._close(),setTimeout(()=>{this._container._config.nonInvasive&&this._container._onNonInvasiveModalHidden(),this._container._restoreScrollbar(),this.onClose$.next(e),this.onClose$.complete(),this._overlayRef.detach(),this._overlayRef.dispose()},this._container.MODAL_TRANSITION)}}const GU="modal-open",Yee="modal-non-invasive-open",Zee="modal-non-invasive-show";let Qee=(()=>{class n{_document;_elementRef;_renderer;_focusTrapFactory;_ngZone;_portalOutlet;modalDialog;modalContent;_destroy$=new Gt;backdropClick$=new Gt;_config;BACKDROP_TRANSITION=150;MODAL_TRANSITION=200;NON_INVASIVE_TRANSITION=450;_previouslyFocusedElement;_focusTrap;modal=!0;get hasAnimation(){return this._config.animation}onWindowResize(){this._ngZone.runOutsideAngular(()=>{this._config.nonInvasive&&this._handleWindowResize()})}get host(){return this._elementRef.nativeElement}_isScrollable=!1;_isBottomRight=!1;_isBottomLeft=!1;_isTopRight=!1;_isTopLeft=!1;_isSideTopModal=!1;_isSideBottomModal=!1;_isSideModal=!1;_isModalBottom=!1;_modalContentRect;_modalContentComputedStyles;_modalDialogComputedStyles;_topOffset=0;_leftOffset=0;_rightOffset=0;_bottomOffset=0;constructor(t,i,r,s,o){this._document=t,this._elementRef=i,this._renderer=r,this._focusTrapFactory=s,this._ngZone=o}ngOnInit(){this._updateContainerClass(),this._renderer.setStyle(this.host,"display","block"),this._config.nonInvasive||(this._focusTrap=this._focusTrapFactory.create(this.host),this._previouslyFocusedElement=this._document.activeElement),this._config.animation?setTimeout(()=>{this._renderer.addClass(this.host,"show"),setTimeout(()=>{this._focusTrap?.focusInitialElementWhenReady()},this.MODAL_TRANSITION)},this.BACKDROP_TRANSITION):this._focusTrap?.focusInitialElementWhenReady()}ngAfterViewInit(){const t=this._document.body.offsetWidth;this._renderer.addClass(this._document.body,GU),this._config.nonInvasive&&(this._renderer.addClass(this._document.body,Yee),setTimeout(()=>{this._onNonInvasiveModalShown()},this.NON_INVASIVE_TRANSITION)),this._config.nonInvasive||this._renderer.setStyle(this._document.body,"overflow","hidden"),this._config.nonInvasive||this._renderer.setStyle(this._document.body,"padding-right",this._document.body.offsetWidth-t+"px"),!this._config.ignoreBackdropClick&&!this._config.nonInvasive&&zo(this.host,"mousedown").pipe(Ti(r=>{const s=r.target,o=this.modalDialog.nativeElement,a=s!==o,c=!o.contains(s);return a&&c}),rc(this._destroy$)).subscribe(r=>{this.backdropClick$.next(r)})}ngOnDestroy(){this._previouslyFocusedElement?.focus(),this._focusTrap?.destroy(),this._destroy$.next(),this._destroy$.complete()}_updateContainerClass(){""===this._config.containerClass||this._config.containerClass.length&&0===this._config.containerClass.length||this._config.containerClass.split(" ").forEach(i=>{this._renderer.addClass(this.host,i)})}_onNonInvasiveModalShown(){this._isScrollable=this._config.modalClass.includes("modal-dialog-scrollable"),this._isBottomRight=this._config.modalClass.includes("modal-bottom-right"),this._isBottomLeft=this._config.modalClass.includes("modal-bottom-left"),this._isTopRight=this._config.modalClass.includes("modal-top-right"),this._isTopLeft=this._config.modalClass.includes("modal-top-left"),this._isModalBottom=this._config.modalClass.includes("modal-bottom"),this._isSideTopModal=this._isTopLeft||this._isTopRight,this._isSideBottomModal=this._isBottomLeft||this._isBottomRight,this._isSideModal=this._isSideTopModal||this._isSideBottomModal,this._modalContentRect=this.modalContent.nativeElement.getBoundingClientRect(),this._modalContentComputedStyles=window.getComputedStyle(this.modalContent.nativeElement),this._modalDialogComputedStyles=window.getComputedStyle(this.modalDialog.nativeElement),this._topOffset=parseInt(this._modalDialogComputedStyles.top,0),this._leftOffset=parseInt(this._modalDialogComputedStyles.left,0),this._rightOffset=parseInt(this._modalDialogComputedStyles.right,0),this._bottomOffset=parseInt(this._modalDialogComputedStyles.bottom,0),this._renderer.addClass(this.host,Zee),this._setNonInvasiveStyles()}_setNonInvasiveStyles(t=0,i=0){const r=window.innerWidth>=992;this._renderer.setStyle(this.host,"left",`${this._modalContentRect.left+t}px`),this._renderer.setStyle(this.host,"width",this._modalContentComputedStyles.width),this._isScrollable||(this._renderer.setStyle(this.host,"height",this._modalContentComputedStyles.height),this._renderer.setStyle(this.host,"display","")),r&&((this._isSideBottomModal||this._isModalBottom)&&this._renderer.setStyle(this.host,"top",`${this._modalContentRect.top+i}px`),this._isSideModal&&this._renderer.setStyle(this.host,"overflowX","auto"))}_onNonInvasiveModalHidden(){this._renderer.removeClass(this.host,Zee),this._resetNonInvasiveStyles(),this._removeNonInvasiveClass()}_resetNonInvasiveStyles(){this._renderer.setStyle(this.host,"left",""),this._renderer.setStyle(this.host,"top",""),this._renderer.setStyle(this.host,"height",""),this._renderer.setStyle(this.host,"width",""),this._isScrollable||this._renderer.setStyle(this.host,"display",""),this._isSideModal&&this._renderer.setStyle(this.host,"overflowX","")}_removeNonInvasiveClass(){this._document.body.querySelector(".modal.show.modal-non-invasive-show")?this._renderer.addClass(this._document.body,GU):this._renderer.removeClass(this._document.body,Yee)}_handleWindowResize(){const t=this.host.querySelector(".modal-content");if(this._resetNonInvasiveStyles(),this._modalContentRect=t.getBoundingClientRect(),this._modalContentComputedStyles=window.getComputedStyle(t),this._isSideTopModal||this._isSideBottomModal){let i=0,r=0;(this._isBottomRight||this._isBottomLeft)&&(r=-this._bottomOffset),(this._isBottomRight||this._isTopRight)&&(i=-this._rightOffset),(this._isBottomLeft||this._isTopLeft)&&(i=this._leftOffset),this._setNonInvasiveStyles(i,r)}else this._setNonInvasiveStyles()}_close(){this._config.animation&&this._renderer.removeClass(this.host,"show");const t=Array.from(this.host.querySelectorAll("iframe")),i=Array.from(this.host.querySelectorAll("video"));t.forEach(r=>{const s=r.getAttribute("src");this._renderer.setAttribute(r,"src",s)}),i.forEach(r=>{r.pause()})}_restoreScrollbar(){this._renderer.removeClass(this._document.body,GU),this._renderer.removeStyle(this._document.body,"overflow"),this._renderer.removeStyle(this._document.body,"padding-right")}attachComponentPortal(t){return this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.attachTemplatePortal(t)}static \u0275fac=function(i){return new(i||n)(j(rn),j(fi),j(Ao),j(YVe),j(pt))};static \u0275cmp=cn({type:n,selectors:[["mdb-modal-container"]],viewQuery:function(i,r){if(1&i&&(ua(Pee,7),ua(QVe,7),ua(JVe,7)),2&i){let s;ao(s=co())&&(r._portalOutlet=s.first),ao(s=co())&&(r.modalDialog=s.first),ao(s=co())&&(r.modalContent=s.first)}},hostVars:4,hostBindings:function(i,r){1&i&&it("resize",function(o){return r.onWindowResize(o)},0,NM),2&i&&bu("modal",r.modal)("fade",r.hasAnimation)},decls:5,vars:5,consts:[["dialog",""],[1,"modal-content",3,"ngClass"],["content",""],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(I(0,"div",null,0)(2,"div",1,2),kt(4,eze,0,0,"ng-template",3),D()()),2&i&&(Io("modal-dialog"+(r._config.modalClass?" "+r._config.modalClass:"")),le(2),Pe("ngClass",a0(3,tze,r._config.modalClass.includes("modal-frame"))))},dependencies:[Jh,Pee],encapsulation:2})}return n})(),rze=(()=>{class n{_document;_overlay;_injector;_cfr;constructor(t,i,r,s){this._document=t,this._overlay=i,this._injector=r,this._cfr=s}open(t,i){const r=new nze;i=i?Object.assign(r,i):r;const s=this._createOverlay(i),o=this._createContainer(s,i),a=this._createContent(t,o,s,i);return this._registerListeners(a,i,o),a}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){return new HU({positionStrategy:this._overlay.position().global(),scrollStrategy:this._overlay.scrollStrategies.noop(),hasBackdrop:!t.nonInvasive&&t.backdrop,backdropClass:"mdb-backdrop"})}_createContainer(t,i){const r=new fx(Qee,null,this._injector,this._cfr),s=t.attach(r);return s.instance._config=i,s.instance}_createContent(t,i,r,s){const o=new Xee(r,i);if(t instanceof la)i.attachTemplatePortal(new Dee(t,null,{$implicit:s.data,modalRef:o}));else{const a=this._createInjector(s,o,i),c=i.attachComponentPortal(new fx(t,s.viewContainerRef,a));s.data&&Object.assign(c.instance,{...s.data}),o.component=c.instance}return o}_createInjector(t,i,r){return Tn.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:Qee,useValue:r},{provide:Xee,useValue:i}]})}_registerListeners(t,i,r){r.backdropClick$.pipe(Pr(1)).subscribe(()=>{t.close()}),i.keyboard&&zo(r._elementRef.nativeElement,"keydown").pipe(Ti(s=>"Escape"===s.key),Pr(1)).subscribe(()=>{t.close()})}static \u0275fac=function(i){return new(i||n)(z(rn),z(px),z(Tn),z(qa))};static \u0275prov=me({token:n,factory:n.\u0275fac})}return n})(),sze=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({providers:[rze],imports:[Rr,mx,VU]})}return n})(),oze=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({imports:[Rr,mx]})}return n})(),aze=(()=>{class n{get name(){return this._name}set name(t){this._name=t}_name;get checked(){return this._checked}set checked(t){this._checked=Iy(t)}_checked=!1;get value(){return this._value}set value(t){this._value=t}_value=null;get disabled(){return this._disabled}set disabled(t){this._disabled=Iy(t)}_disabled=!1;get isDisabled(){return this._disabled}get isChecked(){return this._checked}get nameAttr(){return this.name}constructor(){}_updateName(t){this._name=t}_updateChecked(t){this._checked=t}_updateDisabledState(t){this._disabled=t}static ngAcceptInputType_checked;static ngAcceptInputType_disabled;static \u0275fac=function(i){return new(i||n)};static \u0275dir=dt({type:n,selectors:[["","mdbRadio",""]],hostVars:3,hostBindings:function(i,r){2&i&&(t0("disabled",r.isDisabled)("checked",r.isChecked),Jr("name",r.nameAttr))},inputs:{name:"name",checked:"checked",value:"value",disabled:"disabled"}})}return n})();const cze={provide:Hs,useExisting:bn(()=>lze),multi:!0};let lze=(()=>{class n{radios;get value(){return this._value}set value(t){this._value=t,this.radios&&this._updateChecked()}_value;get name(){return this._name}set name(t){this._name=t,this.radios&&this._updateNames()}_name;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this.radios&&this._updateDisabled()}_disabled=!1;_destroy$=new Gt;onChange=t=>{};onTouched=()=>{};ngAfterContentInit(){this._updateNames(),this._updateDisabled(),this.radios.changes.pipe(H0(this.radios),ds(t=>Ci(Promise.resolve(t))),rc(this._destroy$)).subscribe(()=>this._updateRadiosState())}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}_updateRadiosState(){this._updateNames(),this._updateChecked(),this._updateDisabled()}_updateNames(){this.radios.forEach(t=>t._updateName(this.name))}_updateChecked(){this.radios.forEach(t=>{t._updateChecked(t.value===this._value)})}_updateDisabled(){this.radios.forEach(t=>t._updateDisabledState(this._disabled))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._disabled=t,this._updateDisabled()}writeValue(t){this.value=t}static \u0275fac=function(i){return new(i||n)};static \u0275dir=dt({type:n,selectors:[["","mdbRadioGroup",""]],contentQueries:function(i,r,s){if(1&i&&xA(s,aze,5),2&i){let o;ao(o=co())&&(r.radios=o)}},inputs:{value:"value",name:"name",disabled:"disabled"},features:[An([cze])]})}return n})(),uze=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({imports:[Rr,Vy]})}return n})();const dze=["input"],hze=["thumb"],fze=["thumbValue"],pze=function(n){return{"thumb-active":n}},mze={provide:Hs,useExisting:bn(()=>gze),multi:!0};let gze=(()=>{class n{_cdRef;input;thumb;thumbValue;id;required;name;value;get disabled(){return this._disabled}set disabled(t){this._disabled=Iy(t)}_disabled;label;min=0;max=100;step;get default(){return this._default}set default(t){this._default=t}_default;defaultRangeCounterClass;rangeValueChange=new qt;visibility=!1;thumbStyle;onchange(t){this.onChange(t.target.value)}onInput(){this.rangeValueChange.emit({value:this.value}),this.focusRangeInput()}constructor(t){this._cdRef=t}ngAfterViewInit(){this.thumbPositionUpdate()}focusRangeInput(){this.input.nativeElement.focus(),this.visibility=!0}blurRangeInput(){this.input.nativeElement.blur(),this.visibility=!1}thumbPositionUpdate(){const t=this.input.nativeElement,i=t.value,r=t.min?t.min:0,o=Number(100*(i-r)/((t.max?t.max:100)-r));this.value=i,this.thumbStyle={left:`calc(${o}% + (${8-.15*o}px))`}}onChange=t=>{};onTouched=()=>{};writeValue(t){this.value=t,this._cdRef.markForCheck(),setTimeout(()=>{this.thumbPositionUpdate()},0)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}static ngAcceptInputType_default;static ngAcceptInputType_disabled;static \u0275fac=function(i){return new(i||n)(j(Su))};static \u0275cmp=cn({type:n,selectors:[["mdb-range"]],viewQuery:function(i,r){if(1&i&&(ua(dze,5),ua(hze,5),ua(fze,5)),2&i){let s;ao(s=co())&&(r.input=s.first),ao(s=co())&&(r.thumb=s.first),ao(s=co())&&(r.thumbValue=s.first)}},hostBindings:function(i,r){1&i&&it("change",function(o){return r.onchange(o)})("input",function(){return r.onInput()})},inputs:{id:"id",required:"required",name:"name",value:"value",disabled:"disabled",label:"label",min:"min",max:"max",step:"step",default:"default",defaultRangeCounterClass:"defaultRangeCounterClass"},outputs:{rangeValueChange:"rangeValueChange"},features:[An([mze])],decls:10,vars:14,consts:[["for","id",1,"form-label"],[1,"range"],["type","range","min","0","max","5",1,"form-range",3,"name","disabled","id","min","max","step","value","input","blur","mousedown","mouseup","touchstart","touchend"],["input",""],[1,"thumb",3,"ngStyle","ngClass"],["thumb",""],[1,"thumb-value"],["thumbValue",""]],template:function(i,r){1&i&&(I(0,"label",0),P(1),D(),I(2,"div",1)(3,"input",2,3),it("input",function(){return r.thumbPositionUpdate()})("blur",function(){return r.blurRangeInput()})("mousedown",function(){return r.focusRangeInput()})("mouseup",function(){return r.blurRangeInput()})("touchstart",function(){return r.focusRangeInput()})("touchend",function(){return r.blurRangeInput()}),D(),I(5,"span",4,5)(7,"span",6,7),P(9),D()()()),2&i&&(le(1),ys(r.label),le(2),Pe("name",r.name)("disabled",r.disabled)("id",r.id)("min",r.min)("max",r.max)("step",r.step)("value",r.value)("id",r.id),le(2),Pe("ngStyle",r.thumbStyle)("ngClass",a0(12,pze,r.visibility)),le(4),ys(r.value))},dependencies:[Jh,oI],encapsulation:2,changeDetection:0})}return n})(),_ze=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({imports:[Rr,Vy]})}return n})(),yze=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({})}return n})(),vze=(()=>{class n{scrollSpys=[];activeSubject=new Gt;active$=this.activeSubject;addScrollspy(t){this.scrollSpys.push(t)}removeScrollspy(t){const i=this.scrollSpys.findIndex(r=>r.id===t);this.scrollSpys.splice(i,1)}updateActiveState(t,i){const r=this.scrollSpys.find(o=>o.id===t);if(!r)return;const s=r.links.find(o=>o.id===i);this.setActiveLink(s)}removeActiveState(t,i){const r=this.scrollSpys.find(o=>o.id===t);if(!r)return;const s=r.links.find(o=>o.id===i);s&&(s.active=!1,s.detectChanges())}setActiveLink(t){t&&(t.active=!0,t.detectChanges(),this.activeSubject.next(t))}removeActiveLinks(t){const i=this.scrollSpys.find(r=>r.id===t);i&&i.links.forEach(r=>{r.active=!1,r.detectChanges()})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=me({token:n,factory:n.\u0275fac})}return n})(),bze=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({providers:[vze]})}return n})();new Se("MdbTabContentDirective"),new Se("MdbTabTitleDirective");let Tze=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({imports:[Rr,VU]})}return n})(),Mze=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Rt({type:n});static \u0275inj=Tt({imports:[Rr]})}return n})(),Aze=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({imports:[Rr,_Ve,YI,bVe,CVe,XX,xVe,TVe,sze,oze,uze,_ze,yze,bze,Tze,j3e,Mze]})}return n})();function Jee(n){return new se(3e3,!1)}function nu(n){switch(n.length){case 0:return new zy;case 1:return n[0];default:return new mZ(n)}}function ete(n,e,t=new Map,i=new Map){const r=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((h,f)=>{let p=f,g=h;if("offset"!==f)switch(p=n.normalizePropertyName(p,r),g){case"!":g=t.get(f);break;case Ac:g=i.get(f);break;default:g=n.normalizeStyleValue(f,p,g,r)}d.set(p,g)}),u||s.push(d),a=d,o=l}),r.length)throw function Zze(n){return new se(3502,!1)}();return s}function jU(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&$U(t,"start",n)));break;case"done":n.onDone(()=>i(t&&$U(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&$U(t,"destroy",n)))}}function $U(n,e,t){const s=WU(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function WU(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Xs(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function tte(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const lHe=(()=>typeof document>"u"?null:document.documentElement)();function qU(n){const e=n.parentNode||n.host||null;return e===lHe?null:e}let Jd=null,nte=!1;function ite(n,e){for(;e;){if(e===n)return!0;e=qU(e)}return!1}function rte(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let ste=(()=>{class n{validateStyleProperty(t){return function dHe(n){Jd||(Jd=function hHe(){return typeof document<"u"?document.body:null}()||{},nte=!!Jd.style&&"WebkitAppearance"in Jd.style);let e=!0;return Jd.style&&!function uHe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Jd.style,!e&&nte&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Jd.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return ite(t,i)}getParentElement(t){return qU(t)}query(t,i,r){return rte(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],c){return new zy(r,s)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})(),KU=(()=>{class n{static#e=this.NOOP=new ste}return n})();const fHe=1e3,XU="ng-enter",_x="ng-leave",yx="ng-trigger",vx=".ng-trigger",ate="ng-animating",YU=".ng-animating";function $c(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ZU(parseFloat(e[1]),e[2])}function ZU(n,e){return"s"===e?n*fHe:n}function bx(n,e,t){return n.hasOwnProperty("duration")?n:function mHe(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(Jee()),{duration:0,delay:0,easing:""};r=ZU(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=ZU(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push(function Ize(){return new se(3100,!1)}()),a=!0),s<0&&(e.push(function Dze(){return new se(3101,!1)}()),a=!0),a&&e.splice(c,0,Jee())}return{duration:r,delay:s,easing:o}}(n,e,t)}function Cv(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function cte(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function iu(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function La(n,e,t){e.forEach((i,r)=>{const s=JU(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function eh(n,e){e.forEach((t,i)=>{const r=JU(i);n.style[r]=""})}function xv(n){return Array.isArray(n)?1==n.length?n[0]:pZ(n):n}const QU=new RegExp("{{\\s*(.+?)\\s*}}","g");function ute(n){let e=[];if("string"==typeof n){let t;for(;t=QU.exec(n);)e.push(t[1]);QU.lastIndex=0}return e}function Tv(n,e,t){const i=n.toString(),r=i.replace(QU,(s,o)=>{let a=e[o];return null==a&&(t.push(function Pze(n){return new se(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function wx(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const yHe=/-+([a-z0-9])/g;function JU(n){return n.replace(yHe,(...e)=>e[1].toUpperCase())}function Ys(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Oze(n){return new se(3004,!1)}()}}function dte(n,e){return window.getComputedStyle(n)[e]}const Ex="*";function wHe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function EHe(n,e,t){if(":"==n[0]){const c=function SHe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function qze(n){return new se(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Wze(n){return new se(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(hte(r,o));"<"==s[0]&&!(r==Ex&&o==Ex)&&e.push(hte(o,r))}(i,t,e)):t.push(n),t}const Sx=new Set(["true","1"]),Cx=new Set(["false","0"]);function hte(n,e){const t=Sx.has(n)||Cx.has(n),i=Sx.has(e)||Cx.has(e);return(r,s)=>{let o=n==Ex||n==r,a=e==Ex||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?Sx.has(n):Cx.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?Sx.has(e):Cx.has(e)),o&&a}}const CHe=new RegExp("s*:selfs*,?","g");function eB(n,e,t,i){return new xHe(n).build(e,t,i)}class xHe{constructor(e){this._driver=e}build(e,t,i){const r=new AHe(t);return this._resetContextStyleTimingState(r),Ys(this,xv(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function kze(){return new se(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push(function Lze(){return new se(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{ute(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&(wx(s.values()),t.errors.push(function Fze(n,e){return new se(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Ys(this,xv(e.animation),t);return{type:1,matchers:wHe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:th(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Ys(this,i,t)),options:th(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Ys(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:th(e.options)}}visitAnimate(e,t){const i=function DHe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return tB(bx(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=tB(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=bx(t,e);return tB(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Ia({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};i.easing&&(l.easing=i.easing),o=Ia(l)}t.currentTime+=i.duration+i.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Ac?i.push(a):t.errors.push(new se(3002,!1)):i.push(cte(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c);let d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function Bze(n,e,t,i,r){return new se(3010,!1)}()),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:r}),t.options&&function _He(n,e,t){const i=e.params||{},r=ute(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function Rze(n){return new se(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Vze(){return new se(3011,!1)}()),i;let s=0;const o=[];let a=!1,c=!1,l=0;const u=e.steps.map(_=>{const y=this._makeStyleAst(_,t);let v=null!=y.offset?y.offset:function IHe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(y.styles),b=0;return null!=v&&(s++,b=y.offset=v),c=c||b<0||b>1,a=a||b<l,l=b,o.push(b),y});c&&t.errors.push(function zze(){return new se(3012,!1)}()),a&&t.errors.push(function Hze(){return new se(3200,!1)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function Gze(){return new se(3202,!1)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return u.forEach((_,y)=>{const v=h>0?y==f?1:h*y:o[y],b=v*m;t.currentTime=p+g.delay+b,g.duration=b,this._validateStyleAst(_,t),_.offset=v,i.styles.push(_)}),i}visitReference(e,t){return{type:8,animation:Ys(this,xv(e.animation),t),options:th(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:th(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:th(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function THe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(CHe,"")),n=n.replace(/@\*/g,vx).replace(/@\w+/g,t=>vx+"-"+t.slice(1)).replace(/:animating/g,YU),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Xs(t.collectedStyles,t.currentQuerySelector,new Map);const a=Ys(this,xv(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:th(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function jze(){return new se(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:bx(e.timings,t.errors,!0);return{type:12,animation:Ys(this,xv(e.animation),t),timings:i,options:null}}}class AHe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function th(n){return n?(n=Cv(n)).params&&(n.params=function MHe(n){return n?Cv(n):null}(n.params)):n={},n}function tB(n,e,t){return{duration:n,delay:e,easing:t}}function nB(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class xx{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const OHe=new RegExp(":enter","g"),kHe=new RegExp(":leave","g");function iB(n,e,t,i,r,s=new Map,o=new Map,a,c,l=[]){return(new LHe).buildKeyframes(n,e,t,i,r,s,o,a,c,l)}class LHe{buildKeyframes(e,t,i,r,s,o,a,c,l,u=[]){l=l||new xx;const d=new rB(e,t,l,r,s,u,[]);d.options=c;const h=c.delay?$c(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),Ys(this,i,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){const m=f[g];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[nB(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:$c(Tv(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?$c(i.duration):null,a=null!=i.delay?$c(i.delay):null;return 0!==o&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ys(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Tx);const o=$c(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ys(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?$c(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ys(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return bx(t.params?Tv(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?$c(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Tx);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,l);s&&d.delayNextStep(s),l===t.element&&(c=d.currentTimeline),Ys(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime}const u=t.currentTimeline;c&&u.delayNextStep(c);const d=u.currentTime;Ys(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const Tx={};class rB{constructor(e,t,i,r,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Tx,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Mx(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=$c(i.duration)),null!=i.delay&&(r.delay=$c(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Tv(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new rB(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Tx,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new FHe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(OHe,"."+this._enterClassName)).replace(kHe,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=i);0!==i&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!s&&0==a.length&&o.push(function $ze(n){return new se(3014,!1)}()),a}}class Mx{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Mx(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Ac),this._currentKeyframe.set(t,Ac);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function UHe(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,Ac)}else iu(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const l=Tv(c,s,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ac),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,c)=>{const l=iu(a,new Map,this._backFill);l.forEach((u,d)=>{"!"===u?e.add(d):u===Ac&&t.add(d)}),i||l.set("offset",c/this.duration),r.push(l)});const s=e.size?wx(e.values()):[],o=t.size?wx(t.values()):[];if(i){const a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return nB(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class FHe extends Mx{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,c=iu(e[0]);c.set("offset",0),s.push(c);const l=iu(e[0]);l.set("offset",mte(a)),s.push(l);const u=e.length-1;for(let d=1;d<=u;d++){let h=iu(e[d]);const f=h.get("offset");h.set("offset",mte((t+f*i)/o)),s.push(h)}i=o,t=0,r="",e=s}return nB(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function mte(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class sB{}const BHe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class VHe extends sB{normalizePropertyName(e,t){return JU(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(BHe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Nze(n,e){return new se(3005,!1)}())}return o+s}}function gte(n,e,t,i,r,s,o,a,c,l,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}const oB={};class _te{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function zHe(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,c,l,u){const d=[],h=this.ast.options&&this.ast.options.params||oB,p=this.buildStyles(i,a&&a.params||oB,d),g=c&&c.params||oB,m=this.buildStyles(r,g,d),_=new Set,y=new Map,v=new Map,b="void"===r,M={params:HHe(g,h),delay:this.ast.options?.delay},S=u?[]:iB(e,t,this.ast.animation,s,o,p,m,M,l,d);let x=0;if(S.forEach(C=>{x=Math.max(C.duration+C.delay,x)}),d.length)return gte(t,this._triggerName,i,r,b,p,m,[],[],y,v,x,d);S.forEach(C=>{const w=C.element,U=Xs(y,w,new Set);C.preStyleProps.forEach(G=>U.add(G));const q=Xs(v,w,new Set);C.postStyleProps.forEach(G=>q.add(G)),w!==t&&_.add(w)});const O=wx(_.values());return gte(t,this._triggerName,i,r,b,p,m,S,O,y,v,x)}}function HHe(n,e){const t=Cv(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class GHe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=Cv(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Tv(o,r,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),i.set(a,o)})}),i}}class $He{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new GHe(r.style,r.options&&r.options.params||{},i))}),yte(this.states,"true","1"),yte(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new _te(e,r,this.states))}),this.fallbackTransition=function WHe(n,e,t){return new _te(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function yte(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const qHe=new xx;class KHe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=eB(this._driver,t,i,[]);if(i.length)throw function Qze(n){return new se(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=ete(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=iB(this._driver,t,s,XU,_x,new Map,new Map,i,qHe,r),o.forEach(u=>{const d=Xs(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(function Jze(){return new se(3300,!1)}()),o=[]),r.length)throw function eHe(n){return new se(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Ac))})});const l=nu(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function tHe(n){return new se(3301,!1)}();return t}listen(e,t,i,r){const s=WU(t,"","","");return jU(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const vte="ng-animate-queued",aB="ng-animate-disabled",JHe=[],bte={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},e4e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ko="__ng_removed";class cB{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function r4e(n){return n??null}(i?e.value:e),i){const s=Cv(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Mv="void",lB=new cB(Mv);class t4e{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,So(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function nHe(n,e){return new se(3302,!1)}();if(null==i||0==i.length)throw function iHe(n){return new se(3303,!1)}();if(!function s4e(n){return"start"==n||"done"==n}(i))throw function rHe(n,e){return new se(3400,!1)}();const s=Xs(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Xs(this._engine.statesByElement,e,new Map);return a.has(t)||(So(e,yx),So(e,yx+"-"+t),a.set(t,lB)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function sHe(n){return new se(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new uB(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(So(e,yx),So(e,yx+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const l=new cB(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=lB),l.value!==Mv&&c.value===l.value){if(!function c4e(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,l.params)){const g=[],m=s.matchStyles(c.value,c.params,g),_=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{eh(e,m),La(e,_)})}return}const h=Xs(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(So(e,vte),o.onStart(()=>{gm(e,vte)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(e);if(m){let _=m.indexOf(o);_>=0&&m.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,vx,!0);i.forEach(r=>{if(r[Ko])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){const u=this.trigger(e,l,Mv,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&nu(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const c=this._triggers.get(o).fallbackTransition,l=i.get(o)||lB,u=new cB(Mv),d=new uB(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ko];(!s||s===bte)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){So(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const c=WU(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,jU(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class n4e{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new t4e(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=r.get(a);if(c){const l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(Ax(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Ax(t))return;const s=t[Ko];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),So(e,aB)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),gm(e,aB))}removeNode(e,t,i){if(Ax(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Ko]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return Ax(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,vx,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,YU,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return nu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ko];if(t&&t.setForRemoval){if(e[Ko]=bte,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(aB)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)So(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?nu(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function oHe(n){return new se(3402,!1)}()}_flushAnimations(e,t){const i=new xx,r=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(B=>{u.add(B);const X=this.driver.query(B,".ng-animate-queued",!0);for(let H=0;H<X.length;H++)u.add(X[H])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=Ste(h,this.collectedEnterElements),p=new Map;let g=0;f.forEach((B,X)=>{const H=XU+g++;p.set(X,H),B.forEach(de=>So(de,H))});const m=[],_=new Set,y=new Set;for(let B=0;B<this.collectedLeaveElements.length;B++){const X=this.collectedLeaveElements[B],H=X[Ko];H&&H.setForRemoval&&(m.push(X),_.add(X),H.hasAnimation?this.driver.query(X,".ng-star-inserted",!0).forEach(de=>_.add(de)):y.add(X))}const v=new Map,b=Ste(h,Array.from(_));b.forEach((B,X)=>{const H=_x+g++;v.set(X,H),B.forEach(de=>So(de,H))}),e.push(()=>{f.forEach((B,X)=>{const H=p.get(X);B.forEach(de=>gm(de,H))}),b.forEach((B,X)=>{const H=v.get(X);B.forEach(de=>gm(de,H))}),m.forEach(B=>{this.processLeaveNode(B)})});const M=[],S=[];for(let B=this._namespaceList.length-1;B>=0;B--)this._namespaceList[B].drainQueuedTransitions(t).forEach(H=>{const de=H.player,Ce=H.element;if(M.push(de),this.collectedEnterElements.length){const be=Ce[Ko];if(be&&be.setForMove){if(be.previousTriggersValues&&be.previousTriggersValues.has(H.triggerName)){const Ke=be.previousTriggersValues.get(H.triggerName),Je=this.statesByElement.get(H.element);if(Je&&Je.has(H.triggerName)){const Xe=Je.get(H.triggerName);Xe.value=Ke,Je.set(H.triggerName,Xe)}}return void de.destroy()}}const Me=!d||!this.driver.containsElement(d,Ce),st=v.get(Ce),ft=p.get(Ce),J=this._buildInstruction(H,i,ft,st,Me);if(J.errors&&J.errors.length)return void S.push(J);if(Me)return de.onStart(()=>eh(Ce,J.fromStyles)),de.onDestroy(()=>La(Ce,J.toStyles)),void r.push(de);if(H.isFallbackTransition)return de.onStart(()=>eh(Ce,J.fromStyles)),de.onDestroy(()=>La(Ce,J.toStyles)),void r.push(de);const ve=[];J.timelines.forEach(be=>{be.stretchStartingKeyframe=!0,this.disabledNodes.has(be.element)||ve.push(be)}),J.timelines=ve,i.append(Ce,J.timelines),o.push({instruction:J,player:de,element:Ce}),J.queriedElements.forEach(be=>Xs(a,be,[]).push(de)),J.preStyleProps.forEach((be,Ke)=>{if(be.size){let Je=c.get(Ke);Je||c.set(Ke,Je=new Set),be.forEach((Xe,Nt)=>Je.add(Nt))}}),J.postStyleProps.forEach((be,Ke)=>{let Je=l.get(Ke);Je||l.set(Ke,Je=new Set),be.forEach((Xe,Nt)=>Je.add(Nt))})});if(S.length){const B=[];S.forEach(X=>{B.push(function aHe(n,e){return new se(3505,!1)}())}),M.forEach(X=>X.destroy()),this.reportError(B)}const x=new Map,O=new Map;o.forEach(B=>{const X=B.element;i.has(X)&&(O.set(X,X),this._beforeAnimationBuild(B.player.namespaceId,B.instruction,x))}),r.forEach(B=>{const X=B.element;this._getPreviousPlayers(X,!1,B.namespaceId,B.triggerName,null).forEach(de=>{Xs(x,X,[]).push(de),de.destroy()})});const C=m.filter(B=>xte(B,c,l)),w=new Map;Ete(w,this.driver,y,l,Ac).forEach(B=>{xte(B,c,l)&&C.push(B)});const q=new Map;f.forEach((B,X)=>{Ete(q,this.driver,new Set(B),c,"!")}),C.forEach(B=>{const X=w.get(B),H=q.get(B);w.set(B,new Map([...X?.entries()??[],...H?.entries()??[]]))});const G=[],Y=[],ae={};o.forEach(B=>{const{element:X,player:H,instruction:de}=B;if(i.has(X)){if(u.has(X))return H.onDestroy(()=>La(X,de.toStyles)),H.disabled=!0,H.overrideTotalTime(de.totalTime),void r.push(H);let Ce=ae;if(O.size>1){let st=X;const ft=[];for(;st=st.parentNode;){const J=O.get(st);if(J){Ce=J;break}ft.push(st)}ft.forEach(J=>O.set(J,Ce))}const Me=this._buildAnimation(H.namespaceId,de,x,s,q,w);if(H.setRealPlayer(Me),Ce===ae)G.push(H);else{const st=this.playersByElement.get(Ce);st&&st.length&&(H.parentPlayer=nu(st)),r.push(H)}}else eh(X,de.fromStyles),H.onDestroy(()=>La(X,de.toStyles)),Y.push(H),u.has(X)&&r.push(H)}),Y.forEach(B=>{const X=s.get(B.element);if(X&&X.length){const H=nu(X);B.setRealPlayer(H)}}),r.forEach(B=>{B.parentPlayer?B.syncPlayerEvents(B.parentPlayer):B.destroy()});for(let B=0;B<m.length;B++){const X=m[B],H=X[Ko];if(gm(X,_x),H&&H.hasAnimation)continue;let de=[];if(a.size){let Me=a.get(X);Me&&Me.length&&de.push(...Me);let st=this.driver.query(X,YU,!0);for(let ft=0;ft<st.length;ft++){let J=a.get(st[ft]);J&&J.length&&de.push(...J)}}const Ce=de.filter(Me=>!Me.destroyed);Ce.length?o4e(this,X,Ce):this.processLeaveNode(X)}return m.length=0,G.forEach(B=>{this.players.push(B),B.onDone(()=>{B.destroy();const X=this.players.indexOf(B);this.players.splice(X,1)}),B.play()}),G}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==Mv;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||o.push(l)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,u=l!==s,d=Xs(i,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}eh(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,c=t.element,l=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const g=p.element;u.add(g);const m=g[Ko];if(m&&m.removedBeforeQueried)return new zy(p.duration,p.delay);const _=g!==c,y=function a4e(n){const e=[];return Cte(n,e),e}((i.get(g)||JHe).map(x=>x.getRealPlayer())).filter(x=>!!x.element&&x.element===g),v=s.get(g),b=o.get(g),M=ete(this._normalizer,p.keyframes,v,b),S=this._buildPlayer(p,M,y);if(p.subTimeline&&r&&d.add(g),_){const x=new uB(e,a,g);x.setRealPlayer(S),l.push(x)}return S});l.forEach(p=>{Xs(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function i4e(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>So(p,ate));const f=nu(h);return f.onDestroy(()=>{u.forEach(p=>gm(p,ate)),La(c,t.toStyles)}),d.forEach(p=>{Xs(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new zy(e.duration,e.delay)}}class uB{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new zy,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>jU(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Xs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Ax(n){return n&&1===n.nodeType}function wte(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Ete(n,e,t,i,r){const s=[];t.forEach(c=>s.push(wte(c)));const o=[];i.forEach((c,l)=>{const u=new Map;c.forEach(d=>{const h=e.computeStyle(l,d,r);u.set(d,h),(!h||0==h.length)&&(l[Ko]=e4e,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>wte(c,s[a++])),o}function Ste(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:r.has(l)?1:o(l),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function So(n,e){n.classList?.add(e)}function gm(n,e){n.classList?.remove(e)}function o4e(n,e,t){nu(t).onDone(()=>n.processLeaveNode(e))}function Cte(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof mZ?Cte(i.players,e):e.push(i)}}function xte(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class Ix{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new n4e(e,t,i),this._timelineEngine=new KHe(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const c=[],u=eB(this._driver,s,c,[]);if(c.length)throw function Yze(n,e){return new se(3404,!1)}();a=function jHe(n,e,t){return new $He(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=tte(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=tte(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let u4e=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&La(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(La(this._element,this._initialStyles),this._endStyles&&(La(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(eh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(eh(this._element,this._endStyles),this._endStyles=null),La(this._element,this._initialStyles),this._state=3)}}return n})();function dB(n){let e=null;return n.forEach((t,i)=>{(function d4e(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class Tte{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:dte(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class h4e{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return ite(e,t)}getParentElement(e){return qU(e)}query(e,t,i){return rte(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const c={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(c.easing=s);const l=new Map,u=o.filter(f=>f instanceof Tte);(function vHe(n,e){return 0===n||0===e})(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,g)=>l.set(g,p))});let d=function gHe(n){return n.length?n[0]instanceof Map?n:n.map(e=>cte(e)):[]}(t).map(f=>iu(f));d=function bHe(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,dte(n,a)))}}return e}(e,d,l);const h=function l4e(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=dB(e[0]),e.length>1&&(i=dB(e[e.length-1]))):e instanceof Map&&(t=dB(e)),t||i?new u4e(n,t,i):null}(e,d);return new Tte(e,d,c,h)}}let f4e=(()=>{class n extends fZ{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:to.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?pZ(t):t;return Mte(this._renderer,null,i,"register",[r]),new p4e(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(z(Zm),z(rn))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();class p4e extends qRe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new m4e(this._id,e,t||{},this._renderer)}}class m4e{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Mte(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Mte(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const Ate="@.disabled";let g4e=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new Ite("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=u=>{Array.isArray(u)?u.forEach(c):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(c),new _4e(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(z(Zm),z(Ix),z(pt))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();class Ite{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==Ate?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class _4e extends Ite{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Ate?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function y4e(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function v4e(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let b4e=(()=>{class n extends Ix{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(z(rn),z(KU),z(sB),z(da))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const Dte=[{provide:fZ,useClass:f4e},{provide:sB,useFactory:function w4e(){return new VHe}},{provide:Ix,useClass:b4e},{provide:Zm,useFactory:function E4e(n,e,t){return new g4e(n,e,t)},deps:[gI,Ix,pt]}],hB=[{provide:KU,useFactory:()=>new h4e},{provide:mM,useValue:"BrowserAnimations"},...Dte],Rte=[{provide:KU,useClass:ste},{provide:mM,useValue:"NoopAnimations"},...Dte];let S4e=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Rte:hB}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n});static#n=this.\u0275inj=Tt({providers:hB,imports:[Dj]})}return n})();const C4e_firebase={projectId:"tryon-web-4454d",appId:"1:506833597546:web:25b7e6ed143466bedc4613",storageBucket:"tryon-web-4454d.appspot.com",apiKey:"AIzaSyAUp9IOKrJvvC4RTApp1pVVvbc1qyD3WrU",authDomain:"tryon-web-4454d.firebaseapp.com",messagingSenderId:"506833597546",measurementId:"G-S42F2HZEBN"};class Av{constructor(e){return e}}const Ote=Tw.async,A4e=Xi(Zwe,!0),I4e=Xi(R6,!0),D4e=Xi(eEe,!0);let fB=(()=>{class n{constructor(t,i,r){let s;this.disposables=[],En("angularfire",hc.full,"user-tracking"),this.initialized=i.runOutsideAngular(()=>new Promise(o=>{s=o})),Ote().then(()=>{const o=r.get(Av);o?this.disposables=[l9(t).subscribe(a=>{D4e(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(z(p_),z(pt),z(Tn))},n.\u0275prov=me({token:n,factory:n.\u0275fac}),n})();const Nte="firebase_screen_id",pB="outlet",Iv="screen_class",kte="screen_name";let H4e=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const mB={},G4e=n=>{const e=[n[Iv],n[pB]].join("#");if(mB.hasOwnProperty(e))return mB[e];{const t=H4e++;return mB[e]=t,t}},j4e=(n,e,t)=>n.events.pipe(Ti(r=>r instanceof x$)).pipe(ds(r=>{var s;const a=(null===(s=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,f=>f.replace("://",":///"))).root.children[r.snapshot.outlet])||void 0===s?void 0:s.toString())||"",c=n.routerState.root.children.map(f=>f).find(f=>f.outlet===r.snapshot.outlet);if(!c)return Ye(null);let l=c;for(;l.firstChild;)l=l.firstChild;const u=l.pathFromRoot.map(f=>{var p;return null===(p=f.routeConfig)||void 0===p?void 0:p.path}).filter(f=>f).join("/")||"/",d={[kte]:u,page_path:`/${a}`,firebase_event_origin:"auto",firebase_screen:u,[pB]:r.snapshot.outlet};e&&(d.page_title=e.getTitle());let h=c.component;if(h){if(h===HI){let f=r.snapshot;for(;f.firstChild;)f=f.firstChild;h=f.component}}else h=r.snapshot.component;if("string"==typeof h)return Ye(Object.assign(Object.assign({},d),{[Iv]:h}));if(h){const f=t.resolveComponentFactory(h);return Ye(Object.assign(Object.assign({},d),{[Iv]:f.selector}))}return Ye(null)}),Ti(r=>!!r),zt(r=>Object.assign({firebase_screen_class:r[Iv],[Nte]:G4e(r)},r)),function x4e(n,e,t,i){return Hn((r,s)=>{let o;e&&"function"!=typeof e?({duration:t,element:o,connector:i}=e):o=e;const a=new Map,c=p=>{a.forEach(p),p(s)},l=p=>c(g=>g.error(p));let u=0,d=!1;const h=new HB(s,p=>{try{const g=n(p);let m=a.get(g);if(!m){a.set(g,m=i?i():new Gt);const _=function f(p,g){const m=new yn(_=>{u++;const y=g.subscribe(_);return()=>{y.unsubscribe(),0==--u&&d&&h.unsubscribe()}});return m.key=p,m}(g,m);if(s.next(_),t){const y=Mn(m,()=>{m.complete(),y?.unsubscribe()},void 0,void 0,()=>a.delete(g));h.add(cr(t(_)).subscribe(y))}}m.next(o?o(p):p)}catch(g){l(g)}},()=>c(p=>p.complete()),l,()=>a.clear(),()=>(d=!0,0===u));r.subscribe(h)})}(r=>r[pB]),Li(r=>r.pipe(s3((s,o)=>JSON.stringify(s)===JSON.stringify(o)),H0(void 0),function T4e(){return Hn((n,e)=>{let t,i=!1;n.subscribe(Mn(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}(),zt(([s,o])=>s?Object.assign({firebase_previous_class:s[Iv],firebase_previous_screen:s[kte],firebase_previous_id:s[Nte]},o):o))));let Lte=(()=>{class n{constructor(t,i,r,s,o,a){En("angularfire",hc.full,"screen-tracking"),Ote().then(()=>{const c=a.get(Av);!t||!c||s.runOutsideAngular(()=>{this.disposable=j4e(t,i,r).pipe(ds(l=>$x(this,void 0,void 0,function*(){return o&&(yield o.initialized),I4e(c,"screen_view",l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(z(Mi,8),z(vI,8),z(qa),z(pt),z(fB,8),z(Tn))},n.\u0275prov=me({token:n,factory:n.\u0275fac}),n})();const gB=new Se("angularfire2.analytics-instances");function W4e(n){return(e,t)=>{if(!Tw.sync())return null;const i=e.runOutsideAngular(()=>n(t));return new Av(i)}}const q4e={provide:class M4e{constructor(){return yf("analytics")}},deps:[[new hi,gB]]},K4e={provide:Av,useFactory:function $4e(n,e){if(!Tw.sync())return null;const t=_f("analytics",n,e);return t&&new Av(t)},deps:[[new hi,gB],fc]};let X4e=(()=>{class n{constructor(t,i){En("angularfire",hc.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(z(Lte,8),z(fB,8))},n.\u0275mod=Rt({type:n}),n.\u0275inj=Tt({providers:[K4e,q4e,{provide:wg,useValue:Tw.async,multi:!0}]}),n})();function Y4e(n,...e){return{ngModule:X4e,providers:[{provide:gB,useFactory:W4e(n),multi:!0,deps:[pt,Tn,bf,wf,...e]}]}}class _B{constructor(e){return e}}const yB=new Se("angularfire2.messaging-instances");function J4e(n){return(e,t)=>{if(!xw.sync())return null;const i=e.runOutsideAngular(()=>n(t));return new _B(i)}}const eGe={provide:class Z4e{constructor(){return yf("messaging")}},deps:[[new hi,yB]]},tGe={provide:_B,useFactory:function Q4e(n,e){if(!xw.sync())return null;const t=_f("messaging",n,e);return t&&new _B(t)},deps:[[new hi,yB],fc]};let nGe=(()=>{class n{constructor(){En("angularfire",hc.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Rt({type:n}),n.\u0275inj=Tt({providers:[tGe,eGe,{provide:wg,useValue:xw.async,multi:!0}]}),n})();function iGe(n,...e){return{ngModule:nGe,providers:[{provide:yB,useFactory:J4e(n),multi:!0,deps:[pt,Tn,bf,wf,...e]}]}}const rGe=Xi(gwe,!0),Ute="@firebase/performance",vB="0.6.4",Bte=vB,bB="FB-PERF-TRACE-MEASURE",jte="@firebase/performance/config",$te="@firebase/performance/configexpire",Wte="Performance",xr=new Lo("performance",Wte,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),Fa=new Pu(Wte);let wB,qte,Kte,SB;Fa.logLevel=en.INFO;class or{constructor(e){if(this.window=e,!e)throw xr.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,i){!this.performance||!this.performance.measure||this.performance.measure(e,t,i)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&uw()?!!dl()||(Fa.info("IndexedDB is not supported by current browswer"),!1):(Fa.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(r=>{for(const s of r.getEntries())t(s)}).observe({entryTypes:[e]})}static getInstance(){return void 0===wB&&(wB=new or(qte)),wB}}function EB(){return Kte}function Xte(n,e){const t=n.length-e.length;if(t<0||t>1)throw xr.create("invalid String merger input");const i=[];for(let r=0;r<n.length;r++)i.push(n.charAt(r)),e.length>r&&i.push(e.charAt(r));return i.join("")}class Zs{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Xte("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Xte("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===SB&&(SB=new Zs),SB}}var Dv=function(n){return n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN",n}(Dv||{});const hGe=["firebase_","google_","ga_"],fGe=new RegExp("^[a-zA-Z]\\w*$");function gGe(){const n=or.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function Yte(){switch(or.getInstance().document.visibilityState){case"visible":return Dv.VISIBLE;case"hidden":return Dv.HIDDEN;default:return Dv.UNKNOWN}}function _Ge(){const e=or.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Zte(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.appId;if(!t)throw xr.create("no app id");return t}const EGe="0.0.1",Xo={loggingEnabled:!0},SGe="FIREBASE_INSTALLATIONS_AUTH";const MGe="Could not fetch config, will use default configs";function Qte(n){if(!n)return n;const e=Zs.getInstance(),t=n.entries||{};return e.loggingEnabled=void 0!==t.fpr_enabled?"true"===String(t.fpr_enabled):Xo.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):Xo.logSource&&(e.logSource=Xo.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:Xo.logEndPointUrl&&(e.logEndPointUrl=Xo.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:Xo.transportKey&&(e.transportKey=Xo.transportKey),void 0!==t.fpr_vc_network_request_sampling_rate?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):void 0!==Xo.networkRequestsSamplingRate&&(e.networkRequestsSamplingRate=Xo.networkRequestsSamplingRate),void 0!==t.fpr_vc_trace_sampling_rate?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):void 0!==Xo.tracesSamplingRate&&(e.tracesSamplingRate=Xo.tracesSamplingRate),e.logTraceAfterSampling=Jte(e.tracesSamplingRate),e.logNetworkAfterSampling=Jte(e.networkRequestsSamplingRate),n}function Jte(n){return Math.random()<=n}let xB,CB=1;function ene(n){return CB=2,xB=xB||function RGe(n){return function PGe(){const n=or.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function uGe(n){const e=n.getId();return e.then(t=>{Kte=t}),e}(n.installations)).then(e=>function CGe(n,e){const t=function xGe(){const n=or.getInstance().localStorage;if(!n)return;const e=n.getItem($te);if(!e||!function IGe(n){return Number(n)>Date.now()}(e))return;const t=n.getItem(jte);if(t)try{return JSON.parse(t)}catch{return}}();return t?(Qte(t),Promise.resolve()):function AGe(n,e){return function dGe(n){const e=n.getToken();return e.then(t=>{}),e}(n.installations).then(t=>{const i=function bGe(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.projectId;if(!t)throw xr.create("no project id");return t}(n.app),r=function wGe(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.apiKey;if(!t)throw xr.create("no api key");return t}(n.app),o=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${i}/namespaces/fireperf:fetch?key=${r}`,{method:"POST",headers:{Authorization:`${SGe} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Zte(n.app),app_version:Bte,sdk_version:EGe})});return fetch(o).then(a=>{if(a.ok)return a.json();throw xr.create("RC response not ok")})}).catch(()=>{Fa.info(MGe)})}(n,e).then(Qte).then(i=>function TGe(n){const e=or.getInstance().localStorage;!n||!e||(e.setItem(jte,JSON.stringify(n)),e.setItem($te,String(Date.now()+60*Zs.getInstance().configTimeToLive*60*1e3)))}(i),()=>{})}(n,e)).then(()=>tne(),()=>tne())}(n),xB}function tne(){CB=3}let MB,Rx=3,ru=[],ine=!1;function Px(n){setTimeout(()=>{if(0!==Rx){if(!ru.length)return Px(1e4);!function LGe(){const n=ru.splice(0,1e3),e=n.map(i=>({source_extension_json_proto3:i.message,event_time_ms:String(i.eventTime)}));(function FGe(n,e){return function UGe(n){const e=Zs.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}(n).then(t=>(t.ok||Fa.info("Call to Firebase backend failed."),t.json())).then(t=>{const i=Number(t.nextRequestWaitMillis);let r=1e4;isNaN(i)||(r=Math.max(i,r));const s=t.logResponseDetails;Array.isArray(s)&&s.length>0&&"RETRY_REQUEST_LATER"===s[0].responseAction&&(ru=[...e,...ru],Fa.info("Retry transport request later.")),Rx=3,Px(r)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Zs.getInstance().logSource,log_event:e},n).catch(()=>{ru=[...n,...ru],Rx--,Fa.info(`Tries left: ${Rx}.`),Px(1e4)})}()}},n)}function rne(n,e){MB||(MB=function VGe(n){return(...e)=>{!function BGe(n){if(!n.eventTime||!n.message)throw xr.create("invalid cc log");ru=[...ru,n]}({message:n(...e),eventTime:Date.now()})}}(HGe)),MB(n,e)}function Ox(n){const e=Zs.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||or.getInstance().requiredApisAvailable()&&(n.isAuto&&Yte()!==Dv.VISIBLE||(function DGe(){return 3===CB}()?AB(n):ene(n.performanceController).then(()=>AB(n),()=>AB(n))))}function AB(n){if(!EB())return;const e=Zs.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>rne(n,1),0)}function HGe(n,e){return 0===e?function GGe(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:sne(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}(n):function jGe(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(e.counters=n.counters);const t=n.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);const i={application_info:sne(n.performanceController.app),trace_metric:e};return JSON.stringify(i)}(n)}function sne(n){return{google_app_id:Zte(n),app_instance_id:EB(),web_app_info:{sdk_version:Bte,page_url:or.getInstance().getUrl(),service_worker_status:gGe(),visibility_state:Yte(),effective_connection_type:_Ge()},application_process_state:0}}const qGe=["_fp","_fcp","_fid"];class su{constructor(e,t,i=!1,r){this.performanceController=e,this.name=t,this.isAuto=i,this.state=1,this.customAttributes={},this.counters={},this.api=or.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=r||`${bB}-${this.randomId}-${this.name}`,r&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw xr.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw xr.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Ox(this)}record(e,t,i){if(e<=0)throw xr.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw xr.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),i&&i.attributes&&(this.customAttributes=Object.assign({},i.attributes)),i&&i.metrics)for(const r of Object.keys(i.metrics))isNaN(Number(i.metrics[r]))||(this.counters[r]=Math.floor(Number(i.metrics[r])));Ox(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function KGe(n,e){return!(0===n.length||n.length>100)&&(e&&e.startsWith("_wt_")&&qGe.indexOf(n)>-1||!n.startsWith("_"))}(e,this.name))throw xr.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function XGe(n){const e=Math.floor(n);return e<n&&Fa.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(t??0)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const i=function yGe(n){return!(0===n.length||n.length>40||hGe.some(t=>n.startsWith(t))||!n.match(fGe))}(e),r=function vGe(n){return 0!==n.length&&n.length<=100}(t);if(i&&r)this.customAttributes[e]=t;else{if(!i)throw xr.create("invalid attribute name",{attributeName:e});if(!r)throw xr.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,i,r){const s=or.getInstance().getUrl();if(!s)return;const o=new su(e,"_wt_"+s,!0),a=Math.floor(1e3*or.getInstance().getTimeOrigin());if(o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),i){const u=i.find(h=>"first-paint"===h.name);u&&u.startTime&&o.putMetric("_fp",Math.floor(1e3*u.startTime));const d=i.find(h=>"first-contentful-paint"===h.name);d&&d.startTime&&o.putMetric("_fcp",Math.floor(1e3*d.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}Ox(o)}static createUserTimingTrace(e,t){Ox(new su(e,t,!1,t))}}function one(n,e){const t=e;if(!t||void 0===t.responseStart)return;const i=or.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+i)),s=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function zGe(n){const e=Zs.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,i=e.logEndPointUrl.split("?")[0],r=e.flTransportEndpointUrl.split("?")[0];t===i||t===r||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>rne(n,0),0)}({performanceController:n,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o})}function ane(n){EB()&&(setTimeout(()=>function QGe(n){const e=or.getInstance(),t=e.getEntriesByType("navigation"),i=e.getEntriesByType("paint");if(e.onFirstInputDelay){let r=setTimeout(()=>{su.createOobTrace(n,t,i),r=void 0},5e3);e.onFirstInputDelay(s=>{r&&(clearTimeout(r),su.createOobTrace(n,t,i,s))})}else su.createOobTrace(n,t,i)}(n),0),setTimeout(()=>function ZGe(n){const e=or.getInstance(),t=e.getEntriesByType("resource");for(const i of t)one(n,i);e.setupObserver("resource",i=>one(n,i))}(n),0),setTimeout(()=>function JGe(n){const e=or.getInstance(),t=e.getEntriesByType("measure");for(const i of t)cne(n,i);e.setupObserver("measure",i=>cne(n,i))}(n),0))}function cne(n,e){const t=e.name;t.substring(0,bB.length)!==bB&&su.createUserTimingTrace(n,t)}class e5e{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==e?.dataCollectionEnabled&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==e?.instrumentationEnabled&&(this.instrumentationEnabled=e.instrumentationEnabled),or.getInstance().requiredApisAvailable()?ff().then(t=>{t&&(function kGe(){ine||(Px(5500),ine=!0)}(),ene(this).then(()=>ane(this),()=>ane(this)),this.initialized=!0)}).catch(t=>{Fa.info(`Environment doesn't support IndexedDB: ${t}`)}):Fa.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Zs.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Zs.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Zs.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Zs.getInstance().dataCollectionEnabled}}function n5e(n=pf()){return pa(n=Yn(n),"performance").getImmediate()}const i5e=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),i=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw xr.create("FB not default");if(typeof window>"u")throw xr.create("no window");!function lGe(n){qte=n}(window);const r=new e5e(t,i);return r._init(e),r};!function r5e(){Or(new mr("performance",i5e,"PUBLIC")),En(Ute,vB),En(Ute,vB,"esm2017")}();class IB{constructor(e){return e}}const lne="performance",DB=new Se("angularfire2.performance-instances");function a5e(n){return(e,t,i)=>{if(!P0(t))return null;const r=e.runOutsideAngular(()=>n(i));return new IB(r)}}const c5e={provide:class s5e{constructor(){return yf(lne)}},deps:[[new hi,DB]]},l5e={provide:IB,useFactory:function o5e(n,e,t){if(!P0(t))return null;const i=_f(lne,n,e);return i&&new IB(i)},deps:[[new hi,DB],fc,ks]};let u5e=(()=>{class n{constructor(){En("angularfire",hc.full,"perf")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Rt({type:n}),n.\u0275inj=Tt({providers:[l5e,c5e]}),n})();function d5e(n,...e){return{ngModule:u5e,providers:[{provide:DB,useFactory:a5e(n),multi:!0,deps:[pt,ks,Tn,bf,wf,...e]}]}}const h5e=Xi(n5e,!0);let f5e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Rt({type:n,bootstrap:[pVe]});static#n=this.\u0275inj=Tt({providers:[Lte,fB,dp],imports:[Dj,Vme,L1e,Aze,fVe,S4e,BRe,_Ee(()=>yEe(C4e_firebase)),Y4e(()=>A4e()),rTe(()=>sTe()),i1e(()=>s1e()),iGe(()=>rGe()),d5e(()=>h5e()),Vy,xPe,v1e.forRoot({level:Ri.DEBUG}),mPe.forRoot()]})}return n})();lme().bootstrapModule(f5e).catch(n=>console.error(n))}},Yt=>{Yt(Yt.s=975)}]);